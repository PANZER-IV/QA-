适用于软件开发者的产品和解决方案，方便开发者快速、可靠的构建和交付产品，颠覆基础设施设置和管理流程，改变传统应用程序代码交付方式，构建端到端服务化工具链，支撑分布式微服务的快速开发及持续交付。DevOps研发工具服务开发测试生产环境完善的PaaS平台服务推荐工具与帮助
为开发者提供一站式项目管理，配置管理，代码检查、编译构建、测试管理、发布管理及集成开发环境。
为您提供完整的DevOps解决方案完成从开发测试到部署应用的一站式研发平台服务，确保完善的测试生产环境，保障您的业务无忧运行。
将业务部署在云服务器上可以节省硬件成本，云服务器提供即开即用，弹性伸缩，按需付费等功能，确保业务持久稳定运行。
业务流量高峰期，服务器压力大，无法实时响应业务请求。弹性负载均衡提供流量分发，支持最高10万并发连接，同时采用冗余设计，在单个服务节点出现故障时，服务不会发生中断，保证业务高可靠。
将对象存储服务作为业务静态数据托管资源池，上传静态资源到OBS，通过设置website功能，采用服务器“动静分离”架构托管整个静态资源，并结合CDN服务实现流畅的体验。
计算与存储网络安全
基于服务化的工具链支持开发者“自助式”完成微服务的Dev&Ops
一种高性能可扩展的容器服务，基于Docker容器技术开发，秒级扩容，为企业应用提供快速打包/部署、自动化运维等基于容器的全生命周期管理能力。通过弹性IP，可从公网直接访问容器应用或者通过负载均衡服务入口访问容器应用。通过弹性负载均衡服务，可自动平衡集群内节点间的流量，保证容器应用高性能和高可用。通过云硬盘实现容器应用的数据持久化存储，可购买多块云硬盘挂接在不同的容器应用上。
支持私有/公有镜像仓库
支持大规模集群和高性能并发部署
轻松拖拽定义复杂应用的容器编排部署，降低用户使用门槛
基于实时日志快速定位问题，界面化操作和短信通知实现24小时自动监控
华为云为开发者提供丰富的应用软件服务,您只需要简单的安装和配置,即可管理多个华为云产品和服务,简单快捷,是您上云的好帮手。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
主要描述华为云支持的REST接口，您可以通过发起HTTP/HTTPS请求调用华为云API的方式来使用云产品，实现对应用、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的所有云产品和服务，都会陆续推出自己的API。您可以通过本页面获取到相关的更新。业务如下：弹性云服务器为您打造一个高效、可靠、安全的计算环境，确保服务持久稳定运行。云容器引擎提供开发、部署、托管、运维的Docker容器应用平台，帮助用户快速、低成本地实现业务创新。弹性伸缩服务根据用户的业务需求和策略，自动调整弹性计算资源。镜像服务基于镜像服务可以灵活便捷的使用公共镜像或私有镜像申请弹性云服务器。云硬盘提供高可靠性，简单易用，可弹性扩展的虚拟块存储服务。云硬盘备份利用备份数据回滚云硬盘，以最大限度保证用户数据正确性和安全性。对象存储服务基于对象的海量存储服务，为客户提供海量、低成本、高可靠、安全的数据存储能力。虚拟私有云允许您完全掌控自己的虚拟网络，并通过安全组功能提高网络安全性。弹性负载均衡将访问流量自动分发到多台弹性云服务器，实现更高水平的应用程序容错性能。云解析服务提供高可用，高扩展的权威DNS服务和DNS管理服务。分布式消息服务是一项基于高可用分布式集群技术的消息中间件服务。消息通知服务</a>是可靠，可扩展，海量的服务。它能够向订阅者推送电子邮件，短信，HTTP(S)等。关系型数据库即开即用、稳定可靠、安全运行、经济实用，支持单机、主备或集群模式部署。数据接入服务处理或分析流数据的自定义应用程序构建数据流管道。MapReduce服务提供Hadoop、Spark、SparkSQL、HBase等能力，灵活应对数据导入、数据分析和报表展示等各种诉求。数据调度服务轻松，简单、灵活、可自动化的处理复杂的数据流。云监控服务是一个开放性的监控平台，提供资源的实时监控、告警、通知等服务。统一身份认证服务</a>提供适合企业级组织结构的用户账号管理机制，为企业成员分配不同的资源及操作权限。云审计服务供用户查询、审计和回溯使用，可通过对象存储服务，将操作记录实时同步保存至存储桶。为用户互联网应用提供精细化的抵御DDoS攻击能力，实时通知用户进行网站防御。密钥管理服务提供易用、高安全的云上加密及密钥管理功能，让用户安心使用云服务，专注业务核心的开发。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应用、资源和数据进行灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
描述华为云当前可服务节点区域和各服务的Endpoint。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应用、资源和数据进行灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含Android软件包、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机·支持OPTIONS桶操作·支持跨域资源共享CORS（Cross-OriginResourceSharing）
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含Linux版本库、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机·支持OPTIONS桶操作·支持跨域资源共享CORS（Cross-OriginResourceSharing）
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应用、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应用、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含HWSJava库、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含PHP软件包、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含Python软件包、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
您可以基于华为云SDK通过编写代码的方式调用华为云API，实现对应于、资源和数据进行更灵活的部署、更快速的操作、更精确的使用、更及时的监控。华为云的产品和服务陆续都会推出自己的SDK，您可以通过本页面获取相关的更新。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
借助对象存储服务SDK开发包，您可以很容易的构建基于华为存储的互联网应用，如WebHosting、在线视频、在线相册、在线备份等应用。该SDK包含Ruby软件包、示例代码和文档。
·指定region（华为云服务（HWS）中的不同服务区域）创建、删除桶·管理对象，包括上传（含多段上传功能）、复制、剪切、下载、删除对象等·管理桶权限，包括桶策略、访问控制列表ACL（AccessControlList）等·管理桶的多版本状态，允许桶内对象存在多个版本·支持使用自定义域名，方便对存储的桶和对象进行管理·支持设置桶的website属性，实现静态网站托管·支持设置桶的生命周期管理策略，实现自动删除超期的对象·支持设置网页重定向，访问桶资源可以重定向至指定的主机
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
第三方应用对企业云API的访问请求需经过签名认证。借助APIGateway签名工具，遵循请求签名流程，你可以很容易的实现对请求进行签名和利用HTTPClient发送请求。
1.下载API网关签名工具。2.解压下载的压缩包。3.创建java工程，将解压出来的jar引用到依赖路径中。
1.确认客户端使用的编码语言。客户端代码使用JAVA，请执行2~3客户端代码使用非JAVA语言，请执行42.更新JAVA版本的SDK。升级当前JAVA版本的SDK为“java-sdk-core-2.0.1.jar”。3.修改客户端代码。删除代码中引用了SDK类的语句中包含的“huawei.”字样。旧代码示例：importcom.huawei.cloud.sdk.auth.signer.RegionSigner;importcom.huawei.cloud.sdk.auth.signer.Signer;importcom.huawei.cloud.sdk.auth.signer.SignerFactory;importcom.huawei.cloud.sdk.http.ExecutionContext;importcom.huawei.cloud.sdk.http.InnerHttpClient;importcom.huawei.cloud.sdk.http.RequestHandler;importcom.huawei.cloud.sdk.util.Classes;新代码示例：importcom.cloud.sdk.auth.signer.RegionSigner;importcom.cloud.sdk.auth.signer.Signer;importcom.cloud.sdk.auth.signer.SignerFactory;importcom.cloud.sdk.http.ExecutionContext;importcom.cloud.sdk.http.InnerHttpClient;importcom.cloud.sdk.http.RequestHandler;importcom.cloud.sdk.util.Classes;4.修改客户端代码。修改请求语句中“header”的内容，修改方法如下，修改后的请求示例如后文所示。修改“x-hws-date”为“X-Sdk-Date”。修改“Authorization”的以下三个参数值：“hws-hmac-sha256”改为“Sdk-HMAC-SHA256”。“hws_request”改为“sdk_request”。“x-hws-date”改为“x-sdk-date”。修改后的请求RequestHeaders:Connection:keep-aliveContent-Type:application/jsonX-Sdk-Date:20151222T034042ZAuthorization:SDK-HMAC-SHA256Credential=ZIRRKMTWPTQFQI1WKNKB/20151222/cn-north-1/ec2/sdk_request,SignedHeaders=connection;content-type;host;x-sdk-date,Signature=7972cc9145876d174b3862188a0f61819431fa71c8a8a060809ea8b898e3eaa9Host:www.myhwclouds.com
1.创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。2.设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。3.对DefaultRequest进行签名：a.调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。b.调用Signer.sign(Requestrequest,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));4.把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
通过部署大数据集群的客户端镜像，快速在弹性云主机搭建Hadoop应用开发环境，进行运行调测。获取链接：
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
启用SSL证书验证，SSL证书会将数据库实例终端节点的IP作为SSL证书的公用名(CN)，以防止欺诈攻击。使用SSL连接到数据库实例，请执行以下步骤：1.下载SSL证书。2.连接ECS，并将证书上传至ECS（例如上传至/root/目录下）。3.在命令提示符中键入以下命令，以便使用mongo连接到用SSL加密的数据库实例。<ul><li>●PROMPT>./mongo--ssl--sslCAFile/root/ca.crt--hostip--portport-uuser_name-ppassword--authenticationDatabaseadmin●-u是用户名，即DDS数据库帐号<ul><li>●-p是密码，即数据库帐号对应的密码●--host是主机的连接地址●--port是端口●--ssl表示通过ssl连接数据库●--sslCAFile是SSL连接的CA证书路径●--authenticationDatabase表示在admin数据库中认证登录用户，此项固定为admin数据库使用MySQLWorkbench等客户端工具并通过SSL方式连接数据库时，请选择ssl-ca证书项进行连接。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
DES采用一款免费开源的TrueCrypt工具对数据进行客户端加密，该工具支持Windows、Linux操作系统，通过该工具可以创建虚拟磁盘，将数据拷贝至虚拟磁盘后即可实现加密。
·支持Windows操作系统·支持Linux操作系统·支持将磁盘数据全部加密通过TrueCrypt工具创建一个虚拟磁盘，再将这个虚拟磁盘挂载到PC/服务器上，用户将数据拷贝至虚拟磁盘即可实现加密。·支持将加密数据进行解密通过TrueCrypt工具将加密后的虚拟磁盘挂载到PC/服务器上，输入正确的密码后即可实现解密。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
DevCloudAPP，华为公司出品，DevCloud软件开发云服务的移动端研发办公平台，为开发者提供更为便捷的项目管理途径，提升研发效率。
·秒级创建新项目，简单方便。·多项目管理方便，项目成员可以在线管理多个项目。·通过关注置顶项目，省却项目查询操作。.项目卡片涂鸦化展现方式，有效提升项目辨识度。·支持灵活计费模式根据需要购买，最大限度降低一次投入成本。.服务器统一维护，大幅降低成本。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
CodeIDE是华为开发云推出的集成开发环境，它继承Eclipse环境开发能力的同时集成了开发云服务访问，帮助用户实现本地代码开发、云端事务处理和代码托管。华为开发云也提供CodeIDE插件版（CodeIDEPlugin），为已有Eclipse开发环境的用户增加开发云服务访问能力。
CodeIDE是基于Eclipse（LunaSR2,EclipseIDEforJavaDevelopers）平台构建的集成开发环境，完整继承了Eclipse的开发环境和能力，全面兼容Eclipse插件安装和使用，充分保留用户开发习惯。CodeIDE同时也支持访问华为开发云服务：用户可以在CodeIDE中直连项目管理服务，不需打开浏览器即可完成个人事务处理（涵盖需求管理、任务处理、缺陷跟踪等功能）；用户也可以在CodeIDE中直接访问配置管理服务，集中浏览云端托管的代码库，一键式代码下载并自动实现本地Git管理库关联。CodeIDE插件版（CodeIDEPlugin）专为已有Eclipse开发环境的用户准备，安装后可为现有Eclipse开发环境增加华为开发云服务访问能力，不需重置开发环境即可使用开发云服务。熟悉的开发环境，便捷的服务集成，CodeIDE帮助用户轻松畅享华为开发云服务！
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
OBS客户端是一款运行在Windows系统上的对象存储服务客户端，兼容华为云对象存储服务OBS和AmazonS3存储的主要接口，方便您在个人电脑上完成对象存储管理。该客户端提供扁平化风格的GUI界面，符合Windows系统用户的操作习惯。
·支持批量上传文件想一次性传多少文件就传多少文件，工具完美Hold住。·支持上传文件夹逐个选择文件太复杂？OBS客户端支持直接上传文件夹，一键搞定，省去重复新建文件夹的麻烦。·支持多段上传支持上传大于5GB的文件时，将文件进行分段上传，提升上传效率。·支持ACL与桶策略配置多用户同时访问时，支持通过ACL与桶策略进行访问控制。·支持跨域资源共享支持配置跨域资源共享，允许跨域资源访问OBS中的桶。·支持生命周期管理支持配置生命周期规则，超期对象自动删除，节省您的存储费用。·支持服务端加密将数据在服务端加密后再存储，进一步提升数据安全。更多功能请您下载使用，您的反馈将帮助我们一起改进。
包括开发者在使用华为云产品时，需要用到的SDK开发工具、API，IDE工具、地区终端节点和其它业务工具等。
RDS仅支持通过ECS访问。您可以通过ECS上的数据库客户端维护RDS实例。通过数据库客户端连接实例的方式有普通连接和SSL连接两种，其中SSL连接通过了加密功能，具有更高的安全性。详情请参考以下用户指南。
智能装车效果较差时，有以下几个原因：箱子类型较多。算法考虑的约束条件较多，在箱子类型较多时效果可能不如预期，建议将箱子类型进行筛选。参数设置不合理。算法对参数约束条件较多，需严格按照参数说明输入，具体请参见《人工智能服务接口参考》。
报关遵从检测不准确时（识别出异常点过多或异常点过少），有以下几个原因：输入数据质量太差。算法默认异常点是小概率出现的，如果输入数据中异常点的比例过高，会造成算法失效。参数设置不合理。参数说明请参见《人工智能服务接口参考》。如果有错误码。错误码具体说明请参见《人工智能服务接口参考》。
默认参数可保证在大多数情况下能取得比较好的处理效果，若要进一步提升效果，需要通过调整相关参数，选取最佳效果。
cURLcURL是一个命令行工具，用来执行各种URL操作和信息传输。cURL充当的是HTTP客户端，可以发送HTTP请求给服务端，并接收响应消息。cURL适用于接口调试。关于cURL详细信息请参见。编码通过编码调用接口，组装请求消息，并发送处理请求消息。REST客户端Mozilla、Google都为REST提供了图形化的浏览器插件，发送处理请求消息。<ulid="zh-cn_topic_ais_faq1__u865a9b38004240c698bfc7da78e56d85"><liid="zh-cn_topic_ais_faq1__l1cd53352be1b4e41a16682bae16f1ecb">针对Firefox，请参见。针对Chrome，请参见。
根据API调用返回结果或者错误码查找原因。检查访问密钥AK/SK是否获取成功。检查Token是否填写正确或者已过期。检查API调用方法是否正确。
如果无法确定原因和解决问题，请联系技术服务人员。
AIS控制台只记录服务调用成功的次数，调用失败的次数不计算在使用量内。登录管理控制台。在控制台首页选择“人工智能服务”，进入“人工智能服务”界面。在左侧导航栏中选择对应的服务（如：单据识别），单击进入该服务界面，单击“查看监控数据”，进入CES控制台查看服务调用成功和失败的次数等具体信息。
图片格式不支持。AIS目前只支持识别PNG、JPG、JPEG、BMP、TIF格式的图片。图片尺寸过小。图片尺寸不小于1200×1000像素。图片画质太差，例如图片过暗。图片样式不符合单据样式。目前AIS只支持英文海关单据识别。如果有错误码，请参考错误码排查问题。错误码具体说明请参见《人工智能服务接口参考》。
A
B
C
D
L
M
R
T
W
Z
参见
报关遵从检测采用了统计方法、滑动窗口平均算法，经过线性代数库的加速，达到低响应时延的要求，可识别出时间序列数据中可能的异常值，目前较多用于海关价格申报异常智能化识别。
超分图像重建主要解决图像在成像过程中像素过少导致的视觉信息不够或者由于压缩导致的图像信息丢失的场景。超分图像重建基于深度学习算法，对图像中缺失的视觉信息进行补充，使得图像视觉效果更好。
单据识别是人工智能服务的一个子服务，可识别出单据图片上的文字内容和数字，智能提取为可编辑的文本。单据识别采用了自动定位分割算法、分布式计算框架、集成深度学习进行判断纠错，经过大规模图像文字训练，达到高精度的识别要求。
低光照增强主要解决的是夜晚或光线暗区域拍摄的图像导致人眼或机器“看不清”暗光区域的场景。低光照增强可以将图像的暗光区域增强，使得原来人眼不可见区域变得可见，突显图像中的有效视觉信息。
路径规划是指通过提货规划，合理分配租赁车辆，提高车辆满载率、减少出行次数；并对提货路线进行优化，利用中转仓减少例外费用，提升发货效率。
模糊图像高清重建是指对质量不佳的图像进行一系列的增强与重建技术手段，从而有效改善图像质量。当前，模糊图像高清重建服务提供了低光照增强、图像去雾、超分图像重建3个子服务。
人工智能服务（ArtificialIntelligenceService，以下简称AIS）集合了多种智能服务，使得应用这些服务的系统能看、能听、能说，具备分析和理解图片、视频、语音、文本等技能。AIS以开放API（ApplicationProgrammingInterface，应用程序编程接口）的方式提供给用户，用户通过实时访问和调用API获取推理结果，帮助用户自动采集关键数据，打造智能化业务系统，提升业务效率。
图像去雾主要解决雾霾对成像质量的影响。摄像机在雾霾天气拍摄照片或视频时，不可避免出现图像/视频质量不高，拍摄场景不清晰的情况。图像去雾算法除了可以去除均匀雾霾外，还可以处理非均匀的雾霾。
文字识别是指对图像文件的打印字符进行检测识别，将图像中的文字转换成文本格式。当前，文字识别服务提供了单据识别子服务。
智能物流是指应用多种优化算法，对物流过程中的存储、装箱、运输、报关等多个环节进行优化配置，提升物流作业效率。目前智能物流服务提供了智能装车、路径规划和报关遵从检测子服务。
智能装车是指提供发货之前的箱单预估，根据用户的箱单数据，计算最优摆放，减少空间浪费，保证装箱安全。
Anti-DDoS仅支持对公有云内的弹性云服务器和弹性负载均衡提供流量清洗功能。
提供针对以下攻击的防护：SYNFlood攻击、CC攻击、慢速连接类攻击、UDP攻击、ACKFlood攻击、TCP类攻击等DDoS攻击。
Anti-DDoS流量清洗服务是对IP地址进行DDoS攻击防护的一种网络安全服务。通过对访问IP地址的数据流量进行实时监控，在网络出口对访问流量进行检测，及时发现进行DDoS攻击的异常流量。在不影响正常业务的前提下，根据用户配置的防护策略，清洗掉异常流量。同时为用户生成监控报表，清晰展示网络流量的安全状况。
可以。在“告警通知设置”界面开启告警通知后，在受到DDoS攻击时用户会收到报警信息（短信或邮件提醒）。
在访问数据流量不超过自动限流触发值的场景下，提供DDoS攻击防护。对于正常业务访问流量超过自动限流触发值的应用，系统会进行自动限流措施（正常访问流量会丢失）。此场景下，建议用户自主购买第三方清洗中心服务，从第三方获取报表。自动限流触发值由云服务器所在的服务区确定，具体值请查看实例IP的监控报表。
为实例IP地址开启Anti-DDoS后，即可正常使用。登录管理控制台。选择“安全&gt;Anti-DDoS流量清洗”，进入Anti-DDoS服务管理界面。在“Anti-DDoS&gt;实例列表”界面，在待开启防护的实例IP地址所在行，单击“开启防护”，如所示。开启防护在“开启防护”对话框中，根据界面提示配置参数。界面显示如所示，参数解释如所示。配置防护参数单击“确定”，保存配置，开启防护。
A
C
D
F
H
L
M
S
T
U
参见
ACKFlood攻击是指攻击者通过僵尸网络向目标服务器发送大量的ACK报文，报文带有超大载荷引起链路拥塞，或者是极高速率的变源变端口的请求导致转发的设备异常从而引起网络瘫痪，或者是消耗服务器处理性能，从而使被攻击服务器拒绝正常服务。
参见
参见
CC攻击是针对Web服务器或应用程序的攻击，利用获取信息的标准的GET/POST请求，如请求涉及数据库操作的URI（UniversalResourceIdentifier）或其他消耗系统资源的URI，造成服务器资源耗尽，无法响应正常请求。
参见
针对分布式拒绝服务攻击的防护。
拒绝服务（DenialofService，缩写：DoS）攻击也称洪水攻击，是一种网络攻击手法，其目的在于使目标电脑的网络或系统资源耗尽，服务暂时中断或停止，导致合法用户不能够访问正常网络服务的行为。当攻击者使用网络上多个被攻陷的电脑作为攻击机器向特定的目标发动DoS攻击时，称为分布式拒绝服务攻击。
黑洞状态是指服务器的外网访问被屏蔽，从服务器内部看到访问流量为零的状态。
流量清洗是用于准确识别网络中的异常流量并将其丢弃，保证正常流量通行的网络安全服务。流量清洗的主要对象是DDoS攻击。
慢速连接类攻击是指攻击者与HTTP服务器建立一个连接后，指定一个比较大的content-length，然后以非常低的速度发包，比如1s～10s发一个字节，并维持住这个连接不断开。如果客户端持续建立这样的连接，那么服务器上可用的连接将一点一点被占满，从而导致被攻击服务器拒绝服务。
参见
SYNFlood攻击是指通过伪造的SYN报文（其源地址是伪造地址或不存在的地址），向目标服务器发起连接，目标服务器用SYN-ACK应答，而此应答不会收到ACK报文，导致目标服务器保持了大量的半连接，直到超时。这些半连接可以耗尽服务器资源，使目标服务器无法建立正常TCP连接，从而达到攻击的目的。
TCP类攻击是指攻击者通过发送标志位异常的TCP异常报文或者非法TCPflag组合的报文，对目标服务器造成危害。
参见
UDPFlood攻击是指攻击者通过僵尸网络向目标服务器发送大量的UDP报文，这种UDP报文通常为大包，且速率非常快，从而造成服务器资源耗尽，无法响应正常的请求。
检测用户上传的数据是否存在异常点，并返回检测结果。
URI格式
请求样例POSThttps://{endpoint}/v1.0/logistics/time-anomalyRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"input":[1.0,2.0,3.0,5.0,4.0,3.0,2.0,10.0],"windowSize":3,"sigma":2,"sigmaType":"both"}参数说明
响应样例{"result":{"windowAnomaly":[0,0,0,0,0,0,0,1],"statisAnomaly":[0,0,0,0,0,0,0,1]}}参数说明
正常200失败
摄像机在雾霾天气拍摄照片时，不可避免出现图像质量不高、拍摄场景不清晰的情况。针对此类场景，图像去雾算法进行针对性的去雾处理，除了可以去除均匀雾霾外，还可以处理非均匀的雾霾。使用时用户发送待处理图片，返回经过去雾处理后的结果图片。
URI格式
方式一：图片文件为Base64字符串。请求样例POSThttps://{endpoint}/v1.0/vision/defogRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"image":"DCCDTQCAQExD","gamma":1.5,"natural_look":true}参数说明请求样例POSThttps://{endpoint}/v1.0/vision/defogRequestHeader:X-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody(form-data):file:File(图片文件)gamma:1.5natural_look:true参数说明
方式一：图片文件为Base64字符串。响应样例{"result":"DCCDTQCAQExD"}参数说明方式二：图片为文件类型。响应样例成功时返回图片文件字节流。参数说明
正常200失败
识别用户上传单据图片中的文字内容，并将识别的结果返回给用户。
方式一：图片文件为Base64字符串。请求样例POSThttps://{endpoint}/v1.0/ocr/action/ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"image":"MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEx"}参数说明图片文件转为Base64字符串Java的示例代码。Filef=newFile("form.png");ByteArrayOutputStreambos=newByteArrayOutputStream((int)f.length());BufferedInputStreamin=newBufferedInputStream(newFileInputStream(f));intbuf_size=1024;byte[]buffer=newbyte[buf_size];intlen=0;while(-1!=(len=in.read(buffer,0,buf_size))){bos.write(buffer,0,len);}byte[]fileData=bos.toByteArray();StringbaseStr=java.util.Base64.getEncoder().encodeToString(fileData);in.close();bos.close();方式二：图片为文件类型。请求样例POSThttps://{endpoint}/v1.0/ocr/action/ocr_formRequestHeader:X-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:file:File(图片文件)参数说明
响应样例{result":{"wordsArray":[{"index":1,"words":"TECHINVESTMENTCOLTD"},{"index":2,"words":"HC"},{"index":3,"words":"METHOD"}]}}参数说明
正常200失败
夜晚或光线暗区域拍摄的图像存在人眼或机器“看不清”暗光区域的情况。针对此类场景，低光照增强可以将图像的暗光区域增强，使得原来人眼不可见区域变得可见，突显图像中的有效视觉信息。使用时用户发送待处理图片，返回低光照增强后的结果图片。
URI格式
方式一：图片为Base64字符串。请求样例POSThttps://{endpoint}/v1.0/vision/dark-enhanceRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"image":"DCCDTQCAQExD","brightness":0.9}参数说明方式二：图片文件类型。请求样例POSThttps://{endpoint}/v1.0/vision/dark-enhanceRequestHeader:X-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody(form-data):file:File(图片文件)brightness:0.9参数说明
方式一：图片为Base64字符串。响应样例{"result":"DCCDTQCAQExD"}参数说明方式二：图片文件类型。响应样例成功时返回图片文件字节流。参数说明
正常200失败
为用户上传的箱单数据和位置数据进行路径规划计算，并将识别的结果返回给用户。
URI格式
请求样例POSThttps://{endpoint}/v1.0/logistics/path-programRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"startDay":61,"oneMonth":{"size":1,"theItem":[{"location":0,"date":61,"finished":false,"volumm":2.16,"distrition":"xxxxDistrict","numSites":2,"outCost":true,"orderId":160306016,"chepai":"YHLU9711506","addr":"IndustrialParkofxxxx,xxxxDistrict,xxxxCity,xxxxProvince","jingdu":111.11,"weidu":22.22,"milkrun":0}]},"allDistance":{"size":1,"start":["Hi-techDistrictofxxxx,xxxxCity,xxxxProvince"],"end":["C5#NewCityRoad,xxxxDistrict,xxxxCity,xxxxProvince"],"dis":[25.72791]},"estimateId":"000001"}参数说明
响应样例{"result":{"succeed":true,"DayPlans":[{"Cars":[{"route2":{"carried":0,"timeLen2":-1,"timeLen3":-1,"timeLen1":-1,"rount":[],"rount1":[],"rount3":[],"dis":0,"rount2":[],"timeLength":0,"routeId":0,"routeSize":0,"disMax":0,"hascar":false},"timeLength":0,"maxVolumm":25,"volumm":0,"carSize":2,"used":false,"totalDis":0,"Route":{"carried":0,"timeLen2":-1,"timeLen3":-1,"timeLen1":-1,"rount":[],"rount1":[],"rount3":[],"dis":0,"rount2":[],"timeLength":0,"routeId":0,"routeSize":0,"disMax":0,"hascar":false},"carId":0,"dis":0}],"day":61}],"numDay":0,"errorMsg":""}}参数说明
正常200失败
用户请求货车装箱规划，用户将货厢和货物长、宽、高、重量等信息发送到接口，接口将返回装箱位置。
URI格式
请求样例POSThttps://{endpoint}/v1.0/logistics/bin-packingRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"estimateId":"XX_123","estimateCode":"EO1708040052","algorithmBaseParamDto":{"boxTypeDtoMap":{"M21":{"boxTypeCode":"M21","lengthGap":10.0,"widthGap":10.0,"maxHeadGap":0.0,"sameSpaceMaxLayer":3,"differentSpaceMaxWeight":150.0,"priority":1,"packageMaterialName":"plywoodpallet","length":1200.0,"width":1000.0,"height":0.0,"loosePartMaxHeight":0.0,"changeLengthWidth":true,"cylinder":false,"loosePart":false}},"platformDtoList":[{"platformCode":"xxxTechnologiesCo.,Ltd.","priority":50,"vol":8.36,"group":"XXXXcity","containCylinder":false,"containDanger":false,"mustFirst":false,"singleTruck":false,"last":false}],"truckTypeDtoList":[{"truckTypeId":"42001","truckTypeCode":"CT03","length":11920.0,"width":2318.0,"height":2640.0,"doorHeight":2580.0,"maxLoad":23000.0,"maxLengthCenterOfGravity":1000.0,"maxWidthCenterOfGravity":1000.0,"truckTypeName":"40HQ"}],"distanceMap":{},"truckTypeMap":{}},"noTrayboxes":[{"spuBoxId":"00H69207027282103513","boxTypeCode":"M21","platformCode":"xxxTechnologiesCo.,Ltd.","length":1200.0,"width":1000.0,"height":1140.0,"weight":242.0,"danger":false},{"spuBoxId":"00H69207027282103514","boxTypeCode":"M21","platformCode":"xxxTechnologiesCo.,Ltd.","length":1200.0,"width":1000.0,"height":1140.0,"weight":242.0,"danger":false},{"spuBoxId":"00H69207027282103515","boxTypeCode":"M21","platformCode":"xxxTechnologiesCo.,Ltd.","length":1200.0,"width":1000.0,"height":1140.0,"weight":242.0,"danger":false},{"spuBoxId":"00H69207027282103516","boxTypeCode":"M21","platformCode":"xxxTechnologiesCo.,Ltd.","length":1200.0,"width":1000.0,"height":1140.0,"weight":242.0,"danger":false},{"spuBoxId":"00H69207027282103517","boxTypeCode":"M21","platformCode":"xxxTechnologiesCo.,Ltd.","length":1200.0,"width":1000.0,"height":1140.0,"weight":242.0,"danger":false}],"needTrayBoxes":[],"tailBoxFlat":false}参数说明
响应样例{"result":{"totalVolume":6840000,"algorithmVersion":"1.6.1.7","estimateId":"XX_123","totalWeight":0,"truckArray":[{"volume":6840000,"spuArray":[{"length":1000,"weight":242,"boxTypeCode":"M21","layer":1,"x":-550,"width":1200,"y":-750,"spuId":"00H69207027282103513","z":-5460,"platformCode":"xxxTechnologiesCo.,Ltd.","direction":0,"order":1,"height":1140},{"length":1000,"weight":242,"boxTypeCode":"M21","layer":2,"x":-550,"width":1200,"y":390,"spuId":"00H69207027282103514","z":-5460,"platformCode":"xxxTechnologiesCo.,Ltd.","direction":0,"order":2,"height":1140},{"length":1200,"weight":242,"boxTypeCode":"M21","layer":1,"x":550,"width":1000,"y":-750,"spuId":"00H69207027282103515","z":-5360,"platformCode":"xxxTechnologiesCo.,Ltd.","direction":0,"order":3,"height":1140},{"length":1200,"weight":242,"boxTypeCode":"M21","layer":2,"x":550,"width":1000,"y":390,"spuId":"00H69207027282103516","z":-5360,"platformCode":"xxxTechnologiesCo.,Ltd.","direction":0,"order":4,"height":1140},{"length":1000,"weight":242,"boxTypeCode":"M21","layer":1,"x":-550,"width":1200,"y":-750,"spuId":"00H69207027282103517","z":-4460,"platformCode":"xxxTechnologiesCo.,Ltd.","direction":0,"order":5,"height":1140}],"isTail":false,"piece":5,"truckCode":"CT03","weight":1210,"truckTypeId":"42001","platformArray":["xxxTechnologiesCo.,Ltd."],"surplusLength":9920,"widthCenterOfGravity":0,"lengthCenterOfGravity":0}],"isFail":false,"errorMsg":""}}参数说明result参数说明
正常200失败
图像在成像过程中存在像素过少导致的视觉信息不够或者由于压缩导致的图像信息丢失的情况。针对此类场景，超分图像重建基于深度学习算法，对图像中缺失的视觉信息进行补充，使得图像视觉效果更好。使用时用户发送待处理图片，返回经过超分图像重建后的结果图片。
URI格式
方式一：图片文件为Base64字符。请求样例POSThttps://{endpoint}/v1.0/vision/super-resolutionRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody:{"image":"DCCDTQCAQExD","scale":3,"model":"ESPCN"}参数说明请求样例POSThttps://{endpoint}/v1.0/vision/super-resolutionRequestHeader:X-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody(form-data):file:File(图片文件)scale:3model:ESPCN参数说明
方式一：图片为Base64字符串。响应样例{"result":"DCCDTQCAQExD"}参数说明方式二：图片文件类型。响应样例成功时返回图片文件字节流。参数说明
正常200失败
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
用户查询服务开通状态，只有已开通的服务才可以调用API。该接口为老版本接口，建议使用接口（GET/v1.0/ais/subscribe）。
请求样例GEThttps://{endpoint}/v1.0/ocr/subscribe?service_type=ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG参数说明
响应样例{"result":true}参数说明
正常200失败
用户查询服务被调用的总次数等信息，以帮助用户了解服务使用情况。该接口为老版本接口，建议使用接口（GET/v1.0/ais/call_times）。
请求样例GEThttps://{endpoint}/v1.0/ocr/call_times?service_type=ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG参数说明
响应样例{"result":{"ocr_form":"100"}}参数说明
正常200失败
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0071700241__o3b61657bf8c0471b919526a03f0064ab"><liid="ZH-CN_TOPIC_0071700241__l5eaa08efb2014f23a467075ac67a8582">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
该接口用于用户开通人工智能服务（ArtificialIntelligenceService，以下简称AIS），只有开通服务后用户才可以调用API，以及查询服务调用次数等信息。
URI格式
请求样例POSThttps://{endpoint}/v1.0/ais/subscribeRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiGRequestBody(x-www-form-urlencoded):service_type:defogcategory:vision参数说明
响应样例{"result":"success"}参数说明
正常200失败
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
所有公有云的扩展接口发生400错误时，会有自定义错误信息返回，该节为您介绍每个错误码的含义。
该接口用于用户开通文字识别服务，只有开通服务后用户才可以调用API，以及查询服务调用次数等信息。该接口为老版本接口，建议使用接口（POST/v1.0/ais/subscribe）。
请求样例POSThttps://{endpoint}/v1.0/ocr/subscribe?service_type=ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG参数说明
响应样例{"result":“success”}参数说明
正常200失败
用户查询服务被调用的总次数等信息，以帮助用户了解服务使用情况。
URI格式
请求样例GEThttps://{endpoint}/v1.0/ais/call_times?service_type=ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG参数说明
响应样例{"result":{"ocr_form":"100"}}参数说明
正常200失败
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UniformResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0071700258__a2377e0d90a6b4dba9eaa175a2f499fda">Endpoint</em>/<emid="ZH-CN_TOPIC_0071700258__ade5b4253f80a4ac98e2c51b58ca21e4f">uri</em>URL中的参数说明如所示。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/PUT/POST/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/PUT/POST/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMethod是必须设置的参数。可通过request.addHeader()添加头信息。
本节中请求示例均采用Token方式请求消息头，在实际使用过程中可根据情况选择Token方式或AK/SK方式。请求样例中的Token值以实际申请时所获取的Token值为准。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0071700266__a589ef16c7e6e4ea3907b5518a6a79b45">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0071700266__a9908f40669d74bd68fd3334f45d128fe">username</em>","password":"<emid="ZH-CN_TOPIC_0071700266__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0071700266__a5a47f624655a468b8ceea651fa78f0d2">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
用户查询服务开通状态，只有已开通的服务才可以调用API。
URI格式
请求样例GEThttps://{endpoint}/v1.0/ais/subscribe?service_type=ocr_formRequestHeader:Content-Type:application/jsonX-Auth-Token:MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG参数说明
响应样例{"result":true}参数说明
正常200失败
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
其它header属性，请遵照http协议。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
查询系统支持的Anti-DDoS防护策略配置的可选范围，用户根据范围列表选择适合自已业务的防护策略进行Anti-DDoS流量清洗。
URI格式GET/v1/{project_id}/antiddos/query_config_list参数说明
要素说明traffic_limited_list字段数据结构说明http_limited_list字段数据结构说明connection_limited_list字段数据结构说明响应样例“extend_ddos_config”字段显示用户根据实际需求设置的Anti-DDoS防护策略信息。
请参考。
用户开通Anti-DDoS流量清洗防护。作为异步接口，调用成功，只是说明服务节点收到了开通请求，开通是否成功需要通过任务查询接口查询该任务的执行状态，具体请参考。
URI格式POST/v1/{project_id}/antiddos/{floating_ip_id}URI参数说明
RequestBody参数说明请求样例POST/v1/67641fe6886f43fcb78edbbf0ad0b99f/antiddos/1df977c2-fdc6-4483-bc1c-ba46829f57b8{"enable_L7":"true","traffic_pos_id":"1","http_request_pos_id":"1","cleaning_access_pos_id":"1","app_type_id":"1"}
要素说明响应样例{"error_code":"10000000","error_description":"Taskhasbeenreceivedandisbeingprocessed.","task_id":"94e17e18-5b2c-40c6-a218-8ec5134e32a5"}
请参考。
用户关闭Anti-DDoS流量清洗防护。作为异步接口，调用成功，只是说明服务节点收到了关闭防护请求，操作是否成功需要通过任务查询接口查询该任务的执行状态，具体请参考。
URI格式DELETE/v1/{project_id}/antiddos/{floating_ip_id}URI参数说明
要素说明响应样例{"error_code":"10000000","error_description":"Taskhasbeenreceivedandisbeingprocessed.","task_id":"d90dc577-abd2-4be0-b2cf-cb8f5f67ddb0"}
请参考。
查询配置的Anti-DDoS防护策略，用户可以查询指定EIP的Anti-DDoS防护策略。
URI格式GET/v1/{project_id}/antiddos/{floating_ip_id}URI参数说明
要素说明响应样例{"enable_L7":true,"traffic_pos_id":1,"http_request_pos_id":1,"cleaning_access_pos_id":1,"app_type_id":1}
请参考。
更新指定EIP的Anti-DDoS防护策略配置。调用成功，只是说明服务节点收到了关闭更新配置请求，操作是否成功需要通过任务查询接口查询该任务的执行状态，具体请参考。
URI格式PUT/v1/{project_id}/antiddos/{floating_ip_id}URI参数说明
RequestBody参数说明请求样例PUT/v1/67641fe6886f43fcb78edbbf0ad0b99f/antiddos/ee0c854e-082f-499e-b7d8-1b42c22781af{"enable_L7":false,"traffic_pos_id":2,"http_request_pos_id":1,"cleaning_access_pos_id":1,"app_type_id":1}
要素说明响应样例{"error_code":"10000000","error_description":"Taskhasbeenreceivedandisbeingprocessed.","task_id":"4a4fefe7-34a1-40e2-a87c-16932af3ac4a"}
请参考。
用户查询指定的Anti-DDoS防护配置任务，得到任务当前执行的状态。
URI格式GET/v1/{project_id}/query_task_status说明：可以在URI后面用“?”和“&amp;”添加不同的查询条件组合，请参考请求样例。参数说明
要素说明响应样例{"task_status":"running","task_msg":""}
请参考。
查询用户所有EIP的Anti-DDoS防护状态信息，用户的EIP无论是否绑定到云服务器，都可以进行查询。
URI格式GET/v1/{project_id}/antiddos说明：可以在URI后面用“?”和“&amp;”添加不同的查询条件组合，请参考请求样例。参数说明
要素说明ddosStatus字段数据结构说明响应样例{"total":5,"ddosStatus":[{"floating_ip_id":"1867f954-fc11-4202-8247-6af2144867ea","floating_ip_address":"192.168.42.221","network_type":"EIP","status":"notConfig"},{"floating_ip_id":"49c6af49-9ace-42e6-ab89-1eee1f4ac821","floating_ip_address":"192.168.35.152","network_type":"EIP","status":"normal"},{"floating_ip_id":"7a8dc957-083b-499d-b7cf-6fa48f4880c5","floating_ip_address":"192.168.42.222","network_type":"EIP","status":"notConfig"},{"floating_ip_id":"7c6676a0-b281-4163-9d0d-cb6485ae9860","floating_ip_address":"192.168.44.69","network_type":"EIP","status":"normal"},{"floating_ip_id":"969c1d48-6a92-4ef1-b66c-b17c7e7d7ce7","floating_ip_address":"192.168.47.192","network_type":"EIP","status":"notConfig"}]}
请参考。
查询指定EIP的Anti-DDoS防护状态。
URI格式GET/v1/{project_id}/antiddos/{floating_ip_id}/statusURI参数说明
要素说明响应样例{"status":"normal"}
请参考。
查询指定EIP在过去24小时之内的防护流量信息，流量的间隔时间单位为5分钟。
URI格式GET/v1/{project_id}/antiddos/{floating_ip_id}/dailyURI参数说明
要素说明data字段数据结构说明响应样例{"data":[{"period_start":1472713370609,"bps_in":0,"bps_attack":0,"total_bps":0,"pps_in":0,"pps_attack":0,"total_pps":0},...{"period_start":1472713670609,"bps_in":0,"bps_attack":0,"total_bps":0,"pps_in":0,"pps_attack":0,"total_pps":0}]}
请参考。
查询指定EIP在过去24小时之内的异常事件信息，异常事件包括清洗事件和黑洞事件，查询延迟在5分钟之内。
URI格式GET/v1/{project_id}/antiddos/{floating_ip_id}/logs说明：可以在URI后面用“?”和“&amp;”添加不同的查询条件组合，请参考请求样例。参数说明
要素说明logs字段数据结构说明响应样例{"total":1,"logs":[{"start_time":1473217200000,"end_time":1473242400000,"status":1,"trigger_bps":51106,"trigger_pps":2600,"trigger_http_pps":3589}]}
请参考。
查询用户所有Anti-DDoS防护周统计情况，包括一周内DDoS拦截次数和攻击次数、以及按照被攻击次数进行的排名信息等统计数据。系统支持当前时间之前四周的周统计数据查询，超过这个时间的请求是查询不到统计数据的。
URI格式GET/v1/{project_id}/antiddos/weekly说明：可以在URI后面用“?”和“&amp;”添加不同的查询条件组合，请参考请求样例。参数说明
要素说明weekdata字段数据结构说明Top10字段数据结构说明响应样例{"ddos_intercept_times":23,"weekdata":[{"ddos_intercept_times":0,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474214461651},{"ddos_intercept_times":0,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474300861651},{"ddos_intercept_times":0,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474387261651},{"ddos_intercept_times":0,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474473661651},{"ddos_intercept_times":0,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474560061651},{"ddos_intercept_times":2,"ddos_blackhole_times":0,"max_attack_bps":16375,"max_attack_conns":0,"period_start_date":1474646461651},{"ddos_intercept_times":1,"ddos_blackhole_times":0,"max_attack_bps":0,"max_attack_conns":0,"period_start_date":1474732861651}],"top10":[{"floating_ip_address":"192.168.44.69","times":23}]}
请参考。
查询用户配置信息，用户可以通过此接口查询是否接收某类告警，同时可以配置是手机短信还是电子邮件接收告警信息。
URI格式GET/v2/{project_id}/warnalert/alertconfig/query参数说明
要素说明warn_config字段数据结构说明响应样例{"warn_config":{"antiDDoS":true,"bruce_force":false,"remote_login":false,"weak_password":false,"high_privilege":false,"back_doors":false,"waf":false},"topic_urn":"urn:smn:cn-north-1:67641fe6886f43fcb78edbbf0ad0b99f:test_soft","display_name":"group_1"}
请参考。
正常异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0037386202__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0037386202__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0037386205__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0037386205__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0037386205__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0037386205__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0037386208__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0037386208__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
启用或停止一个指定弹性伸缩组。停止一个弹性伸缩组后，就不会根据策略产生弹性伸缩活动
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_group/{scaling_group_id}/action参数说明
要素说明请求样例
响应样例无
正常204异常
查询一个指定弹性伸缩组下的弹性伸缩策略和弹性伸缩实例的配额总数及已使用配额数。
URI格式GET/autoscaling-api/v1/{tenant_id}/quotas/{scaling_group_id}参数说明
请求样例无
要素说明响应样例
正常204异常
创建弹性伸缩组。伸缩组是具有相同应用场景配置的实例集合。伸缩组内定义了实例最大数量和最小数量等信息。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_group参数说明
要素说明networks字段数据结构说明security_groups字段数据结构说明请求样例
要素说明响应样例
正常200异常
删除一个指定生命周期挂钩。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_lifecycle_hook/{scaling_group_id}/{lifecycle_hook_name}参数说明
请求样例无
响应样例无
正常204异常
通过生命周期操作令牌或者通过实例ID和生命周期挂钩名称对伸缩实例指定的挂钩进行回调操作。1、如果在超时时间结束前已完成自定义操作，选择终止或继续完成生命周期操作。2、如果需要更多时间完成自定义操作，选择延长超时时间，实例保持等待状态的时间将增加1小时。3、只有实例的生命周期挂钩状态为HANGING时才可以进行回调操作。
URI格式PUT/autoscaling-api/v1/{tenant_id}/scaling_instance_hook/{scaling_group_id}/callback参数说明
要素说明请求样例{"lifecycle_action_result":"ABANDON","lifecycle_action_key":"23880867-6288-4470-98a8-f8bda096b6c4"}
响应样例无
正常204异常
根据输入条件过滤查询弹性伸缩组。查询结果分页显示。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_group{?scaling_group_name,scaling_configuration_id,scaling_group_status,start_number,limit}可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤。参数说明
请求样例无
要素说明scaling_groups字段数据结构说明networks字段数据结构说明security_groups字段数据结构说明响应样例
正常200异常
查询一个指定生命周期挂钩详情。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_lifecycle_hook/{scaling_group_id}/{lifecycle_hook_name}参数说明
请求样例无
要素说明响应样例
正常200异常
给弹性伸缩组配置通知功能。每调用一次该接口，伸缩组即配置一个通知主题及其通知场景，每个伸缩组最多可以增加5个主题。通知主题由用户事先在SMN创建，当通知主题对应的通知场景出现时，伸缩组会向用户发送通知。
URI格式PUT/autoscaling-api/v1/{tenant_id}/scaling_notification/{scaling_group_id}参数说明
要素说明请求样例
要素说明响应样例
正常200异常
删除指定的弹性伸缩组中指定的通知。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_notification/{scaling_group_id}/{topic_urn}参数说明
请求样例无
响应样例无
正常204异常
修改一个指定弹性伸缩组中的信息。修改伸缩组中的伸缩配置时，不影响之前伸缩配置创建的云服务器。
URI格式PUT/autoscaling-api/v1/{tenant_id}/scaling_group/{scaling_group_id}参数说明
要素说明networks字段数据结构说明security_groups字段数据结构说明请求样例
要素说明响应样例
正常200异常
修改一个指定生命周期挂钩中的信息。
URI格式PUT/autoscaling-api/v1/{tenant_id}/scaling_lifecycle_hook/{scaling_group_id}/{lifecycle_hook_name}参数说明
要素说明请求样例
要素说明响应样例
正常200异常
删除一个指定弹性伸缩组。伸缩组中有云服务器时不能删除该伸缩组。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_group/{scaling_group_id}参数说明
请求样例无
响应样例无
正常204异常
所有弹性伸缩服务的接口，有自定义错误信息返回，该小节介绍弹性伸缩服务的错误码的含义。
{"error":{"code":"AS.0001","message":"Systemerror."}}
查询指定弹性伸缩策略信息。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_policy/{scaling_policy_id}参数说明
请求样例无
要素说明scaling_policy字段数据结构说明scheduled_policy字段数据结构说明scaling_policy_action字段数据结构说明响应样例
正常200异常
查询弹性伸缩组中实例信息。分页查询，根据输入的条件过滤。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_group_instance/{scaling_group_id}/list{?life_cycle_state,health_status,start_number,limit}说明：可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤参数说明
请求样例无
要素说明scaling_group_instances字段数据结构说明响应样例
正常200异常
批量删除指定弹性伸缩配置。被伸缩组使用的配置不能被删除。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_configurations参数说明
要素说明请求样例
响应样例无
正常204异常
查询一个弹性伸缩配置的详细信息。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_configuration/{scaling_configuration_id}参数说明
请求样例无
要素说明scaling_configuration字段数据结构说明instance_config字段数据结构说明disk字段数据结构说明personality字段数据结构说明public_ip字段数据结构说明eip字段数据结构说明bandwidth字段数据结构说明metadata字段数据结构说明响应样例
正常200异常
批量移出一个指定弹性伸缩组中的实例或批量添加伸缩组外的实例。说明：<ulid="ZH-CN_TOPIC_0043063053__ul3520643293724"><liid="ZH-CN_TOPIC_0043063053__li4931641293724">批量移出弹性伸缩组中的实例时，如果该实例加入伸缩组时绑定的监听器和伸缩组本身的监听器相同，会解绑定实例和监听器。批量移出弹性伸缩组中的实例时，如果该实例加入伸缩组时绑定的监听器和伸缩组本身的监听器不同，会保留实例和监听器的绑定关系。实例处于INSERVICE时才可以移出。批量移出后实例数不能小于伸缩组的最小实例数。批量添加后实例数不能大于伸缩组的最大实例数。当伸缩组处于INSERVICE状态且没有伸缩活动时，才能添加实例。当伸缩组没有伸缩活动时，才能移出实例。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_group_instance/{scaling_group_id}/action参数说明
要素说明请求样例
响应样例无
正常204异常
查询弹性伸缩组通知列表。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_notification/{scaling_group_id}参数说明
请求样例无
要素说明topics字段数据结构说明响应样例
正常200异常
创建弹性伸缩配置。伸缩配置定义了用于创建弹性伸缩组中实例的配置。AutoScaling为某个伸缩组自动添加实例时，会根据配置创建实例。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_configuration参数说明
要素说明instance_config字段数据结构说明说明：<ulid="ZH-CN_TOPIC_0043063055__ul33484483155043"><liid="ZH-CN_TOPIC_0043063055__li14937419155048">目前，华北区暂时不支持Cloud-init，可以使用key_name或adminPass参数。使用支持Cloud-init或Cloudbase-init功能的镜像创建云服务器时，只能使用key_name参数，adminPass参数无效。对于Linux弹性云服务器，如果需要注入密码，只能使用userdata进行注入，对于Windows弹性云服务器，如果需要注入密码，只能通过元数据admin_pass进行注入。使用不支持Cloud-init或Cloudbase-init功能的镜像创建云服务器时，adminPass和key_name参数都无效，请使用镜像内置的密码或证书登录。disk字段数据结构说明personality字段数据结构说明public_ip字段数据结构说明eip字段数据结构说明bandwidth字段数据结构说明metadata字段数据结构说明请求样例
要素说明响应样例
正常200异常
根据输入条件，查询弹性伸缩配置列表，分页查询。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_configuration{?scaling_configuration_name,image_id,start_number,limit}说明：可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤参数说明
请求样例无
要素说明scaling_configurations字段数据结构说明instance_config字段数据结构说明disk字段数据结构说明personality字段数据结构说明public_ip字段数据结构说明eip字段数据结构说明bandwidth字段数据结构说明metadata字段数据结构说明响应样例
正常200异常
移出一个指定弹性伸缩组中实例。实例处于INSERVICE且移出后实例数不能小于伸缩组的最小实例数时才可以移出。当伸缩组没有伸缩活动时，才能移出实例。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_group_instance/{instance_id}?instance_delete=yes参数说明
请求样例无
响应样例无
正常204异常
删除一个指定弹性伸缩配置。被伸缩组使用的配置不能被删除。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_configuration/{scaling_configuration_id}参数说明
请求样例无
响应样例无
正常204异常
创建弹性伸缩策略。如果选择告警策略，则选择或者创建的告警只能关联一个弹性伸缩组。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_policy参数说明
要素说明scheduled_policy字段数据结构说明scaling_policy_action字段数据结构说明请求样例
要素说明响应样例
正常200异常
查询指定租户的弹性伸缩组和伸缩配置的配额总数及已使用配额数。查询指定租户的弹性伸缩策略和伸缩实例的配额总数。
URI格式GET/autoscaling-api/v1/{tenant_id}/quotas参数说明
请求样例无
要素说明响应样例
正常200异常
删除一个指定弹性伸缩策略。
URI格式DELETE/autoscaling-api/v1/{tenant_id}/scaling_policy/{scaling_policy_id}参数说明
请求样例无
响应样例无
正常204异常
查询生命周期挂钩列表。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_lifecycle_hook/{scaling_group_id}/list参数说明
请求样例无
要素说明lifecycle_hooks字段数据结构说明响应样例
正常200异常
查询伸缩活动日志。分页查询，根据输入的条件过滤。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_activity_log/{scaling_group_id}{?start_time,end_time,start_number,limit}可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤参数说明
请求样例无
要素说明scaling_activity_log字段数据结构说明响应样例
正常200异常
查询一个指定弹性伸缩组详情。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_group/{scaling_group_id}参数说明
请求样例无
要素说明scaling_group字段数据结构说明networks字段数据结构说明security_groups字段数据结构说明响应样例
正常200异常
创建生命周期挂钩，可为伸缩组添加一个或多个生命周期挂钩，最多添加5个。添加生命周期挂钩后，当伸缩组进行伸缩活动时，实例将被生命周期挂钩挂起并置于等待状态（正在加入伸缩组或正在移出伸缩组），实例将保持此状态直至超时时间结束或者用户手动回调。用户能够在实例保持等待状态的时间段内执行自定义操作，例如，用户可以在新启动的实例上安装或配置软件，也可以在实例终止前从实例中下载日志文件。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_lifecycle_hook/{scaling_group_id}参数说明
要素说明请求样例
要素说明响应样例
正常200异常
立即执行或启用或停止一个指定弹性伸缩策略。当伸缩组、伸缩策略状态处于INSERVICE时，伸缩策略才能被正确执行，否则会执行失败。
URI格式POST/autoscaling-api/v1/{tenant_id}/scaling_policy/{scaling_policy_id}/action参数说明
要素说明请求样例
响应样例无
正常204异常
本节定义了弹性伸缩服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性伸缩服务产生的监控指标和告警信息。
SYS.AS
查询弹性伸缩策略信息。分页查询，根据输入的条件过滤。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_policy/{scaling_group_id}/list{?scaling_policy_name,scaling_policy_type,start_number,limit}可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤参数说明
请求样例无
要素说明scaling_policies字段数据结构说明scheduled_policy字段数据结构说明scaling_policy_action字段数据结构说明响应样例
正常200异常
修改指定弹性伸缩策略。
URI格式PUT/autoscaling-api/v1/{tenant_id}/scaling_policy/{scaling_policy_id}参数说明
要素说明scheduled_policy字段数据结构说明scaling_policy_action字段数据结构说明请求样例
要素说明响应样例
正常200异常
添加生命周期挂钩后，当伸缩组进行伸缩活动时，实例将被挂钩挂起并置于等待状态，根据输入条件过滤查询弹性伸缩组中伸缩实例的挂起信息。
URI格式GET/autoscaling-api/v1/{tenant_id}/scaling_instance_hook/{scaling_group_id}/list{?instance_id}可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持参数说明中所有非必选参数过滤。参数说明
请求样例无
要素说明instance_hooks字段数据结构说明响应样例{"instance_hanging_info":[{"instance_id":"b25c1589-c96c-465b-9fef-d06540d1945c","scaling_group_id":"e5d27f5c-dd76-4a61-b4bc-a67c5686719a","lifecycle_hook_name":"hook-test","lifecycle_action_key":"6ebe6e72-4b09-4adb-ae4a-a91dc0560069","default_result":"ABANDON","timeout":"2016-11-15T06:43:41Z","lifecycle_hook_status":"HANGING"}]}
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0045219160__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0045219160__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0045219163__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0045219163__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0045219163__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0045219163__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0045219166__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0045219166__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
获取集群支持的metrics列表。
GET/api/v1/ops/clusters/{clusteruuid}/metrics-list参数说明请参见。
N/A。
响应示例
状态码如所示。异常状态码请参见。
获取集群一定时间段内的metrics监控数据。
GET/api/v1/ops/clusters/{clusteruuid}/metrics/{metric_name}参数说明请参见。
N/A。
响应参数响应参数见响应示例
状态码如所示。异常状态码请参见。
获取指定集群的结点所支持的metrics列表。
GET/api/v1/ops/clusters/{clusteruuid}/nodes/metrics-list参数说明请参见。
N/A。
响应示例
状态码如所示。异常状态码请参见。
获取集群中所有结点的metrics监控数据。
GET/api/v1/ops/clusters/{clusteruuid}/nodes/metrics参数说明请参见。
N/A。
响应参数响应参数请参见响应示例
状态码如所示。异常状态码请参见。
获取集群中指定结点的metrics监控数据
GET/api/v1/ops/clusters/{clusteruuid}/nodes/{nodeuuid}/metrics/{metric_name}参数说明请参见。
N/A。
响应参数响应参数请参见响应示例
状态码如所示。异常状态码请参见。
获取指定集群的应用实例支持的metrics列表。
GET/api/v1/ops/clusters/{clusteruuid}/namespaces/{namespace_name}/pods/metrics-list参数说明请参见。
N/A。
响应示例
状态码如所示。异常状态码请参见。
获取集群中指定命名空间的所有应用实例的metrics监控数据。
GET/api/v1/ops/clusters/{clusteruuid}/namespaces/{namespaces_name}/pods/metrics参数说明请参见。
N/A。
响应参数响应参数请参见响应示例
状态码如所示。异常状态码请参见。
获取集群中指定命名空间的指定应用实例的metrics监控数据。
GET/api/v1/ops/clusters/{clusteruuid}/namespaces/{namespaces_name}/pods/{pod_name}/metrics/{metrics_name}参数说明请参见。
N/A。
响应参数响应参数见响应示例
状态码如所示。异常状态码请参见。
公有云API遵从RESTfulAPI设计原则。REST从资源的角度观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，客户端的应用通过URL（UnifiedResourceLocator）获取资源。URL的一般格式为：https://Endpoint/uri。其中uri为资源路径，即API访问的路径。公有云接口采用HTTPS传输协议，请求/响应报文使用JSON报文。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入登录密码和短信验证码，单击“确定”，下载密钥，请妥善保管。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0036216961__zh-cn_topic_0035950771_zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0036216961__zh-cn_topic_0035950771_zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
每一个请求通常由三部分组成，分别是：请求行、请求消息头、请求消息体(可选)。
请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：Method：表示请求方法（所有方法全为大写），各个方法的解释如下：<ulid="ZH-CN_TOPIC_0036216964__zh-cn_topic_0035614236_ul46065735155759"><liid="ZH-CN_TOPIC_0036216964__zh-cn_topic_0035614236_li42783561155612">GET：请求获取Request-URI所标识的资源。POST：在Request-URI所标识的资源后附加新的数据。PUT：请求服务器存储一个资源，并用Request-URI作为其标识。DELETE：请求服务器删除Request-URI所标识的资源。PATCH：请求服务器更新资源的部分内容，当资源不存在的时候，PATCH可能会去创建一个新的资源。HEAD：只请求页面的首部。OPTION：允许客户端查看服务器的性能。Request-URI：是一个统一资源标识符。说明：RequestURI中的参数分别为[path][?query]。其中：<ulid="ZH-CN_TOPIC_0036216964__zh-cn_topic_0035614236_ul63852547193530"><liid="ZH-CN_TOPIC_0036216964__zh-cn_topic_0035614236_li26050465193535">多个path之间使用“/”分隔。query与path之间使用“?”分隔。多个query之间使用“&amp;”分隔。HTTP-Version：表示请求的HTTP协议版本。CRLF：表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。
请求消息头由若干头域构成，每个头域由一个域名，冒号(:)和域值组成。CCE公共请求报头如所示。其中除Cotent-Type头域外，其余均为CCE特有字段。
以JSON格式封装，基本语法是嵌套式的key:value形式。HTTP请求的正文针对不同的URI对象有不同的必须字段和可选字段。
共有三种方式可以基于已构建好的请求消息发起请求，分别为：cURLcURL是一个命令行工具，用来执行各种URL操作和信息传输。cURL充当的是HTTP客户端，可以发送HTTP请求给服务端，并接收响应消息。cURL适用于接口调试。关于cURL详细信息请参见。编码通过编码调用接口，组装请求消息，并发送处理请求消息。REST客户端Mozilla、Google都为REST提供了图形化的浏览器插件，发送处理请求消息。针对Firefox，请参见。针对Chrome，请参见。
请求消息接收之后，服务器会返回一个HTTP响应消息。响应也是由三个部分组成，分别是：状态行、响应头、响应消息体。
状态行格式如下：HTTP-Version：表示服务器HTTP协议的版本号。Status-Code：表示服务器发回的响应状态代码。状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<ulid="ZH-CN_TOPIC_0036216966__zh-cn_topic_0035614305_ul11431476161029"><liid="ZH-CN_TOPIC_0036216966__zh-cn_topic_0035614305_li4465811116959">1xx：指示信息，表示请求已接收，继续处理。2xx：成功，表示请求已被成功接收、理解、接受。3xx：重定向，要完成请求必须进行更进一步的操作。4xx：客户端错误，请求有语法错误或请求无法实现。5xx：服务器端错误，服务器未能实现合法的请求。Reason-Phrase：表示状态代码的文本描述。
响应的消息报头在大多数情况下含有下面报头：
响应消息体为JSON格式的文本，并且输出内容是UTF-8编码格式。
状态码如所示
CCE（CloudContainerEngine）云容器引擎为开发者、合作伙伴提供开发、部署、托管、运维的Docker容器应用平台，帮助用户快速、低成本地实现业务创新，缩短应用上市周期。
CCE所提供的接口分为开源继承与自研。其中开源部分接口，继承自Kubernetes1.2版本。CCE支持的开源接口列表如所示。开源接口的使用方法请参见http://kubernetes.io/docs/api/。在开源基础上，为解决公有云认证并区分不同集群，CCE在请求消息头中增加了特定的头域，分别为X-Auth-Token、X-Sdk-Date、Authorization、X-Cluster-UUID，具体头域说明请参见。此外，当前版本调用KubernetesAPI不支持HTTP长连接。基于开源接口，CCE自研提供了集群接口。
用于获取所有集群信息。
GET/api/v1/clusters
N/A。
响应参数响应参数如所示。响应示例
状态码如所示。异常状态码请参见。
使用uuid查询指定集群的信息。
GET/api/v1/clusters/{clusteruuid}参数说明请参见。
N/A。
响应参数响应参数请参见。响应示例
状态码如所示。异常状态码请参见。
获取指定集群所有host信息。
GET/api/v1/clusters/{clusteruuid}/hosts参数说明请参见。
N/A。
响应参数响应参数如所示。响应示例
状态码如所示。异常状态码请参见。
获取指定集群指定host信息。
GET/api/v1/clusters/{clusteruuid}/hosts/{hostuuid}参数说明请参见。
N/A。
响应参数响应参数如所示。响应示例
状态码如所示。异常状态码请参见。
CCE支持创建集群，集群为用户专有，用于运行Docker容器。每个用户最多能够创建2个集群。集群最大支持15个节点，每个节点对应一台ECS服务器，两个EVS硬盘（一个40GB的系统数据盘和一个用户数据盘）和一个EIP。您需要创建一个容器应用运行的集群。
AK/SK证书已经上传到CCE上，上传证书的步骤请参见。已创建VPC，创建VPC的详细步骤请参见。已创建SSH密钥，创建SSH密钥的详细步骤请参见。
单击“集群管理-&gt;创建容器集群”。集群管理界面系统显示“创建容器集群”界面。填写容器集群相关参数，如所示。创建容器集群其中：<ulid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_ul424913215018"><liid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_li19249103218010">名称：创建的集群名称。说明：名称以小写字母、数字、横杠(-)组成，且以小写字母开头。所在VPC：该集群所在的虚拟私有云。所在子网：节点虚拟机运行的子网环境。单击“确认”。系统显示“集群”界面，如所示。集群单击“添加节点”系统显示“添加节点”界面，如所示。添加节点填写节点相关参数。<ulid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_ul1025110323018"><liid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_li1825119321606">“节点类型”：提供了通用型、计算I型、计算II型、内存优化型四种类型的弹性云服务器。每种类型的服务器适用的场景如下：<ulid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_ul12511832706"><liid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_li192511132802">通用型：适合对CPU、内容、存储空间和带宽等无特殊要求，安全性和可靠性要求高且一次性投入成本和后期维护成本低的场景下使用。计算I型：适合对带宽要求高、可实时在线回传、基于存储或弹性云服务器视频内容处理等场景下使用。计算II型：适合对弹性云服务器计算性能要求高、存储容量要求大的场景。内存优化型：适合内存要求高、数据量大且数据访问量大、同时需要快速数据交换和处理的场景。“节点规格”：创建的节点规格（CPU和内存大小）。默认情况下，操作系统会占用340MB的内存，集群中第一个节点的CCE管理服务会占用0.71core的CPU和170MB的内存，其他节点的CCE管理服务约占用0.4core的CPU和170MB的内存，用于管理节点，因此，您创建的应用只能使用剩余的CPU和内存。节点规格最小是CPU为1core，内存为2048MB；最大是CPU为32core，内存为128GB。“购买台数”：节点个数，其中节点是用户的业务节点，用于运行docker容器。“硬盘”：分为系统盘和数据盘。<ulid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_ul725211325019"><liid="ZH-CN_TOPIC_0037431936__zh-cn_topic_0032306029_li3252173219014">系统盘的规格为40GB，用户不可配置。数据盘的规格为[100，32768]GB，用户可以配置，缺省值为100GB。超高IO：指由SSD存储介质构成的云硬盘。高IO：指由SAS存储介质构成的云硬盘。普通IO：指由SATA存储介质构成的云硬盘。“密钥对”：选择中创建的密钥对名称。单击“立即申请”。单击“创建节点”。创建节点大约需要20到30分钟，当新建节点的“状态”为“可用”，表示创建成功。集群创建完成后，每个节点对应生成一个ECS，两个EVS（一个40GB的系统数据盘和一个用户数据盘）和一个EIP。
在“CCE服务”界面，创建集群前，您需要上传AK/SK证书，授权集群使用私有镜像和弹性负载均衡，若没有上传AK/SK证书或证书已过期，则无法授权。为了更好体验所有功能和您的账户安全，请上传证书完成认证。下载AK/SK证书。<oltype="a"id="ZH-CN_TOPIC_0039148037__zh-cn_topic_0038779105_zh-cn_topic_0034742669_ol4205565293745"><liid="ZH-CN_TOPIC_0039148037__zh-cn_topic_0038779105_zh-cn_topic_0034742669_li4295655093745">登录公有云，选择“我的认证”。首页选择“管理访问秘钥”页签，单击&nbsp;“新增访问密钥”，生成AK/SK的证书文件。管理访问密钥在“新增访问密钥”界面，获取并输入验证码。新增访问密钥单击“确定”。系统显示确认界面。确认在弹出的对话框中，单击“确定”，完成证书下载。证书文件“credentials.csv”保存在系统默认目录下。说明：由于不同浏览器的默认文件处理方式不同，请根据系统提示，保存证书文件。在“云容器引擎”平台，上传认证文件。<ulid="ZH-CN_TOPIC_0039148037__zh-cn_topic_0038779105_zh-cn_topic_0034742669_ul66445695119"><liid="ZH-CN_TOPIC_0039148037__zh-cn_topic_0038779105_zh-cn_topic_0034742669_li166448617517">若您是首次登录云容器引擎，系统自动弹出上传认证文件的提示框，如所示。单击“上传”。上传认证文件的提示框其他情况下，选择“总览&gt;上传访问秘钥”。如所示。集群管理选择中获得的AK/SK证书，单击“上传”。上传将本地的认证文件上传到CCE平台。认证文件格式为“.csv”，文件大小不能超过512个字节。
在创建集群之前，您需要创建VPC，为CCE服务提供一个安全、隔离的网络环境。如果用户已有VPC，可重复使用，不需多次创建。关于创建VPC的详细信息可以参考公有云上“帮助中心&gt;虚拟私有云&gt;用户指南&gt;快速入门&gt;快速创建虚拟私有云”。登录公有云。选择“网络&gt;虚拟私有云”。在“虚拟私有云”界面，单击“申请虚拟私有云”，创建虚拟私有云。
在创建集群之前，您需要创建密钥对，用于登录node节点时的身份验证。如果用户已有密钥对，可重复使用，不需多次创建。关于创建密钥对的详细信息可以参考公有云上“帮助中心&gt;弹性云服务器&gt;用户指南&gt;设置&gt;创建密钥对”。登录公有云。选择“弹性云服务器”。在左侧导航树中，选择“密钥对”。单击“创建密钥对”。系统显示“创建密钥对”界面，如所示。创建密钥对请根据实际情况输入密钥对的名称，示例：SSHkey-cce。名称只能由英文字母，数字，下划线，中划线组成，且长度小于等于64个字符。单击“确定”。在弹出的对话框中，单击“确定”。系统生成SSHkey-cce.pem密钥文件，自动保存在系统默认目录下。
调用接口有如下两种认证方式，您可以选择其中一种进行认证鉴权。：通过Token认证通用请求。由于开源接口多使用Token认证，因此调用开源接口，优先使用Token认证。：通过AK（AccessKeyID）/SK（SecretAccessKey)加密调用请求。对于自研的接口，推荐使用AK/SK认证，其安全性比Token认证要高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0040150796__zh-cn_topic_0024478020_i2588432012249">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0040150796__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0040150796__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0040150796__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
接口调用的流程如下所示。调用接口前，请使用CCE提供的用户界面，创建集群，并完成节点添加。调用接口前，请获取请求认证，填充至请求消息头中。调用接口前，请通过获取集群的UUID，填充至请求消息头中。填充请求参数构建请求方法。
CCE支持每个用户最多创建两个集群，不同的集群通过UUID来区分。除不需要指定集群UUID，其余接口的请求消息头中均需指定集群UUID。
已通过CCE提供的用户界面创建集群并完成节点添加。已通过获取公有云认证。
依据构造请求方法，并发起请求。在该请求方法所返回的响应消息体（响应消息体请参见）中，依据指定的集群名称（name），获取对应的集群UUID。如下示例中，名称为“NewCluster”的集群对应的UUID即为“31e39cf1-0792-4504-bb71-16c56bdd59c5”。{"clusters":[{"kind":"cluster","apiVersion":"v1","metadata":{"name":"NewCluster","uuid":"31e39cf1-0792-4504-bb71-16c56bdd59c5","spaceuuid":"ac7fbe69-d7ae-7e3c-897d-41d23386ef9b","createAt":"2016-08-0110:11:02.139235173+0000UTC","updateAt":"2016-08-0308:02:54.710201743+0000UTC"},...]}
查询系统当前可监控指标列表，可以指定指标命名空间、指标名称、维度、排序方式，起始记录和最大记录条数过滤查询结果。
URI格式GET/V1.0/{project_id}/metrics参数说明样例/V1.0/{project_id}/metrics/V1.0/{project_id}/metrics?namespace=SYS.ECS&amp;metric_name=cpu_util&amp;dim.0=instance_id,6f3c6f91-4b24-4e1b-b7d1-a94ac1cb011d&amp;limit=10&amp;order=desc
无
要素说明响应样例{"metrics":[{"namespace":"SYS.ECS","dimensions":[{"name":"instance_id","value":"d9112af5-6913-4f3b-bd0a-3f96711e004d"}],"metric_name":"cpu_util","unit":"%"}],"meta_data":{"count":1,"marker":"SYS.ECS.cpu_util.instance_id:d9112af5-6913-4f3b-bd0a-3f96711e004d","total":7}}
正常200异常
查询用户已关注指标列表。
URI格式GET/V1.0/{project_id}/favorite-metrics参数说明样例/V1.0/{project_id}/favorite-metrics
无
要素说明响应样例{"metrics":[{"namespace":"SYS.ECS","metric_name":"cpu_util","dimensions":[{"name":"instance_id","value":"acee1330-7f2e-47d5-9b83-774b7b8e5226"}]}]}
正常200异常
查询告警规则列表，可以指定分页条件限制结果数量，可以指定排序规则。
URI格式GET/V1.0/{project_id}/alarms参数说明以下列表为查询检索参数样例/V1.0/{project_id}/alarms/V1.0/{project_id}/alarms?start=al1441967036681YkazZ0deN&amp;limit=10&amp;order=desc
无
要素说明响应样例{"metric_alarms":[{"alarm_name":"alarm-ipwx","alarm_description":"","metric":{"namespace":"SYS.ELB","dimensions":[{"name":"lb_instance_id","value":"44d06d10-bce0-4237-86b9-7b4d1e7d5621"}],"metric_name":"m8_out_Bps"},"condition":{"period":300,"filter":"sum","comparison_operator":"&gt;=","value":0,"unit":"","count":1},"alarm_enabled":true,"alarm_action_enabled":true,"alarm_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"ok_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"insufficientdata_actions":[],"alarm_id":"al1498096535573r8DNy7Gyk","update_time":1498100100000,"alarm_state":"alarm"}]}
正常200异常
查询指定时间范围指定指标的指定粒度的监控数据，可以通过参数指定需要查询的数据维度。
URI格式GET/V1.0/{project_id}/metric-data参数说明以下列表为查询检索参数样例/V1.0/{project_id}/metric-data?namespace=SYS.ECS&amp;metric_name=cpu_util&amp;dim.0=instance_id,6f3c6f91-4b24-4e1b-b7d1-a94ac1cb011d&amp;from=1442347449274&amp;to=1442390649274&amp;period=1200&amp;filter=min
无
要素说明响应样例{"datapoints":[{"average":0,"timestamp":1442341200000,"unit":"Count"}],"metric_name":"cpu_util"}
正常200异常
查询用户可以创建的资源配额总数及当前使用量，当前仅有告警规则一种资源类型。
URI格式GET/V1.0/{project_id}/quotas参数说明样例/V1.0/{project_id}/quotas
无
要素说明响应样例{"quotas":{"resources":[{"type":"alarm","used":0,"unit":"","quota":20}]}}
正常200异常
本节定义了弹性负载均衡服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性负载均衡服务上报的监控指标以及产生告警信息。
SYS.ELB
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0022485054__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0022485054__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0022485058__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0022485058__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024492770__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024492770__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0024492770__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024492770__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
本节定义了VPC服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索VPC服务产生的监控指标和告警信息。
SYS.VPC
本节定义了关系型数据库服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索关系型数据库服务产生的监控指标和告警信息。
SYS.RDS
根据告警ID查询告警规则信息。
URI格式GET/V1.0/{project_id}/alarms/{alarm_id}参数说明样例/V1.0/{project_id}/alarms/al1441967036681YkazZ0deN
无
要素说明响应样例{"metric_alarms":[{"alarm_name":"alarm-ipwx","alarm_description":"","metric":{"namespace":"SYS.ELB","dimensions":[{"name":"lb_instance_id","value":"44d06d10-bce0-4237-86b9-7b4d1e7d5621"}],"metric_name":"m8_out_Bps"},"condition":{"period":300,"filter":"sum","comparison_operator":"&gt;=","value":0,"unit":"","count":1},"alarm_enabled":true,"alarm_action_enabled":true,"alarm_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"ok_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"insufficientdata_actions":[],"alarm_id":"al1498096535573r8DNy7Gyk","update_time":1498100100000,"alarm_state":"alarm"}]}
正常200异常
启动或停止一条告警规则。
URI格式PUT/V1.0/{project_id}/alarms/{alarm_id}/action参数说明样例/V1.0/{project_id}/alarms/al1441967036681YkazZ0deN/action
参数说明请求样例{"alarm_enabled":true}
无消息体
正常204异常
删除一条告警规则。
URI格式DELETE/V1.0/{project_id}/alarms/{alarm_id}参数说明样例/V1.0/{project_id}/alarms/al1441967036681YkazZ0deN
无请求体
无消息体
正常204异常
添加一条或多条指标监控数据。
URI格式POST/V1.0/{project_id}/metric-data参数说明样例/V1.0/{project_id}/metric-data
单次POST请求消息体大小不能超过512KB，否则请求会被服务端拒绝。POST请求发送周期应小于最小聚合周期，否则会出现聚合数据点不连续。例如：聚合周期为5分钟，发送时间为7分钟，则5分钟情况的聚合数据会出现每10分钟才出现一个点。POST请求体中时间戳（collect_time）的值必须从当前时间的前三天到当前时间后的十分钟之内某一时间，如果不在这个范围内，则不允许插入指标数据。参数说明请求样例[{"metric":{"namespace":"MINE.APP","dimensions":[{"name":"instance_id","value":"33328f02-3814-422e-b688-bfdba93d4050"}],"metric_name":"cpu_util"},"ttl":172800,"collect_time":1463598260000,"value":60,"unit":"%"},{"metric":{"namespace":"MINE.APP","dimensions":[{"name":"instance_id","value":"33328f02-3814-422e-b688-bfdba93d4050"}],"metric_name":"cpu_util"},"ttl":172800,"collect_time":1463598270000,"value":70,"unit":"%"}]
无消息体。
正常201异常
本节定义了分布式缓存服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索分布式缓存服务产生的监控指标和告警信息。
SYS.DCS
本节定义了弹性云服务器服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性云服务器服务产生的监控指标和告警信息。
SYS.ECS
本节定义了分布式消息服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索分布式消息服务产生的监控指标和告警信息。
SYS.DMS
本节定义了Web应用防火墙服务上报云监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索Web应用防火墙服务产生的监控指标和告警信息。
SYS.WAF
本节定义了主机漏洞检测服务上报云监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索主机漏洞检测服务产生的监控指标和告警信息。
SYS.HVD
本节定义了云硬盘服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索云硬盘服务产生的监控指标和告警信息。
SYS.EVS
本节定义了Workspace服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索Workspace服务产生的监控指标信息。
SYS.Workspace
本节定义了机器学习服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索机器学习服务产生的监控指标和告警信息。
SYS.MLS
本节定义了网页防篡改服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索网页防篡改服务产生的监控指标和告警信息。
SYS.WTP
本节定义了数据仓库服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索数据仓库服务产生的监控指标和告警信息。
SYS.DWS
本节定义了弹性伸缩服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性伸缩服务产生的监控指标和告警信息。
SYS.AS
创建一条告警规则。
URI格式POST/V1.0/{project_id}/alarms参数说明样例/V1.0/{project_id}/alarms
参数说明请求样例{"alarm_name":"alarm-rp0E","alarm_description":"","metric":{"namespace":"SYS.ECS","dimensions":[{"name":"instance_id","value":"33328f02-3814-422e-b688-bfdba93d4051"}],"metric_name":"network_outgoing_bytes_rate_inband"},"condition":{"period":300,"filter":"average","comparison_operator":"&gt;=","value":6,"unit":"B/s","count":1},"alarm_enabled":true,"alarm_action_enabled":true,"alarm_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"ok_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}],"insufficientdata_actions":[{"type":"notification","notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"]}]}
要素说明响应样例{"alarm_id":"al1450321795427dR8p5mQBo"}
正常201异常
本节定义了人工智能服务上报用户请求次数的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索用户请求人工智能服务产生的监控指标和告警信息。
SYS.AIS
座席签入后，查询指定IVR的所有排队等待呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
座席登录后，查询座席所在VDN的接入码信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007600-003
标示符AgentState_CancelWork_Success作用表示某个座席请求退出工作态成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_CancelWork_Success","workNo":"49999","content":null}}
标示符Agent_Recover作用表示某个座席所在WAS服务端切换完毕，座席恢复。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"Agent_Recover","workNo":"49999","content":null}}
表示符AgentChat_Disconnected作用文字交谈的会话结束事件。文字交谈会话结束后，座席会受到该事件通知。附带信息callId为呼叫会话ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_Disconnected","workNo":"292","content":{"callId":"1438661103-16849130"}}}
标示符AgentEvent_Hold作用表示当前座席已处于保持状态。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Hold","workNo":"49999","content":"1456402370-7"}}
调整座席是否接听来话。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
000-002100-007
标示符AgentOther_CallOutPrivateQueue作用表示呼叫离开座席私有队列。附带信息called:被叫caller：主叫callid：呼叫idreason：离开原因causeid：离开原因ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_CallOutPrivateQueue","workNo":"49999","content":{"callid":"1456404171-43","called":"49999","caller":"70093","reason":"abcdefg","causeid":"1"}}}
录音播放时进行快进操作。
座席已签入。座席在放音中。
无。
请求URL请求方法请求消息消息头消息体无。
录音播放跳进成功（AgentMediaEvent_JumpPlayDone）
100-006100-007500-002
座席对正在通话中的语音呼叫进行挂断操作。
座席已签入。座席有正在通话中的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体无。
座席退出呼叫（AgentEvent_Call_Release）客户退出呼叫（AgentEvent_Customer_Release）
100-006100-007200-017
座席发布公告。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
100-006100-007
表示符AgentChat_CallOutCreated作用内部交谈会话创建事件。座席向其他座席发起内部交谈请求后，如果其他座席收到振铃事件，则发起人将会收到该事件。附带信息caller表示呼叫发起人，isInnerCall表示是否为内部呼叫，called表示被呼叫座席工号，callId为呼叫会话ID示例：{"eventType":"AgentChat_CallOutCreated","workNo":"291","content":{"caller":"291","isInnerCall":true,"called":"292","callId":"1441182380-16777222"}
座席登录后，获取座席所在VDN的技能队列信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007600-005
座席签入后，查询指定座席的保持数。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
座席拒绝某一个文字交谈会话。
座席已签入。座席收到文字交谈振铃事件。
无。
请求URL请求方法请求消息消息头消息体无。
文字交谈会话结束（AgentChat_Disconnected）示闲（AgentState_Ready）
000-002100-006700-001700-002
座席进行进入工作态操作。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
进入工作态（AgentState_SetWork_Success）
100-006100-007100-009
座席签入后，根据座席工号判断是否为质检员。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentState_Ready作用表示某个座席进入空闲状态。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_Ready","workNo":"49997","content":null}}
座席登录后，获取指定座席所签入的技能队列信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007600-001
表示符AgentChat_Ring作用文字交谈的呼叫振铃事件。呼叫中心在分配文字交谈给座席后，座席首先会收到该事件。座席收到该事件后，需要调用answer接口进行响应。附带信息caller表示呼叫发起人（内部呼叫时为座席工号），isInnerCall表示是否为内部呼叫，called表示被叫号码（WEB用户呼入为接入码，内部呼叫为座席工号），callId为呼叫会话ID，attachData表示呼叫中携带的随路数据。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_Ring","workNo":"49997","content":{"caller":"49999","isInnerCall":true,"called":"49997","uvid":1015460,"callId":"1456448988-16777216","attachData":""}}}表示CTI平台分配给这个座席的呼叫来自一个WEB用户，这个用户呼叫了1009文字交谈技能队列号码。
对座席进行恢复继续放音操作。
座席已签入。座席在暂停放音中。
无。
请求URL请求方法请求消息消息头消息体无。
恢复录音播放成功（AgentMediaEvent_ResumePlayDone）
100-006100-007500-005
质检座席签入后，强制签出指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
座席进行退出工作态操作。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
退出工作态（AgentState_CancelWork_Success）
100-006100-007100-009
标示符AgentEvent_ReleaseResponse作用表示呼叫被释放了。说明：该事件当前仅适用于ECC场景。附带信息无示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_ReleaseResponse","workNo":"20011","content":{}}}
座席登录后，查询座席所在VDN的IVR信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007600-004
座席签入后，查询呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
标示符AgentEvent_Incoming_CallInfo作用当座席被分配用户呼入呼叫(包括重新路由的呼叫)后触发该事件，通知座席呼叫相关信息。座席被内部呼叫、直接转座席、邀请入会等座席来电情况不会触发。附带信息callId表示呼叫ID。caller表示主叫号码。called表示被叫号码。skillId表示技能队列ID。skillName表示呼入的技能队列描述。mediaType表示媒体类型。releaseAndReQueueCallFlag表示当前呼叫是否为被座席释放导致的重路由呼叫。0表示不是，1表示是。releaseAndReQueueCount表示呼叫被座席释放重路由次数。只包括接听后被座席释放，呼叫被系统重路由的次数，不包括座席拒接后重路由次数。lastReleaseAgentId表示最后一次释放该呼叫的座席ID。65535表示没有座席进行释放。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Incoming_CallInfo","workNo":"20011","content":{"caller":"70943","skillName":"voice_jst","lastReleaseAgentId":65535,"releaseAndReQueueCallFlag":0,"releaseAndReQueueCount":0,"called":"600153","skillId":6,"callId":"1493793040-36","mediaType":5}}}
标示符AgentState_Busy作用表示座席正在进行呼叫处理。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_Busy","workNo":"49997","content":null}}
质检座席签入后，强制示忙指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
座席登录后，查询指定设备的状态。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
000-002100-006100-007
标示符AgentEvent_Talking作用表示某个座席语音通话进入Talking状态。附带信息called：被叫号码。caller：主叫号码。callid：呼叫标示。type：呼叫媒体类型，协助呼叫(assistant)和主呼叫(main)。feature：呼叫类型，例如0普通呼入，7普通外呼。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Talking","workNo":"49999","content":{"caller":"10086","callid":"1456401416-3","called":"70092","feature":"7","type":"main"}}}
座席登录后，查询一组技能队列的统计信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006100-007
座席签入。
无。
当前IPCC只支持非长通，因此必须设自动进入整理态，可以在登录接口中设置autoenteridle为false，或登录后调用设置通话释放后进入整理态。
请求URL请求方法消息头application/json;charset=UTF-8消息体
座席签入成功（AgentOther_InService)示闲/工作中
100-001100-002100-003100-004100-007100-012100-015100-016110-016999-001
标示符AgentEvent_No_Answer_From_Cti作用平台通知座席久不应答。附带信息无示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_No_Answer_From_Cti","workNo":"20011","content":{}}}
座席签入后，获取座席所在VDN座席当前状态信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentEvent_Call_Release作用表示座席从指定callId的呼叫中退出。附带信息content：呼叫的CallID。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Call_Release","workNo":"49999","content":"1456403549-15"}}
标示符AgentEvent_Release_Preview作用预览呼叫释放。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Release_Preview","workNo":"49999","content":null}}
标示符AgentEvent_Call_Out_Fail作用座席发起外呼呼叫失败，可能失败的原因为电话号码不对等。附带信息字符串：呼叫的CallID。触发条件座席发起外呼失败。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Call_Out_Fail","workNo":"49999","content":"1456403661-19"}}
座席签入后，查询该座席所属VDN下签入座席的电话号码。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
质检座席签入后，请求耳语。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-004
标示符AgentEvent_ReleaseRequest作用表示当前呼叫因为用户挂机或座席挂断电话或者平台原因导致座席侧呼叫被释放。说明：该事件当前仅适用于ECC场景。附带信息callId表示呼叫唯一标记。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_ReleaseRequest","workNo":"20011","content":{"callId":"1477467960-16777237"}}}
标示符AgentMediaEvent_ResumePlayDone作用恢复播放录音成功事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_ResumePlayDone","workNo":"49999","content":null}}
表示符AgentChat_Connected作用文字交谈的会话建立事件。座席调用answer接口，文字交谈会话建立后，座席会受到该事件通知。附带信息caller表示呼叫发起人（内部呼叫时为座席工号），isInnerCall表示是否为内部呼叫，called表示被叫号码（WEB用户呼入为接入码，内部呼叫为座席工号），callId为呼叫会话ID，attachData表示呼叫中携带的随路数据。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_Connected","workNo":"49997","content":{"caller":"49999","isInnerCall":true,"called":"49997","uvid":1015460,"callId":"1456448988-16777216","attachData":""}}}
座席对正在通话中的通话和保持中的通话进行三方通话。
座席已签入。座席有已经建立的语音呼叫。座席有已经保持的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体
三方通话成功（AgentEvent_Conference）客户释放呼叫（AgentEvent_Customer_Release）
100-006100-007200-010200-011
标示符AgentMediaEvent_Play_Fail作用播放录音失败事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_Play_Fail","workNo":"49999","content":null}}
标示符AgentOther_ShutdownService作用表示某个座席签出成功附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_ShutdownService","workNo":"49999","content":{"loginTime":"1471585949806"}}}
标示符AgentOther_PhoneRelease作用表示某个座席的物理话机已经挂机。附带信息phoneState表示话机释放原因，3表示平台主动挂机，2表示座席挂机。示例：{"eventType":"AgentOther_PhoneRelease","workNo":"20012","content":{"phoneState":3}}
座席强制签入。
无。
当前IPCC只支持非长通，因此必须设自动进入整理态，可以在登录接口中设置autoenteridle为false，或登录后调用设置通话释放后进入整理态。
请求URL请求方法请求消息消息头application/json;charset=UTF-8消息体
座席签入成功（AgentOther_InService)示闲/工作中
100-001100-002100-003100-004100-007100-012100-015100-016110-016999-001
标示符AgentState_CancelNotReady_Success作用表示某个座席取消示忙成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_CancelNotReady_Success","workNo":"49997","content":null}}
质检座席签入后，查询指定座席的保持列表(扩展)。
质检座席已签入。
该接口只支持查询从质检员签入的agentgateway服务器上登录的座席的呼叫保存列表。
请求URL请求方法请求消息消息头消息体无。
无。
100-006300-001400-003
座席签入后，查询自己的配置的技能队列信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
座席签入后，查询所有呼叫CallID信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
标示符AgentState_Rest_Timeout作用表示某个座席请求休息后已经超时，提醒用户超时信息（此事件为提醒，并不代表座席退出休息态）。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_Rest_Timeout","workNo":"49999","content":null}}
录音播放时进行快退操作。
座席已签入。座席在放音中。
无。
请求URL请求方法请求消息消息头消息体无。
录音播放跳进成功（AgentMediaEvent_JumpPlayDone）
100-006100-007500-001
标示符AgentOther_WasSwaped作用表示某个座席所在WAS服务端开始切换。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_WasSwaped","workNo":"49999","content":null}}
标示符AgentEvent_AbandonCall作用在技能队列中配置启用呼叫早释虚拟排队功能后，如果用户在呼叫建立前，释放，则座席会收到该事件。说明：该事件当前仅适用于ECC场景。附带信息caller表示主叫号码。callData表示呼叫的随路数据。callId表示呼叫唯一标记。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_AbandonCall","workNo":"20011","content":{"caller":"70006","callData":null,"callId":"1477393438-167"}}}
座席签入后，查询保持列表。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006300-001400-003
标示符AgentEvent_No_Answer作用座席久不应答，呼叫挂断通知事件。附带信息content：呼叫的CallID。触发条件通知座席对于手工应答的呼叫请求，已经挂断。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_No_Answer","workNo":"49999","content":"1456403745-23"}}
座席签入后，根据座席工号，查询指定座席详细座席信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentEvent_TransOutResult作用语音呼叫转外部电话场景中，座席成功调用转移接口时，座席会收到该事件表示转移是否成功。（释放转转外部电话时，没有该事件）说明：转移过程中，座席进行物理话机挂断，不会上抛该事件。附带信息callId表示被转移的呼叫唯一标记。result表示成功转结果。0表示成功，其他表示失败。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_TransOutResult","workNo":"20011","content":{"result":0,"callId":"1494571919-0"}}}
标示符AgentEvent_SuccTransResult作用语音或文字的转移场景中，座席成功调用转移接口进行成功转时，座席会收到该事件表示成功转是否成功。（语音成功转外部电话时，没有该事件）附带信息callId表示呼叫唯一标记。result表示成功转结果。0表示成功，其他表示失败。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_SuccTransResult","workNo":"20011","content":{"result":1,"callId":"1477467960-16777237"}}}
标示符AgentMediaEvent_PauseRecordDone作用座席暂停录音成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_PauseRecordDone","workNo":"49999","content":null}}
表示符AgentChat_TransferFailed作用文字交谈的会话转移失败事件。座席发起文字交谈的转移请求后，如果转移失败（如用户忙），将会收到该事件。附带信息callId为呼叫会话ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_TransferFailed","workNo":"291","content":{"callId":"1438662254-16849138"}}}
座席签入后，根据座席工号判断是否为管理员。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
表示符AgentChat_DataRecvedEx作用文字交谈另一方发送消息时，座席会收到该事件通知并且需要调用确认接口进行确认已经收到。附带信息sender表示消息发送人。senderTime表示消息发送时间。isInnerCall表示是否内部交谈。sessionId表示发送方在CTI中的标识。chatContent表示发送的内容。callId表示呼叫会话ID。chatId表示消息编号。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_DataRecvedEx","workNo":"20011","content":{"sender":"1212","senderTime":"1481248826530","isInnerCall":false,"sessionId":100003,"chatContent":"\\u0031\\u0032\\u0031\\u0032\\u0031\\u0032","callId":"1476952781-16777221","chatId":482067725}}}
表示符AgentChat_DataRecved作用文字交谈另一方发送消息时，座席会收到该事件通知。附带信息sender表示消息发送人，chatContent表示发送的内容，callId表示呼叫会话ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_DataRecved","workNo":"292","content":{"sender":"test01","isInnerCall":false,"chatContent":"test","callId":"1438662114-16849136"}}}
质检座席签入后，取消侦听和插入指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
质检座席签入后，插入指定座席进行实时质检。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-005
座席登录后，查询技能队列的子媒体类型。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
表示符QC_AgentState_Notify作用表示某个座席的监视事件。附带信息agentname：表示座席工号或用户名。subtype：子类型，表示被监视座席的状态或操作。示例：{"content":{"agentname":"2533"，"subtype":"QC_AgentState_Active"}，"eventType":"QC_AgentState_Notify","workNo":"2571"}}其中subtype的类型有：QC_AgentState_Busy:监视座席示忙事件QC_AgentState_Mute:监视座席静音事件QC_AgentState_Monitor:监视座席被监视事件QC_AgentState_RecordBegin:监视座席被录音事件QC_AgentState_RecordStop:监视座席停止被录音事件QC_AgentState_LiveVideoBegin:监视座席被屏检事件QC_AgentState_LiveVideoStop:监视座席停止被屏检事件QC_AgentState_SuperviseInsert:监视座席被侦听或插入事件QC_AgentState_StopSuperviseInsert:监视座席停止被侦听或插入事件QC_AgentState_StopMonitor:监视座席停止被监视事件QC_AgentState_MuteVideo:监视座席单静像事件QC_AgentState_MuteVideoAudio:监视座席静音静像事件QC_AgentState_PlayVoice:监视座席放音事件QC_AgentState_Active:监视座席通话事件QC_AgentState_WaitAnswer:监视座席等待应答事件QC_AgentState_WaitAlerting:监视座席等待被叫振铃事件QC_AgentState_ThreeParty:监视座席三方通话事件QC_AgentState_HungUp:监视座席挂起事件QC_AgentState_MonitorSupervisorOther:监视侦听或插入或耳语QC_AgentState_MonitorInsertCall:侦听插入呼叫QC_AgentState_Idle:监视座席示闲事件QC_AgentState_Work:监视座席工作事件QC_AgentState_Rest:监视座席休息事件QC_AgentState_Login:监视座席签入事件QC_AgentState_Logout:监视座席签出事件。
标示符AgentOther_PhoneAlerting作用表示某个座席的物理话机正在振铃。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_PhoneAlerting","workNo":"49999","content":null}}
座席签入后，根据座席工号判断是否为班长。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentMediaEvent_Record_Fail作用当前座席录音开始失败。附带信息taskId表示平台内部的录音任务号。caller表示主叫号码。called表示被叫号码。locationId表示录音对应的中心节点ID。recordID表示录音流水号。fileName表示录音文件地址。callId表示呼叫唯一标记。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_Record_Fail","workNo":"20011","content":{"taskId":5255,"caller":"70006","recordID":"Cc1v6a20011d20161025t1930326","called":"60015","locationId":"65535","fileName":"C:/6/0/20161025/20011/1930326.V3","callId":"1477395030-183"}}}
标示符AgentMediaEvent_Record作用当前座席录音开始。附带信息taskId表示平台内部的录音任务号。caller表示主叫号码。called表示被叫号码。locationId表示录音对应的中心节点ID。recordID表示录音流水号。fileName表示录音文件地址。callId表示呼叫唯一标记。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_Record","workNo":"20011","content":{"taskId":5206,"caller":"70006","recordID":"Yc1v6a20011d20161025t1902050","called":"60015","locationId":"256","fileName":"Y:/6/0/20161025/20011/1902050.V3","callId":"1477393325-164"}}}
座席进行示闲操作。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
示闲（AgentState_Ready）取消示忙成功（AgentState_CancelNotReady_Success）
100-006100-007100-009
质检座席签入后，侦听指定座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-005
标示符AgentEvent_Customer_Release作用表示客户从指定的callId呼叫中退出。附带信息callid：呼叫的CallID。number：挂断者的电话。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Customer_Release","workNo":"49999","content":{"callid":"1456404171-43","number":"70093"}}}
质检座席签入后，拦截指定座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
座席进行示忙操作。
座席已签入。
坐席在“工作态”时示忙，不会触发示忙成功事件(AgentState_SetNotReady_Success)，当调用退出工作态接口时，才会触发示忙成功事件(AgentState_SetNotReady_Success)。示忙原因码范围为200-250，华为联络中心不作设置，需要业务自行维护。
请求URL请求方法请求消息消息头消息体无。
示忙成功（AgentState_SetNotReady_Success）
000-002100-006100-007100-009
座席签入后，查询指定公有技能队列的所有排队等待呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
质检座席签入后，进行耳语、侦听、插入切换。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-004
表示符AgentChat_PostDataFailed作用表示接收方没有在12s内对座席发送的消息进行确认是否已经收到。附带信息callId表示呼叫会话ID。chatId表示消息编号。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_PostDataFailed","workNo":"20011","content":{"callId":"1476952781-16777221","chatId":120}}}
标示符AgentMediaEvent_Play_Succ作用播放录音成功事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_Play_Succ","workNo":"49999","content":null}}
座席登录以后通过外呼接口呼叫外呼用户。
座席已登录。座席当前无正在接听的语音呼叫（不包括保持后的语音呼叫）。
无。
请求URL请求方法请求消息消息头消息体
物理话机振铃（AgentOther_PhoneAlerting）物理话机摘机（AgentOther_PhoneOffhook）座席忙中（AgentState_Busy）对方振铃（AgentEvent_Customer_Alerting）座席进入Talking（AgentEvent_Talking）外呼失败（AgentEvent_Call_Out_Fail）
000-002100-006100-007200-001
标示符AgentOther_PhoneOffhook作用表示某个座席的物理话机已经摘机。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_PhoneOffhook","workNo":"49999","content":null}}
标示符AgentEvent_Customer_Alerting作用表示座席相关的其它用户正在发生振铃。附带信息otherPhone:字符串，振铃方的电话号码或者振铃座席的工号。callid:呼叫标示。type:呼叫类型，协助呼叫(assistant)和主呼叫(main)。触发条件准备通话的对方正在振铃。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Customer_Alerting","workNo":"49999","content":{"callid":"1456401416-3","otherPhoneWorkno":"","otherPhone":"70092","type":"main"}}}
标示符AgentEvent_SipInfo作用表示座席在通话过程中，收到对端发送的SipInfo消息。附带信息dataType表示SipInfo内容类型。0表示DTMF数字。1表示TEXT文本类型。callId表示会议对应的呼叫ID。sipInfo表示SipInfo内容。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_SipInfo","workNo":"20011","content":{"dataType":1,"callId":"1476357284-365","sipInfo":"121212121212f"}}}
AgentGateway提供基于REST风格的WebService接口，供业务封装使用，提供给二次开发人员对座席业务功能进行开发。本文档描述的是基于REST（RepresentationalStateTransfer，表象状态转换）风格提供的Web服务，所有接口承载于HTTP协议。您也可以通过修改Tomcat配置，使所有的接口调用承载于HTTPS之上。文档中所提供的接口，能够使您开发提供给座席话务员使用的语音电话处理、文字类呼叫处理等业务能力。AgentGateway接口能够提供如下功能：更简易方便的电话和文字类呼叫处理，能够使您降低研发成本。多种开发语言支持，RESTfulWeb服务能够使您通过各类开发语言直接调用，C#、JavaScript、Java都能够方便调用。支持座席业务软件直接访问，您可以直接在座席话务员的电脑上直接访问接口
如果您在软件开发过程中碰到任何问题，开发者社区提供了以下技术支持渠道：在<uid="ZH-CN_TOPIC_0064277267__u896123452513"></u>中提单跟踪。在中发帖求助。华为技术支持热线电话：400-8828-000华为技术支持邮箱：
标示符AgentState_CancelRest_Success作用表示某个座席取消请求休息成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_CancelRest_Success","workNo":"49999","content":null}}
座席对已经转移的通话进行取回。
座席已签入。座席有已经转移的通话（三方转外部电话）。
无。
请求URL请求方法请求消息消息头消息体无。
座席进入（AgentEvent_Talking）
100-006100-007200-012
座席接到语音呼叫请求进行应答处理。
座席已签入。座席接到请求应答事件（AgentEvent_Ringing）。
无。
请求URL请求方法请求消息消息头消息体无。
座席进入Talking（AgentEvent_Talking）
100-006100-007200-002
质检座席签入后，调整指定座席的技能队列。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
100-001100-006900-001900-002900-003
标示符AgentEvent_Connect_Fail作用座席连接失败。附带信息文本型，呼叫所属于的CallId（呼叫标示）。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Connect_Fail","workNo":"49999","content":"1456404043-38"}}
质检座席签入后，强制示闲指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
标示符AgentMediaEvent_ResumeRecordDone作用座席恢复录音成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_ResumeRecordDone","workNo":"49999","content":null}}
座席关闭某一个正在进行的文字交谈会话。
座席已签入。座席有正在进行的文字交谈且会话有效。
无。
请求URL请求方法请求消息消息头消息体无。
文字交谈会话结束（AgentChat_Disconnected）示闲（AgentState_Ready）
000-002100-006700-001700-002
座席拆除指定callid的呼叫。
座席已签入。座席正在通话中。
无。
请求URL请求方法请求消息消息头消息体无。
座席退出呼叫（AgentEvent_Call_Release）客户退出呼叫（AgentEvent_Customer_Release）
100-006100-007200-025
座席向另一个座席进行内部文字交谈。
座席已签入，座席具有文字交谈的技能。
无。
请求URL请求方法请求消息消息头消息体无。
通话中（AgentState_Busy）文字交谈内部呼叫会话创建（AgentChat_CallOutCreated）文字交谈会话连接建立（AgentChat_Connnected）文字交谈发起内部会话失败（AgentChat_CalloutFailed）
000-002100-006700-002
座席签入后，根据配置的技能队列ID，返回配置了该技能队列的座席工号列表。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
表示符AgentChat_PostDataSuccess作用表示接收方收到座席发送的消息后，确认已接收。附带信息result表示自定义的消息确认结果。confirmer表示消息确认人。callId表示呼叫会话ID。chatId表示消息编号。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_PostDataSuccess","workNo":"20011","content":{"result":0,"confirmer":"1212","callId":"1476952781-16777221","chatId":120}}}
座席签入后，查询指定座席所有呼叫信息。
座席已签入。
座席与被指定座席必须登录同一台AgentServer中。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-002
座席签入后，查询座席当前的话路数。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
标示符AgentOther_CallInPrivateQueue作用表示呼叫进入座席私有队列。附带信息called:被叫caller：主叫called：呼叫id示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_CallInPrivateQueue","workNo":"49999","content":{"callid":"1456404171-43","called":"49999","caller":"70093"}}}
标示符AgentEvent_Auto_Answer作用座席自动应答呼叫。附带信息caller：文本型，主叫号码，如果为座席，则首字符为a或者A。called：文本型，被叫号码，如果为座席，则首字符为a或者A。callid：文本型，呼叫所属于的CallId（呼叫标示）。type：文本型，协作呼叫(assistant)或主呼叫(main)。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Auto_Answer","workNo":"49999","content":{"caller":"70093","transfer":"no","callid":"1456404171-43","transfrom":"","called":"6048","type":"main"}}}
座席签入后，根据呼叫CallID查询呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
座席发送文字消息。
座席已签入，座席具有文字交谈的技能。座席当前请求的文字交谈会话已经建立。
无。
请求URL请求方法请求消息消息头消息体
当needCheck为true时，如果当前座席调用该接口发送成功，但是对端没有在12秒内回复确认消息，则座席收到AgentChat_PostDataFailed事件，表示发送失败。如果对端发送了确认消息，则座席收到AgentChat_PostDataSuccess事件。
000-002100-006700-001700-012
标示符AgentState_SetWork_Success作用表示某个座席请求进入工作态成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_SetWork_Success","workNo":"49999","content":null}}
座席把与某一个用户的文字交谈会话转移给其他座席。
座席已签入，座席具有文字交谈的技能。收到了座席振铃消息。
无。
请求URL请求方法请求消息消息头消息体
文字交谈会话结束（AgentChat_Disconnected）示闲（AgentState_Ready）文字交谈会话转移开始（AgentChat_TransferStart）文字交谈会话转移失败（AgentChat_TransferFailed）
000-002100-006700-001700-002
座席收到文本呼叫请求后，进行应答处理。
座席已签入，座席具有文字交谈的技能。收到了座席振铃消息。
无。
请求URL请求方法请求消息消息头消息体无。
通话中（AgentState_Busy）文字交谈会话连接建立（AgentChat_Connnected）
000-002100-006700-001700-002
质检座席签入后，停止耳语。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-004
标示符AgentMediaEvent_PausePlayDone作用暂停播放录音成功事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_PausePlayDone","workNo":"49999","content":null}}
标示符AgentOther_InService作用表示某个座席签入成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_InService","workNo":"49999","content":null}}
获取当前座席的状态。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
000-002
座席签入后，可以批量查询座席的IP。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006100-007
标示符AgentState_Force_SetNotReady作用表示某个座席被强制示忙成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_Force_SetNotReady","workNo":"49997","content":null}}
标示符AgentOther_Note作用表示当前座席收到便签。附带信息sender表示发送人。receivetime表示信息接收时间。context表示便签内容。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_Note","workNo":"20012","content":{"sender":"20011","receivetime":1477290432230,"sendername":"20011","timestring":"2016-10-2406:27:12","context":"1121212"}}}
座席进行修改密码操作。
座席已签入。
长度最小8位，最大32位。不能包括连续2个以上相同字符。密码不能包含工号中3个以上的连字符。必须包含大写、小写英文字母、数字、特殊字符中的3种及以上。不能与最近5次（WAS可配置）的旧密码重复。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006100-007
标示符AgentState_Work作用表示某个座席进入工作整理态中。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_Work","workNo":"49997","content":null}}
座席对已经静音的呼叫进行取消静音操作。
座席已签入。座席对正在通话中的语音呼叫已经做了静音操作。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007200-007200-008
座席对已经建立的通话进行呼叫转移。
座席已签入。座席有正在通话中的语音呼叫。
呼出不支持释放转。呼入进行释放转时，由于送的是原始主叫号码，可能被运营商限制呼出，导致转移失败。
请求URL请求方法请求消息消息头消息体
座席进入（AgentEvent_Talking）连接失败（AgentEvent_Connect_Fail）座席挂断呼叫（AgentEvent_Call_Release）
000-002100-006100-007200-012
座席发送便签扩展。
座席已签入。
接口支持用户名发送，需要在用户登录模式下使用。
请求URL请求方法请求消息消息头消息体
无。
100-001100-006100-007
标示符AgentEvent_Conference作用表示当前座席已进入三方通话状态。附带信息partner：字符串，通话方电话，如"7101，7102"。callid：呼叫标识。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Conference","workNo":"49999","content":{"callid":"1456403570-17","partner":"49997，70093"}}}
标示符AgentState_SetRest_Success作用表示某个座席请求休息成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_SetRest_Success","workNo":"49999","content":null}}
座席签入后，批量查询指定座席的信息，不包括技能信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
100-001100-006100-007
质检座席签入后，切换侦听和插入指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
座席签入后，根据座席工号判断是否为质检班长。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentOther_All_Agent_Busy作用表示当前所有座席都处于繁忙状态。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_All_Agent_Busy","workNo":"49999","content":null}}
录音播放时进行暂停操作。
座席已签入。座席在放音中。
无。
请求URL请求方法请求消息消息头消息体无。
暂停录音播放成功（AgentMediaEvent_PausePlayDone）
100-006100-007500-003
标示符AgentEvent_Ringing作用座席来电提醒，提醒用户需要手工应答呼叫。附带信息caller：文本型，主叫号码，如果为座席，则首字符为a或者A。called：文本型，被叫号码，如果为座席，则首字符为a或者A。callid：文本型，呼叫所属于的CallId（呼叫标示）。type：文本型，协作呼叫(assistant)或主呼叫(main)。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Ringing","workNo":"49999","content":{"caller":"49997","transfer":"no","callid":"1456404043-37","transfrom":"","called":"49999","type":"main"}}}
在座席未登录前，查询指定座席状态和技能信息。
无。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-007
表示符AgentChat_CalloutFailed作用内部交谈失败事件。座席向其他坐席发起内部交谈请求后，如果内部交谈失败（如用户忙），将会收到该事件。附带信息callId为呼叫会话ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_CalloutFailed","workNo":"291","content":{"callId":"1438662583-16849139"}}}
座席对正在通话中的语音呼叫进行保持操作。
座席已签入。座席有正在通话中的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体无。
保持成功（AgentEvent_Hold）
100-006100-007200-013200-014
向用户发送确认消息，表示座席已经收到消息。
座席已签入，并签入WEBM。座席已经收到非实时呼叫事件AgentChat_NoRealTimeCall。
该接口只适用于ECC场景下的座席确认收到用户发送的短信。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006700-002
座席签入后，查询指定座席的配置的技能队列信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
座席签入后，查询座席私有队列上所有排队等待呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
表示符AgentChat_Swaped作用座席服务器服发生倒换，通知客户端，该工号上的所有文字交谈会话失效附带信息无。示例：{"content":null，"eventType":"AgentChat_Swaped","workNo"："2571"}
座席签入通话后，设置呼叫随路数据（扩展）。
座席已签入。当前在通话。
无。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006100-007400-001
质检座席签入后，强制拆除通话。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003
座席登录后，查询当前座席所属VDN下一组技能队列的统计信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006100-007
座席签出。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
座席签出成功（AgentOther_ShutdownService）
100-005100-006100-007100-008
表示符AgentChat_TransferStart作用座席发起文字交谈的转移请求后，呼叫转移后，将会收到该事件，后续还会收到呼叫结束事件。附带信息callId为呼叫会话ID示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_TransferStart","workNo":"292","content":{"callId":"1438662254-16849138"}}}
座席签入后，查询呼叫随路数据。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
座席对正在通话中的通话进行二次拨号，支持输入#。
座席已签入。座席有已经建立的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体无。
无。
000-002100-006100-007
标示符AgentEvent_Preview作用座席接收到预览发起。附带信息controlid：预览呼出控制块号。dialeddigits：预览呼出被叫号码。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Preview","workNo":"49999","content":{"controlid":"1456404043","dialeddigits":""}}}
质检座席签入后，开始监视指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-004
座席设置释放电话后是否进入空闲态。
座席已签入。
非长通情况下，必须设自动进入整理态。。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
轮询方式获取单座席事件。
针对获取在某个agentgateway上登录的所有座席的相关事件。采用HTTP方式进行轮询获取，HTTP为短连接。此方式能够提供单座席短连接的事件获取，但在线座席数量多的情况下，会导致Tomcat承受高并发的HTTP请求，座席数量多的时候，此方式不合适。修改agentgateway/WEB-INF/config/basic.properties中：EVENT_METHOD=AGENT_POLLGET_EVENT_MODE=1
座席没有事件时，这个接口需要10s才会有返回，如果有事件，则立即返回。请参考配置agentgateway/WEB-INF/config/basic.properties。AGENT_POLL_WAIT_FLAG=ON//是否等待事件，ON表示启动，没有事件时，10s后，服务端返回响应AGENT_POLL_WAIT_TIMES=100//没有事件时，最大等待100次AGENT_POLL_WAIT_INTERVAL=100//每次等待时间，单位毫秒
请求URL请求方法请求消息消息头消息体无。
无。
000-001
座席签入后，查询应答来话前呼叫信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
座席重置技能队列。
座席已签入并绑定电话号码。
无。
请求URL请求方法请求消息消息头消息体无。
无。
000-002100-006100-007
座席进行取消示忙操作。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
取消示忙成功（AgentState_CancelNotReady_Success）
100-006100-007100-009
座席释放指定电话号码的连接。
座席已签入。座席正在通话中。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007200-023200-024
标示符AgentOther_PhoneUnknow作用表示某个座席的物理话机状态未知。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_PhoneUnknow","workNo":"49999","content":null}}
座席登录以后进行内部呼叫。
座席已签入。座席当前无正在接听的语音呼叫（不包括保持后的语音呼叫）。
无。
请求URL请求方法请求消息消息头消息体
物理话机振铃（AgentOther_PhoneAlerting）物理话机摘机（AgentOther_PhoneOffhook）通话中（AgentState_Busy）对方振铃（AgentEvent_Customer_Alerting）座席进入Talking（AgentEvent_Talking）外呼失败（AgentEvent_Inside_Call_Fail）
000-002100-006100-007200-001
质检座席签入后，停止监视指定的座席。
质检座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006900-001900-002900-003900-004
标示符AgentOther_Bulletin作用表示当前座席收到公告。附带信息sender表示发送人。receivetime表示信息接收时间。context表示公告内容。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_Bulletin","workNo":"20012","content":{"sender":"20011","receivetime":1477290874243,"sendername":"20011","timestring":"2016-10-2406:34:34","context":"1121212"}}}
座席登录后，获取当前座席指定技能队列上的排队总人数。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
接口中需要传入的技能队列ID、接入码、VDNID、座席工号、班组ID、callId等参数，必须真实存在的。
标示符AgentMediaEvent_Play作用播放录音开始事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_Play","workNo":"49999","content":null}}
座席签入后，查询该座席所属VDN下所有座席的WAS配置姓名。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007
标示符AgentOther_PhoneBusy作用表示座席话机无法应答呼叫，可能是因为话机未签入或话机上拒接来话。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentOther_PhoneBusy","workNo":"20011","content":{}}}
座席签入后，查询指定座席的呼叫ID。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007100-011900-002
座席对已经保持的呼叫进行取消保持操作。
座席已签入。座席有已经保持的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体无。
座席进入（AgentEvent_Talking）
100-006100-007200-015200-016
向用户发送确认消息，表示座席已经收到消息。
座席已签入，并签入WEBM。座席已经收到事件AgentChat_DataRecvedEx。
该接口只适用于ECC场景下的座席确认收到用户发送的短信。
请求URL请求方法请求消息消息头消息体
无。
000-002100-006700-002
座席设置是否自动应答。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006
标示符AgentEvent_Inside_Call_Fail。作用座席发起内部呼叫已经失败。附带信息content：呼叫的CallID。触发条件内部呼叫失败。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Inside_Call_Fail","workNo":"49999","content":"1456403699-21"}}
座席对正在通话的呼叫进行静音操作。
座席已签入。座席有一个正在通话的呼叫。
无。
请求URL请求方法请求消息请求头请求体无。
无。
100-006100-007200-003200-004
在没有呼叫的场景，向指定用户发送内容。
座席已签入，并签入WEBM。
该接口只适用ECC场景下的座席直发短信到用户上。
请求URL请求方法请求消息消息头消息体
发送成功后，如果用户反馈结果，则座席侧收到AgentChat_WithoutCallConfirm。
000-002100-006700-002
标示符AgentEvent_Agent_Occupyed作用当前座席已被预占。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Agent_Occupyed","workNo":"49999","content":null}}
座席对正在通话中的通话和保持中的通话进行连接保持。
座席已签入。座席有已经建立的语音呼叫。座席有已经保持的语音呼叫。
无。
请求URL请求方法请求消息消息头消息体无。
座席挂断呼叫（AgentEvent_Call_Release）示闲（AgentState_Ready）
100-006100-007200-005200-006
座席代答另一座席的语音呼叫。
座席已签入。被代答座席正处于振铃中。被代答呼叫不能使内部呼叫。当前座席和被代答座席必须在同一个班组中。当前座席需要有代答权限。当前座席必须处于空闲态。
无。
请求URL请求方法请求消息
代答成功后，当前座席收到AgentOther_PhoneAlerting接听话机后，座席收到AgentOther_PhoneOffhook和AgentEvent_Talking事件。
000-002100-006100-007
座席登录以后通进行内部求助操作。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体
两方求助<ulid="ZH-CN_TOPIC_0064277497__ul5082353116381"><liid="ZH-CN_TOPIC_0064277497__li21042229163758">呼叫保持（AgentEvent_Hold）对方振铃（AgentEvent_Customer_Alerting）座席进入Talking（AgentEvent_Talking）三方通话<ulid="ZH-CN_TOPIC_0064277497__ul48390755163857"><liid="ZH-CN_TOPIC_0064277497__li19514264163951">对方振铃（AgentEvent_Customer_Alerting）三方通话成功（AgentEvent_Conference）
100-006100-007200-018
标示符AgentState_SetNotReady_Success作用表示某个座席示忙成功。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentState_SetNotReady_Success","workNo":"49997","content":null}}
标示符AgentMediaEvent_JumpPlayDone作用跳进播放录音成功事件。附带信息无。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_JumpPlayDone","workNo":"49999","content":null}}
表示符AgentChat_WithoutCallConfirm作用用户侧在收到座席发送的补充答复消息后，反馈处理结果。附带信息result表示用户的反馈的处理结果。confirmer表示用户。chatId表示座席发送的补充答复消息编号。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_WithoutCallConfirm","workNo":"20011","content":{"result":0,"confirmer":"1212","chatId":1}}}
标示符AgentEvent_Consult_Fail作用座席咨询失败。附带信息文本型，呼叫所属于的CallId（呼叫标示）。示例：{"message":"","retcode":"0","event":{"eventType":"AgentEvent_Consult_Fail","workNo":"49999","content":"1456404043-39"}}
座席签入后，根据签入的技能队列ID，返回签入该技能队列的座席详细信息。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
无。
100-006100-007300-002
标示符AgentMediaEvent_StopRecordDone作用座席停止录音成功。附带信息taskId表示平台内部的录音任务号。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_StopRecordDone","workNo":"20011","content":{"taskId":5204}}}
座席强制签出带原因码。
座席已签入。
无。
请求URL请求方法请求消息消息头消息体无。
座席签出成功（AgentOther_ShutdownService）
无
标示符AgentMediaEvent_StopPlayDone作用录音被停止播放。附带信息cause表示停止播放的原因。0：正常播放结束；1：座席主动停止播放；2：录音播放失败而停止播放。示例：{"message":"","retcode":"0","event":{"eventType":"AgentMediaEvent_StopPlayDone","workNo":"49999","content":{"cause":0}}}
表示符AgentChat_NoRealTimeCall作用通知座席，有用户直发消息到当前座席上。附带信息caller表示非实时呼叫的发起人。dataSeqNo表示非实时呼叫内容编号。callData表示非实时呼叫内容。innerSid表示CTI内部标识。mediaType表示媒体类型。subMediaType表示子媒体类型。示例：{"message":"","retcode":"0","event":{"eventType":"AgentChat_NoRealTimeCall","workNo":"20011","content":{"caller":"1212","dataSeqNo":"1658583507","callData":"\\u0061\\u0073\\u0064\\u0066\\u0061\\u0073\\u0064\\u0066\\u0061\\u0073\\u0064\\u0066","innerSid":392036552,"mediaType":1,"subMediaType":0}}}
使用本接口参考开发前，请注意如下事项：本接口文档中，每个接口的描述由7部分组成：前置条件、注意事项、接口说明、响应消息、示例、触发事件和错误结果码。本接口文档中所有的接口，调用时，HTTP/HTTPS请求必须设置UTF-8编码。本接口文档中所有涉及到时间的接口，必须使用服务器所在时区时间。
对REST接口参数的约束进行了约定，如下所示：必选可选
访问路径例如：{ip}为部署AgentGateway的IP地址。{port}为AgentGateway提供服务的端口号。
REST的含义含状态传输（英文：RepresentationalStateTransfer，简称REST）是一种软件架构风格。目前在三种主流的Web服务实现方案中，因为REST模式与复杂的SOAP和XML-RPC相比更加简洁，越来越多的Web服务开始采用REST风格设计和实现。HTTPS协议请求方式简介GET获取指定的资源的详细信息。PUT替换/创建指定的资源。并将其追加到相应的资源组中。POST把指定的资源当做一个资源组，并在其下创建/追加一个新的元素，使其隶属于当前资源。DELETE删除指定的元素。
AgentGateway接口采用的是HTTPGUID鉴权。负载均衡器采用的是HTTPCookie鉴权。
座席调用登录接口登录成功后，可以从HTTP请求的响应头中获取到名称为Set-GUID的header，值例如为“JSESSIONID=279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0”，其中279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0为guid，这个guid就是这个座席的鉴权信息。座席调用其他接口时需要将该guid设置到http请的header中，header的名称必须为guid。AgentGateway会从请求的header中获取guid进行比较，判断是否合法用户，如果不是合法用户，则返回结果码为100-006或000-003。
座席调用登录接口登录成功后，可以从HTTP请求的响应头中获取到名称为Set-Cookie的header，值例如为“huaweielbsession=abe5358acc98db0b7f1e480de0f8ea3e”，这个cookie就是这个座席的鉴权信息。座席调用其他接口时需要将该cookie设置到http请的header中，header的名称为Cookie。若不带该cookie，则返回结果码有可能为100-006。
正常响应要素参考具体API章节：。
异常相应要素说明[1]error数据结构异常响应样例（HTTPBody）{"status":"failed","error":{"code":"错误编码","message":"导致错误的原因说明"}}
使用指定的名称在指定项目上创建仓库。
URI格式POST/v1/repositories
参数说明请求样例{"name":"TestAPI","template_id":"665","project_uuid":"e0ac00f0e8864953a30579a63283359a","import_members":1}
要素说明响应样例{"result":{"repository_uuid":"cbc6ee8ca06c4161b8e92f79561a94e5"},"status":"success"}
请参考。
根据项目UUID获取该项目下所有仓库信息。
URI格式GET/v1/projects/{project_uuid}/repositories?{page_index,page_size}参数说明获取项目仓库的查询检索参数
N/A
要素说明[1]repositories字段数据结构说明响应样例{"result":{"repositories":[{"id":"26504a54505846e49342c0db850937e0","name":"仓库1","url":"git@192.168.0.1:0ac00f0e8864953a30579a63283359a/test.git","repo_size":"2.0M","creator":"xiaoming","update_time":"2017-04-0621:21:47","satus":"0","project_name":"codeTest"},{"id":"29804a54505846e49342c0db850937e2","name":"仓库2","url":"git@192.168.0.2:0ac00f0e8864953a30579a63283359a/test.git","repo_size":"2.0M","creator":"xiaoming","update_time":"2017-04-0621:21:47","satus":"0","project_name":"codeTest"}],"total":2},"status":"success"}
请参考。
该接口用于把指定用户添加到指定的项目的仓库中。
URI格式POST/v1/repositories/{repository_uuid}/members
参数说明[1]users字段数据结构说明请求样例{"users":[{"id":"sWX999999","name":"xiaoming","domain_id":"a8db36ae2713494ba5ef3ec764ed9a20","domain_name":"xuexxx","role":"40"},{"id":"sWX888888","name":"xiaoming","domain_id":"a8db36ae2713494ba5ef3ec764ed9a20","domain_name":"xuexxx","role":"40"}]}
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
设置成员在仓库中的角色。
URI格式PUT/v1/repositories/{repository_uuid}/members/{member_id}
参数说明请求样例{"role":"30"}
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
删除指定仓库中的指定用户。
URI格式DELETE/v1/repositories/{repository_uuid}/members/{member_id}参数说明
N/A
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
获取指定仓库下的添加的成员列表信息。
URI格式GET/v1/repositories/{repository_uuid}/members?{page_index,page_size}参数说明：获取用户列表的查询分页参数：
N/A
要素说明[1]users字段数据结构说明响应样例{"result":{"users":[{"user_id":"1157","name":"lWX999999","domain_id":"5eea7dbd5eee43e09a76c9fe8e732348","domain_name":"china","description":"test","enabled":"false","role":40,"email":"xiaoming@huawei.com"},{"user_id":"1626","name":"sWX888888","domain_id":"5eea7dbd5eee43e09a76c9fe8e732348","domain_name":"china","description":"test","enabled":"false","role":30,"email":"xiaoming@huawei.com"}]"total":2},"status":"success"}
请参考。
正常异常
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为（带方括号的为可选项）：URL中的参数说明，如下表所示。URL中的参数说明
在HTTP协议中，可以使用多种请求方法，例如：GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。请求方法一览表
调用接口采用如下Token认证方式，您需要使用Token认证进行行认证鉴权。Token认证：通过Token认证调用请求。
当您使用Token认证方式时，请采用如下步骤调用接口：发送“POSThttps://IAM的Endpoint/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参考获取用户Token。说明：<ulid="ZH-CN_TOPIC_0073620318__ul16399173415317"><liid="ZH-CN_TOPIC_0073620318__li33991534234">Token值即接口返回消息Header中的“X-Subject-Token”的值。Token的有效期为24小时，需要同一个Token鉴权时，可以先缓存起来，避免频繁调用。调用接口时，在业务接口请求消息头中增加“X-Auth-Token”，取值为上面步骤中的Token值。
发送“POSThttps://IAM的Endpoint/v3/auth/tokens”，请求内容示例如下：{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0073620318__i33007182555">username</em>","password":"<emid="ZH-CN_TOPIC_0073620318__i430011865515">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0073620318__i830091805519">domainname</em>"}}}},"scope":{"project":{"name":"<emid="ZH-CN_TOPIC_0073620318__i930017181554">projectname</em>"}}}}说明：示例代码中的斜体字需要替换为实际内容。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为前面步骤中获取的Token。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
公共请求消息头其它header属性，请遵照HTTP协议。
公共响应消息头
文档修订记录累积了每次文档更新的说明。最新版本的文档包含以前所有文档版本的更新内容。
选择资源直接备份
URIPOST/v1/{project_id}/providers/{provider_id}/resources/{resource_id}/action参数说明
要素说明protect_param字段数据结构说明请求样例
要素说明protect_resp字段数据结构说明plan_resp字段数据结构说明resource字段数据结构说明响应样例
正常异常
查询资源是否可以备份
URIPOST/v1/{project_id}/providers/{provider_id}/resources/action参数说明
要素说明protectable_param字段数据结构说明请求样例
要素说明check_resp字段数据结构说明响应样例
正常异常
查询目标资源是否可恢复
URIPOST/v1/{project_id}/providers/{provider_id}/resources/action参数说明
要素说明restorable_param字段数据结构说明restorable_target字段数据结构说明restore_volume_mapping字段数据结构说明请求样例
要素说明check_resp字段数据结构说明响应样例
正常异常
创建备份策略
URIPOST/v1/{project_id}/policies参数说明
要素说明policy_create字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_create字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger字段数据结构说明trigger_properties字段数据结构说明请求样例
要素说明policy_resp字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_resp字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger_resp字段数据结构说明trigger_properties_resp字段数据结构说明响应样例
正常异常
根据指定id删除备份策略
URIDELETE/v1/{project_id}/policies/{policy_id}参数说明
要素说明无请求样例
要素说明无响应样例无
正常异常
根据指定id更新备份策略
URIPUT/v1/{project_id}/policies/{policy_id}参数说明
要素说明policy_update字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_update字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger字段数据结构说明trigger_properties字段数据结构说明请求样例
要素说明policy_resp字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_resp字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger_resp字段数据结构说明trigger_properties_resp字段数据结构说明响应样例
正常异常
根据id查询单个备份策略
URIGET/v1/{project_id}/policies/{policy_id}参数说明
要素说明无请求样例
要素说明policy_resp字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_resp字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger_resp字段数据结构说明trigger_properties_resp字段数据结构说明响应样例
正常异常
查询备份策略列表
URIGET/v1/{project_id}/policies参数说明
查询参数说明要素说明无请求样例
要素说明policy_resp字段数据结构说明policy_param字段数据结构说明resource字段数据结构说明scheduled_operation_resp字段数据结构说明common_param字段数据结构说明operation_definition字段数据结构说明trigger_resp字段数据结构说明trigger_properties_resp字段数据结构说明响应样例
正常异常
副本管理
手工执行备份，创建备份副本
URIPOST/v1/{project_id}/providers/{provider_id}/checkpoints参数说明
要素说明checkpoint_req字段数据结构说明checkpoint_param字段数据结构说明请求样例
要素说明checkpoint_resp字段数据结构说明plan_resp字段数据结构说明resource字段数据结构说明响应样例
正常异常
删除副本
URIDELETE/v1/{project_id}/providers/{provider_id}/checkpoints/{checkpoint_id}参数说明
查询参数说明要素说明无请求样例
要素说明无响应样例无
正常异常
查询副本数量
URIGET/v1/{project_id}/checkpoint_items/count参数说明
查询参数说明要素说明无请求样例
要素说明响应样例
正常异常
根据指定id查询单个副本
URIGET/v1/{project_id}/checkpoint_items/{checkpoint_item_id}参数说明
要素说明无请求样例
要素说明checkpoint_item字段数据结构说明extend_info字段数据结构说明backup_data字段数据结构说明volume_backup字段数据结构说明响应样例
正常异常
查询所有副本
URIGET/v1/{project_id}/checkpoint_items参数说明
查询参数说明要素说明无请求样例
要素说明checkpoint_item字段数据结构说明extend_info字段数据结构说明backup_data字段数据结构说明volume_backup字段数据结构说明响应样例
正常异常
使用副本进行恢复
URIPOST/v1/{project_id}/restores参数说明
要素说明restore_req字段数据结构说明restore_param字段数据结构说明restore_target字段数据结构说明restore_volume_mapping字段数据结构说明请求样例
要素说明restore_resp字段数据结构说明restore_param字段数据结构说明restore_target字段数据结构说明restore_volume_mapping字段数据结构说明响应样例
正常异常
配额管理
查询租户配额
URIGET/v1/{project_id}/quotas参数说明
要素说明无请求样例
要素说明quota字段数据结构说明resource_resp字段数据结构说明响应样例
正常异常
错误码说明Karbor原生接口参考http://developer.openstack.org/api-ref/data-protection-orchestration/v1/index.html
文档修订记录
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0061309483__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0061309483__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0061309486__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0061309486__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0061309486__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0061309486__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0061309489__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0061309489__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
本章节所介绍的所有接口url，均对大小写敏感，请在调用时额外关注。
使用云审计服务前需要开通服务，开通云审计服务系统会自动创建一个追踪器，系统记录的所有操作将关联在该追踪器中。目前，一个云账户在一个Region下仅支持创建一个追踪器。为了保存更长时间段的操作记录，需要将操作记录实时同步保存至对象存储服务（OBS）桶，所以使用云审计服务之前，您需要开通OBS服务并指定OBS桶。桶（Bucket）是OBS中存储对象的容器。
URI格式POST/v1.0/{project_id}/tracker参数说明
要素说明请求样例{"bucket_name":"defaultbucket","file_prefix_name":"mytracker1"}“bucket_name”为可选字段，若当前局点未配置OBS服务，则不发送该字段。
要素说明响应样例{"bucket_name":"defaultbucket","tracker_name":"system","file_prefix_name":"mytracker1","status":"enabled"}
正常异常
云审计服务支持修改已创建追踪器的OBS桶，操作事件文件前缀以及追踪器的状态，修改追踪器对已有的操作记录没有影响。修改追踪器完成后，系统立即以新的规则开始记录操作。
URI格式PUT/v1.0/{project_id}/tracker/{tracker_name}参数说明
要素说明请求样例PUT/v1.0/{project_id}/tracker/system{"bucket_name":"my_created_bucket","file_prefix_name":"some_folder","status":"disabled"}“bucket_name”为可选字段，若当前局点未配置OBS服务，则不发送该字段。
要素说明响应样例
正常异常
开通云审计服务成功后，您可以在追踪器信息页面查看系统自动创建的追踪器的详细信息。详细信息主要包括追踪器名称，用于存储操作事件的OBS桶名称和OBS桶中的事件文件前缀。
URI格式GET/v1.0/{project_id}/tracker{?tracker_name}参数说明说明：因CTS后期可能会支持多tracker，因此查询请求不包含tracker_name参数时（GET/v1.0/{project_id}/tracker），接口响应类型为数组格式，反之接口响应则为对象格式。
要素说明无请求样例GET/v1.0/{project_id}/tracker?tracker_name=system
要素说明响应样例{"bucket_name":"my_created_bucket","tracker_name":"system","detail":"noBucket","file_prefix_name":"some_folder","status":"disabled"}
正常异常
云审计服务管理控制台支持删除已创建的追踪器。删除追踪器对已有的操作记录没有影响，当您重新开通云审计服务后，依旧可以查看已有的操作记录。
URI格式DELETE/v1.0/{project_id}/tracker{?tracker_name}参数说明
要素说明无请求样例DELETE/v1.0/{project_id}/tracker?tracker_name=system
要素说明无响应样例无
正常异常
通过事件列表查询接口，可以查出系统记录的7天内资源操作记录。
URI格式GET/v1.0/{project_id}/{tracker_name}/trace{?trace_id,service_type,resource_type,resource_id,resource_name,trace_name,trace_rating,user,limit,from,to,next}参数说明
要素说明请求样例GET/v1.0/{project_id}/{tracker_name}/trace?limit=11&amp;to=1479095278000&amp;from=1478490478000&amp;trace_name=createTracker&amp;resource_type=tracker&amp;service_type=CTS
要素说明traces字段数据结构说明meta_data字段数据结构说明响应样例{"traces":[{"time":1472148708232,"user":"{\"name\":\"xxx\",\"domain\":{\"name\":\"xxx\",\"id\":\"ded649d814464428ba89d04d7955c93e\"},\"assumedBy\":{\"user\":{\"name\":\"bss_bm_admin\",\"id\":\"c5140af45b5d4b399dea8f900f1dcf1b\",\"domain\":{\"name\":\"op_service\",\"id\":\"71ce673175024d0495664e525e52bac0\"}}}}","response":"{\"code\":\"VPC.0514\",\"message\":\"Updateportfail.\"}","code":200,"service_type":"VPC","resource_type":"eip","resource_name":"192.144.163.1","resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","trace_name":"deleteEip","trace_rating":"warning","trace_type":"ConsoleAction","api_version":"2.0","record_time":1481066128032,"trace_id":"e001ccb9-bc09-11e6-b00b-4b2a61338db6"},{"time":1472148708232,"user":"{\"name\":\"xxx\",\"domain\":{\"name\":\"xxx\",\"id\":\"ded649d814464428ba89d04d7955c93e\"},\"assumedBy\":{\"user\":{\"name\":\"bss_bm_admin\",\"id\":\"c5140af45b5d4b399dea8f900f1dcf1b\",\"domain\":{\"name\":\"op_service\",\"id\":\"71ce673175024d0495664e525e52bac0\"}}}}","response":"{\"code\":\"VPC.0514\",\"message\":\"Updateportfail.\"}","code":200,"service_type":"VPC","resource_type":"eip","resource_name":"192.144.163.1","resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","trace_name":"deleteEip","trace_rating":"warning","trace_type":"ConsoleAction","api_version":"2.0","record_time":1481066128032,"trace_id":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8"}],"meta_data":{"count":2,"marker":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8"}}
正常异常
所有云审计服务的接口，有自定义错误信息返回，本小节介绍云审计服务的错误码的含义。
{"details":{"details":"Messagebodyorcontextformatisnotvalid","code":"cts.0006"}}
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0044332889__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0044332889__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中传递的参数对大小写敏感，请在调用时额外关注。URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。调用接口的方式如下：Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0044332892__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0044332892__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0044332892__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0044332892__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0044332895__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0044332895__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
通过事件列表查询接口，可以查出系统记录的7天内的资源操作记录。同v1.0相比，请求参数中trace_rating更改为trace_status，响应中user、request以及resource字段参数类型更改为Structure，具体请参考响应样例。
URI格式GET/v2.0/{project_id}/{tracker_name}/trace{?trace_id,service_type,resource_type,resource_id,resource_name,trace_name,trace_status,user,limit,from,to,next}参数说明
要素说明请求样例GET/v2.0/{project_id}/{tracker_name}/trace?limit=11&amp;to=1479095278000&amp;from=1478490478000&amp;trace_name=createTracker&amp;resource_type=tracker&amp;service_type=CTS
要素说明traces字段数据结构说明meta_data字段数据结构说明响应样例{"traces":[{"time":1472148708232,"user":{"name":"xxx","id":"a2e899190fcd444084a68fc0ac2sc1e9","domain":{"name":"xxx","id":"05b2598d69bc4a209f9ac5eeeb1f91ad"}},"response":{"code":"VPC.0514","message":"Updateportfail."},"code":200,"service_type":"VPC","resource_type":"eip","resource_name":"192.144.163.1","resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","trace_name":"deleteEip","trace_status":"warning","trace_type":"ConsoleAction","api_version":"2.0","record_time":1481066128032,"trace_id":"e001ccb9-bc09-11e6-b00b-4b2a61338db6"},{"time":1472148708232,"user":{"name":"xxx","id":"a2e899190fcd444084a68fc0ac2sc1e9","domain":{"name":"xxx","id":"05b2598d69bc4a209f9ac5eeeb1f91ad"}},"request":{"servers":[{"id":"3045f042-9a7c-436d-a944-ff76ceb7b477"}],"delete_volume":false,"delete_publicip":false},"response":{"code":"VPC.0514","message":"Updateportfail."},"code":200,"service_type":"VPC","resource_type":"eip","resource_name":"192.144.163.1","resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","trace_name":"deleteEip","trace_status":"warning","trace_type":"ConsoleAction","api_version":"2.0","record_time":1481066128032,"trace_id":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8"}],"meta_data":{"count":2,"marker":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8"}}
正常异常
通过资源清理接口，可以在用户退场时，清理租户在云审计服务中创建的追踪器。该接口对租户及租户下的用户不可见，在用户退场的时候由组合API统一调用。
URI格式DELETE/v1.0/{project_id}/resources参数说明
请求样例DELETE/v1.0/{project_id}/resources
无
正常异常
用户可以通过RESTAPI接口方式单独或集成到业务程序进行管理和使用DIS。
该接口适用于DIS平台接口。
DIS通过高度灵活的RESTAPI对外开放接口，供客户系统集成使用。
接口参数类型中List的表现形式为数组。IP地址以点分格式表示，如：100.100.0.0。
DIS接口采用HTTPS传输协议。HTTPS请求方在和服务器建立连接并发出HTTPS请求后，不能在该连接上再发出其他请求，必须等待所发请求的响应，收到响应后才可以继续发请求。
RESTAPI支持POST、GET和DELETE请求方法。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0058206995__i33826286111625">Endpoint</em>/<emid="ZH-CN_TOPIC_0058206995__i56139559112534">uri</em>。URL中的参数说明如所示。
DIS接口调用的流程如下所示。获取认证请求，和。调用接口前，请获取请求认证，填充至请求消息头中。。填充请求参数构建请求方法。。。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。：通过Token认证调用请求。：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0058206998__zh-cn_topic_0037324631_i43323884114613">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参见。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0058206998__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0058206998__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0058206998__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"en-de"//假设区域名称是“en-de”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”。
在使用DIS的RESTAPI前，您需要下载AK/SK证书至本地。每个用户只需下载一次AK/SK证书。
登录管理控制台。单击用户名，在下拉列表中选择“我的凭证”。选择“管理访问秘钥”页签。单击“新增访问密钥”，生成AK/SK的证书文件。说明：最多可以添加2个访问秘钥。在“新增访问密钥”界面，获取并输入验证码。单击“确定”，系统显示确认界面。在弹出的对话框中，单击“确定”，完成证书下载。说明：为防止访问密钥泄漏，请妥善保管。
下载API网关签名工具。下载地址：解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0058207001__ol12595853164327"><liid="ZH-CN_TOPIC_0058207001__li46253820164327">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。
每一个请求通常由三部分组成，分别是：请求行、请求消息头、请求消息体(可选)。
请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：Method：表示请求方法（所有方法全为大写），各个方法的解释如下：<ulid="ZH-CN_TOPIC_0058207004__zh-cn_topic_0037324637_ul46065735155759"><liid="ZH-CN_TOPIC_0058207004__zh-cn_topic_0037324637_li42783561155612">GET：请求获取Request-URI所标识的资源。POST：在Request-URI所标识的资源后附加新的数据。PUT：请求服务器存储一个资源，并用Request-URI作为其标识。DELETE：请求服务器删除Request-URI所标识的资源。PATCH：请求服务器更新资源的部分内容，当资源不存在的时候，PATCH可能会去创建一个新的资源。HEAD：只请求页面的首部。OPTION：允许客户端查看服务器的性能。Request-URI：是一个统一资源标识符。说明：RequestURI中的参数分别为[path]?[query]。其中：<ulid="ZH-CN_TOPIC_0058207004__zh-cn_topic_0037324637_ul63852547193530"><liid="ZH-CN_TOPIC_0058207004__zh-cn_topic_0037324637_li26050465193535">多个path之间使用“/”分隔。query与path之间使用“?”分隔。多个query之间使用“&amp;”分隔。HTTP-Version：表示请求的HTTP协议版本。CRLF：表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。
请求消息头由若干头域构成，每个头域由一个域名，冒号(:)和域值组成。DIS公共请求消息头如所示。
以JSON格式封装，基本语法是嵌套式的key:value形式。HTTP请求的正文针对不同的URI对象有不同的必须字段和可选字段。
共有三种方式可以基于已构建好的请求消息发起请求。cURLcURL是一个命令行工具，用来执行各种URL操作和信息传输。cURL充当的是HTTP客户端，可以发送HTTP请求给服务端，并接收响应消息。cURL适用于接口调试。关于cURL详细信息请参见。编码通过编码调用接口，组装请求消息，并发送处理请求消息。REST客户端Mozilla、Google都为REST提供了图形化的浏览器插件，发送处理请求消息。Firefo浏览器请参见。Chrome浏览器请参见。
请求消息接收之后，服务器会返回一个HTTP响应消息。响应由三个部分组成，分别是：状态行、响应头、响应消息体。
状态行格式如下：HTTP-Version：表示服务器HTTP协议的版本号。Status-Code：表示服务器发回的响应状态代码。状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<ulid="ZH-CN_TOPIC_0058207006__zh-cn_topic_0037324639_ul11431476161029"><liid="ZH-CN_TOPIC_0058207006__zh-cn_topic_0037324639_li4465811116959">1xx：指示信息，表示请求已接收，继续处理。2xx：成功，表示请求已被成功接收、理解、接受。3xx：重定向，要完成请求必须进行更进一步的操作。4xx：客户端错误，请求有语法错误或请求无法实现。5xx：服务器端错误，服务器未能实现合法的请求。Reason-Phrase：表示状态代码的文本描述。
响应的消息头如所示。
响应消息体为JSON格式的文本，并且输出内容是UTF-8编码格式。
DIS的请求消息头如所示。
DIS的响应消息头如所示。
上传数据到DIS通道中。
URL格式POST/v2/{project_id}/records参数说明无。
请求样例POSThttps://{ip}:{port}/v2/6352bba7aaab443aa1d9943efc586a68/recordsRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ceRequestBody{"stream_name":"lzc08","records":[{"data":"MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTE=","explicit_hash_key":null,"partition_key":"0"}]}参数说明
响应样例{"failed_record_count":0,"records":[{"error_code":"null","error_message":"null","sequence_number":"195","partition_id":"0"}]}参数说明
正常200OK失败具体参数说明请参见。
用户获取迭代器，根据迭代器获取一次数据和下一个迭代器。迭代器指定了读取数据记录分片位置的开始顺序。
URL格式GET/v2/{project_id}/cursors{?stream-name,partition-id,cursor-type,starting-sequence-number}参数说明无。
请求样例GEThttps://{ip}:{port}/v2/6352bba7aaab443aa1d9943efc586a68/streams/lzc08/cursors?partition-id=0&amp;cursor-type=AT_SEQUENCE_NUMBER&amp;starting-sequence-number=[l1]0-9223372036854775807RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明
响应样例{"partition_cursor":"313366303430643039633332623566363a3a38"}参数说明
正常200OK失败具体参数说明请参见。
从DIS通道中下载数据。
URL格式GET/v2/{project_id}/records{?partition-cursor,limit}参数说明无。
请求样例GEThttps://{ip}:{port}/v2/6352bba7aaab443aa1d9943efc586a68/records?partition-cursor=eyJpdGVyR2VuVGltZSI6MTQ5MDk0ODk5OTM5NywiU3RyZWFtTmFtZSI6IjY2MCIsIlNoYXJkSWQiOiIwIiwiU2hhcmRJdGVyYXRvclR5cGUiOiJBVF9TRVFVRU5DRV9OVU1CRVIiLCJTdGFydGluZ1NlcXVlbmNlTnVtYmVyIjoiMCIsIlRpbWVTdGFtcCI6MH0=&amp;limit=100RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"records":[{"partition_key":0,"sequence_number":21,"data":"MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEx"}],"next_partition_cursor":"eyJpdGVyR2VuVGltZSI6MTQ5MDk1MDE1Nzc0NywiU3RyZWFtTmFtZSI6IjY2MCIsIlNoYXJkSWQiOiIwIiwiU2hhcmRJdGVyYXRvclR5cGUiOiJBVF9TRVFVRU5DRV9OVU1CRVIiLCJTdGFydGluZ1NlcXVlbmNlTnVtYmVyIjoiMjIiLCJUaW1lU3RhbXAiOjB9","millis_behind_latest":0}参数说明
正常200OK失败具体参数说明请参见。
使用编码方式基于已构建好的请求消息发起请求。通过编码调用接口，组装请求消息，并发送处理请求消息。
在接收请求消息后，服务返回一个HTTP响应消息。响应也是由三个部分组成，分别是：状态行、消息报头、响应正文。
状态行格式如下：HTTP-Version：表示服务器HTTP协议的版本号。Status-Code：表示服务器发回的响应状态代码。状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<ulid="ZH-CN_TOPIC_0034672260__ul27598891"><liid="ZH-CN_TOPIC_0034672260__li47063428">1xx：指示信息，表示请求已接收，继续处理。2xx：成功，表示请求已被成功接收、理解、接受。3xx：重定向，要完成请求必须进行更进一步的操作。4xx：客户端错误，请求有语法错误或请求无法实现。5xx：服务器端错误，服务器未能实现合法的请求。Reason-Phrase：表示状态代码的文本描述。
响应的消息报头在大多数情况下含有下面报头：Date:<emid="ZH-CN_TOPIC_0034672260__i48832851">Mon,12Nov200715:55:01GMT</em>HTTP协议标准报头。表示消息发送的时间，时间的描述格式由rfc822定义。Content-Length:<emid="ZH-CN_TOPIC_0034672260__i55467050">xxx</em>HTTP协议标准报头。用于指明实体正文的长度，以字节方式存储的十进制数字来表示Content-Type:<emid="ZH-CN_TOPIC_0034672260__i35943562">application/json;charset=UTF-8</em>HTTP协议标准报头。用于指明发送给接收者的实体正文的媒体类型。
响应正文为JSON格式的文本。
状态码如所示
创建队列。每个project_id默认只能创建5个队列。
POST/v1.0/{project_id}/queues参数说明请参见。
请求参数参数说明请参见。请求示例
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
查看所有队列。
GET/v1.0/{project_id}/queues?include_deadletter={include_deadletter}参数说明请参见。
请求参数无。请求示例无。
响应参数响应参数如和所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
查看指定的队列。
GET/v1.0/{project_id}/queues/{queue_id}?include_deadletter={include_deadletter}参数说明请参见。
请求参数无。请求示例无。
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
删除指定的队列。
DELETE/v1.0/{project_id}/queues/{queue_id}参数说明请参见。
请求参数无。请求示例无。
响应参数无响应示例无。
操作成功的状态码如所示，操作失败的状态码请参考。
创建消费组。可同时为指定队列创建多个消费组，并且最多有3个消费组。
POST/v1.0/{project_id}/queues/{queue_id}/groups参数说明请参见。
请求参数参数说明请参见。请求示例
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
获取指定队列的所有消费组。
GET/v1.0/{project_id}/queues/{queue_id}/groups?include_deadletter={include_deadletter}参数说明请参见。
请求参数无。请求示例无。
响应参数响应参数如和所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
向指定队列发送消息，可同时发送多条消息。每次发送的消息负载不超过512KB。消息最大保存时长为72小时。
POST/v1.0/{project_id}/queues/{queue_id}/messages参数说明请参见。
请求参数请求参数如和所示。请求示例
响应参数无。响应示例无。
操作成功的状态码如所示，操作失败的状态码请参考。
消费指定队列中的消息。可同时消费多条消息，每次消费的消息负载不超过512KB。当队列中消息较少时，单次消费返回的消息数量可能会少于指定条数，但多次消费最终可获取全部消息，当队列为空时，返回为空。
GET/v1.0/{project_id}/queues/{queue_id}/groups/{consumer_group_id}/messages?max_msgs={max_msgs}&amp;time_wait={time_wait}参数说明请参见。示例
请求参数无。请求示例无。
响应参数响应参数如和所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
确认已经消费指定消息。在消费者消费消息期间，消息仍然停留在队列中，但消息从被消费开始的30秒内不能被该消费组再次消费，若在这30秒内没有被消费者确认消费，则DMS认为消息未消费成功，将可以被继续消费。如果消息被确认消费成功，消息将不能被该消费组再次消费，但是消息仍然保持在队列中，并且可以被其它消费组消费，消息在队列中的保留时间为72小时（除非队列被删除），72小时后会被删除。消息批量消费确认时，必须严格按照消息消费的顺序提交确认，DMS按顺序判定消息是否消费成功，如果某条消息未确认或消费失败，则不再继续检测，默认后续消息全部消费失败。建议当对某一条消息处理失败时，不再需要继续处理本批消息中的后续消息，直接对已正确处理的消息进行确认。
POST/v1.0/{project_id}/queues/{queue_id}/groups/{consumer_group_id}/ack参数说明请参见。
请求参数请求参数如和所示。请求示例
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
公有云API符合RESTfulAPI设计理论。REST从资源的角度观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，客户端的应用通过URL（UnifiedResourceLocator）获取资源。URL的一般格式为：https://Endpoint/uri。其中uri为资源路径，也即API访问的路径。公有云接口采用HTTPS传输协议，请求/响应报文使用JSON报文，媒体类型表示为Application/json。
每一个请求通常由三部分组成，分别是：请求方法、请求消息头、请求正文(可选)。
请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：Method：表示请求方法（所有方法全为大写），各个方法的解释如下：<ulid="ZH-CN_TOPIC_0034672278__ul46065735155759"><liid="ZH-CN_TOPIC_0034672278__li42783561155612">GET：请求获取Request-URI所标识的资源。POST：在Request-URI所标识的资源后附加新的数据。PUT：请求服务器存储一个资源，并用Request-URI作为其标识。DELETE：请求服务器删除Request-URI所标识的资源。PATCH：请求服务器更新资源的部分内容，当资源不存在的时候，PATCH可能会去创建一个新的资源。HEAD：只请求页面的首部。OPTION：允许客户端查看服务器的性能。Request-URI：是一个统一资源标识符。HTTP-Version：表示请求的HTTP协议版本。CRLF：表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。
请求消息头由若干头域构成，每个头域由一个域名，冒号(:)和域值组成。分布式消息服务的公共请求报头如所示。
以JSON格式封装，基本语法是嵌套式的key:value形式。HTTP请求的正文针对不同的URI对象有不同的必须字段和可选字段。
分布式消息服务的公共响应报头如所示。
删除指定的消费组。
DELETE/v1.0/{project_id}/queues/{queue_id}/groups/{group_id}参数说明请参见。
请求参数无。请求示例无。
响应参数无响应示例无。
操作成功的状态码如所示，操作失败的状态码请参考。
查看当前租户的配额。
GET/v1.0/{project_id}/quotas/dms参数说明请参见。
请求参数无。请求示例无。
响应参数响应参数如、和所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0036212542__i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0036212542__i1395032112430">uri</em>URL中的参数说明如所示。如果使用了错误的Endpoint，则服务器返回“Failedconnectto{Endpoint};Connectionrefused”；如果使用了错误的URI，则服务器返回：“Parsefailed”或“APInotfound”。
通过API网关向DMS服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名，并在调用接口时增加“x-project-id”到业务接口请求消息头中。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。x-project-id：用户当前使用的ProjectID。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入登录密码和短信验证码，单击“确定”，下载密钥，请妥善保管。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0036212545__ol40047934162236"><liid="ZH-CN_TOPIC_0036212545__li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程。
登录管理控制台。在消息服务的页面上，选择“使用向导”。单击“下载”可下载代码包。
代码结构如图所示。AccessService：抽象类，将GET/POST/PUT/DELETE归一成access方法。AccessServiceImpl：实现access方法，具体与DMS网关通信的代码都在access方法中AccessServiceUtils：工具类，GET/POST/PUT/DELETE实现方法和返回结果的解析方法。ApiUtils：DMSAPI业务工具类，负责构造APIURI、解析API返回内容。DMSHttpClient：运行入口，模拟用户进行GET/POST/PUT/DELETE请求。Constants：定义常量的类，所有的常量都在这个类里面定义。ResponseMessage：HTTP返回结果对象，包含success、body、statusCode三个字段信息dms-service-config.properties：包含DMS网关签名需要的servicename、region、AK、SK和DMSendpoint。
在调用接口的时候，部分URL中需要填入项目编号project_id，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。查看项目ID
访问DMS服务的API报错，提示IAM连接超时，显示如下：
在WebConsole删除AK/SK，导致AK/SK无效。
登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入登录密码和短信验证码，单击“确定”，下载密钥，请妥善保管。用新的AK/SK访问DMS服务。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0046239890__zh-cn_topic_0024478020_i2588432012249">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0046239890__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0046239890__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0046239890__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
消费指定消费组产生的死信消息。可同时消费多条消息，每次消费的消息负载不超过512KB。
GET/v1.0/{project_id}/queues/{queue_id}/groups/{consumer_group_id}/deadletters?max_msgs={max_msgs}&amp;time_wait={time_wait}参数说明请参见。示例
请求参数无。请求示例无。
响应参数响应参数如和所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
确认已经消费指定的死信消息。在消费者消费死信消息期间，死信消息仍然停留在队列中，但死信消息从被消费开始的30秒内不能被该消费组再次消费，若在这30秒内没有被消费者确认消费，则DMS认为死信消息未消费成功，将可以被继续消费。如果死信消息被确认消费成功，该死信消息将不能被该消费组再次消费，死信消息的保留时间为72小时（除非消费组被删除），72小时后会被删除。消息批量消费确认时，必须严格按照消息消费的顺序提交确认，DMS按顺序判定消息是否消费成功，如果某条消息未确认或消费失败，则不再继续检测，默认后续消息全部消费失败。建议当对某一条消息处理失败时，不再需要继续处理本批消息中的后续消息，直接对已正确处理的消息进行确认。
POST/v1.0/{project_id}/queues/{queue_id}/groups/{consumer_group_id}/deadletters/ack参数说明请参见。
请求参数请求参数如和所示。请求示例
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
消费重置是指用户可以自定义消费位置。重置时间必须在消息持久化存储的时间范围内（默认72小时）。
PUT/v1.0/{project_id}/queues/{queue_id}/groups/{consumer_group_id}/positions参数说明请参见。
请求参数请求参数如和所示。请求示例
响应参数响应参数如所示。响应示例
操作成功的状态码如所示，操作失败的状态码请参考。
查询单个RecordSet。
URI格式GET/v2/zones/{zone_id}/recordsets/{recordset_id}参数说明
无
参数说明响应样例{"id":"2c9eb155587228570158722b6ac30007","name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":300,"records":["192.168.10.2","192.168.10.1"],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129968__i42955564141711">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587228570158722b6ac30007"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T12:03:17.827","default":false,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"}
请参考。
列出租户的所有RecordSet资源。
URI格式GET/v2/recordsets?limit={limit}&amp;marker={marker}参数说明
无
要素说明其中，中的recordsets字段说明，请参见；metadata字段说明请参见。响应样例{"links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i38807382141736">Endpoint</em>/v2/recordsets"},"recordsets":[{"id":"2c9eb155587194ec01587224c9f9014a","name":"example.com.","type":"SOA","ttl":300,"records":["ns1.hotrot.de.xx.example.com.(172009001209600300)"],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i21374734142047">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587194ec01587224c9f9014a"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T11:56:03.439","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587194ec01587224c9f9014c","name":"example.com.","type":"NS","ttl":172800,"records":["ns2.hotrot.de.","ns1.hotrot.de."],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i36317351142353">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587194ec01587224c9f9014c"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T11:56:03.439","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587228570158722996ca0002","name":"example.org.","type":"SOA","ttl":300,"records":["ns1.hotrot.de.xx.example.org.(172009001209600300)"],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i4181789142454">Endpoint</em>/v2/zones/2c9eb155587228570158722996c50001/recordsets/2c9eb155587228570158722996ca0002"},"zone_id":"2c9eb155587228570158722996c50001","zone_name":"example.org.","create_at":"2016-11-17T12:01:17.996","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587228570158722996ca0004","name":"example.org.","type":"NS","ttl":172800,"records":["ns2.hotrot.de.","ns1.hotrot.de."],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i839078142551">Endpoint</em>/v2/zones/2c9eb155587228570158722996c50001/recordsets/2c9eb155587228570158722996ca0004"},"zone_id":"2c9eb155587228570158722996c50001","zone_name":"example.org.","create_at":"2016-11-17T12:01:17.996","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587228570158722b6ac30007","name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":300,"records":["192.168.10.2","192.168.10.1"],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129969__i35815594142636">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587228570158722b6ac30007"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T12:03:17.827","default":false,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"}],"metadata":{"total_count":5}}
请参考。
查询单个Zone下RecordSet列表。
URI格式GET/v2/zones/{zone_id}/recordsets?limit={limit}&amp;marker={marker}参数说明
无
要素说明其中，中的recordsets字段说明，请参见；metadata字段说明请参见。响应样例{"links":{"self":"https://<emid="ZH-CN_TOPIC_0037129970__i5248416914181">Endpoint</em>/v2/recordsets?limit=11&amp;marker=&amp;name=&amp;status=&amp;zone_id=2c9eb155587194ec01587224c9f90149"},"recordsets":[{"id":"2c9eb155587194ec01587224c9f9014a","name":"example.com.","type":"SOA","ttl":300,"records":["ns1.hotrot.de.xx.example.com.(172009001209600300)"],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129970__i1162032514212">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587194ec01587224c9f9014a"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T11:56:03.439","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587194ec01587224c9f9014c","name":"example.com.","type":"NS","ttl":172800,"records":["ns2.hotrot.de.","ns1.hotrot.de."],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129970__i62040258142410">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587194ec01587224c9f9014c"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T11:56:03.439","default":true,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"},{"id":"2c9eb155587228570158722b6ac30007","name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":300,"records":["192.168.10.2","192.168.10.1"],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129970__i7005450142613">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587228570158722b6ac30007"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T12:03:17.827","default":false,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"}],"metadata":{"total_count":3}}
请参考。
删除单个RecordSet。
URI格式DELETE/v2/zones/{zone_id}/recordsets/{recordset_id}参数说明
无
参数说明响应样例{"id":"2c9eb155587228570158722b6ac30007","name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":300,"status":"PENDING_DELETE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129971__i41107383142112">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587228570158722b6ac30007"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T12:03:17.827","default":false,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"}
请参考。
查询单个公网Zone。
URI格式GET/v2/zones/{zone_id}参数说明
无
要素说明响应样例{"id":"2c9eb155587194ec01587224c9f90149","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":0,"masters":[],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037129973__i34642236141555">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149"},"pool_id":"00000000570e54ee01570e9939b20019","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"public","created_at":"2016-11-17T11:56:03.439","record_num":2}
请参考。
查询公网Zone的列表。
URI格式：GET/v2/zones?type={public}&amp;limit={limit}&amp;marker={marker}参数说明
无
要素说明其中，中的zones参数说明，请参见；metadata参数说明，请参见。响应样例{"links":{"self":"https://<emid="ZH-CN_TOPIC_0037134402__i5614727141617">Endpoint</em>/v2/zones?type=public&amp;limit=11&amp;marker=&amp;name=&amp;status="},"zones":[{"id":"2c9eb155587194ec01587224c9f90149","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":0,"masters":[],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037134402__i29356701142027">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149"},"pool_id":"00000000570e54ee01570e9939b20019","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"public","created_at":"2016-11-17T11:56:03.439","record_num":2},{"id":"2c9eb155587228570158722996c50001","name":"example.org.","description":"Thisisanexamplezone.","email":"xx@example.org","ttl":300,"serial":0,"masters":[],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037134402__i46086693142316">Endpoint</em>/v2/zones/2c9eb155587228570158722996c50001"},"pool_id":"00000000570e54ee01570e9939b20019","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"public","created_at":"2016-11-17T12:01:17.996","record_num":2}],"metadata":{"total_count":2}}
请参考。
删除单个公网Zone。
URI格式DELETE/v2/zones/{zone_id}参数说明
无
要素说明响应样例{"id":"2c9eb155587194ec01587224c9f90149","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":1,"masters":[],"status":"PENDING_DELETE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037134403__i45004917141633">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149"},"pool_id":"00000000570e54ee01570e9939b20019","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"public","created_at":"2016-11-17T11:56:03.439","updated_at":"2016-11-17T12:16:03.057","record_num":0}
请参考。
创建单个RecordSet。
URI格式POST/v2/zones/{zone_id}/recordsets参数说明
参数说明请求样例<ulid="ZH-CN_TOPIC_0037134404__ul17476014173235"><liid="ZH-CN_TOPIC_0037134404__li28632596173235">A类型{"name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":3600,"records":["192.168.10.1","192.168.10.2"]}AAAA类型{"name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"AAAA","ttl":3600,"records":["fe80:0:0:0:202:b3ff:fe1e:8329","ff03:0db8:85a3:0:0:8a2e:0370:7334"]}MX类型{"name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"MX","ttl":3600,"records":["1mail.example.com"]}CNAME类型{"name":"sale.example.com.","description":"Thisisanexamplerecordset.","type":"CNAME","ttl":3600,"records":["server1.example.com"]}TXT类型{"name":"server1.example.com.","description":"Thisisanexamplerecordset.","type":"TXT","ttl":300,"records":["Thishostisusedforsale."]}NS类型{"name":"server1.example.com.","description":"Thisisanexamplerecordset.","type":"NS","ttl":300,"records":["node1.example.com.","node2.example.com."]}
参数说明响应样例{"id":"2c9eb155587228570158722b6ac30007","name":"www.example.com.","description":"Thisisanexamplerecordset.","type":"A","ttl":300,"records":["192.168.10.1","192.168.10.2"],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0037134404__i46588245141657">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149/recordsets/2c9eb155587228570158722b6ac30007"},"zone_id":"2c9eb155587194ec01587224c9f90149","zone_name":"example.com.","create_at":"2016-11-17T12:03:17.827","default":false,"project_id":"e55c6f3dc4e34c9f86353b664ae0e70c"}
请参考。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0037134406__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0037134406__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0037134409__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0037134409__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0037134409__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0037134409__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0037134412__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0037134412__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
正常异常
设置弹性IP的PTR记录。
URI格式PATCH/v2/reverse/floatingips/{region}:{floatingip_id}参数说明
参数说明请求样例{"ptrdname":"www.example.com","description":"DescriptionforthisPTRrecord","ttl":300}
参数说明响应样例{"id":"<emid="ZH-CN_TOPIC_0042318613__i51043896143151">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334","ptrdname":"www.example.com.","description":"DescriptionforthisPTRrecord","address":"10.154.52.138","action":"CREATE","ttl":300,"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0042318613__i40801573142126">Endpoint</em>/v2/reverse/floatingips/<emid="ZH-CN_TOPIC_0042318613__i66300848143212">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334"}}
请参考。
查询单个弹性IP的PTR记录。
URI格式GET/v2/reverse/floatingips/{region}:{floatingip_id}参数说明
无
参数说明响应样例{"id":"<emid="ZH-CN_TOPIC_0042318614__i1091990614305">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334","ptrdname":"www.example.com.","description":"DescriptionforthisPTRrecord","address":"10.154.52.138","action":"CREATE","ttl":300,"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0042318614__i33524646142136">Endpoint</em>/v2/reverse/floatingips/<emid="ZH-CN_TOPIC_0042318614__i2887849914319">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334"}}
请参考。
列出租户的所有弹性IP的PTR记录。
URI格式GET/v2/reverse/floatingips?limit={limit}&amp;marker={marker}参数说明
无
要素说明其中，floatingips的字段说明请参见，metadata字段说明请参见。响应样例{"links":{"self":"https://<emid="ZH-CN_TOPIC_0042318615__i25323571142155">Endpoint</em>/v2/reverse/floatingips"},"metadata":{"total_count":1},"floatingips":[{"id":"<emid="ZH-CN_TOPIC_0042318615__i25497014143134">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334","ptrdname":"www.example.com.","description":"DescriptionforthisPTRrecord","address":"10.154.52.138","action":"NONE","ttl":300,"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0042318615__i12436408142224">Endpoint</em>/v2/reverse/floatingips/<emid="ZH-CN_TOPIC_0042318615__i6626007614322">region_id</em>:c5504932-bf23-4171-b655-b87a6bc59334"}}]}
请参考。
将弹性IP的PTR记录恢复为默认值。
URI格式PATCH/v2/reverse/floatingips/{region}:{floatingip_id}参数说明
参数说明请求样例{"ptrdname":null}
无
请参考。
查询可用的云解析服务API版本号。
URI格式：GET/
无
要素说明响应样例{"versions":{"values":[{"status":"CURRENT","id":"v2","links":[{"href":"https://127.0.0.1/v2","rel":"self"}]}]}}
请参考。
创建单个公网Zone。
URI格式：POST/v2/zones
参数说明请求样例{"name":"example.com.","description":"Thisisanexamplezone.","zone_type":"public","email":"xx@example.org"}
要素说明响应样例{"id":"2c9eb155587194ec01587224c9f90149","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":1,"masters":[],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0057310891__i45374312141510">Endpoint</em>/v2/zones/2c9eb155587194ec01587224c9f90149"},"pool_id":"00000000570e54ee01570e9939b20019","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"public","created_at":"2016-11-17T11:56:03.439","record_num":0}
请参考。
创建单个内网Zone。
URI格式：POST/v2/zones
参数说明请求样例{"name":"example.com.","description":"Thisisanexamplezone.","zone_type":"private","email":"xx@example.org","router":{"router_id":"19664294-0bf6-4271-ad3a-94b8c79c6558","router_region":"xx"}}
要素说明响应样例{"id":"ff8080825b8fc86c015b94bc6f8712c3","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":1,"masters":[],"status":"PENDING_CREATE","links":{"self":"https://<emid="ZH-CN_TOPIC_0057311027__i45374312141510">Endpoint</em>/v2/zones/ff8080825b8fc86c015b94bc6f8712c3"},"pool_id":"ff8080825ab738f4015ab7513298010e","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"private","created_at":"2017-04-22T08:17:08.997","record_num":0,"router":{"status":"PENDING_CREATE","router_id":"19664294-0bf6-4271-ad3a-94b8c79c6558","router_region":"xx"}}
请参考。
查询单个内网Zone。
URI格式GET/v2/zones/{zone_id}参数说明
无
要素说明响应样例{"id":"ff8080825b8fc86c015b94bc6f8712c3","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":0,"masters":[],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0057311028__i34642236141555">Endpoint</em>/v2/zones/ff8080825b8fc86c015b94bc6f8712c3"},"pool_id":"ff8080825ab738f4015ab7513298010e","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"private","created_at":"2017-04-22T08:17:08.997","record_num":2,"routers":[{"status":"ACTIVE","router_id":"19664294-0bf6-4271-ad3a-94b8c79c6558","router_region":"xx"},{"status":"ACTIVE","router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}]}
请参考。
查询内网Zone的列表。
URI格式：GET/v2/zones?type={private}&amp;limit={limit}&amp;marker={marker}参数说明
无
要素说明其中，中的zones参数说明，请参见；metadata参数说明，请参见。响应样例{"links":{"self":"https://<emid="ZH-CN_TOPIC_0057311029__i35530282184928">Endpoint</em>/v2/zones?type=private&amp;limit=11&amp;marker=&amp;name=&amp;status="},"zones":[{"id":"ff8080825b8fc86c015b94bc6f8712c3","name":"example.com.","description":"Thisisanexamplezone.","email":"xx@example.com","ttl":300,"serial":0,"masters":[],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0057311029__i51337090184928">Endpoint</em>/v2/zones/ff8080825b8fc86c015b94bc6f8712c3"},"pool_id":"ff8080825ab738f4015ab7513298010e","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"private","created_at":"2017-04-22T08:17:08.997","record_num":2,"routers":[{"status":"ACTIVE","router_id":"19664294-0bf6-4271-ad3a-94b8c79c6558","router_region":"xx"},{"status":"ACTIVE","router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}]},{"id":"ff8080825b95142f015b951f87280029","name":"example.org.","description":"Thisisanexamplezone.","email":"xx@example.org","ttl":300,"serial":0,"masters":[],"status":"ACTIVE","links":{"self":"https://<emid="ZH-CN_TOPIC_0057311029__i59380630184928">Endpoint</em>/v2/zones/ff8080825b95142f015b951f87280029"},"pool_id":"ff8080825ab738f4015ab7513298010e","project_id":"e55c6f3dc4e34c9f86353b664ae0e70c","zone_type":"private","created_at":"2017-04-22T08:17:08.997","record_num":2,"routers":[{"status":"ACTIVE","router_id":"19664294-0bf6-4271-ad3a-94b8c79c6558","router_region":"xx"},{"status":"ACTIVE","router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}]}],"metadata":{"total_count":2}}
请参考。
删除单个内网Zone。
URI格式DELETE/v2/zones/{zone_id}参数说明
无
要素说明响应样例
请参考。
在PrivateZone上关联VPC。
URI格式：POST/v2/zones/{zone_id}/associaterouter参数说明
参数说明请求样例{"router":{"router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}}
要素说明响应样例{"status":"PENDING_CREATE","router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}
请参考。
在PrivateZone上解关联VPC。当PrivateZone仅关联一个VPC时，不能进行解关联操作。
URI格式：POST/v2/zones/{zone_id}/disassociaterouter参数说明
参数说明请求样例{"router":{"router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}}
要素说明响应样例{"status":"PENDING_DELETE","router_id":"f0791650-db8c-4a20-8a44-a06c6e24b15b","router_region":"xx"}
请参考。
查询内网Zone的名称服务器。
URI格式GET/v2/zones/{zone_id}/nameservers参数说明
无
要素说明响应样例{"nameservers":[{"priority":1,"address":"100.125.0.81"},{"priority":2,"address":"100.125.0.82"}]}
请参考。
查询单个公网Zone的名称服务器。
URI格式GET/v2/zones/{zone_id}/nameservers参数说明
无
要素说明响应样例{"nameservers":[{"hostname":"ns1.example.com.","priority":1},{"hostname":"ns2.example.com.","priority":2}]}
请参考。
在使用DPS的RESTAPI前，您需要下载AK/SK证书至本地。每个用户只需下载一次AK/SK证书。
登录DPS管理控制台。单击右上角用户名，在下拉列表中选择“我的凭证”。选择“管理访问秘钥”页签。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄漏，请妥善保管。
公共响应消息头如所示。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0049111760__i33826286111625">Endpoint</em>/<emid="ZH-CN_TOPIC_0049111760__i55574607111625">uri</em>URL中的参数说明如所示。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService：抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo：运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl：实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参见。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
状态码如所示。
下载API网关签名工具。下载地址：解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0049111767__o2d0cbc51defe4b169d2cb9b039e0ac7d"><liid="ZH-CN_TOPIC_0049111767__l60d5a16ae6044ae9b524edde18f7b095">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
数据调度服务（DataPipelineService，简称DPS）是对公有云上数据移动和处理的过程进行编排和调度的云服务。DPS服务内置多种数据源、移动/转换活动。用户可以通过在编辑页面编排不同的活动和数据源，构建基于实际业务的数据处理流程，并对数据处理流程进行调度、运行、管理和监控。DPS可以帮助用户可靠地处理数据并以指定的周期在不同的计算与存储服务之间以及内部数据源之间移动数据。DPS可以帮助用户轻松创建具有容错性、可重复性和高可用性特征的数据处理流程。本文档中涉及的基本概念如所示。
DPS目前提供了创建Pipeline、修改Pipeline、运行Pipeline、停止Pipeline等接口。在请求消息头中增加了特定的头域，分别为X-Sdk-Date、Authorization、Host、Content-type和Content-Length，具体头域说明请参见。
每一个请求通常由三部分组成，分别是：请求行、请求消息头、请求消息体(可选)。
请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：Method：表示请求方法（所有方法全为大写），各个方法的解释如下：<ulid="ZH-CN_TOPIC_0049111773__ul46065735155759"><liid="ZH-CN_TOPIC_0049111773__li42783561155612">GET：请求获取Request-URI所标识的资源。POST：在Request-URI所标识的资源后附加新的数据。PUT：请求服务器存储一个资源，并用Request-URI作为其标识。DELETE：请求服务器删除Request-URI所标识的资源。PATCH：请求服务器更新资源的部分内容，当资源不存在的时候，PATCH可能会去创建一个新的资源。HEAD：只请求页面的首部。OPTION：允许客户端查看服务器的性能。Request-URI：是一个统一资源标识符。说明：RequestURI中的参数分别为[path][?query]。其中：<ulid="ZH-CN_TOPIC_0049111773__ul63852547193530"><liid="ZH-CN_TOPIC_0049111773__li26050465193535">多个path之间使用“/”分隔。query与path之间使用“?”分隔。多个query之间使用“&amp;”分隔。HTTP-Version：表示请求的HTTP协议版本。CRLF：表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。
请求消息头由若干头域构成，每个头域由一个域名，冒号(:)和域值组成。DPS公共请求消息头如所示。
以JSON格式封装，基本语法是嵌套式的key:value形式。HTTP请求的正文针对不同的URI对象有不同的必须字段和可选字段。
在调用接口的时候，部分URI中需要填入项目编号（project_id或者tenant_id，本文中project_id和tenant_id含义一样），所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。例如：project_id:"5a3314075bfa49b9ae360f4ecd333695"。
当您使用Token认证方式完成认证鉴权时，需要获取您的Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0049111776__i43323884114613">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参见。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0049111776__a15d71e93231b4b5ab0f9ed6f0df08896">username</em>","password":"<emid="ZH-CN_TOPIC_0049111776__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0049111776__a216da1ed308e4b4fb9f3ba5095b6d952">domainname</em>"}}}},"scope":{"project":{"name":"aaa"//假设区域名称是“aaa”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”。
公共请求消息头如所示。
请求消息接收之后，服务器会返回一个HTTP响应消息。响应也是由三个部分组成，分别是：状态行、响应头、响应消息体。
状态行格式如下：HTTP-Version：表示服务器HTTP协议的版本号。Status-Code：表示服务器发回的响应状态代码。状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<ulid="ZH-CN_TOPIC_0049111787__ul11431476161029"><liid="ZH-CN_TOPIC_0049111787__li4465811116959">1xx：指示信息，表示请求已接收，继续处理。2xx：成功，表示请求已被成功接收、理解、接受。3xx：重定向，要完成请求必须进行更进一步的操作。4xx：客户端错误，请求有语法错误或请求无法实现。5xx：服务器端错误，服务器未能实现合法的请求。Reason-Phrase：表示状态代码的文本描述。
响应的消息头如所示。
响应消息体为JSON格式的文本，并且输出内容是UTF-8编码格式。
DPS接口调用的流程如下所示。获取认证请求，和调用接口前，请获取请求认证，填充至请求消息头中。配置请求参数用以构建请求方法。
开始运行Pipeline。
URI格式POST/v1.0/{project_id}/pipelines/run-pipeline参数说明
请求样例{"pipelineId":"b9636fa3-048f-495e-a33f-74b2744801ec"}参数说明请参见。
响应样例无。
状态码如所示。异常状态码请参见。错误响应消息格式如下：错误响应消息体，是一个错误列表，包含一个或者多个错误消息。
停止调度Pipeline。
URI格式POST/v1.0/{project_id}/pipelines/stop-pipeline参数说明
请求样例{"pipelineId":"b9636fa3-048f-495e-a33f-74b2744801ec"}参数说明请参见。
响应样例无。
状态码如所示。异常状态码请参见。错误响应消息格式如下：错误响应消息体，是一个错误列表，包含一个或者多个错误消息。
共有三种方式可以基于已构建好的请求消息发起请求，分别为：cURLcURL是一个命令行工具，用来执行各种URL操作和信息传输。cURL充当的是HTTP客户端，可以发送HTTP请求给服务端，并接收响应消息。cURL适用于接口调试。关于cURL详细信息请参见。编码通过编码调用接口，组装请求消息，并发送处理请求消息。REST客户端Mozilla、Google都为REST提供了图形化的浏览器插件，发送处理请求消息。针对Firefox，请参见。针对Chrome，请参见。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
一个DWS（数据仓库服务）集群是DWS最小的管理单元。集群表示独立运行的数据仓库。用户可以在DWS中管理集群生命周期。
该接口用于查询并显示集群列表。
URI格式GET/v1.0/{project_id}/clusters参数说明
请求样例
参数说明响应样例
正常200异常
该接口用于查询集群详情。
URI格式GET/v1.0/{project_id}/clusters/{cluster_id}参数说明
请求样例
要素说明响应样例
正常200异常
该接口用于创建集群。
URI格式POST/v1.0/{project_id}/clusters参数说明
参数说明请求样例POST/v1.0/89cd04f168b84af6be287f71730fdb4b/clusters{"cluster":{"node_type":"dws.m1.xlarge.high","number_of_node":6,"subnet_id":"374eca02-cfc4-4de7-8ab5-dbebf7d9a720","security_group_id":"dc3ec145-9029-4b39-b5a3-ace5a01f772b","vpc_id":"85b20d7e-9eb7-4b2a-98f3-3c8843ea3574""availability_zone":"eu-de-01","port":"8000","name":"dws-1","user_name":"dbadmin","user_pwd":"Passw0rd!""public_ip":{"public_bind_type":"auto_assign",}}}
参数说明响应样例{"cluster":{"id":"7d85f602-a948-4a30-afd4-e84f47471c15"}}
正常200异常
该接口用户查询所有DWS服务支持的节点类型。
URI格式GET/v1.0/{project_id}/node_types
请求样例GET/v1.0/89cd04f168b84af6be287f71730fdb4b/node_types
参数说明<ulid="ZH-CN_TOPIC_0067607269__ul26731201"><liid="ZH-CN_TOPIC_0067607269__li39254219">响应样例STATUSCODE200{"node_types":[{"spec_name":"dws.d1.xlarge","id":"ebe532d6-665f-40e6-a4d4-3c51545b6a67""detail":[{"type":"vCPU","value":"4"},{"value":"3600","type":"LOCAL_DISK","unit":"GB"},{"type":"mem","value":"32","unit":"GB"}]},{"spec_name":"dws.d1.xlarge.high","id":"ebe532d6-665f-40e6-a4d4-3c51545b4f71","detail":[{"type":"vCPU","value":"8"},{"value":"512","type":"SSD","unit":"GB"},{"type":"mem","value":"64","unit":"GB"}]}]}
正常200异常
一个DWS（数据仓库服务）快照是一个集群的完整备份，快照存储于对象存储服务（OBS）中，快照可以用于将集群还原到新创建的具有相同规格的集群，当前，您只能将集群还原为新集群。
该接口用于删除一个指定快照。
URI格式DELETE/v1.0/{project_id}/snapshots/{snapshot_id}参数说明
请求样例
正常202异常
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0067607273__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0067607273__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0067607276__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0067607276__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0067607276__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0067607276__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0067607279__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0067607279__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
此接口用于删除集群。集群删除将释放此群集的所有资源，包括客户数据。为了安全起见，请确保为这个集群创建快照。
URI格式DELETE/v1.0/{project_id}/clusters/{cluster_id}参数说明
参数说明请求样例
正常202异常
该接口用于查询快照列表。
URI格式参数说明
请求样例
参数说明
正常200异常
该接口用于使用快照ID查询快照详情。
URI格式GET/v1.0/{project_id}/snapshots/{snapshot_id}参数说明
请求样例
参数说明
正常200异常
该接口用于为指定集群创建快照。
URI格式POST/v1.0/{project_id}/snapshots参数说明
参数说明请求样例
参数说明
正常200异常
DWSAPI提供了统一的异常响应，它包含错误代码和指定消息的异常细节。
参数说明响应样例STATUSCODE500{"errCode":"DWS.0016","externalMessage":"cannotfindtheresource"}
根据给定的云服务器ID列表，批量启动云服务器。
URI格式POST/v1/{project_id}/cloudservers/action参数说明
参数说明说明：启动云服务器请求参数中，必须以”os-start”字段下发启动云服务器请求，请参见下面的请求样例<emid="ZH-CN_TOPIC_0020212207__i34219672162750">。</em>[1]os-start字段数据结构说明[2]servers字段数据结构说明请求样例{"os-start":{"servers":[{"id":"616fb98f-46ca-475e-917e-2563e5a8cd19"},{"id":"726fb98f-46ca-475e-917e-2563e5a8cd20"}]}}
请参考。
请参考。
启动单台云服务器。
URI格式POST/v2/{project_id}/servers/{server_id}/action参数说明
参数说明请求样例{"os-start":{}}
不涉及
请参考。
根据给定的云服务器ID列表，批量重启云服务器。
URI格式POST/v1/{project_id}/cloudservers/action参数说明
参数说明说明：重启云服务器请求参数中，必须以”reboot”字段下发重启云服务器请求，详见请求样例。[1]reboot字段数据结构说明[2]servers字段数据结构说明请求样例{"reboot":{"type":"SOFT","servers":[{"id":"616fb98f-46ca-475e-917e-2563e5a8cd19"},{"id":"726fb98f-46ca-475e-917e-2563e5a8cd20"}]}}
请参考。
请参考。
重启单台云服务器。
URI格式POST/v2/{project_id}/servers/{server_id}/action参数说明
参数说明[1]reboot字段数据结构说明请求样例{"reboot":{"type":"<emid="ZH-CN_TOPIC_0020212650__i39623602151624">SOFT</em>"}}
不涉及
请参考。
根据给定的云服务器ID列表，批量关闭云服务器。
URI格式POST/v1/{project_id}/cloudservers/action参数说明
参数说明说明：关闭云服务器请求参数，必须如请求样例中，以”os-stop”字段下发关闭云服务器请求。[2]servers字段数据结构说明请求样例{"os-stop":{"type":"HARD","servers":[{"id":"616fb98f-46ca-475e-917e-2563e5a8cd19"},{"id":"726fb98f-46ca-475e-917e-2563e5a8cd20"}]}}
请参考。
请参考。
关闭单台云服务器。
URI格式POST/v2/{project_id}/servers/{server_id}/action参数说明
参数说明[1]os-stop字段数据结构说明请求样例{"os-stop":{}}
不涉及
请参考。
变更云服务器规格。
URI格式POST/v1/{project_id}/cloudservers/{server_id}/resize参数说明
参数说明[1]resize数据结构说明请求样例{"resize":{"flavorRef":"2"}}
请参考。
请参考。
查询云服务器规格详情信息和扩展信息列表。
URI格式GET/v1/{project_id}/cloudservers/flavors参数说明
不涉及
参数说明[1]flavors数据结构说明[2]links字段数据结构说明弹性云服务器规格一览表，请参见《弹性云服务器用户指南》的“类型和规格”章节。响应样例{"flavors":[{"id":"104","name":"m1.large","vcpus":"4","ram":8192,"disk":"0","swap":"","OS-FLV-EXT-DATA:ephemeral":0,"rxtx_factor":null,"OS-FLV-DISABLED:disabled":null,"rxtx_quota":null,"rxtx_cap":null,"os-flavor-access:is_public":null,"os_extra_specs":{"ecs:performancetype":"normal"}},]}
请参考。
查询云服务器规格信息列表。
URI格式GET/v2/{project_id}/flavors/detail{?minDisk,minRam,is_public,sort_key,sort_dir}参数说明查询云服务器规格时可选的查询检索参数如所示。
不涉及
参数说明[1]flavors数据结构说明[2]links字段数据结构说明响应样例：{"flavors":[{"id":"104","name":"m1.large","vcpus":4,"ram":8192,"disk":0,"swap":"","OS-FLV-EXT-DATA:ephemeral":0,"rxtx_factor":null,"OS-FLV-DISABLED:disabled":null,"os-flavor-access:is_public":null}]}
请参考。
根据云服务器规格ID，查询云服务器规格详情信息。
URI格式GET/v2/{project_id}/flavors/{flavors_id}参数说明
不涉及
参数说明[1]flavor数据结构说明[2]links字段数据结构说明响应样例：{"flavor":{"id":"104","name":"m1.large","vcpus":4,"ram":8192,"disk":80,"swap":"","links":[{"rel":"self","href":"https://compute.Region.dc1.domainname.com/v2/a1d8bff5d3d240adab0665cf6843c770/flavors/104"},{"rel":"bookmark","href":"https://compute.Region.dc1.domainname.com/a1d8bff5d3d240adab0665cf6843c770/flavors/104"}],"OS-FLV-EXT-DATA:ephemeral":0,"rxtx_factor":null,"OS-FLV-DISABLED:disabled":null,"rxtx_quota":null,"rxtx_cap":null,"os-flavor-access:is_public":null}}
请参考。
查询云服务器网卡信息。
URI格式GET/v2/{project_id}/servers/{server_id}/os-interface参数说明
不涉及
参数说明[1]interfaceAttachments字段数据结构说明:[2]fixed_ips字段数据结构说明:响应样例{"interfaceAttachments":[{"port_state":"ACTIVE","fixed_ips":[{"subnet_id":"f8a6e8f8-c2ec-497c-9f23-da9616de54ef","ip_address":"192.168.1.3"}],"net_id":"3cb9bc59-5699-4588-a4b1-b87f96708bc6","port_id":"ce531f90-199f-48c0-816c-13e38010b442","mac_addr":"fa:16:3e:4c:2c:30"}]}
请参考。
根据网卡ID，查询云服务器网卡信息。
URI格式GET/v2/{project_id}/servers/{server_id}/os-interface/{id}参数说明
不涉及
参数说明[1]interfaceAttachment字段数据结构说明[2]fixed_ips字段数据结构说明响应样例{"interfaceAttachment":{"port_state":"ACTIVE","fixed_ips":[{"subnet_id":"f8a6e8f8-c2ec-497c-9f23-da9616de54ef","ip_address":"192.168.1.3"}],"net_id":"3cb9bc59-5699-4588-a4b1-b87f96708bc6","port_id":"ce531f90-199f-48c0-816c-13e38010b442","mac_addr":"fa:16:3e:4c:2c:30"}}
请参考。
给云服务器添加一张或多张网卡。
URI格式POST/v1/{project_id}/cloudservers/{server_id}/nics参数说明
参数说明[1]nics字段数据结构说明:[2]security_groups字段数据结构说明:请求样例{"nics":[{"subnet_id":"d32019d3-bc6e-4319-9c1d-6722fc136a23","security_groups":[{"id":"f0ac4394-7e4a-4409-9701-ba8be283dbc3"}]}]}
请参考。
请参考。
给云服务器添加一张网卡。
URI格式POST/v2/{project_id}/servers/{server_id}/os-interface参数说明
参数说明[1]interfaceAttachment字段数据结构说明:请求样例{"interfaceAttachment":{"port_id":"ce531f90-199f-48c0-816c-13e38010b442"}}
响应要素说明[2]fixed_ips字段数据结构说明:响应样例{"interfaceAttachment":{"port_state":"DOWN","fixed_ips":[{"subnet_id":"d9cfef77-0151-4c2a-9ed5-d951ada8adf3","ip_address":"10.0.1.11"}],"port_id":"ce531f90-199f-48c0-816c-13e38010b442","net_id":"0dc714fa-9022-4a03-bb22-9821a396bb9d","mac_addr":"fa:16:3e:63:75:b2"}}
请参考。
删除云服务器中的一张或多张网卡。
URI格式POST/v1/{project_id}/cloudservers/{server_id}/nics/delete参数说明
参数说明说明：主网卡是弹性云服务器上配置了路由规则的网卡，不可删除。[1]nics字段数据结构说明:请求样例{"nics":[{"id":"d32019d3-bc6e-4319-9c1d-6722fc136a23"}]}
请参考。
请参考。
根据指定的PortID，从云服务器中卸载网卡。
URI格式DELETE/v2/{project_id}/servers/{server_id}/os-interface/{id}参数说明说明：主网卡是弹性云服务器上配置了路由规则的网卡，不可删除。
不涉及
不涉及
请参考。
创建一台或多台云服务器。
URI格式POST/v1/{project_id}/cloudservers参数说明
参数说明说明：<ulid="ZH-CN_TOPIC_0020212668__ul41619848165244"><liid="ZH-CN_TOPIC_0020212668__li2751636794935">使用支持Cloud-init或Cloudbase-init功能的镜像创建云服务器时，只能使用key_name参数，adminPass参数无效。对于Linux弹性云服务器，如果需要注入密码，只能使用userdata进行注入，对于Windows弹性云服务器，如果需要注入密码，只能通过元数据admin_pass进行注入。使用不支持Cloud-init或Cloudbase-init功能的镜像创建云服务器时，adminPass和key_name参数都无效，请使用镜像内置的密码或证书登录。[1]personality字段数据结构说明[2]nics字段数据结构说明[3]publicip字段数据结构说明输入publicip字段数据结构中的id和eip的值时，只能选择其中一个参数值输入。[4]root_volume字段数据结构说明[5]data_volumes字段数据结构说明[6]security_groups字段数据结构说明[7]eip字段数据结构说明[8]bandwidth字段数据结构说明[9]extendparam字段数据结构说明[10]extendparam字段数据结构说明[11]metadata字段数据结构说明请求样例{"server":{"availability_zone":"az1.dc1","name":"newserver","imageRef":"imageid_123","root_volume":{"volumetype":"SATA"},"data_volumes":[{"volumetype":"SATA","size":100},{"volumetype":"SSD","size":100，"multiattach":true,"hw:passthrough":"true"}],"flavorRef":"1","personality":[{"path":"/etc/banner.txt","contents":"ICAgICAgDQoiQmFjaA=="}],"vpcid":"vpcid","security_groups":[{"id":"sec_123"}],"nics":[{"subnet_id":"subnet_123"}],"publicip":{"id":"publicip_123","eip":{"iptype":"5_bgp","bandwidth":{"size":10,"sharetype":"PER"}}},"key_name":"sshkey-123","adminPass":"","count":1,"extendparam":{"regionID":"region_001"}}}
请参考。
请参考。
查询弹性云服务器挂载的磁盘信息。
URI格式GET/v2/{project_id}/servers/{server_id}/os-volume_attachments参数说明
不涉及
参数说明[1]volumeAttachments字段数据结构说明:响应样例{"volumeAttachments":[{"device":"/dev/sdd","id":"a26887c6-c47b-4654-abb5-dfadf7d3f803","serverId":"4d8c3732-a248-40ed-bebc-539a6ffd25c0","volumeId":"a26887c6-c47b-4654-abb5-dfadf7d3f803"},{"device":"/dev/sdc","id":"a26887c6-c47b-4654-abb5-dfadf7d3f804","serverId":"4d8c3732-a248-40ed-bebc-539a6ffd25c0","volumeId":"a26887c6-c47b-4654-abb5-dfadf7d3f804"}]}
请参考。
根据磁盘ID，查询云服务器挂载的单个磁盘信息。
URI格式GET/v2/{project_id}/servers/{server_id}/os-volume_attachments/{volume_id}参数说明
不涉及
参数说明[1]volumeAttachment字段数据结构说明:响应样例{"volumeAttachment":{"device":"/dev/sdd","id":"a26887c6-c47b-4654-abb5-dfadf7d3f803","serverId":"4d8c3732-a248-40ed-bebc-539a6ffd25c0","volumeId":"a26887c6-c47b-4654-abb5-dfadf7d3f803"}}
请参考。
查询租户配额信息。
URI格式GET/v1/{project_id}/cloudservers/limits参数说明
不涉及
参数说明响应样例：{"absolute":{"maxServerMeta":128,"maxPersonality":5,"maxImageMeta":128,"maxPersonalitySize":10240,"maxSecurityGroupRules":20,"maxTotalKeypairs":-1,"totalRAMUsed":75776,"totalInstancesUsed":21,"maxSecurityGroups":10,"totalFloatingIpsUsed":0,"maxTotalCores":20480,"totalSecurityGroupsUsed":1,"maxTotalFloatingIps":10,"maxTotalInstances":2048,"totalCoresUsed":40,"maxTotalRAMSize":25165824,"maxServerGroups":10,"maxServerGroupMembers":16,"totalServerGroupsUsed":2}}
请参考。
查询SSH密钥信息列表。
URI格式GET/v2/{project_id}/os-keypairs参数说明
不涉及
参数说明[1]keypairs字段数据结构说明[2]keypairs字段数据结构说明响应样例{"keypairs":[{"keypair":{"fingerprint":"15:b0:f8:b3:f9:48:63:71:cf:7b:5b:38:6d:44:2d:4a","name":"keypair-601a2305-4f25-41ed-89c6-2a966fc8027a","public_key":"ssh-rsaAAAAB3NzaC1yc2EAAAADAQABAAAAgQC+Eo/RZRngaGTkFs7I62ZjsIlO79KklKbMXi8F+KITD4bVQHHn+kV+4gRgkgCRbdoDqoGfpaDFs877DYX9n4z6FrAIZ4PES8TNKhatifpn9NdQYWA+IkU8CuvlEKGuFpKRi/k7JLos/gHi2hy7QUwgtRvcefvD/vgQZOVw/mGR9Q==Generated-by-Nova\n"}}]}
请参考。
根据SSH密钥名称查询指定SSH密钥。
URI格式GET/v2/{project_id}/os-keypairs/{keypair_name}参数说明
不涉及
参数说明[1]keypairs字段数据结构说明响应样例{"keypair":{"created_at":"2014-05-07T12:06:13.681238","deleted":false,"deleted_at":null,"fingerprint":"9d:00:f4:d7:26:6e:52:06:4c:c1:d3:1d:fd:06:66:01","id":1,"name":"keypair-3582d8b7-e588-4aad-b7f7-f4e76f0e4314","public_key":"ssh-rsaAAAAB3NzaC1yc2EAAAADAQABAAABAQDYJrTVpcMwFqQy/oMvtUSRofZdSRHEwrsX8AYkRvn2ZnCXM+b6+GZ2NQuuWj+ocznlnwiGFQDsL/yeE+/kurqcPJFKKp60mToXIMyzioFxW88fJtwEWawHKAclbHWpR1t4fQ4DS+/sIbX/Yd9btlVQ2tpQjodGDbM9Tr9/+/3i6rcR+EoLqmbgCgAiGiVV6VbM2Zx79yUwd+GnQejHX8BlYZoOjCnt3NREsITcmWE9FVFy6TnLmahs3FkEO/QGgWGkaohAJlsgaVvSWGgDn2AujKYwyDokK3dXyeX3m2Vmc3ejiqPa/C4nRrCOlko5nSgV/9IXRx1ERImsqZnE9usBGenerated-by-Nova\n","updated_at":null,"user_id":"fake"}}
请参考。
创建SSH密钥，或把公钥导入系统，生成密钥对。创建SSH密钥成功后，请把响应数据中的私钥内容保存到本地文件，用户使用该私钥登录云服务器。为保证云服务器安全，私钥数据只能读取一次，请妥善保管。
URI格式POST/v2/{project_id}/os-keypairs参数说明
参数说明说明：创建SSH密钥时，只需要提交SSH密钥的name属性。导入SSH密钥时，才需要提交public_key属性。[1]keypairs字段数据结构说明:创建SSH密钥请求样例{"keypair":{"type":"ssh","name":"demo"}}导入SSH密钥请求样例{"keypair":{"public_key":"ssh-rsaAAAAB3NzaC1yc2EAAAADAQABAAABAQDWNgTxQYeBzK9LYy4IakX7IsIl5j5zqR6BU2GJaEg3RK6dlS7rKFQhvy/V/1emK+GT/7P8up9VsMZ9Dx6PBOLow5p+2/wGsMlwDJpWiQ8zNnEMg+u/Ar/ZhYHAMyKEAOOJxIcnPoUgxfNdj/eiXV98AabsBdUA7QD30Og8F4Bmn2lii/WD9KbQQVjb7kbB3gNIJpGTUcoX73arorqkq/ppaLRmmwMJ7bTIGl8/0MWU2Dy+eTByOaDMb2htbB+j8ZXyEu7Oooy0NaSd+PNHv3PZ9OIVO7gd1lyoTRvCMK/F346+zmZtk5EASSOx5RifnSwk3NtugVjXs9GMJfFLBRibGenerated-by-Nova\\n\n","type":"ssh","name":"demo1"}}
参数说明[1]keypairs字段数据结构说明:创建SSH密钥响应样例{"keypair":{"public_key":"ssh-rsaAAAAB3NzaC1yc2EAAAADAQABAAABAQDWNgTxQYeBzK9LYy4IakX7IsIl5j5zqR6BU2GJaEg3RK6dlS7rKFQhvy/V/1emK+GT/7P8up9VsMZ9Dx6PBOLow5p+2/wGsMlwDJpWiQ8zNnEMg+u/Ar/ZhYHAMyKEAOOJxIcnPoUgxfNdj/eiXV98AabsBdUA7QD30Og8F4Bmn2lii/WD9KbQQVjb7kbB3gNIJpGTUcoX73arorqkq/ppaLRmmwMJ7bTIGl8/0MWU2Dy+eTByOaDMb2htbB+j8ZXyEu7Oooy0NaSd+PNHv3PZ9OIVO7gd1lyoTRvCMK/F346+zmZtk5EASSOx5RifnSwk3NtugVjXs9GMJfFLBRibGenerated-by-Nova\n","private_key":"-----BEGINRSAPRIVATEKEY-----\nMIIEpQIBAAKCAQEA1jYE8UGHgcyvS2MuCGpF+yLCJeY+c6kegVNhiWhIN0SunZUu\n6yhUIb8v1f9Xpivhk/+z/LqfVbDGfQ8ejwTi6MOaftv8BrDJcAyaVokPMzZxDIPr\nvwK/2YWBwDMihADjicSHJz6FIMXzXY/3ol1ffAGm7AXVAO0A99DoPBeAZp9pYov1\ng/Sm0EFY2+5Gwd4DSCaRk1HKF+92q6K6pKv6aWi0ZpsDCe20yBpfP9DFlNg8vnkw\ncjmgzG9obWwfo/GV8hLuzqKMtDWknfjzR79z2fTiFTu4HdZcqE0bwjCvxd+Ovs5m\nbZORAEkjseUYn50sJNzbboFY17PRjCXxSwUYmwIDAQABAoIBADNKQ+ywUA3YQLDA\nUqlZKOB09h+0/YccG13D5TrNaV0yaMz6h31u7pYV/RI0TXxQTXbuZt5AoR4Xca9I\nC30bImmxTDDL45CGi/T0T5AgyS7t/iuM+smFkwI2YVbv53fL7q9yCxpucdnjC95/\nNj/+M3qxupIQ42uRVAYCU1jwF6J6YLy/9UamrmVd4bWFRtT19O7uszUhHLqJOZXq\n3ItqnMyD5bSMkzMN+RxmZVXAPkBOonGVeBBInCjvHv23REkngX38zcUSc543H3Di\n4673helqSdMnI0/TgyfLQcNuOsfQcD02ABWlGBe0nCTqP8pTRo86nzK1+AoCUp72\nIsTeviECgYEA8yHKeo/eZw25eDb3YTJovbgzA61n6AYQlDQv7rBGQDwKKQHdEqhR\nP0PbScaoT7wSeLtYV0vxxA6qjEEuHhZIk/t2wEILu+AH4AK88SUbUn6ZoYu+XmTA\nx26e2QRo8Ngi/KtIfeOGXx1PM/H2/OjEN3XjkfwJsj5bB+HjpF/wsnUCgYEA4Yxg\nWJYNrvSkmvXmDgxHwdxfUpVAcp40bvomNgYpKn9R2TyjMCSDIw8vVC6cGCFB9/Pc\nG0pr8RN2SvbTaPo/96DkKdHz7NAWkzUSChD4Oy7ZNXw6GK3x1tGwMWeTs1hQDHhO\nrjS+E3bV2jC4EIvLLBxCNCbhtmQwlGUj7ZhgHM8CgYEA14UGpWpOrW8/D086LpCu\nxC46GnJmfwiRPa6dJqpfO6V9JCigvV8y1i/ifR16KWP/w8HeZ1PMtgyCJd3JcaYz\nI+pus7JYEGxgzrPepKxN8eyDZu4nDCmnsaFfceQ02fnd2bhDhERh4oJqqRM966ax\n+K+p0MhoF/aqXuxgDF93T9kCgYEAw7TsfLFnGiJJGfS4NARP11UCmUPMcif4UztX\nIJVj7u4e9SJ6bvGfoDIy3Ra8duuUtDOzDzMaSkqa4B0f//z0uEew8uCsiRVeIUlx\nZ66l1aSm8JPkTTnRmJbGDXhUXtAIVWmmy94T+AurL/IKJMFH//RdNadvPrXcuUax\nUB5hd10CgYEA3JBuX4BriSk6Bii0kYniqFM/1tEgVelAP6DT6uePvzTFdSJ0dMQo\nzwgWNmm43CyoKW/rw8yIbtIQZKBfHudSNx72nSmnBKaf3QPB40xsCip90ZUTfZdn\nLJzX1t4clg1wNsN4mJDwiYM9k3rB/8EY1fh9gUYI84X6xFAHllkv0To=\n-----ENDRSAPRIVATEKEY-----\n","user_id":"6fc0d2cbbfab40b199874b97097e913d","name":"demo","fingerprint":"fc:47:b5:c3:7d:25:32:d5:d2:0c:19:f9:62:ac:8c:5a","type":"ssh"}}导入SSH密钥响应样例{"keypair":{"public_key":"ssh-rsaAAAAB3NzaC1yc2EAAAADAQABAAABAQDWNgTxQYeBzK9LYy4IakX7IsIl5j5zqR6BU2GJaEg3RK6dlS7rKFQhvy/V/1emK+GT/7P8up9VsMZ9Dx6PBOLow5p+2/wGsMlwDJpWiQ8zNnEMg+u/Ar/ZhYHAMyKEAOOJxIcnPoUgxfNdj/eiXV98AabsBdUA7QD30Og8F4Bmn2lii/WD9KbQQVjb7kbB3gNIJpGTUcoX73arorqkq/ppaLRmmwMJ7bTIGl8/0MWU2Dy+eTByOaDMb2htbB+j8ZXyEu7Oooy0NaSd+PNHv3PZ9OIVO7gd1lyoTRvCMK/F346+zmZtk5EASSOx5RifnSwk3NtugVjXs9GMJfFLBRibGenerated-by-Nova\\n\n","user_id":"6fc0d2cbbfab40b199874b97097e913d","type":"ssh","name":"demo1","fingerprint":"fc:47:b5:c3:7d:25:32:d5:d2:0c:19:f9:62:ac:8c:5a"}}
请参考。
根据指定的云服务器ID列表，删除云服务器。可以单个删除，也可以批量删除。
URI格式POST/v1/{project_id}/cloudservers/delete参数说明
参数说明[1]servers字段数据结构说明请求样例{"servers":[{"id":"616fb98f-46ca-475e-917e-2563e5a8cd19"}],"delete_publicip":false,"delete_volume":false}
请参考。
请参考。
根据SSH密钥的名称，删除指定SSH密钥。
URI格式DELETE/v2/{project_id}/os-keypairs/{keypair_name}参数说明
不涉及
不涉及
请参考。
查询云服务器信息列表。
URI格式GET/v2/{project_id}/servers{?changes-since,image,flavor,name,status,host,limit,marker,not-tags}参数说明以下列表为查询云服务器时可选的查询检索参数
不涉及
要素说明[1]servers字段数据结构说明[2]links字段数据结构说明响应样例{"servers":[{"id":"616fb98f-46ca-475e-917e-2563e5a8cd19","links":[{"href":"http://openstack.example.com/v2/openstack/servers/616fb98f-46ca-475e-917e-2563e5a8cd19","rel":"self"},{"href":"http://openstack.example.com/openstack/servers/616fb98f-46ca-475e-917e-2563e5a8cd19","rel":"bookmark"}],"name":"new-server-test"}]}
请参考。
查询云服务器详情信息列表。
URI格式GET/v2/{project_id}/servers/detail{?changes-since,image,flavor,name,status,host,limit,marker,not-tags}参数说明以下列表为查询云服务器时可选的查询检索参数
不涉及
要素说明[1]servers字段数据结构说明[2]flavor字段数据结构说明[3]addresses字段数据结构说明[4]servers_links、links字段数据结构说明[5]<emid="ZH-CN_TOPIC_0020212689__i55823163164549">虚拟私有云ID</em>字段数据结构说明响应样例{"servers":[{"addresses":{"68269e6e-4a27-441b-8029-35373ad50bd9":[{"addr":"192.168.0.3","version":4}]},"created":"2012-09-07T16:56:37Z","flavor":{"id":"1","links":[{"href":"http://openstack.example.com/openstack/flavors/1","rel":"bookmark"}]},"hostId":"16d193736a5cfdb60c697ca27ad071d6126fa13baeb670fc9d10645e","id":"05184ba3-00ba-4fbc-b7a2-03b62b884931","image":"","links":[{"href":"http://openstack.example.com/v2/openstack/servers/05184ba3-00ba-4fbc-b7a2-03b62b884931","rel":"self"},{"href":"http://openstack.example.com/openstack/servers/05184ba3-00ba-4fbc-b7a2-03b62b884931","rel":"bookmark"}],"metadata":{},"name":"new-server-test","progress":0,"status":"ACTIVE","tenant_id":"openstack","updated":"2012-09-07T16:56:37Z","user_id":"fake"}]}
请参考。
根据云服务器ID，查询云服务器的详细信息。
URI格式GET/v2/{project_id}/servers/{server_id}参数说明
不涉及
要素说明响应样例{"server":{"addresses":{"68269e6e-4a27-441b-8029-35373ad50bd9":[{"addr":"192.168.0.3","version":4}]},"created":"2012-08-20T21:11:09Z","flavor":{"id":"1","links":[{"href":"http://openstack.example.com/openstack/flavors/1","rel":"bookmark"}]},"hostId":"65201c14a29663e06d0748e561207d998b343e1d164bfa0aafa9c45d","id":"893c7791-f1df-4c3d-8383-3caae9656c62","image":"","links":[{"href":"http://openstack.example.com/v2/openstack/servers/893c7791-f1df-4c3d-8383-3caae9656c62","rel":"self"},{"href":"http://openstack.example.com/openstack/servers/893c7791-f1df-4c3d-8383-3caae9656c62","rel":"bookmark"}],"metadata":{},"name":"new-server-test","progress":0,"status":"ACTIVE","tenant_id":"openstack","updated":"2012-08-20T21:11:09Z","user_id":"fake"}}
请参考。
修改云服务器信息，目前只支持修改云服务器名称。
URI格式PUT/v2/{project_id}/servers/{server_id}参数说明
参数说明[1]server字段数据结构说明请求样例{"server":{"name":"new-server-test"}}
要素说明响应样例{"server":{"accessIPv4":"","accessIPv6":"","addresses":{"private":[{"addr":"192.168.0.3","version":4}]},"created":"2012-08-20T21:11:09Z","flavor":{"id":"1","links":[{"href":"http://openstack.example.com/openstack/flavors/1","rel":"bookmark"}]},"hostId":"65201c14a29663e06d0748e561207d998b343e1d164bfa0aafa9c45d","id":"893c7791-f1df-4c3d-8383-3caae9656c62","image":"","links":[{"href":"http://openstack.example.com/v2/openstack/servers/893c7791-f1df-4c3d-8383-3caae9656c62","rel":"self"},{"href":"http://openstack.example.com/openstack/servers/893c7791-f1df-4c3d-8383-3caae9656c62","rel":"bookmark"}],"metadata":{"MyServerName":"Apache1"},"name":"new-server-test","progress":0,"status":"ACTIVE","tenant_id":"openstack","updated":"2012-08-20T21:11:09Z","user_id":"fake"}}
请参考。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0020805988__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0020805988__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0020805992__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0020805992__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
正常响应要素说明异常响应要素说明响应样例正常响应：{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b",}异常响应：{"error":{"message":"","code":XXX}}
正常异常
正常异常
网络相关服务API，请参考《虚拟私有云接口参考》。
本节定义了弹性云服务器服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性云服务器服务产生的监控指标和告警信息。
SYS.ECS
查询Job的执行状态。对于创建云服务器、删除云服务器、云服务器批量操作和网卡操作等异步API，命令下发后，会返回job_id，通过job_id可以查询任务的执行状态。如何获取job_id，请参考。
URI格式GET/v1/{project_id}/jobs/{job_id}参数说明
不涉及
参数说明[1]entities字段数据结构说明:[2]sub_jobs字段数据结构说明:[3]entities字段数据结构说明:响应样例{"status":"SUCCESS","entities":{"sub_jobs_total":1,"sub_jobs":[{"status":"SUCCESS","entities":{"server_id":"bae51750-0089-41a1-9b18-5c777978ff6d"},"job_id":"2c9eb2c5544cbf6101544f0635672b60","job_type":"createSingleServer","begin_time":"2016-04-25T20:04:47.591Z","end_time":"2016-04-25T20:08:21.328Z","error_code":null,"fail_reason":null}]},"job_id":"2c9eb2c5544cbf6101544f0602af2b4f","job_type":"createServer","begin_time":"2016-04-25T20:04:34.604Z","end_time":"2016-04-25T20:08:41.593Z","error_code":null,"fail_reason":null}
请参考。
把磁盘挂载到弹性云服务器上。
URI格式POST/v1/{project_id}/cloudservers/{server_id}/attachvolume参数说明
参数说明请求样例{"volumeAttachment":{"volumeId":"a26887c6-c47b-4654-abb5-dfadf7d3f803","device":"/dev/sda"}}
请参考。
请参考。
从弹性云服务器中卸载磁盘。
URI格式DELETE/v1/{project_id}/cloudservers/{server_id}/detachvolume/{volume_id}参数说明
不涉及。
请参考。
请参考。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024492784__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024492784__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0024492784__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024492784__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
本接口用于注册FPGA镜像。FPGA镜像实际是指用户开发的FPGA逻辑文件“ul.bin”，该逻辑文件存放在OBS桶中。
不涉及
不涉及
请参考。
本接口用于提供FPGA镜像与创建弹性云服务器所使用的镜像之间的关联映射关系。
不涉及
不涉及
无
无
请参考。
本接口用于删除FPGA镜像。
不涉及
不涉及
请参考。
本接口用于查询租户下的FPGA详情列表。
不涉及
不涉及
page和size的参数值均存在时，分页查询功能才会生效。如果只存在一个，系统会显示参数非法的错误。
请参考。
为弹性云服务器添加安全组。
不涉及
建议最多为弹性云服务器添加5个安全组。
不涉及
请参考。
移除弹性云服务器中的安全组。
不涉及
removeSecurityGroup参数信息
不涉及
请参考。
给负载均衡器下创建监听器，用于监听后端云服务器的状态。
URI格式POST/v1.0/{tenant_id}/elbaas/listeners参数说明
要素说明响应样例{"update_time":"2015-09-1507:41:17","backend_port":80,"tcp_draining":true,"id":"248425d7b97dc26920eb23720115e068","backend_protocol":"HTTP","sticky_session_type":"insert","description":"","loadbalancer_id":"0b07acf06d243925bc24a0ac7445267a","create_time":"2015-09-1507:41:17","status":"ACTIVE","protocol":"TCP","port":88,"cookie_timeout":100,"admin_state_up":true,"session_sticky":true,"lb_algorithm":"roundrobin","name":"listener1","tcp_draining":true,"tcp_draining_timeout":5}
正常200异常
删除监听器。
URI格式DELETE/v1.0/{tenant_id}/elbaas/listeners/{listener_id}参数说明
请求样例无
要素说明无响应样例无
正常204异常
修改监听器的信息，目前支持修改名称、描述、管理状态。
URI格式PUT/v1.0/{tenant_id}/elbaas/listeners/{listener_id}参数说明
要素说明响应样例{"update_time":"2016-12-0107:12:59","backend_port":9090,"id":"a824584fb3ba4d39ba0cf372c7cbbb67","backend_protocol":"TCP","sticky_session_type":null,"certificate_id":null,"description":"","loadbalancer_id":"f54c65b1b5dd4a4f95b71b44796ac013","create_time":"2016-12-0107:12:43","admin_state_up":false,"status":"ACTIVE","protocol":"TCP","cookie_timeout":100,"port":9092,"tcp_draining":true,"tcp_timeout":1,"lb_algorithm":"roundrobin","healthcheck_id":null,"session_sticky":true,"tcp_draining_timeout":5,"name":"lis"}
正常200异常
查询监听器的详细信息。
URI格式GET/v1.0/{tenant_id}/elbaas/listeners/{listener_id}参数说明
请求样例无
要素说明响应样例{"update_time":"2015-09-1507:41:17","backend_port":80,"id":"248425d7b97dc26920eb23720115e068","backend_protocol":"TCP","sticky_session_type":"insert","description":"","loadbalancer_id":"0b07acf06d243925bc24a0ac7445267a","create_time":"2015-09-1507:41:17","status":"ACTIVE","protocol":"TCP","port":88,"cookie_timeout":100,"admin_state_up":true,"member_number":0,"healthcheck_id":null,"session_sticky":true,"lb_algorithm":"roundrobin","name":"listener1","tcp_draining":true,"tcp_draining_timeout":5}{"update_time":"2016-12-0107:12:59","backend_port":9090,"id":"a824584fb3ba4d39ba0cf372c7cbbb67","backend_protocol":"TCP","sticky_session_type":null,"certificate_id":null,"description":"","loadbalancer_id":"f54c65b1b5dd4a4f95b71b44796ac013","lb_algorithm":"roundrobin","create_time":"2016-12-0107:12:43","admin_state_up":false,"status":"ACTIVE","protocol":"TCP","cookie_timeout":100,"port":9092,"tcp_draining":1,"tcp_timeout":1,"member_number":0,"healthcheck_id":null,"session_sticky":true,"tcp_draining_timeout":5,"name":"lis"}
正常200异常
查询监听器列表信息。
URI格式GET/v1.0/{tenant_id}/elbaas/listeners?loadbalancer_id={loadbalancer_id}说明：可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持除update_time、create_time、admin_state_up、session_sticky和member_number之外所有响应要素过滤。参数说明
请求样例无
要素说明响应样例[{"update_time":"2016-12-0107:12:59","backend_port":9090,"id":"a824584fb3ba4d39ba0cf372c7cbbb67","backend_protocol":"TCP","sticky_session_type":null,"certificate_id":null,"description":"","loadbalancer_id":"f54c65b1b5dd4a4f95b71b44796ac013","lb_algorithm":"roundrobin","create_time":"2016-12-0107:12:43","admin_state_up":false,"status":"ACTIVE","protocol":"TCP","cookie_timeout":100,"port":9092,"tcp_draining":true,"tcp_timeout":1,"member_number":0,"healthcheck_id":null,"session_sticky":true,"tcp_draining_timeout":5,"name":"lis"},{"update_time":"2016-12-0107:11:49","backend_port":9090,"id":"4818300858fc43e0a4d843ce74ee83a4","backend_protocol":"HTTP","sticky_session_type":"insert","certificate_id":null,"description":"","loadbalancer_id":"f54c65b1b5dd4a4f95b71b44796ac013","lb_algorithm":"roundrobin","create_time":"2016-12-0107:11:30","admin_state_up":false,"status":"ACTIVE","protocol":"HTTP","cookie_timeout":100,"port":9091,"tcp_draining":true,"tcp_timeout":null,"member_number":0,"healthcheck_id":null,"session_sticky":true,"tcp_draining_timeout":5,"name":"lis"}]
正常200异常
为后端云服务器添加健康检查配置。
URI格式POST/v1.0/{tenant_id}/elbaas/healthcheck参数说明
要素说明响应样例{"healthcheck_interval":<emid="ZH-CN_TOPIC_0020100164__i50252669133237">5</em>,"listener_id":<emid="ZH-CN_TOPIC_0020100164__i20794760133241">"3ce8c4429478a5eb6ef4930de2d75b28"</em>,"id":<emid="ZH-CN_TOPIC_0020100164__i64630628133244">"134e5ea962327c6a574b83e6e7f31f35"</em>,"healthcheck_protocol":<emid="ZH-CN_TOPIC_0020100164__i32242947133247">"HTTP"</em>,"unhealthy_threshold":<emid="ZH-CN_TOPIC_0020100164__i50202817133250">3</em>,"update_time":<emid="ZH-CN_TOPIC_0020100164__i36752769133253">"2015-12-2503:57:23"</em>,"create_time":<emid="ZH-CN_TOPIC_0020100164__i36527231133256">"2015-12-2503:57:23"</em>,"healthcheck_connect_port":<emid="ZH-CN_TOPIC_0020100164__i4226995013330">80</em>,"healthcheck_timeout":<emid="ZH-CN_TOPIC_0020100164__i5515518913333">10</em>,"healthcheck_uri":<emid="ZH-CN_TOPIC_0020100164__i206482013337">"\/"</em>,"healthy_threshold":<emid="ZH-CN_TOPIC_0020100164__i24269200105530">3</em>}
正常200异常
删除健康检查。
URI格式DELETE/v1.0/elbaas/healthcheck/{healthcheck_id}参数说明
请求样例无
要素说明无响应样例无
正常204异常
修改健康检查信息。
URI格式PUT/v1.0/{tenant_id}/elbaas/healthcheck/{healthcheck_id}参数说明
请求样例{"healthcheck_connect_port":88,"healthcheck_interval":5,"healthcheck_protocol":"HTTP","healthcheck_timeout":10,"healthcheck_uri":"/","healthy_threshold":3,"unhealthy_threshold":2}
要素说明响应样例{"healthcheck_interval":5,"listener_id":"3ce8c4429478a5eb6ef4930de2d75b28","id":"134e5ea962327c6a574b83e6e7f31f35","healthcheck_protocol":"HTTP","unhealthy_threshold":2,"update_time":"2015-12-2503:57:23","create_time":"2015-12-2503:57:23","healthcheck_connect_port":88,"healthcheck_timeout":10,"healthcheck_uri":"/","healthy_threshold":3}
正常200异常
查询健康检查详细信息。
URI格式GET/v1.0/{tenant_id}/elbaas/healthcheck/{healthcheck_id}参数说明
请求样例无
要素说明响应样例{"healthcheck_interval":5,"listener_id":"3ce8c4429478a5eb6ef4930de2d75b28","id":"134e5ea962327c6a574b83e6e7f31f35","healthcheck_protocol":"HTTP","unhealthy_threshold":2,"update_time":"2015-12-2503:57:23","create_time":"2015-12-2503:57:23","healthcheck_connect_port":88,"healthcheck_timeout":10,"healthcheck_uri":"/","healthy_threshold":3}
正常200异常
给指定负载均衡器下的监听器里添加被监听的后端云服务器。支持同时添加多个后端云服务器。
URI格式POST/v1.0/{tenant_id}/elbaas/listeners/{listener_id}/members参数说明
要素说明响应样例{"uri":"/v1/55300f3c8f764c06b1a32e2302edc305/jobs/4010b39b4fd3d5ff014fd3ec3ed8002d","job_id":"4010b39b4fd3d5ff014fd3ec3ed8002d"}
正常200异常
将后端云服务器从监听器中移除，停止对该云服务器的监听。支持同时移除多个后端云服务器。
URI格式POST/v1.0/{tenant_id}/elbaas/listeners/{listener_id}/members/action参数说明removeMember字段数据结构说明:
要素说明响应样例{"uri":"/v1/55300f3c8f764c06b1a32e2302edc305/jobs/4010b39b4fd3d5ff014fd3f160fd006c","job_id":"4010b39b4fd3d5ff014fd3f160fd006c"}
正常200异常
查询指定监听器下后端云服务器列表。
URI格式GET/v1.0/{tenant_id}/elbaas/listeners/{listener_id}/members?limit=10&amp;marker=0可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持除listeners、server_name、update_time和create_time之外所有响应要素过滤。参数说明
请求样例无
要素说明listeners字段数据结构说明:响应样例[{"server_address":"172.16.0.16","id":"4ac8777333bc20777147ab160ea61baf","status":"ACTIVE","address":"100.64.27.96","listeners":[{"id":"65093734fb966b3d70f6af26cc63e125"},{"id":"a659fe780a542e1adf204db767a021a3"}],"update_time":"2015-12-2810:35:51","create_time":"2015-12-2810:35:50","server_name":null,"server_id":"97444148-7afb-47cc-b4a3-6e1c94d1ade4","health_status":"NORMAL"},{"server_address":"172.16.0.15","id":"d8a21f107a19d7bd1d05a1f764eb623a","status":"ACTIVE","address":"100.64.27.95","listeners":[{"id":"65093734fb966b3d70f6af26cc63e125"},{"id":"a659fe780a542e1adf204db767a021a3"}],"update_time":"2015-12-2810:35:51","create_time":"2015-12-2810:35:50","server_name":null,"server_id":"05b731db-d457-41dc-a824-862daba91a59","health_status":"ABNORMAL"}]
正常200异常
查询负载均衡器的配额。
URI格式GET/v1.0/{tenant_id}/elbaas/quotas参数说明
请求样例无
要素说明quotas字段数据结构说明:resources字段数据结构说明:响应样例{"quotas":{"resources":[{"type":"elb","used":2,"quota":5,"max":100,"min":1},{"type":"listener","quota":5,"max":200,"min":1}]}}说明：监听器的"used"字段暂不支持，返回空字符串。
正常200异常
创建负载均衡器。
URI格式POST/v1.0/{tenant_id}/elbaas/loadbalancers参数说明
请求样例1{"name":"loadbalancer1","description":"simplelb","vpc_id":"f54a3ffd-7a55-4568-9e3d-f0ff2d46a107","bandwidth":200,"type":"External","admin_state_up":true}请求样例2{"name":"loadbalancer1","description":"simplelb","vpc_id":"f54a3ffd-7a55-4568-9e3d-f0ff2d46a107","vip_address":192.144.164.74,"type":"External","admin_state_up":true}
要素说明响应样例{"uri":"/v1/73cd9140bec7427ab9952b4ed75924e0/jobs/4010b39b4fbb4645014fcfc8f2d178d1","job_id":"4010b39b4fbb4645014fcfc8f2d178d1"}
正常200异常
删除负载均衡器。
URI格式DELETE/v1.0/{tenant_id}/elbaas/loadbalancers/{loadbalancer_id}参数说明
请求样例无
要素说明响应样例{"uri":"/v1/73cd9140bec7427ab9952b4ed75924e0/jobs/4010b39c4fbb4649014fcfd2ab7903b0","job_id":"4010b39c4fbb4649014fcfd2ab7903b0"}
正常200异常
修改负载均衡器，名称、描述、带宽和管理状态可修改。
URI格式PUT/v1.0/{tenant_id}/elbaas/loadbalancers/{loadbalancer_id}参数说明
要素说明响应样例{"uri":"/v1/73cd9140bec7427ab9952b4ed75924e0/jobs/4010b39d4fbb4645014fcfddf4b32d15","job_id":"4010b39d4fbb4645014fcfddf4b32d15"}
正常200异常
查询指定负载均衡器的详细信息。
URI格式GET/v1.0/{tenant_id}/elbaas/loadbalancers/{loadbalancer_id}参数说明
请求样例无参数说明无
要素说明响应样例{"vip_address":"192.144.62.114","update_time":"2015-09-1402:34:32","create_time":"2015-09-1402:34:32","id":"0b07acf06d243925bc24a0ac7445267a","status":"ACTIVE","bandwidth":1,"security_group_id":null,"vpc_id":"f54a3ffd-7a55-4568-9e3d-f0ff2d46a107","admin_state_up":1,"vip_subnet_id":null,"type":"External","name":"MY_ELB","description":null}
正常200异常
查询某租户下所有的负载均衡器的信息。
URI格式GET/v1.0/{tenant_id}/elbaas/loadbalancers说明：可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合。支持响应要素loadbalancers内部除update_time和create_time之外所有要素过滤。参数说明
请求样例无
要素说明loadbalancers字段数据结构说明:响应样例{"loadbalancers":[{"vip_address":"192.144.62.114","update_time":"2015-09-1402:34:32","create_time":"2015-09-1402:34:32","id":"0b07acf06d243925bc24a0ac7445267a","status":"ACTIVE","bandwidth":1,"security_group_id":null,"vpc_id":"f54a3ffd-7a55-4568-9e3d-f0ff2d46a107","admin_state_up":1,"vip_subnet_id":null,"type":"External","name":"MY_ELB","description":null}],"instance_num":"1"}
正常200异常
主要用于异步接口执行情况。
URI格式GET/v1.0/{tenant_id}/jobs/{job_id}参数说明
请求样例无
要素说明响应样例{"status":<emid="ZH-CN_TOPIC_0020241359__i2311022515614">"RUNNING"</em>,"entities":{"elb_id":<emid="ZH-CN_TOPIC_0020241359__i666543715614">"ea3e5715b68850a747ec41f335625c08"</em>},"job_id":<emid="ZH-CN_TOPIC_0020241359__i24674804133840">"4010b39b4fd3d5ff014fd943bac41619"</em>,"job_type":<emid="ZH-CN_TOPIC_0020241359__i302950415614">"deleteELB"</em>,"begin_time":<emid="ZH-CN_TOPIC_0020241359__i369652133844">"2015-09-17T03:05:38.756Z"</em>,"end_time":<emid="ZH-CN_TOPIC_0020241359__i5869549133848">""</em>,"error_code":<emid="ZH-CN_TOPIC_0020241359__i39489289133852">null</em>,"fail_reason":<emid="ZH-CN_TOPIC_0020241359__i1235293515614">null</em>}
正常200异常
API调用发生错误时，会有错误结构体返回，该小节主要是对错误结构的解释。
本节定义了弹性负载均衡服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索弹性负载均衡服务上报的监控指标以及产生告警信息。
SYS.ELB
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0022480178__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0022480178__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0022480182__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0022480182__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024492798__zh-cn_topic_0024478020_i2588432012249">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024492798__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0024492798__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024492798__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
为HTTPS协议创建证书。
URI格式POST/v1.0/{tenant_id}/elbaas/certificate参数说明
请求样例{"name":"cert-bky","description":"certificate","certificate":"-----BEGINCERTIFICATE-----\nMIIDXTCCAkWgAwIBAgIJANoPUy2NktS6MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV\nBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX\naWRnaXRzIFB0eSBMdGQwHhcNMTYwNjIyMDMyOTU5WhcNMTkwNjIyMDMyOTU5WjBF\nMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50\nZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\nCgKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP64DjDPny9\n+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQhIOIaP1Y\nNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcsS5v3kw88\n9gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39cHX/NpIHC\nHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTams0ThvSlZ\no6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABo1AwTjAdBgNVHQ4EFgQUlXhcABza\n2SdXPYpp8RkWvKblCNIwHwYDVR0jBBgwFoAUlXhcABza2SdXPYpp8RkWvKblCNIw\nDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOCAQEAHmsFDOwbkD45PF4oYdX+\ncCoEGNjsLfi0spJ6b1CHQMEy2tPqYZJh8nGuUtB9Zd7+rbwm6NS38eGQVA5vbWZH\nMk+uq5un7YFwkM+fdjgCxbe/3PMkk/ZDYPHhpc1W8e/+aZVUBB2EpfzBC6tcP/DV\nSsjq+tG+JZIVADMxvEqVIF94JMpuY7o6U74SnUUrAi0h9GkWmeYh/Ucb3PLMe5sF\noZriRdAKc96KB0eUphfWZNtptOCqV6qtYqZZ/UCotp99xzrDkf8jGkm/iBljxb+v\n0NTg8JwfmykCj63YhTKpHf0+N/EK5yX1KUYtlkLaf8OPlsp/1lqAL6CdnydGEd/s\nAA==\n-----ENDCERTIFICATE-----","private_key":"-----BEGINRSAPRIVATEKEY-----\nMIIEpAIBAAKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP6\n4DjDPny9+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQ\nhIOIaP1YNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcs\nS5v3kw889gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39c\nHX/NpIHCHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTam\ns0ThvSlZo6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABAoIBACV47rpHuxEza24O\nevbbFI9OQIcs8xA26dN1j/+HpAkzinB4o5V+XOWWZDQwbYu58hYE4NYjqf6AxHk3\nOCqAA9yKH2NXhSEyLkP7/rKDF7geZg/YtwNiR/NXTJbNXl4p8VTaVvAq3yey188x\nJCMrd1yWSsOWD2Qw7iaIBpqQIzdEovPE4CG6GmaIRSuqYuoCfbVTFa6YST7jmOTv\nEpG+x6yJZzJ4o0vvfKbKfvPmQizjL+3nAW9g+kgXJmA1xTujiky7bzm2sLK2Slrx\n5rY73mXMElseSlhkYzWwyRmC6M+rWALXqOhVDgIGbaBV4IOzuyH/CUt0wy3ZMIpv\nMOWMNoECgYEA1LHsepCmwjlDF3yf/OztCr/DYqM4HjAY6FTmH+xz1Zjd5R1XOq60\nYFRkhs/e2D6M/gSX6hMqS9sCkg25yRJk3CsPeoS9v5MoiZQA8XlQNovcpWUI2DCm\naZRIsdovFgIqMHYh/Y4CYouee7Nz7foICzO9svrYrbOIVmMwDVJ8vzMCgYEA0ebg\nm0lCuOunyxaSBqOv4Q4sk7Ix0702dIrW0tsUJyU+xuXYH1P/0m+t4/KUU2cNwsg3\njiNzQR9QKvF8yTB5TB4Ye/9dKlu+BEOskvCpuErxc6iVJ+TZOrQDDPNcq56qez5b\nvv9EDdgzpjkjO+hS1j3kYOuG11hrP4Pox4PijqECgYEAz6RTZORKqFoWsZss5VK3\np0LGkEkfw/jYmBgqAQhpnSD7n20hd1yPI2vAKAxPVXTbWDFLzWygYiWRQNy9fxrB\n9F7lYYqtY5VagdVHhnYUZOvtoFoeZFA6ZeAph9elGCtM3Lq3PD2i/mmncsQibTUn\nHSiKDWzuk8UtWIjEpHze5BkCgYEAifD9eG+bzqTnn1qU2pIl2nQTLXj0r97v84Tu\niqF4zAT5DYMtFeGBBI1qLJxVh7342CH2CI4ZhxmJ+L68sAcQH8rDcnGui1DBPlIv\nDl3kW3280bJfW1lUvPRh8NfZ9dsO1HF1n75nveVwg/OWyR7zmWIRPPRrqAeua45H\nox5z/CECgYBqwlEBjue8oOkVVu/lKi6fo6jr+0u25K9dp9azHYwE0KNHX0MwRALw\nWbPgcjge23sfhbeqVvHo0JYBdRsk/OBuW73/9Sb5E+6auDoubCjC0cAIvs23MPju\nsMvKak4mQkI19foRXBydB/DDkK26iei/l0xoygrw50v2HErsQ7JcHw==\n-----ENDRSAPRIVATEKEY-----"}
要素说明响应样例{"name":<emid="ZH-CN_TOPIC_0032340347__i12817326165718">"cert-bky",</em>"description":<emid="ZH-CN_TOPIC_0032340347__i41623002165451">"certificate",</em>"certificate":<emid="ZH-CN_TOPIC_0032340347__i21217771143329">"</em>-----BEGINCERTIFICATE-----\nMIIDXTCCAkWgAwIBAgIJANoPUy2NktS6MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV\nBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX\naWRnaXRzIFB0eSBMdGQwHhcNMTYwNjIyMDMyOTU5WhcNMTkwNjIyMDMyOTU5WjBF\nMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50\nZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\nCgKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP64DjDPny9\n+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQhIOIaP1Y\nNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcsS5v3kw88\n9gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39cHX/NpIHC\nHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTams0ThvSlZ\no6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABo1AwTjAdBgNVHQ4EFgQUlXhcABza\n2SdXPYpp8RkWvKblCNIwHwYDVR0jBBgwFoAUlXhcABza2SdXPYpp8RkWvKblCNIw\nDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOCAQEAHmsFDOwbkD45PF4oYdX+\ncCoEGNjsLfi0spJ6b1CHQMEy2tPqYZJh8nGuUtB9Zd7+rbwm6NS38eGQVA5vbWZH\nMk+uq5un7YFwkM+fdjgCxbe/3PMkk/ZDYPHhpc1W8e/+aZVUBB2EpfzBC6tcP/DV\nSsjq+tG+JZIVADMxvEqVIF94JMpuY7o6U74SnUUrAi0h9GkWmeYh/Ucb3PLMe5sF\noZriRdAKc96KB0eUphfWZNtptOCqV6qtYqZZ/UCotp99xzrDkf8jGkm/iBljxb+v\n0NTg8JwfmykCj63YhTKpHf0+N/EK5yX1KUYtlkLaf8OPlsp/1lqAL6CdnydGEd/s\nAA==\n-----ENDCERTIFICATE-----<emid="ZH-CN_TOPIC_0032340347__i40917871143329">",</em>"private_key":<emid="ZH-CN_TOPIC_0032340347__i48363813143536">"</em>-----BEGINRSAPRIVATEKEY-----\nMIIEpAIBAAKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP6\n4DjDPny9+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQ\nhIOIaP1YNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcs\nS5v3kw889gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39c\nHX/NpIHCHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTam\ns0ThvSlZo6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABAoIBACV47rpHuxEza24O\nevbbFI9OQIcs8xA26dN1j/+HpAkzinB4o5V+XOWWZDQwbYu58hYE4NYjqf6AxHk3\nOCqAA9yKH2NXhSEyLkP7/rKDF7geZg/YtwNiR/NXTJbNXl4p8VTaVvAq3yey188x\nJCMrd1yWSsOWD2Qw7iaIBpqQIzdEovPE4CG6GmaIRSuqYuoCfbVTFa6YST7jmOTv\nEpG+x6yJZzJ4o0vvfKbKfvPmQizjL+3nAW9g+kgXJmA1xTujiky7bzm2sLK2Slrx\n5rY73mXMElseSlhkYzWwyRmC6M+rWALXqOhVDgIGbaBV4IOzuyH/CUt0wy3ZMIpv\nMOWMNoECgYEA1LHsepCmwjlDF3yf/OztCr/DYqM4HjAY6FTmH+xz1Zjd5R1XOq60\nYFRkhs/e2D6M/gSX6hMqS9sCkg25yRJk3CsPeoS9v5MoiZQA8XlQNovcpWUI2DCm\naZRIsdovFgIqMHYh/Y4CYouee7Nz7foICzO9svrYrbOIVmMwDVJ8vzMCgYEA0ebg\nm0lCuOunyxaSBqOv4Q4sk7Ix0702dIrW0tsUJyU+xuXYH1P/0m+t4/KUU2cNwsg3\njiNzQR9QKvF8yTB5TB4Ye/9dKlu+BEOskvCpuErxc6iVJ+TZOrQDDPNcq56qez5b\nvv9EDdgzpjkjO+hS1j3kYOuG11hrP4Pox4PijqECgYEAz6RTZORKqFoWsZss5VK3\np0LGkEkfw/jYmBgqAQhpnSD7n20hd1yPI2vAKAxPVXTbWDFLzWygYiWRQNy9fxrB\n9F7lYYqtY5VagdVHhnYUZOvtoFoeZFA6ZeAph9elGCtM3Lq3PD2i/mmncsQibTUn\nHSiKDWzuk8UtWIjEpHze5BkCgYEAifD9eG+bzqTnn1qU2pIl2nQTLXj0r97v84Tu\niqF4zAT5DYMtFeGBBI1qLJxVh7342CH2CI4ZhxmJ+L68sAcQH8rDcnGui1DBPlIv\nDl3kW3280bJfW1lUvPRh8NfZ9dsO1HF1n75nveVwg/OWyR7zmWIRPPRrqAeua45H\nox5z/CECgYBqwlEBjue8oOkVVu/lKi6fo6jr+0u25K9dp9azHYwE0KNHX0MwRALw\nWbPgcjge23sfhbeqVvHo0JYBdRsk/OBuW73/9Sb5E+6auDoubCjC0cAIvs23MPju\nsMvKak4mQkI19foRXBydB/DDkK26iei/l0xoygrw50v2HErsQ7JcHw==\n-----ENDRSAPRIVATEKEY-----<emid="ZH-CN_TOPIC_0032340347__i25154818143536">",</em>"tenant_id":<emid="ZH-CN_TOPIC_0032340347__i64398375165638">"ed9edbc66b8b47c09f5d2fcd89430b33",</em>"id":<emid="ZH-CN_TOPIC_0032340347__i42923951165614">"5b8f908b5495452aa13beede0afc5d99",</em>"create_time":<emid="ZH-CN_TOPIC_0032340347__i10417956165542">"2016-06-2708:14:42",</em>"update_time":<emid="ZH-CN_TOPIC_0032340347__i13285477165547">"2016-06-2708:14:42"</em>}
正常200异常
删除证书。
URI格式DELETE/v1.0/{tenant_id}/elbaas/certificate/{certificate_id}参数说明
请求样例无
要素说明无响应样例无
正常204异常
仅支持修改证书的名称和描述。
URI格式PUT/v1.0/{tenant_id}/elbaas/certificate/{certificate_id}参数说明
请求样例{"name":"cert-bky","description":"certificate"}
要素说明响应样例{"name":"cert-bky","description":"certificate","certificate":"-----BEGINCERTIFICATE-----\nMIIDXTCCAkWgAwIBAgIJANoPUy2NktS6MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV\nBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX\naWRnaXRzIFB0eSBMdGQwHhcNMTYwNjIyMDMyOTU5WhcNMTkwNjIyMDMyOTU5WjBF\nMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50\nZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\nCgKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP64DjDPny9\n+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQhIOIaP1Y\nNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcsS5v3kw88\n9gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39cHX/NpIHC\nHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTams0ThvSlZ\no6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABo1AwTjAdBgNVHQ4EFgQUlXhcABza\n2SdXPYpp8RkWvKblCNIwHwYDVR0jBBgwFoAUlXhcABza2SdXPYpp8RkWvKblCNIw\nDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOCAQEAHmsFDOwbkD45PF4oYdX+\ncCoEGNjsLfi0spJ6b1CHQMEy2tPqYZJh8nGuUtB9Zd7+rbwm6NS38eGQVA5vbWZH\nMk+uq5un7YFwkM+fdjgCxbe/3PMkk/ZDYPHhpc1W8e/+aZVUBB2EpfzBC6tcP/DV\nSsjq+tG+JZIVADMxvEqVIF94JMpuY7o6U74SnUUrAi0h9GkWmeYh/Ucb3PLMe5sF\noZriRdAKc96KB0eUphfWZNtptOCqV6qtYqZZ/UCotp99xzrDkf8jGkm/iBljxb+v\n0NTg8JwfmykCj63YhTKpHf0+N/EK5yX1KUYtlkLaf8OPlsp/1lqAL6CdnydGEd/s\nAA==\n-----ENDCERTIFICATE-----","private_key":"-----BEGINRSAPRIVATEKEY-----\nMIIEpAIBAAKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP6\n4DjDPny9+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQ\nhIOIaP1YNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcs\nS5v3kw889gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39c\nHX/NpIHCHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTam\ns0ThvSlZo6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABAoIBACV47rpHuxEza24O\nevbbFI9OQIcs8xA26dN1j/+HpAkzinB4o5V+XOWWZDQwbYu58hYE4NYjqf6AxHk3\nOCqAA9yKH2NXhSEyLkP7/rKDF7geZg/YtwNiR/NXTJbNXl4p8VTaVvAq3yey188x\nJCMrd1yWSsOWD2Qw7iaIBpqQIzdEovPE4CG6GmaIRSuqYuoCfbVTFa6YST7jmOTv\nEpG+x6yJZzJ4o0vvfKbKfvPmQizjL+3nAW9g+kgXJmA1xTujiky7bzm2sLK2Slrx\n5rY73mXMElseSlhkYzWwyRmC6M+rWALXqOhVDgIGbaBV4IOzuyH/CUt0wy3ZMIpv\nMOWMNoECgYEA1LHsepCmwjlDF3yf/OztCr/DYqM4HjAY6FTmH+xz1Zjd5R1XOq60\nYFRkhs/e2D6M/gSX6hMqS9sCkg25yRJk3CsPeoS9v5MoiZQA8XlQNovcpWUI2DCm\naZRIsdovFgIqMHYh/Y4CYouee7Nz7foICzO9svrYrbOIVmMwDVJ8vzMCgYEA0ebg\nm0lCuOunyxaSBqOv4Q4sk7Ix0702dIrW0tsUJyU+xuXYH1P/0m+t4/KUU2cNwsg3\njiNzQR9QKvF8yTB5TB4Ye/9dKlu+BEOskvCpuErxc6iVJ+TZOrQDDPNcq56qez5b\nvv9EDdgzpjkjO+hS1j3kYOuG11hrP4Pox4PijqECgYEAz6RTZORKqFoWsZss5VK3\np0LGkEkfw/jYmBgqAQhpnSD7n20hd1yPI2vAKAxPVXTbWDFLzWygYiWRQNy9fxrB\n9F7lYYqtY5VagdVHhnYUZOvtoFoeZFA6ZeAph9elGCtM3Lq3PD2i/mmncsQibTUn\nHSiKDWzuk8UtWIjEpHze5BkCgYEAifD9eG+bzqTnn1qU2pIl2nQTLXj0r97v84Tu\niqF4zAT5DYMtFeGBBI1qLJxVh7342CH2CI4ZhxmJ+L68sAcQH8rDcnGui1DBPlIv\nDl3kW3280bJfW1lUvPRh8NfZ9dsO1HF1n75nveVwg/OWyR7zmWIRPPRrqAeua45H\nox5z/CECgYBqwlEBjue8oOkVVu/lKi6fo6jr+0u25K9dp9azHYwE0KNHX0MwRALw\nWbPgcjge23sfhbeqVvHo0JYBdRsk/OBuW73/9Sb5E+6auDoubCjC0cAIvs23MPju\nsMvKak4mQkI19foRXBydB/DDkK26iei/l0xoygrw50v2HErsQ7JcHw==\n-----ENDRSAPRIVATEKEY-----","id":"5b8f908b5495452aa13beede0afc5d99","create_time":"2016-06-2708:14:42","update_time":"2016-06-2708:14:42"}
正常200异常
查询证书列表。
URI格式GET/v1.0/{tenant_id}/elbaas/certificate参数说明
请求样例无
要素说明certificates字段数据结构说明:响应样例{"certificates":[{"name":"cert-bky","description":"certificate","certificate":"-----BEGINCERTIFICATE-----\nMIIDXTCCAkWgAwIBAgIJANoPUy2NktS6MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV\nBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX\naWRnaXRzIFB0eSBMdGQwHhcNMTYwNjIyMDMyOTU5WhcNMTkwNjIyMDMyOTU5WjBF\nMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50\nZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\nCgKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP64DjDPny9\n+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQhIOIaP1Y\nNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcsS5v3kw88\n9gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39cHX/NpIHC\nHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTams0ThvSlZ\no6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABo1AwTjAdBgNVHQ4EFgQUlXhcABza\n2SdXPYpp8RkWvKblCNIwHwYDVR0jBBgwFoAUlXhcABza2SdXPYpp8RkWvKblCNIw\nDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOCAQEAHmsFDOwbkD45PF4oYdX+\ncCoEGNjsLfi0spJ6b1CHQMEy2tPqYZJh8nGuUtB9Zd7+rbwm6NS38eGQVA5vbWZH\nMk+uq5un7YFwkM+fdjgCxbe/3PMkk/ZDYPHhpc1W8e/+aZVUBB2EpfzBC6tcP/DV\nSsjq+tG+JZIVADMxvEqVIF94JMpuY7o6U74SnUUrAi0h9GkWmeYh/Ucb3PLMe5sF\noZriRdAKc96KB0eUphfWZNtptOCqV6qtYqZZ/UCotp99xzrDkf8jGkm/iBljxb+v\n0NTg8JwfmykCj63YhTKpHf0+N/EK5yX1KUYtlkLaf8OPlsp/1lqAL6CdnydGEd/s\nAA==\n-----ENDCERTIFICATE-----","private_key":"-----BEGINRSAPRIVATEKEY-----\nMIIEpAIBAAKCAQEArmUUhzm5sxxVr/ku4+6cKqnKgZvDl+e/6CNCAq8YMZXTpJP6\n4DjDPny9+8s9MbFabEG3HqjHSKh3b/Ew3FXr8LFa9YuWuAi3W9ii29sZsOwmzIfQ\nhIOIaP1YNR50DDjbAGTaxzRhV40ZKSOCkaUTvl3do5d8ttD1VlF2r0w0DfclrVcs\nS5v3kw889gJ3s3hNkatfQiSt4qLNMehZ8Xofx58DIAOk/f3Vusj3372PsJwKX39c\nHX/NpIHCHKE8qaGCpDqv0daH766eJ065dqO9DuorXPaPT/nxw4PAccb9fByLrTam\ns0ThvSlZo6V3yvHR4KN7mmvbViEmWRy+9oiJEwIDAQABAoIBACV47rpHuxEza24O\nevbbFI9OQIcs8xA26dN1j/+HpAkzinB4o5V+XOWWZDQwbYu58hYE4NYjqf6AxHk3\nOCqAA9yKH2NXhSEyLkP7/rKDF7geZg/YtwNiR/NXTJbNXl4p8VTaVvAq3yey188x\nJCMrd1yWSsOWD2Qw7iaIBpqQIzdEovPE4CG6GmaIRSuqYuoCfbVTFa6YST7jmOTv\nEpG+x6yJZzJ4o0vvfKbKfvPmQizjL+3nAW9g+kgXJmA1xTujiky7bzm2sLK2Slrx\n5rY73mXMElseSlhkYzWwyRmC6M+rWALXqOhVDgIGbaBV4IOzuyH/CUt0wy3ZMIpv\nMOWMNoECgYEA1LHsepCmwjlDF3yf/OztCr/DYqM4HjAY6FTmH+xz1Zjd5R1XOq60\nYFRkhs/e2D6M/gSX6hMqS9sCkg25yRJk3CsPeoS9v5MoiZQA8XlQNovcpWUI2DCm\naZRIsdovFgIqMHYh/Y4CYouee7Nz7foICzO9svrYrbOIVmMwDVJ8vzMCgYEA0ebg\nm0lCuOunyxaSBqOv4Q4sk7Ix0702dIrW0tsUJyU+xuXYH1P/0m+t4/KUU2cNwsg3\njiNzQR9QKvF8yTB5TB4Ye/9dKlu+BEOskvCpuErxc6iVJ+TZOrQDDPNcq56qez5b\nvv9EDdgzpjkjO+hS1j3kYOuG11hrP4Pox4PijqECgYEAz6RTZORKqFoWsZss5VK3\np0LGkEkfw/jYmBgqAQhpnSD7n20hd1yPI2vAKAxPVXTbWDFLzWygYiWRQNy9fxrB\n9F7lYYqtY5VagdVHhnYUZOvtoFoeZFA6ZeAph9elGCtM3Lq3PD2i/mmncsQibTUn\nHSiKDWzuk8UtWIjEpHze5BkCgYEAifD9eG+bzqTnn1qU2pIl2nQTLXj0r97v84Tu\niqF4zAT5DYMtFeGBBI1qLJxVh7342CH2CI4ZhxmJ+L68sAcQH8rDcnGui1DBPlIv\nDl3kW3280bJfW1lUvPRh8NfZ9dsO1HF1n75nveVwg/OWyR7zmWIRPPRrqAeua45H\nox5z/CECgYBqwlEBjue8oOkVVu/lKi6fo6jr+0u25K9dp9azHYwE0KNHX0MwRALw\nWbPgcjge23sfhbeqVvHo0JYBdRsk/OBuW73/9Sb5E+6auDoubCjC0cAIvs23MPju\nsMvKak4mQkI19foRXBydB/DDkK26iei/l0xoygrw50v2HErsQ7JcHw==\n-----ENDRSAPRIVATEKEY-----","id":"5b8f908b5495452aa13beede0afc5d99","create_time":"2016-06-2708:14:42","update_time":"2016-06-2708:14:42"}],"instance_num":"1"}
正常200异常
查询支持的云硬盘类型。
URI格式GET/v2/{tenant_id}/types参数说明
无
要素说明响应样例{"volume_types":[{"extra_specs":{"volume_backend_name":"SAS","availability-zone":"az1.dc1"},"name":"SAS","qos_specs_id":null,"id":"6c81c680-df58-4512-81e7-ecf66d160638","is_public":true,"description":null},{"extra_specs":{"volume_backend_name":"SATA","availability-zone":"az1.dc1"},"name":"SATA","qos_specs_id":"585f29d6-7147-42e7-bfb8-ca214f640f6f","is_public":true,"id":"ea6e3c13-aac5-46e0-b280-745ed272e662","description":null},{"extra_specs":{"volume_backend_name":"SSD","availability-zone":"az1.dc1"},"name":"SSD","qos_specs_id":"39b0c29a-308b-4f86-b478-5d3d02a43837","is_public":true,"id":"6f2dee9e-82f0-4be3-ad89-bae605a3d24f","description":null}]}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询单个云硬盘类型的详细信息。
URI格式GET/v2/{tenant_id}/types/{type_id}参数说明
无
要素说明响应样例{"volume_type":{"extra_specs":{"volume_backend_name":"SATA","availability-zone":"az1.dc1"},"name":"SATA","qos_specs_id":null,"is_public":true,"id":"ea6e3c13-aac5-46e0-b280-745ed272e662","description":null}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询租户的详细配额。
URI格式GET/v2/{tenant_id}/os-quota-sets/{tenant_id}?usage=True参数说明
无
要素说明响应样例{"quota_set":{"gigabytes_SAS":{"reserved":0,"limit":-1,"in_use":21},"volumes_SATA":{"reserved":0,"limit":-1,"in_use":8},"gigabytes":{"reserved":0,"limit":42790,"in_use":2792},"backup_gigabytes":{"reserved":0,"limit":5120,"in_use":51},"snapshots_SAS":{"reserved":0,"limit":-1,"in_use":0},"volumes_SSD":{"reserved":0,"limit":-1,"in_use":28},"snapshots":{"reserved":0,"limit":10,"in_use":6},"id":"cd631140887d4b6e9c786b67a6dd4c02","volumes_SAS":{"reserved":0,"limit":-1,"in_use":2},"snapshots_SSD":{"reserved":0,"limit":-1,"in_use":0},"volumes":{"reserved":0,"limit":-1,"in_use":108},"gigabytes_SATA":{"reserved":0,"limit":-1,"in_use":168},"backups":{"reserved":0,"limit":100,"in_use":10},"gigabytes_SSD":{"reserved":0,"limit":-1,"in_use":1085},"snapshots_SATA":{"reserved":0,"limit":-1,"in_use":0}}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询云硬盘的元数据。
URI格式GET/v2/{tenant_id}/volumes/{volume_id}/metadata参数说明
无
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询所有的可用分区信息。
URI格式GET/v2/{tenant_id}/os-availability-zone参数说明
无
要素说明响应样例{"availabilityZoneInfo":[{"zoneState":{"available":true},"zoneName":"az1.dc1"}]}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
查询job的状态，可用于查询创建云硬盘，扩容云硬盘，删除云硬盘等API的执行状态。
URI格式GET/v1/{tenant_id}/jobs/{job_id}参数说明
无
要素说明响应样例{"status":"RUNNING","entities":{"volume_id":"bdf1bb37-f20f-4266-9a04-f43e0a127376"},"job_id":"4010a32d535527910153552b492c0002","job_type":"createVolume","begin_time":"2016-03-08T07:40:13.219Z","end_time":"","error_code":null,"fail_reason":null}或{"status":"SUCCESS","entities":{"sub_jobs":[{"status":"SUCCESS","entities":{"volume_id":"0b549095-4937-4849-8e4c-52aa027d64f7"},"job_id":"21917a8d52a19b040152a9f2f2e50041","job_type":"createVolume","begin_time":"2016-02-04T01:43:37.445Z","end_time":"2016-02-04T01:44:02.239Z","error_code":null,"fail_reason":null},{"status":"SUCCESS","entities":{"volume_id":"e7bca1a2-d3ed-434f-86f4-a1f11aa80072"},"job_id":"21917a8d52a19b040152a9f2f2f60042","job_type":"createVolume","begin_time":"2016-02-04T01:43:37.462Z","end_time":"2016-02-04T01:44:02.245Z","error_code":null,"fail_reason":null}]},"job_id":"21917a8d52a19b040152a9f2f1eb003e","job_type":"batchCreateVolume","begin_time":"2016-02-04T01:43:37.193Z","end_time":"2016-02-04T01:44:08.283Z","error_code":null,"fail_reason":null}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
创建一个或多个云硬盘。
URI格式POST/v2/{tenant_id}/cloudvolumes参数说明
参数说明说明：不支持同时使用“backup_id”、“snapshot_id”和“imageRef”这三个字段中的任意两个。metadata字段说明说明：<ulid="ZH-CN_TOPIC_0020235144__ul157155141073"><liid="ZH-CN_TOPIC_0020235144__li672755311017">如果是从快照创建云硬盘，则不支持传入“__system__encrypted”和“__system__cmkid”字段，创建出来的云硬盘与快照源云硬盘的加密属性一致。如果是从镜像创建云硬盘，则不支持传入“__system__encrypted”和“__system__cmkid”字段，创建出来的云硬盘与镜像的加密属性一致。如果是从快照创建云硬盘，则不支持传入“hw:passthrough”字段，创建出来的云硬盘的设备类型与快照源云硬盘保持一致。如果是从镜像创建云硬盘，则不支持传入“hw:passthrough”字段，创建出来的云硬盘的设备类型为VBD类型。请求样例{"volume":{"backup_id":null,"count":1,"availability_zone":"az1.dc1","description":"test_volume_1","size":120,"name":"test_volume_1","imageRef":null,"volume_type":"SSD","metadata":{"__system__encrypted":"0","__system__cmkid":null}}}
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b",}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
扩容一个云硬盘。
URI格式POST/v2/{tenant_id}/cloudvolumes/{volume_id}/action参数说明
参数说明请求样例{"os-extend":{"new_size":200}}
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b",}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
删除一个云硬盘。
URI格式DELETE/v2/{tenant_id}/cloudvolumes/{volume_id}参数说明
无
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b",}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
更新一个云硬盘的名称和描述。
URI格式PUT/v2/{tenant_id}/cloudvolumes/{volume_id}参数说明
参数说明请求样例{"volume":{"name":"test_volume","description":"test"}}
要素说明links字段说明attachments字段说明关于“volume_image_metadata”字段的详细说明，具体请参见《镜像服务接口参考》中的“查询镜像详情”章节。响应样例或
正常200异常
查询所有云硬盘的概要列表。
URI格式GET/v2/{tenant_id}/cloudvolumes参数说明Requestfilter参数
无
要素说明links字段说明响应样例{"volumes":[{"id":"e6cf4401-15f6-44bd-ae2b-cff4dc9523e6","links":[{"href":"https://volume.az0.dc1.domainname.com/v2/cd631140887d4b6e9c786b67a6dd4c02/volumes/e6cf4401-15f6-44bd-ae2b-cff4dc9523e6","rel":"self"},{"href":"https://volume.az0.dc1.domainname.com/cd631140887d4b6e9c786b67a6dd4c02/volumes/e6cf4401-15f6-44bd-ae2b-cff4dc9523e6","rel":"bookmark"}],"name":"hallo5"},{"id":"4c5e8203-f70e-4717-90cd-4a8f636888d1","links":[{"href":"https://volume.az0.dc1.domainname.com/v2/cd631140887d4b6e9c786b67a6dd4c02/volumes/4c5e8203-f70e-4717-90cd-4a8f636888d1","rel":"self"},{"href":"https://volume.az0.dc1.domainname.com/cd631140887d4b6e9c786b67a6dd4c02/volumes/4c5e8203-f70e-4717-90cd-4a8f636888d1","rel":"bookmark"}],"name":"hallo4"}]}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
查询所有云硬盘的详细信息。
URI格式GET/v2/{tenant_id}/cloudvolumes/detail参数说明Requestfilter参数
无
要素说明links字段说明attachments字段说明关于“volume_image_metadata”字段的详细说明，具体请参见《镜像服务接口参考》中的“查询镜像详情”章节。响应样例{"volumes":[{"id":"c6ccc84e-feff-4114-ad83-42a11c0434e2","links":[{"href":"https://volume.az0.dc1.domainname.com/v2/9e179fd535e44f19a9dabb36deadf47e/volumes/c6ccc84e-feff-4114-ad83-42a11c0434e2","rel":"self"},{"href":"https://volume.az0.dc1.domainname.com/9e179fd535e44f19a9dabb36deadf47e/volumes/c6ccc84e-feff-4114-ad83-42a11c0434e2","rel":"bookmark"}],"name":"test_volume","status":"available","attachments":[],"description":null,"shareable":"false","size":100,"metadata":null,"bootable":"false","availability_zone":"az1.dc1","os-vol-host-attr:host":"az1.dc1#sata","source_volid":null,"snapshot_id":null,"created_at":"2015-09-17T06:37:16.275659","volume_type":"SATA","os-vol-tenant-attr:tenant_id":"9e179fd535e44f19a9dabb36deadf47e","volume_image_metadata":null},{"id":"a05d9342-bf27-44a6-8ab8-33afc7545d19","links":[{"href":"https://volume.az0.dc1.domainname.com/v2/9e179fd535e44f19a9dabb36deadf47e/volumes/a05d9342-bf27-44a6-8ab8-33afc7545d19","rel":"self"},{"href":"https://volume.az0.dc1.domainname.com/9e179fd535e44f19a9dabb36deadf47e/volumes/a05d9342-bf27-44a6-8ab8-33afc7545d19","rel":"bookmark"}],"name":"test_volume","status":"available","attachments":[],"description":null,"shareable":"false","size":100,"metadata":null,"bootable":"false","availability_zone":"az1.dc1","os-vol-host-attr:host":"az1.dc1#sata","source_volid":null,"snapshot_id":null,"created_at":"2015-09-17T06:37:16.192556","volume_type":"SATA","os-vol-tenant-attr:tenant_id":"9e179fd535e44f19a9dabb36deadf47e","volume_image_metadata":null}]}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
查询单个云硬盘的详细信息。
URI格式GET/v2/{tenant_id}/volumes/{volume_id}参数说明
无
要素说明links字段说明attachments字段说明关于“volume_image_metadata”字段的详细说明，具体请参见《镜像服务接口参考》中的“查询镜像详情”章节。响应样例{"volume":{"attachments":[],"links":[{"href":"https://volume.az0.dc1.domainname.com/v2/40acc331ac784f34842ba4f08ff2be48/volumes/591ac654-26d8-41be-bb77-4f90699d2d41","rel":"self"},{"href":"https://volume.az0.dc1.domainname.com/40acc331ac784f34842ba4f08ff2be48/volumes/591ac654-26d8-41be-bb77-4f90699d2d41","rel":"bookmark"}],"availability_zone":"az1.dc1","os-vol-host-attr:host":"az1.dc1#SSD","encrypted":false,"multiattach":true,"updated_at":"2016-02-03T02:19:29.895237","os-volume-replication:extended_status":null,"replication_status":"disabled","snapshot_id":null,"id":"591ac654-26d8-41be-bb77-4f90699d2d41","size":40,"user_id":"fd03ee73295e45478d88e15263d2ee4e","os-vol-tenant-attr:tenant_id":"40acc331ac784f34842ba4f08ff2be48","volume_image_metadata":null,"os-vol-mig-status-attr:migstat":null,"metadata":{"__openstack_region_name":"az1.dc1","quantityGB":"40"},"status":"error_restoring","description":"auto-created_from_restore_from_backup","os-volume-replication:driver_data":null,"source_volid":null,"consistencygroup_id":null,"os-vol-mig-status-attr:name_id":null,"name":"restore_backup_0115efb3-678c-4a9e-bff6-d3cd278238b9","bootable":"false","created_at":"2016-02-03T02:19:11.723797","volume_type":null,"shareable":"false"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0020806014__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0020806014__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0020806018__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0020806018__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024492777__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024492777__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0024492777__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024492777__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
创建云硬盘快照。
创建卷快照名称不能以autobk_snapshot_作为前缀。
URI格式POST/v2/{tenant_id}/snapshots参数说明
参数说明请求样例{"snapshot":{"name":"snap-001","description":"Dailybackup","volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635","force":false,"metadata":{}}}
要素说明响应样例{"snapshot":{"status":"creating","description":"Dailybackup","created_at":"2013-02-25T03:56:53.081642","metadata":{},"volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635","size":1,"id":"ffa9bc5e-1172-4021-acaf-cdcd78a9584d","name":"snap-001","updated_at":"2013-02-25T03:56:53.081642"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
删除云硬盘快照。
不能删除以autobk_snapshot_为前缀的快照。
URI格式DELETE/v2/{tenant_id}/snapshots/{snapshot_id}参数说明
无
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
查询云硬盘快照列表。
URI格式GET/v2/{tenant_id}/snapshots参数说明
参数说明requestfilter参数请求样例无
要素说明响应样例{"snapshots":[{"created_at":"2016-02-16T16:54:14.981520","description":null,"id":"b836dc3d-4e10-4ea4-a34c-8f6b0460a583","metadata":{},"name":"test01","size":1,"status":"available","volume_id":"ba5730ea-8621-4ae8-b702-ff0ffc12c209","updated_at":null},{"created_at":"2016-02-16T16:54:19.475397","description":null,"id":"83be494d-329e-4a78-8ac5-9af900f48b95","metadata":{},"name":"test02","size":1,"status":"available","volume_id":"ba5730ea-8621-4ae8-b702-ff0ffc12c209","updated_at":null},{"created_at":"2016-02-16T16:54:24.367414","description":null,"id":"dd360f46-7593-4d35-8f2c-5566fd0bd79e","metadata":{},"name":"test03","size":1,"status":"available","volume_id":"ba5730ea-8621-4ae8-b702-ff0ffc12c209","updated_at":null},{"created_at":"2016-02-16T16:54:29.766740","description":null,"id":"4c29796a-8cf4-4482-9afc-e66da9a81240","metadata":{},"name":"test04","size":1,"status":"available","volume_id":"ba5730ea-8621-4ae8-b702-ff0ffc12c209","updated_at":null}],"snapshots_links":null}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
查询云硬盘快照详细列表信息。
URI格式GET/v2/{tenant_id}/snapshots/detail参数说明
参数说明requestfilter参数请求样例无
要素说明响应样例{"snapshots":[{"status":"available","os-extended-snapshot-attributes:progress":"100%","description":null,"created_at":"2013-06-19T07:15:29.000000","metadata":{},"volume_id":"ae11e59c-bd56-434a-a00c-04757e1c066d","os-extended-snapshot-attributes:project_id":"d6c277ba8820452e83df36f33c9fa561","size":5,"id":"6cd26877-3ca3-4f4e-ae2a-38cc3d6183fa","name":"name_xx2-snap","updated_at":null},{"status":"available","os-extended-snapshot-attributes:progress":"100%","description":null,"created_at":"2013-06-19T09:08:08.000000","metadata":{},"volume_id":"ae11e59c-bd56-434a-a00c-04757e1c066d","os-extended-snapshot-attributes:project_id":"d6c277ba8820452e83df36f33c9fa561","size":5,"id":"b3253e26-5c37-48dd-8bf2-8795dd1e848f","name":"name_xx2-snap","updated_at":null}]}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
查询单个云硬盘快照信息。
URI格式GET/v2/{tenant_id}/snapshots/{snapshot_id}参数说明
无
要素说明响应样例{"snapshot":{"status":"available","os-extended-snapshot-attributes:progress":"100%","description":"dailybackup","created_at":"2013-02-25t04:13:17.000000","metadata":{},"volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635","os-extended-snapshot-attributes:project_id":"0c2eba2c5af04d3f9e9d0d410b371fde","size":1,"id":"2bb856e1-b3d8-4432-a858-09e4ce939389","name":"snap-001","updated_at":null}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
将快照数据回滚到云硬盘。
只支持快照回滚到源云硬盘，不支持快照回滚到其它指定云硬盘。只有云硬盘状态处于“available”或“error_rollbacking”状态才允许快照回滚到源云硬盘。
URI格式POST/v2/{tenant_id}/os-vendor-snapshots/{snapshot_id}/rollback参数说明
参数说明请求样例{"rollback":{"name":"test-001","volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
要素说明响应样例{"rollback":{"volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635"}}
正常202异常
更新云硬盘的元数据。
URI格式PUT/v2/{tenant_id}/volumes/{volume_id}/metadata参数说明
参数说明metadata字段说明请求样例{"metadata":{"key1":"value1","key2":"value2"}}
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
更新云硬盘的单个元数据。
URI格式PUT/v2/{tenant_id}/volumes/{volume_id}/metadata/{key}参数说明
参数说明meta字段说明请求样例{"meta":{"key1":"value1"}}
要素说明响应样例{"meta":{"key1":"value1"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错为：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
删除云硬盘的单个元数据。
URI格式DELETE/v2/{tenant_id}/volumes/{volume_id}/metadata/{key}参数说明
无
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
查询扩展接口。
URI格式GET/v2/{tenant_id}/extensions参数说明
无
要素说明extensions说明响应样例{"extensions":[{"updated":"2013-04-18T00:00:00+00:00","name":"SchedulerHints","links":[],"namespace":"http://docs.openstack.org/block-service/ext/scheduler-hints/api/v2","alias":"OS-SCH-HNT","description":"Passarbitrarykey/valuepairstothescheduler."},{"updated":"2011-06-29T00:00:00+00:00","name":"Hosts","links":[],"namespace":"http://docs.openstack.org/volume/ext/hosts/api/v1.1","alias":"os-hosts","description":"Admin-onlyhostadministration."},{"updated":"2011-11-03T00:00:00+00:00","name":"VolumeTenantAttribute","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume_tenant_attribute/api/v1","alias":"os-vol-tenant-attr","description":"Exposetheinternalproject_idasanattributeofavolume."},{"updated":"2011-08-08T00:00:00+00:00","name":"Quotas","links":[],"namespace":"http://docs.openstack.org/volume/ext/quotas-sets/api/v1.1","alias":"os-quota-sets","description":"Quotamanagementsupport."},{"updated":"2011-08-24T00:00:00+00:00","name":"TypesManage","links":[],"namespace":"http://docs.openstack.org/volume/ext/types-manage/api/v1","alias":"os-types-manage","description":"Typesmanagesupport."},{"updated":"2013-07-10T00:00:00+00:00","name":"VolumeEncryptionMetadata","links":[],"namespace":"http://docs.openstack.org/volume/ext/os-volume-encryption-metadata/api/v1","alias":"os-volume-encryption-metadata","description":"Volumeencryptionmetadataretrievalsupport."},{"updated":"2012-12-12T00:00:00+00:00","name":"Backups","links":[],"namespace":"http://docs.openstack.org/volume/ext/backups/api/v1","alias":"backups","description":"Backupssupport."},{"updated":"2013-07-16T00:00:00+00:00","name":"SnapshotActions","links":[],"namespace":"http://docs.openstack.org/volume/ext/snapshot-actions/api/v1.1","alias":"os-snapshot-actions","description":"Enablesnapshotmanageractions."},{"updated":"2012-05-31T00:00:00+00:00","name":"VolumeActions","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume-actions/api/v1.1","alias":"os-volume-actions","description":"Enablevolumeactions\n"},{"updated":"2013-10-03T00:00:00+00:00","name":"UsedLimits","links":[],"namespace":"http://docs.openstack.org/volume/ext/used-limits/api/v1.1","alias":"os-used-limits","description":"Providedataonlimitedresourcesthatarebeingused."},{"updated":"2012-05-31T00:00:00+00:00","name":"VolumeUnmanage","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume-unmanage/api/v1.1","alias":"os-volume-unmanage","description":"Enablevolumeunmanageoperation."},{"updated":"2011-11-03T00:00:00+00:00","name":"VolumeHostAttribute","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume_host_attribute/api/v1","alias":"os-vol-host-attr","description":"Exposehostasanattributeofavolume."},{"updated":"2013-07-01T00:00:00+00:00","name":"VolumeTypeEncryption","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume-type-encryption/api/v1","alias":"encryption","description":"Encryptionsupportforvolumetypes."},{"updated":"2013-06-27T00:00:00+00:00","name":"AvailabilityZones","links":[],"namespace":"http://docs.openstack.org/volume/ext/os-availability-zone/api/v1","alias":"os-availability-zone","description":"DescribeAvailabilityZones."},{"updated":"2013-08-02T00:00:00+00:00","name":"Qos_specs_manage","links":[],"namespace":"http://docs.openstack.org/volume/ext/qos-specs/api/v1","alias":"qos-specs","description":"QoSspecssupport."},{"updated":"2011-08-24T00:00:00+00:00","name":"TypesExtraSpecs","links":[],"namespace":"http://docs.openstack.org/volume/ext/types-extra-specs/api/v1","alias":"os-types-extra-specs","description":"Typeextraspecssupport."},{"updated":"2013-08-08T00:00:00+00:00","name":"VolumeMigStatusAttribute","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume_mig_status_attribute/api/v1","alias":"os-vol-mig-status-attr","description":"Exposemigration_statusasanattributeofavolume."},{"updated":"2012-08-13T00:00:00+00:00","name":"CreateVolumeExtension","links":[],"namespace":"http://docs.openstack.org/volume/ext/image-create/api/v1","alias":"os-image-create","description":"AllowcreatingavolumefromanimageintheCreateVolumev1API."},{"updated":"2014-01-10T00:00:00-00:00","name":"ExtendedServices","links":[],"namespace":"http://docs.openstack.org/volume/ext/extended_services/api/v2","alias":"os-extended-services","description":"Extendedservicessupport."},{"updated":"2012-06-19T00:00:00+00:00","name":"ExtendedSnapshotAttributes","links":[],"namespace":"http://docs.openstack.org/volume/ext/extended_snapshot_attributes/api/v1","alias":"os-extended-snapshot-attributes","description":"ExtendedSnapshotAttributessupport."},{"updated":"2012-12-07T00:00:00+00:00","name":"VolumeImageMetadata","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume_image_metadata/api/v1","alias":"os-vol-image-meta","description":"Showimagemetadataassociatedwiththevolume."},{"updated":"2012-03-12T00:00:00+00:00","name":"QuotaClasses","links":[],"namespace":"http://docs.openstack.org/volume/ext/quota-classes-sets/api/v1.1","alias":"os-quota-class-sets","description":"Quotaclassesmanagementsupport."},{"updated":"2013-05-29T00:00:00+00:00","name":"VolumeTransfer","links":[],"namespace":"http://docs.openstack.org/volume/ext/volume-transfer/api/v1.1","alias":"os-volume-transfer","description":"Volumetransfermanagementsupport."},{"updated":"2014-02-10T00:00:00+00:00","name":"VolumeManage","links":[],"namespace":"http://docs.openstack.org/volume/ext/os-volume-manage/api/v1","alias":"os-volume-manage","description":"Allowsexistingbackendstoragetobe'managed'byCinder."},{"updated":"2012-08-25T00:00:00+00:00","name":"AdminActions","links":[],"namespace":"http://docs.openstack.org/volume/ext/admin-actions/api/v1.1","alias":"os-admin-actions","description":"Enableadminactions."},{"updated":"2012-10-28T00:00:00-00:00","name":"Services","links":[],"namespace":"http://docs.openstack.org/volume/ext/services/api/v2","alias":"os-services","description":"Servicessupport."}]}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
扩容云硬盘。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明os-extend说明请求样例{"os-extend":{"new_size":100}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常202异常
卸载云硬盘。
该接口只会改变云硬盘的状态（“in-use”变为“available”），卸载云硬盘的操作不能调用该接口，只能调用Nova的DetachVolume接口。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明os-detach说明请求样例{"os-detach":{"attachment_id":"d8777f54-84cf-4809-a679-468ffed56cf1"}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
保留云硬盘。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明请求样例{"os-reserve":{}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
取消保留云硬盘。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明请求样例{"os-unreserve":{}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
设置云硬盘启动盘标识。
数据盘调用本接口设置bootable后，也不能挂载到云主机作为系统盘使用。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明os-set_bootable说明请求样例{"os-set_bootable":{"bootable":true}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
设置云硬盘只读标识。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明os-update_readonly_flag说明请求样例{"os-update_readonly_flag":{"readonly":true}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
更新云硬盘快照。
URI格式PUT/v2/{tenant_id}/snapshots/{snapshot_id}参数说明
请求样例{"snapshot":{"name":"name_xx3","description":"hello"}}
响应样例{"snapshot":{"status":"creating","description":"Dailybackup","created_at":"2013-02-25T03:56:53.081642","metadata":{},"volume_id":"5aa119a8-d25b-45a7-8d1b-88e127885635","size":1,"id":"f9faf7df-fdc1-4093-9ef3-5cba06eef995","name":"snap-001","updated_at":"2013-02-25T03:56:53.081642"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
添加云硬盘快照的元数据。
URI格式POST/v2/{tenant_id}/snapshots/{snapshot_id}/metadata参数说明
参数说明metadata说明请求样例
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询云硬盘快照的元数据。
URI格式GET/v2/{tenant_id}/snapshots/{snapshot_id}/metadata参数说明
无
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
更新云硬盘快照的单个元数据。
URI格式PUT/v2/{tenant_id}/snapshots/{snapshot_id}/metadata/{key}参数说明
参数说明metadata字段说明请求样例{"meta":{"key1":"value1"}}
要素说明响应样例{"meta":{"key1":"value1"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
更新云硬盘快照的元数据。
URI格式PUT/v2/{tenant_id}/snapshots/{snapshot_id}/metadata参数说明
参数说明metadata字段说明请求样例{"metadata":{"key1":"value1","key2":"value2"}}
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询云硬盘快照的单个元数据。
URI格式GET/v2/{tenant_id}/snapshots/{snapshot_id}/metadata/{key}参数说明
无
要素说明响应样例{"meta":{"key1":"value1"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
删除云硬盘快照的单个元数据。
URI格式DELETE/v2/{tenant_id}/snapshots/{snapshot_id}/metadata/{key}参数说明
无
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
创建云硬盘。
URI格式POST/v2/{tenant_id}/volumes参数说明
参数说明说明：不支持同时使用“source_volid”、“snapshot_id”和“imageRef”这三个字段中的任意两个。metadata字段说明说明：<ulid="ZH-CN_TOPIC_0058762427__zh-cn_topic_0020235144_ul157155141073"><liid="ZH-CN_TOPIC_0058762427__zh-cn_topic_0020235144_li672755311017">如果是从快照创建云硬盘，则不支持传入“__system__encrypted”和“__system__cmkid”字段，创建出来的云硬盘与快照源云硬盘的加密属性一致。如果是从镜像创建云硬盘，则不支持传入“__system__encrypted”和“__system__cmkid”字段，创建出来的云硬盘与镜像的加密属性一致。如果是从快照创建云硬盘，则不支持传入“hw:passthrough”字段，创建出来的云硬盘的设备类型与快照源云硬盘保持一致。如果是从镜像创建云硬盘，则不支持传入“hw:passthrough”字段，创建出来的云硬盘的设备类型为VBD类型。请求样例{"volume":{"name":"openapi_vol01","imageRef":"027cf713-45a6-45f0-ac1b-0ccc57ac12e2","availability_zone":"xxx","description":"createforapitest","volume_type":"SATA","metadata":{"volume_owner":"openapi"},"consistencygroup_id":null,"source_volid":null,"snapshot_id":null,"shareable":"false","multiattach":false,"source_replica":null,"size":40}}
要素说明响应样例{"volume":{"attachments":[],"availability_zone":"xxx","bootable":"false","consistencygroup_id":null,"created_at":"2016-05-25T02:38:40.392463","description":"createforapitest","encrypted":false,"id":"8dd7c486-8e9f-49fe-bceb-26aa7e312b66","links":[{"href":"https://volume.localdomain.com:8776/v2/5dd0b0056f3d47b6ab4121667d35621a/volumes/8dd7c486-8e9f-49fe-bceb-26aa7e312b66","rel":"self"},{"href":"https://volume.localdomain.com:8776/5dd0b0056f3d47b6ab4121667d35621a/volumes/8dd7c486-8e9f-49fe-bceb-26aa7e312b66","rel":"bookmark"}],"metadata":{"volume_owner":"openapi"},"name":"openapi_vol01","replication_status":"disabled","shareable":false,"multiattach":false,"size":40,"snapshot_id":null,"source_volid":null,"status":"creating","updated_at":null,"user_id":"39f6696ae23740708d0f358a253c2637","volume_type":"SATA"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错为：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常202异常
删除一个云硬盘。
URI格式DELETE/v2/{tenant_id}/volumes/{volume_id}参数说明
无
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
更新云硬盘。
URI格式PUT/v2/{tenant_id}/volumes/{volume_id}参数说明
参数说明请求样例{"volume":{"name":"test_volume","description":"test"}}
要素说明links字段说明attachments字段说明响应样例{"volume":{"attachments":[],"availability_zone":"xxx","bootable":"false","consistencygroup_id":null,"created_at":"2016-05-25T02:38:40.392463","description":"createforapitest","encrypted":false,"id":"8dd7c486-8e9f-49fe-bceb-26aa7e312b66","links":[{"href":"https://volume.localdomain.com:8776/v2/5dd0b0056f3d47b6ab4121667d35621a/volumes/8dd7c486-8e9f-49fe-bceb-26aa7e312b66","rel":"self"},{"href":"https://volume.localdomain.com:8776/5dd0b0056f3d47b6ab4121667d35621a/volumes/8dd7c486-8e9f-49fe-bceb-26aa7e312b66","rel":"bookmark"}],"metadata":{"volume_owner":"openapi"},"name":"openapi_vol01","replication_status":"disabled","shareable":false,"multiattach":false,"size":40,"snapshot_id":null,"source_volid":null,"status":"creating","updated_at":null,"user_id":"39f6696ae23740708d0f358a253c2637","volume_type":"SATA"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错为：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询云硬盘列表。
URI格式GET/v2/{tenant_id}/volumes参数说明Requestfilter参数
无
要素说明links字段说明响应样例{"volumes":[{"id":"6b604cef-9bd8-4f5a-ae56-45839e6e1f0a","links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes/6b604cef-9bd8-4f5a-ae56-45839e6e1f0a","rel":"self"},{"href":"https://volume.localdomain.com:8776/dd14c6ac581f40059e27f5320b60bf2f/volumes/6b604cef-9bd8-4f5a-ae56-45839e6e1f0a","rel":"bookmark"}],"name":"zjb_u25_test"},{"id":"2bce4552-9a7d-48fa-8484-abbbf64b206e","links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes/2bce4552-9a7d-48fa-8484-abbbf64b206e","rel":"self"},{"href":"https://volume.localdomain.com:8776/dd14c6ac581f40059e27f5320b60bf2f/volumes/2bce4552-9a7d-48fa-8484-abbbf64b206e","rel":"bookmark"}],"name":"zjb_u25_test"},{"id":"3f1b98ec-a8b5-4e92-a727-88def62d5ad3","links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes/3f1b98ec-a8b5-4e92-a727-88def62d5ad3","rel":"self"},{"href":"https://volume.localdomain.com:8776/dd14c6ac581f40059e27f5320b60bf2f/volumes/3f1b98ec-a8b5-4e92-a727-88def62d5ad3","rel":"bookmark"}],"name":"zjb_u25_test"}],"volumes_links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes?limit=3&amp;marker=3f1b98ec-a8b5-4e92-a727-88def62d5ad3","rel":"next"}]}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"badRequest":{"message":"XXXX","code":"XXX"}}
正常200异常
查询所有云硬盘详情。
URI格式GET/v2/{tenant_id}/volumes/detail参数说明Requestfilter参数
无
要素说明links字段说明attachments字段说明响应样例{"volumes":[{"attachments":[],"availability_zone":"xxx","bootable":"false","consistencygroup_id":null,"created_at":"2016-05-25T02:42:10.856332","description":null,"encrypted":false,"id":"b104b8db-170d-441b-897a-3c8ba9c5a214","links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes/b104b8db-170d-441b-897a-3c8ba9c5a214","rel":"self"},{"href":"https://volume.localdomain.com:8776/dd14c6ac581f40059e27f5320b60bf2f/volumes/b104b8db-170d-441b-897a-3c8ba9c5a214","rel":"bookmark"}],"metadata":{"__openstack_region_name":"pod01.xxx","a":"b","quantityGB":"1","volInfoUrl":"fusionstorage://172.30.64.10/0/FEFEEB07D3924CDEA93C612D4E16882D"},"name":"zjb_u25_test","os-vol-host-attr:host":"pod01.xxx#SATA","volume_image_metadata":{},"os-vol-mig-status-attr:migstat":null,"os-vol-mig-status-attr:name_id":null,"os-vol-tenant-attr:tenant_id":"dd14c6ac581f40059e27f5320b60bf2f","os-volume-replication:driver_data":null,"os-volume-replication:extended_status":null,"replication_status":"disabled","shareable":false,"multiattach":false,"size":1,"snapshot_id":null,"source_volid":null,"status":"available","updated_at":"2016-05-25T02:42:22.341984","user_id":"b0524e8342084ef5b74f158f78fc3049","volume_type":"SATA"}],"volumes_links":[{"href":"https://volume.localdomain.com:8776/v2/dd14c6ac581f40059e27f5320b60bf2f/volumes/detail?limit=1&amp;marker=b104b8db-170d-441b-897a-3c8ba9c5a214","rel":"next"}]}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"itemNotFound":{"message":"XXXX","code":"XXX"}
正常200异常
查询单个云硬盘的详细信息。
URI格式GET/v1/{tenant_id}/volumes/{volume_id}参数说明
无
要素说明attachments字段说明响应样例{"volume":{"attachments":[],"availability_zone":"nova","os-vol-host-attr:host":"db-rabbitmq201#LVM_iSCSI","encrypted":false,"os-volume-replication:extended_status":null,"volume_image_metadata":null,"snapshot_id":null,"id":"da4f9c7a-c275-4bc9-80c4-76c7d479a218","size":1,"os-vol-tenant-attr:tenant_id":"3dab0aaf682849678a94ec7b5a3af2ce","os-vol-mig-status-attr:migstat":null,"metadata":{},"status":"available","display_description":null,"os-volume-replication:driver_data":null,"source_volid":null,"os-vol-mig-status-attr:name_id":null,"display_name":"test","bootable":"false","created_at":"2014-12-18T17:14:38.000000","volume_type":"SATA","shareable":"false","multiattach":false}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
添加或更新云硬盘的元数据。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/metadata参数说明
参数说明metadata字段说明请求样例{"metadata":{"key1":"value1","key2":"value2"}}
要素说明响应样例{"metadata":{"key1":"value1","key2":"value2"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错为：{"badrequest":{"message":"XXXX","code":"XXX"}}
正常200异常
挂载云硬盘。
该接口只会改变云硬盘的状态（“available”变为“in-use”），挂载云硬盘的操作不能调用该接口，只能调用Nova的AttachVolume接口。
URI格式POST/v2/{tenant_id}/volumes/{volume_id}/action参数说明
参数说明os-attach说明请求样例{"os-attach":{"instance_uuid":"95D9EF50-507D-11E5-B970-0800200C9A66","mountpoint":"/dev/vdc"}}
要素说明响应用例无或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badRequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常202异常
查询接口版本信息列表。
URI格式GET/
无
要素说明media-types参数信息links参数信息响应样例{"versions":[{"min_version":"","media-types":[{"type":"application/vnd.openstack.volume+json;version=1","base":"application/json"},{"type":"application/vnd.openstack.volume+xml;version=1","base":"application/xml"}],"links":[{"rel":"describedby","href":"http://docs.openstack.org/","type":"text/html"},{"rel":"self","href":"https://evs.localdomain.com/v1"}],"id":"v1.0","updated":"2014-06-28T12:20:21Z","version":"","status":"SUPPORTED"},{"min_version":"","media-types":[{"type":"application/vnd.openstack.volume+json;version=1","base":"application/json"},{"type":"application/vnd.openstack.volume+xml;version=1","base":"application/xml"}],"links":[{"rel":"describedby","href":"http://docs.openstack.org/","type":"text/html"},{"rel":"self","href":"https://evs.localdomain.com/v2"}],"id":"v2.0","updated":"2014-06-28T12:20:21Z","version":"","status":"SUPPORTED"},{"min_version":"3.0","media-types":[{"type":"application/vnd.openstack.volume+json;version=1","base":"application/json"},{"type":"application/vnd.openstack.volume+xml;version=1","base":"application/xml"}],"links":[{"rel":"describedby","href":"http://docs.openstack.org/","type":"text/html"},{"rel":"self","href":"https://evs.localdomain.com/v3"}],"id":"v3.0","updated":"2016-02-08T12:20:21Z","version":"3.0","status":"CURRENT"}]}
正常200或300异常
查询接口的v2版本信息。
URI格式GET/v2
无
要素说明media-types参数信息links参数信息响应样例{"versions":[{"min_version":"","media-types":[{"type":"application/vnd.openstack.volume+json;version=1","base":"application/json"},{"type":"application/vnd.openstack.volume+xml;version=1","base":"application/xml"}],"links":[{"rel":"describedby","href":"http://docs.openstack.org/","type":"text/html"},{"rel":"self","href":"https://evs.localdomain.com/v2"}],"id":"v2.0","updated":"2014-06-28T12:20:21Z","version":"","status":"SUPPORTED"}]}
正常200异常
查询云硬盘的单个元数据。
URI格式GET/v2/{tenant_id}/volumes/{volume_id}/metadata/{key}参数说明
无
要素说明响应样例{"meta":{"key1":"value1"}}或{"error":{"message":"XXXX","code":"XXX"}}其中error是泛指的错误，有badrequest、itemNotFound等，如报错：{"itemNotFound":{"message":"XXXX","code":"XXX"}}
正常200异常
该接口用于查询身份提供商导入到IAM中的Metadata文件内容。
URI格式GET/v3-ext/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/metadata参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845553__i9610935132815">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3-ext/OS-FEDERATION/identity_providers/ACME/protocols/saml/metadata</em>
ResponseBody参数说明响应样例{"id":"40c174f35ff94e31b8257ad4991bce8b","idp_id":"ACME","entity_id":"https://idp.test.com/idp/shibboleth","protocol_id":"saml","domain_id":"ed7a77d365304f458f7d0a7909c6d889","xaccount_type":"","update_time":"2016-10-26T09:26:23.000000","data":"$data"}
该接口用于查询指定用户所属的用户组信息。
URI格式GET/v3/users/{user_id}/groups参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845554__i15292195851219">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/users/43cbe5e77aaf4665bbb962062dc1fc9d/groups</em>
ResponseBody参数说明group格式说明响应样例{"links":{"self":"https://sample.domain.com/v3/users/f7cb4876e5174c0885433e280e831c43/groups","previous":null,"next":null},"groups":[{"description":"Usergroupthathasthepermissionforallsystemoperations","links":{"self":"https://sample.domain.com/v3/groups/e21c7a1e415c4604927948dc24750716"},"id":"e21c7a1e415c4604927948dc24750716","create_time":1472888495993,"domain_id":"88b16b6440684467b8825d7d96e154d8","name":"admin"}]}
公有云API符合RESTAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为（带方括号的为可选项）：https://Endpoint[/uri]URL中的参数说明，如所示。
该接口用于查询用户可以访问的项目列表。
URI格式GET/v3/auth/projects
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845558__i42892345152726">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGET/v3/auth/projects</em>
ResponseBody参数说明project格式说明响应样例{"links":{"self":"<emid="zh-cn_topic_0057845558__i4973512021446">www.example.com</em>/v3/auth/projects","previous":null,"next":null},"projects":[{"is_domain":false,"description":"","links":{"self":"<emid="zh-cn_topic_0057845558__i2688423721456">www.example.com</em>/v3/projects/9041929bcc6e4bfe85add4e7b96ffdd7"},"enabled":true,"id":"9041929bcc6e4bfe85add4e7b96ffdd7","parent_id":"398998b5392f4150ad48fe456d6de4f1","domain_id":"398998b5392f4150ad48fe456d6de4f1","name":"region"},{"is_domain":false,"description":"","links":{"self":"<emid="zh-cn_topic_0057845558__i130189622152">www.example.com</em>/v3/projects/ee65ca70d3cf43aaa1ea6492ce15f289"},"enabled":true,"id":"ee65ca70d3cf43aaa1ea6492ce15f289","parent_id":"398998b5392f4150ad48fe456d6de4f1","domain_id":"398998b5392f4150ad48fe456d6de4f1","name":"MOS"}]}
该接口用于删除协议信息。
URI格式DELETE/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845559__i64193811300">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml</em>
无响应体。
该接口提供删除某租户中指定用户组权限的功能。
URI格式DELETE/v3/domains/{domain_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845560__i29300153152947">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XDELETEhttps://10.22.44.158:31943/v3/domains/d54061ebcb5145dd814f8eb3fe9b7ac0/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
该接口提供查询用户组中所包含的用户的功能。
URI格式GET/v3/groups/{group_id}/usersURI参数说明查询参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845561__i145651043746">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/groups/00007111583e457389b0d4252643181b/users</em>
ReponseBody参数说明group格式说明响应样例{"users":[{"links":{"self":"https://sample.domain.com/v3/users/3b310db5a3eb42eeacdfd81e4a388f66"},"description":"adminUserDes","name":"account15000008203","enabled":true,"id":"3b310db5a3eb42eeacdfd81e4a388f66","domain_id":"eff15dab8c3f443c81cd405ae2092a38"}],"links":{"self":"https://sample.domain.com/v3/groups/00007111583e457389b0d4252643181b/users","previous":null,"next":null}}
该接口用于查询终端节点列表，提供服务访问入口。
URI格式GET/v3/endpoints{?interface,service_id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845562__i658774183711">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/endpoints?interface=public&amp;service_id=43cbe5e77aaf4665bbb962062dc1fc9d</em>
ResponseBody参数说明endpoints格式说明响应样例（请求成功）{"endpoints":[{"region_id":null,"links":{"self":"https://iamcore_links.com/v3/endpoints/162277d696f54cf592f19b569f85d158"},"url":"https://10.185.190.104:7443/v2/$(tenant_id)s","region":null,"enabled":true,"interface":"public","service_id":"053d21d488d1463c818132d9d08fb617","id":"162277d696f54cf592f19b569f85d158"}],"links":{"self":"https://iamcore_links.com/v3/endpoints?service_id=053d21d488d1463c818132d9d08fb617&amp;interface=public","previous":null,"next":null}}
当您使用Token认证方式时，请采用如下步骤调用接口：发送“POSThttps://<emid="zh-cn_topic_0057845563__i1045563015444">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。获取Token，请参考“”。说明：<ulid="zh-cn_topic_0057845563__ua3d12e6a6f934c63848fefebfe42a323"><liid="zh-cn_topic_0057845563__ldce4b1a4ed1b4dab96ca09efe62b90f1">Token值即接口返回消息Header中的“X-Subject-Token”的值。Token的有效期为24小时，需要同一个Token鉴权时，可以先缓存起来，避免频繁调用。调用接口时，在业务接口请求消息头中增加“X-Auth-Token”，取值为上面步骤中的Token值。
发送“POSThttps://<emid="zh-cn_topic_0057845563__ac02fe91884504c1e838473499caa5e52">API网关地址</em>/v3/auth/tokens”，请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考“”。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="zh-cn_topic_0057845563__a0eff8d50d387492f8fc019bf5306cf50">username</em>","password":"<emid="zh-cn_topic_0057845563__a21f0cd87d9b34136b08d5e816003490f">password</em>","domain":{"name":"<emid="zh-cn_topic_0057845563__a454d939506f844b78d1fd447600fab87">domainname</em>"}}}},"scope":{"project":{"name":"projectname"}}}}请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为前面步骤中获取的Token。
该接口提供删除用户组的功能。
URI格式DELETE/v3/groups/{group_id}URI参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845566__i1124014526527">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://172.30.48.86:31943/v3/groups/aaec2abd4eba430fbf61541ffde76650</em>
无响应体。
该接口用于查询映射列表信息。
URI格式GET/v3/OS-FEDERATION/mappings
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845567__i1546416103518">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/mappings</em>
ResponseBody参数说明响应样例{"links":{"next":null,"previous":null,"self":"https://example.com/v3/OS-FEDERATION/mappings"},"mappings":[{"id":"ACME","links":{"self":"https://example.com/v3/OS-FEDERATION/mappings/ACME"},"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"id":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","any_one_of":["Contractor","SubContractor"]}]}]}]}
该接口用于更新映射信息。
URI格式PATCH/v3/OS-FEDERATION/mappings/{id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845568__i74501182408">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPATCH-d'{"mapping":{"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"name":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","any_one_of":["Contractor","SubContractor"]}]}]}}'https://10.185.190.118:31943/v3/OS-FEDERATION/mappings/ACME</em>
ResponseBody参数说明响应样例{"mapping":{"id":"ACME","links":{"self":"https://example.com/v3/OS-FEDERATION/mappings/ACME"},"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"name":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","any_one_of":["Contractor","SubContractor"]}]}]}}
该接口用于获取KeystoneAPI的版本信息。
URI格式GET/
请求样例
响应参数说明values格式说明响应样例（响应成功）{"versions":{"values":[{"media-types":[{"type":"application/vnd.openstack.identity-v3+json","base":"application/json"}],"links":[{"rel":"self","href":"https://www.example.com/v3/"}],"id":"v3.6","updated":"2016-04-04T00:00:00Z","status":"stable"}]}}
该接口用于删除身份提供商信息。
URI格式DELETE/v3/OS-FEDERATION/identity_providers/{id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845570__i136011546132417">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME</em>
无响应体。
该接口提供查询租户下用户组的权限的功能。
URI格式GET/v3/domains/{domain_id}/groups/{group_id}/rolesURL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845571__i36476603152855">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.22.44.158:31943/v3/domains/d54061ebcb5145dd814f8eb3fe9b7ac0/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles</em>
ReponseBody参数说明role参数说明响应样例{"links":{"self":"<emid="zh-cn_topic_0057845571__i198711311244">www.example.com</em>/v3/domains/d54061ebcb5145dd814f8eb3fe9b7ac0/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles","previous":null,"next":null},"roles":[{"display_name":"SecurityAdministrator","description":"SecurityAdministrator","links":{"self":"<emid="zh-cn_topic_0057845571__i549735612411">www.example.com</em>/v3/roles/005cf92cfd364105afaa5df2eec25012"},"domain_id":null,"name":"secu_admin","type":"AX","catalog":"BASE","policy":{"Version":"1.0","Statement":[{"Action":["identity:*"],"Effect":"Allow"}]},"id":"005cf92cfd364105afaa5df2eec25012"},{"display_name":"AgentOperator","description":"AgentOperator","links":{"self":"<emid="zh-cn_topic_0057845571__i377224931251">www.example.com</em>/v3/roles/d160d30477c642a486ad10e3b4d9820f"},"domain_id":null,"name":"te_agency","type":"AX","catalog":"IAM","policy":{"Version":"1.0","Statement":[{"Action":["identity:assumerole"],"Effect":"Allow"}]},"id":"d160d30477c642a486ad10e3b4d9820f"}]}
该接口提供删除项目对应用户组权限的功能。
URI格式DELETE/v3/projects/{project_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845572__i26061344152938">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XDELETEhttps://10.22.44.158:31943/v3/projects/073bbf60da374853841cf6624c94de4b/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
该接口用于查询用户可以访问的租户列表。
URI格式GET/v3/auth/domains
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845574__i1940824017015">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/auth/domains</em>
ResponseBody参数说明domain格式说明响应样例{"domains":[{"description":"descofdomain","enabled":true,"enterpriseName":"hw","id":"37ef61","links":{"self":"http://example.com/v3/domains/37ef61"},"name":"mydomain"}],"links":{"self":"http://example.com/v3/auth/domains","previous":null,"next":null}}
该接口用于注册一个协议。
URI格式PUT/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845575__i84412045111510">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPUT-d'{"protocol":{"mapping_id":"ACME"}}'https://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml</em>
ResponseBody参数说明响应样例{"protocol":{"id":"saml","links":{"identity_provider":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml"},"mapping_id":"ACME"}}
该接口用于查询keystone的Metadata文件。
URI格式GET/v3-ext/auth/OS-FEDERATION/SSO/metadata
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845577__i1253994717168">GET/v3-ext/auth</em><emid="zh-cn_topic_0057845577__i792811414160">/OS-FEDERATION/SSO/metadata</em>
响应样例
下载API网关签名工具。下载地址：解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="zh-cn_topic_0057845578__o55851f3f326545f6a728766fe818e215"><liid="zh-cn_topic_0057845578__l9bc92f574a0d43f6bb9d7f20007942f3">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
当IAM服务担任SAML2.0规范中的SP（ServiceProvider，即服务提供者）角色与IDP（IdentityProvider，即身份提供者）进行单点登录时，该接口用于接收AuthnRequest请求返回的响应，即IDP发往SP的断言请求。关于SAML2.0规范请参阅链接：不建议直接调用，请参考，使用openstackclient获取token。
URI格式POST/v3-ext/auth/OS-FEDERATION/SSO/SAML2/POST
该接口用于查询身份提供商列表信息。
URI格式GET/v3/OS-FEDERATION/identity_providers
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845581__i145110198204">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers</em>
ResponseBody参数说明响应样例{"identity_providers":[{"description":"StoresACMEidentities","enabled":true,"id":"ACME","remote_ids":[],"links":{"protocols":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME"}},{"description":"Storescontractoridentities","enabled":false,"remote_ids":[],"id":"ACME-contractors","links":{"protocols":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME-contractors/protocols","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME-contractors"}}],"links":{"next":null,"previous":null,"self":"https://example.com/v3/OS-FEDERATION/identity_providers"}}
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
该接口用来获取用户token，可以通过用户名/密码的方式进行认证。token的有效期为24小时，需要同一个token鉴权时，可以先缓存起来，避免频繁调用。该接口属于服务间接口，提供了锁定机制用于防止暴力破解，服务调用时，请做好用户名密码的充分校验。
URI格式POST/v3/auth/tokens
RequestHeader参数说明RequestBody参数说明请求样例获取用户名为exampleuser，登录密码为Examplepassword123，所在domain名为exampledomain的token。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"exampleuser","password":"Examplepassword123","domain":{"name":"exampledomain"}}}},"scope":{"domain":{"name":"exampledomain"}}}}
ResponseHeader参数说明Token格式说明响应样例ResponseHeader中存储信息为：X-Subject-Token:MIIDkgYJKoZIhvcNAQcCoIIDgzCCA38CAQExDTALBglghkgBZQMEAgEwgXXXXX...ResponseBody中存储信息为：{"token":{"methods":["password"],"expires_at":"2015-11-09T01:42:57.527363Z","issued_at":"2015-11-09T00:42:57.527404Z","user":{"domain":{"id":"default","name":"exampledomain"},"id":"ee4dfb6e5540447cb3741905149d9b6e","name":"exampleuser"},"domain":{"name":"exampledomain","id":"default"},"catalog":[{"type":"identity","id":"1331e5cff2a74d76b03da1225910e31d","name":"iam","endpoints":[{"url":"<emid="zh-cn_topic_0057845583__i45391606114233">www.example.com</em>/v3","region":"*","region_id":"*","interface":"public","id":"089d4a381d574308a703122d3ae738e9"}]}],"roles":[{"name":"role1","id":"roleid1"},{"name":"role2","id":"roleid2"}]}}
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
登录管理控制台，单击右上方登录的账号，选择“我的凭证”。进入如下图所示界面，可以查看用户名称、项目名称、项目ID。
该接口用于查询服务列表。
URI格式GET/v3/services{?type}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845587__i127110618379">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/services?type=compute</em>
ReponseBody参数说明services格式说明响应样例（响应成功）{"services":[{"name":"compute5","links":{"self":"https://iamcore_links.com/v3/services/053d21d488d1463c818132d9d08fb617"},"enabled":true,"type":"compute","id":"053d21d488d1463c818132d9d08fb617","description":"Computeservice5"},{"name":"compute3","links":{"self":"https://iamcore_links.com/v3/services/c2474183dca7453bbd73123a0b78feae"},"enabled":true,"type":"compute","id":"c2474183dca7453bbd73123a0b78feae","description":"Computeservice3"},{"name":"compute2","links":{"self":"https://iamcore_links.com/v3/services/c7166694ebdd4616bd927737f7b12ca2"},"enabled":true,"type":"compute","id":"c7166694ebdd4616bd927737f7b12ca2","description":"Computeservice2"}],"links":{"self":"https://iamcore_links.com/v3/services?type=compute","previous":null,"next":null}}
注册并登录管理控制台，单击右上方登录的账号，选择“我的凭证”。在“我的凭证”页面，选择“管理访问密钥”页签。单击列表下侧的“新增访问密钥”，创建新的访问密钥。说明：每个用户最多可创建2个有效访问密钥（AK/SK），且一旦生成永久有效，为了账户安全性，建议定期更换访问密钥。输入当前用户的登录密码，并通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份认证服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
该接口用于注册一个映射。
URI格式PUT/v3/OS-FEDERATION/mappings/{id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845590__i10948418226">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPUT-d'{"mapping":{"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"name":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","not_any_of":["Contractor","Guest"]}]}]}}'https://10.185.190.118:31943/v3/OS-FEDERATION/mappings/ACME</em>
ResponseBody参数说明响应样例{"mapping":{"id":"ACME","links":{"self":"https://example.com/v3/OS-FEDERATION/mappings/ACME"},"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"name":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","not_any_of":["Contractor","Guest"]}]}]}}
该接口提供查询权限列表。
URI格式GET/v3/rolesURL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845591__i23141044152814">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.22.44.158:31943/v3/roles?name=readonly</em>
ReponseBody参数说明role格式说明响应样例{"links":{"self":"<emid="zh-cn_topic_0057845591__i3138738121449">www.example.com</em>/v3/roles?name=readonly","previous":null,"next":null},"roles":[{"display_name":"TanentGuest","description":"TanentGuest","links":{"self":"<emid="zh-cn_topic_0057845591__i20685209214416">www.example.com</em>/v3/roles/19bb93eec4ca4f08aefdc02da76d8f3c"},"domain_id":null,"catalog":"BASE","policy":{"Version":"1.0","Statement":[{"Action":["::Get","::List"],"Effect":"Allow"},{"Action":["identity:*"],"Effect":"Deny"}]},"id":"19bb93eec4ca4f08aefdc02da76d8f3c","type":"AA","name":"readonly"}]}
其它header属性，请遵照http协议。
IAM通过如下安全协议和行为来保证API接口的安全性：所有API接口都使用HTTPS协议。首先，客户端使用正确的凭证从服务端获取token；然后，客户端在调用服务端API的同时会将token发送给服务端；最后，服务端通过校验客户端token的有效性来决定是否为客户端提供服务。API接口提供鉴权能力，因此拥有相应权限的的客户端才能成功调用对应的API。
该接口用于查询联邦用户可以访问的项目列表，需要项目列表来获取联邦scopedtoken。
URI格式GET/v3/OS-FEDERATION/projects
RequestHeader参数说明说明：推荐使用，该接口返回相同的响应格式。请求样例<emid="zh-cn_topic_0057845595__i1482263817353">GET/v3/OS-FEDERATION/projects</em>
ResponseBody参数说明响应样例{"links":{"self":"https://<emid="zh-cn_topic_0057845595__i797174715918">sample.domain.com</em>/v3/OS-FEDERATION/projects","previous":null,"next":null},"projects":[{"is_domain":false,"description":"","links":{"self":"https://<emid="zh-cn_topic_0057845595__i81705591198">sample.domain.com</em>/v3/projects/05cf683c351e43518618d9fa96a5efa9"},"enabled":true,"id":"05cf683c351e43518618d9fa96a5efa9","parent_id":"e31ac82d778b4d128cb6fed37fd72cdb","domain_id":"e31ac82d778b4d128cb6fed37fd72cdb","name":"region_name"},{"is_domain":false,"description":"","links":{"self":"https://<emid="zh-cn_topic_0057845595__i5105108100">sample.domain.com</em>/v3/projects/32b56f108f87418e8219317beb0fff3c"},"enabled":true,"id":"32b56f108f87418e8219317beb0fff3c","parent_id":"e31ac82d778b4d128cb6fed37fd72cdb","domain_id":"e31ac82d778b4d128cb6fed37fd72cdb","name":"MOS"}]}
该接口用于查询联邦用户可以访问的租户列表。
URI格式GET/v3/OS-FEDERATION/domains
RequestHeader参数说明说明：推荐使用，该接口可以返回相同的响应格式。请求样例<emid="zh-cn_topic_0057845596__i15443141643518">GET/v3/OS-FEDERATION/domains</em>
ResponseBody参数说明响应样例{"domains":[{"links":{"self":"https://<emid="zh-cn_topic_0057845596__i1589717271191">sample.domain.com</em>/v3/domains/e31ac82d778b4d128cb6fed37fd72cdb"},"description":null,"name":"exampledomain","enabled":true,"id":"e31ac82d778b4d128cb6fed37fd72cdb"}],"links":{"self":"https://<emid="zh-cn_topic_0057845596__i58535339911">sample.domain.com</em>/v3/OS-FEDERATION/domains","previous":null,"next":null}}
该接口提供项目对应用户组增加权限的功能。
URI格式PUT/v3/projects/{project_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845597__i40703109152929">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XPUThttps://10.22.44.158:31943/v3/projects/073bbf60da374853841cf6624c94de4b/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
该接口查询某用户是否属于某用户组的功能。
URI格式HEAD/v3/groups/{group_id}/users/{user_id}URI参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845599__i57349465152647">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XHEADhttps://172.30.48.86:31943/v3/groups/00007111583e457389b0d4252643181b/users/edb66d2b656c43d0b67fb143d670bb3a</em>
无响应体。
该接口提供更新用户组信息的功能。
URI格式PATCH/v3/groups/{group_id}URI参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845600__i491122164819">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPATCH-d'{"group":{"description":"Contractdevelopers2016"}}'https://172.30.48.86:31943/v3/groups/aaec2abd4eba430fbf61541ffde76650</em>
ReponseBody参数说明响应样例{"group":{"domain_id":"d54061ebcb5145dd814f8eb3fe9b7ac0","description":"Contractdevelopers2016","id":"aaec2abd4eba430fbf61541ffde76650","links":{"self":"https://sample.domain.com/v3/groups/aaec2abd4eba430fbf61541ffde76650"},"name":"jixiang1"}}
该接口提供删除用户组中用户的功能。
URI格式DELETE/v3/groups/{group_id}/users/{user_id}URI参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845601__i8686491167">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://172.30.48.86:31943/v3/groups/00007111583e457389b0d4252643181b/users/edb66d2b656c43d0b67fb143d670bb3a</em>
无响应体。
该接口提供查询用户组信息的功能。
URI格式GET/v3/groups{?domain_id,name}查询参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845602__i1395013910718">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.145.93.56:31943/v3/groups?domain_id=ac7197fd67a24dc5850972854729a762&amp;name=group123</em>
ReponseBody参数说明group参数说明响应样例{"links":{"self":"https://sample.domain.com/v3/groups?domain_id=ac7197fd67a24dc5850972854729a762&amp;name=group123","previous":null,"next":null},"groups":[{"description":"","links":{"self":"https://sample.domain.com/v3/groups/ff74abaeabe34c278a4b7693c7f0dff7"},"id":"ff74abaeabe34c278a4b7693c7f0dff7","create_time":1482566254983,"domain_id":"ac7197fd67a24dc5850972854729a762","name":"group123"}]}
该接口提供查询权限详情。
URI格式GET/v3/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845603__i17876753152757">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.22.44.158:31943/v3/roles/19bb93eec4ca4f08aefdc02da76d8f3c</em>
ReponseBody参数说明role格式说明响应样例{"role":{"display_name":"TanentGuest","description":"TanentGuest","links":{"self":"<emid="zh-cn_topic_0057845603__i6661016015284">www.example.com</em>/v3/roles/19bb93eec4ca4f08aefdc02da76d8f3c"},"domain_id":null,"catalog":"BASE","policy":{"Version":"1.0","Statement":[{"Action":["::Get","::List"],"Effect":"Allow"},{"Action":["identity:*"],"Effect":"Deny"}]},"id":"19bb93eec4ca4f08aefdc02da76d8f3c","type":"AA","name":"readonly"}}
该接口用于注册一个身份提供商。
URI格式PUT/v3/OS-FEDERATION/identity_providers/{id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845606__i1240291012270">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPUT-d'{"identity_provider":{"description":"StoresACMEidentities.","enabled":true}}'https://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME</em>
ResponseBody参数说明响应样例{"identity_provider":{"description":"StoresACMEidentities","enabled":true,"id":"ACME","remote_ids":[],"links":{"protocols":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME"}}}
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
该接口用于更新协议信息。
URI格式PATCH/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845609__i1489980192518">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPATCH-d'{"protocol":{"mapping_id":"ACME"}}'https://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml</em>
ResponseBody参数说明响应样例{"protocol":{"id":"saml","links":{"identity_provider":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml"},"mapping_id":"ACME"}}
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请从中获取。URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
该接口用于修改租户下对应的用户信息。
URI格式PATCH/v3/users/{user_id}URI参数说明
RequestHeader参数说明RequestBody参数说明请求样例1.按照以下模板创建临时文件${filename}.json。${filename}是临时文件名，用户可以自定义。{"user":{"name":"james1234","default_project_id":"88b16b6440684467b8825d7d96e154d8","enabled":false,"password":"********"}}2.在${filename}.json文件同目录下，执行如下curl命令。<emid="zh-cn_topic_0057845611__i07018383286">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPOST-d@${filename}.json</em><emid="zh-cn_topic_0057845611__i9462655192816">https://172.30.48.86:31943/v3/users/2c1c6c54e59141b889c99e6fada5f19f</em>3.在${filename}.json文件同目录下，执行如下命令删除临时文件${filename}.json。rm<emid="zh-cn_topic_0057845611__i1370163812815">${filename}.json</em>
ResponseBody参数说明user格式说明响应样例{"user":{"name":"james1234","links":{"self":"https://sample.domain.com/v3/users/6d8b04e3bf99445b8f76300903e5bf32"},"extra":{},"domain_id":"88b16b6440684467b8825d7d96e154d8","enabled":false,"id":"6d8b04e3bf99445b8f76300903e5bf32","default_project_id":"88b16b6440684467b8825d7d96e154d8","password_expires_at":"2016-12-07T00:00:00.000000Z"}}
该接口用于更新身份提供商信息。
URI格式PATCH/v3/OS-FEDERATION/identity_providers/{id}参数说明
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845612__i4238144418237">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPATCH-d'{"identity_provider":{"enabled":false}}'https://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME</em>
ResponseBody参数说明响应样例{"identity_provider":{"description":"StoresACMEidentities","enabled":false,"id":"ACME","remote_ids":[],"links":{"protocols":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME"}}}
该接口用于获取KeystoneAPI的3.0版本的信息。
URI格式GET/v3
响应参数说明version格式说明响应样例（响应成功）{"version":{"status":"stable","updated":"2016-04-04T00:00:00Z","media-types":[{"base":"application/json","type":"application/vnd.openstack.identity-v3+json"}],"id":"v3.6","links":[{"href":"https://www.example.com/v3/","rel":"self"}]}}
当IAM服务担任SAML2.0规范中的SP（ServiceProvider，即服务提供者）角色与IDP（IdentityProvider，即身份提供者）进行单点登录时，该接口用于接收AuthnRequest请求返回的响应，即客户端代理发往SP的断言请求。关于SAML2.0规范请参阅链接：不建议直接调用，请参考，使用openstackclient获取token。
URI格式POST/v3-ext/auth/OS-FEDERATION/SSO/SAML2/ECP
租户使用联邦认证功能时，需要先将Metadata文件导入IAM中，该接口用于导入租户的Metadata文件。
URI格式POST/v3-ext/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/metadata参数说明
RequestHeader参数说明RequestBody参数说明请求样例curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPOST-d'{"xaccount_type":"","domain_id":"ed7a77d365304f458f7d0a7909c6d889","metadata":"$metadataContent"}'https://10.185.190.118:31943/v3-ext/OS-FEDERATION/identity_providers/ACME/protocols/saml/metadata
响应样例
该接口用于查询协议信息。
URI格式GET/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845616__i158217961514">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml</em>
ResponseBody参数说明响应样例{"protocol":{"id":"saml","links":{"identity_provider":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml"},"mapping_id":"ACME"}}
该接口提供查询用户组详细信息的功能。
URI格式GET/v3/groups/{group_id}查询参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845618__i1189418187816">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.145.93.56:31943/v3/groups/ab9f261180d746ef8624beb5ae39b5aa</em>
ReponseBody参数说明响应样例{"group":{"domain_id":"d54061ebcb5145dd814f8eb3fe9b7ac0","description":"Contractdevelopers","id":"ab9f261180d746ef8624beb5ae39b5aa","links":{"self":"https://sample.domain.com/v3/groups/ab9f261180d746ef8624beb5ae39b5aa"},"name":"abcdef","create_time":1494943784468}}
该接口提供查询项目对应用户组是否包含权限的功能。
URI格式HEAD/v3/projects/{project_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845620__i4546339615302">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XHEADhttps://10.22.44.158:31943/v3/projects/073bbf60da374853841cf6624c94de4b/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
该接口用于查询指定用户可访问的项目信息。
URI格式GET/v3/users/{user_id}/projects参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845622__i34645065152714">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/users/43cbe5e77aaf4665bbb962062dc1fc9d/projects</em>
ResponseBody参数说明project格式说明响应样例{"links":{"self":"<emid="zh-cn_topic_0057845622__i66036328201412">www.example.com</em>/v3/auth/projects","previous":null,"next":null},"projects":[{"is_domain":false,"description":"","links":{"self":"<emid="zh-cn_topic_0057845622__i43732817201417">www.example.com</em>/v3/projects/9041929bcc6e4bfe85add4e7b96ffdd7"},"enabled":true,"id":"9041929bcc6e4bfe85add4e7b96ffdd7","parent_id":"398998b5392f4150ad48fe456d6de4f1","domain_id":"398998b5392f4150ad48fe456d6de4f1","name":"<emid="zh-cn_topic_0057845622__i50581530104543">region_name</em>"},{"is_domain":false,"description":"","links":{"self":"<emid="zh-cn_topic_0057845622__i48766269201423">www.example.com</em>/v3/projects/ee65ca70d3cf43aaa1ea6492ce15f289"},"enabled":true,"id":"ee65ca70d3cf43aaa1ea6492ce15f289","parent_id":"398998b5392f4150ad48fe456d6de4f1","domain_id":"398998b5392f4150ad48fe456d6de4f1","name":"MOS"}]}
该接口提供租户中用户组增加权限的功能。
URI格式PUT/v3/domains/{domain_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845623__i31505703152920">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XPUThttps://10.22.44.158:31943/v3/domains/d54061ebcb5145dd814f8eb3fe9b7ac0/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
在调用接口的时候，部分URL中需要填入项目ID（project_id或者tenant_id，本文中project_id和tenant_id含义一样），所以需要在“我的凭证”页面获取项目ID。项目ID获取步骤如下：注册并登录管理控制台。单击登录账户并选择“我的凭证”。在“我的凭证”页面的“项目列表”中查看项目ID。
该接口用于查询指定条件下的项目信息。
URI格式GET/v3/projects{?domain_id,name,enabled,parent_id,is_domain,page,per_page}参数说明说明：<ulid="zh-cn_topic_0057845625__ul60748527173424"><liid="zh-cn_topic_0057845625__li7378017173424">该接口至少需要一种查询条件。禁止全量查询project列表。需要分页查询时，必须保证查询参数中同时存在page和per_page。
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845625__i57921961141534">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-X"X-Auth-Token:$token"-XGEThttps://10.145.93.56:31943/v3/projects?domain_id=5c9f5525d9d24c5bbf91e74d86772029&amp;name=</em>region_name
ResponseBody参数说明projects格式说明响应样例{"links":{"self":"<emid="zh-cn_topic_0057845625__i115164772084">www.example.com</em>/v3/projects?domain_id=c9f5525d9d24c5bbf91e74d86772029&amp;name=region_name","previous":null,"next":null},"projects":[{"is_domain":false,"description":"","links":{"self":"<emid="zh-cn_topic_0057845625__i694459720819">www.example.com</em>/v3/projects/e86737682ab64b2490c48f08bcc41914"},"enabled":true,"id":"e86737682ab64b2490c48f08bcc41914","parent_id":"c9f5525d9d24c5bbf91e74d86772029","domain_id":"c9f5525d9d24c5bbf91e74d86772029","name":"region_name"}]}
在HTTP协议中，可以使用多种请求方法，用于指明以何种方式来访问指定的资源,例如：GET、PUT、POST、DELETE、PATCH。目前提供的REST接口支持的请求方法如下表所示。
该接口用于通过联邦认证方式获取unscopetoken。
URI格式GET/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/auth参数说明
RequestHeader参数说明说明：<olid="zh-cn_topic_0057845629__ol4176620517502"><liid="zh-cn_topic_0057845629__li4035152817502">该接口支持通过页面单点认证（WebSSO）和增强客户端代理（ECP）两种机制获取token，通过不同的请求header区分，具体使用请参考RequestHeader参数说明。不建议直接调用该接口，请参考，使用openstackclient获取token。请求样例<emid="zh-cn_topic_0057845629__i659810472312">GET/v3/OS-FEDERATION/identity_providers/idptest/protocols/saml/auth</em>
ResponseBody参数说明响应样例{"token":{"issued_at":"2017-05-23T06:54:51.763000Z","expires_at":"2017-05-24T06:54:51.763000Z","methods":["mapped"],"user":{"domain":{"id":"e31ac82d778b4d128cb6fed37fd72cdb","name":"exampledomain"},"id":"RMQTgtjjSNGDcKy7oUmI3AZg7GgsWG0Z","name":"exampleuser","OS-FEDERATION":{"identity_provider":{"id":"exampleuser"},"protocol":{"id":"saml"},"groups":[{"id":"b40189e26ea44f959877621b4b298db5"}]}}}}
该接口用于删除指定用户。
URI格式DELETE/v3/users/{user_id}URI参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845630__i23661011551">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://172.30.48.86:31943/v3/users/2c1c6c54e59141b889c99e6fada5f19f</em>
无响应体。
该接口提供检查某租户中指定用户组是否包含特定权限的功能。
URI格式HEAD/v3/domains/{domain_id}/groups/{group_id}/roles/{role_id}URL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845632__i50053988152059">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XHEADhttps://10.22.44.158:31943/v3/domains/d54061ebcb5145dd814f8eb3fe9b7ac0/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles/e62d9ba0d6a544cd878d9e8a4663f6e2</em>
无响应体。
该接口用于通过联邦认证方式获取scopedtoken。
URI格式POST/v3/auth/tokens
RequestHeader参数说明identity格式token格式scope格式project格式domain格式请求样例POST/v3/auth/tokens{"auth":{"identity":{"methods":["token"],"token":{"id":"--federated-token-id--"}},"scope":{"domain":{"id":"e31ac82d778b4d128cb6fed37fd72cdb"}}}}不建议直接调用该接口，请参考，使用openstackclient获取token。
ResponseBody参数说明响应样例X-Subject-Token:MIIFwAYJKoZIhvcNAQcCoIIFsTCCBa0CAQExDTALBglghkgBZQMEAgEwggQOBgkqhkiG9w0BBwGgggP-BIID+3sidG9rZW4iOnsibWV0aG9kcyI6WyJ0b2tlbiJdLCJpc3N1ZWRfYXQiOiIyMDE3LTA1LTIzVDA2OjU0OjEyLjUwODAwMFoiLCJleHBpcmVzX2F0IjoiMjAxNy0wNS0yNFQwNjo1NDoxMi41MDgwMDBaIiwidXNlciI6eyJpZCI6IlJNUVRndGpqU05HRGNLeTdvVW1JM0FaZzdHZ3NXRzBaIiwibmFtZSI6InN0b25laWRwMDEiLCJPUy1GRURFUkFUSU9OIjp7ImlkZW50aXR5X3Byb3ZpZGVyIjp7ImlkIjoic3RvbmVpZHAwMSJ9LCJwcm90b2NvbCI6eyJpZCI6InNhbWwifSwiZ3JvdXBzIjpbeyJpZCI6ImI0MDE4OWUyNmVhNDRmOTU5ODc3NjIxYjRiMjk4ZGI1In1dfSwiZG9tYWluIjp7ImlkIjoiZTMxYWM4MmQ3NzhiNGQxMjhjYjZmZWQzN2ZkNzJjZGIiLCJuYW1lIjoic3RvbmUiLCJ4ZG9tYWluX2lkIjoieGRvbWFpbmlkMDA2OTU4MTQ5MDM5NDQ1NzE0NDU5MzIzIiwieGRvbWFpbl90eXBlIjoiVFNJIn19LCJkb21haW4iOnsiaWQiOiJlMzFhYzgyZDc3OGI0ZDEyOGNiNmZlZDM3ZmQ3MmNkYiIsIm5hbWUiOiJzdG9uZSIsInhkb21haW5faWQiOiJ4ZG9tYWluaWQwMDY5NTgxNDkwMzk0NDU3MTQ0NTkzMjMiLCJ4ZG9tYWluX3R5cGUiOiJUU0kifSwicm9sZXMiOlt7ImlkIjoiZWFlODI2Njg0ZDc3NDYyNDgyZDgxNThjMGZjN2IxNjEiLCJuYW1lIjoidGVfYWRtaW4ifSx7ImlkIjoiMDA3YjczYjIyOWYxNGMzZDhlNzFmNWRjY2Y5NjY5YTYiLCJuYW1lIjoic2VjdV9hZG1pbiJ9LHsiaWQiOiI5M2JjNTc1M2UwZmM0ZjAxYTZmZDY5ZjQ1YTE1YzEyNiIsIm5hbWUiOiJ0ZV9hZ2VuY3kifSx7ImlkIjoiMCIsIm5hbWUiOiJvcF9nYXRlZF9zdG9uZSJ9LHsiaWQiOiIwIiwibmFtZSI6Im9wX2dhdGVkX3Rhc3NzZzEifSx7ImlkIjoiMCIsIm5hbWUiOiJvcF9nYXRlZF90YXNzc2cyIn0seyJpZCI6IjAiLCJuYW1lIjoib3BfZ2F0ZWRfdGFzc3NnNCJ9LHsiaWQiOiIwIiwibmFtZSI6Im9wX2dhdGVkX3Rhc3NzZzUifSx7ImlkIjoiMCIsIm5hbWUiOiJvcF9nYXRlZF90YXNzc2c2In1dLCJjYXRhbG9nIjpbXX19MYIBhTCCAYECAQEwXDBXMQswCQYDVQQGEwJVUzEOMAwGA1UECAwFVW5zZXQxDjAMBgNVBAcMBVVuc2V0MQ4wDAYDVQQKDAVVbnNldDEYMBYGA1UEAwwPd3d3LmV4YW1wbGUuY29tAgEBMAsGCWCGSAFlAwQCATANBgkqhkiG9w0BAQEFAASCAQBbiTxUJJ7OS-yk0XspQwu5f8labMMjpM8clbe3PrPZNQhBtJNqG1joUH9QIWXJkQ54VHu9B0yWzO8enbn2qQaHu6IVzs4tAl034k250CcYcBL241KJQtKDgJyu0Q1mnQXWCCcV9a5-3sQitvBYSINirYAh7UH-lUhO4q01nUp1O3UEOq6-xhLpCy63DP7LgrfE8tIvkRxfj62-NgVffaEgxSC7iCZMc84MQYxdYWPXTrJk110UUh86JyzXfOEov-sIWBGvC6g9FpPpUvTlpM+IK7yogFxmZwIshPLmDj5aqtaT6YxkMxMIY9G7kNCljTUn1QJhqbIEIM-5zl4f7m6w{"token":{"domain":{"xdomain_type":"TSI","id":"e31ac82d778b4d128cb6fed37fd72cdb","xdomain_id":"xdomainid006958149039445714459323","name":"exampledomain"},"methods":["token"],"roles":[{"id":"eae826684d77462482d8158c0fc7b161","name":"te_admin"},{"id":"007b73b229f14c3d8e71f5dccf9669a6","name":"secu_admin"},{"id":"93bc5753e0fc4f01a6fd69f45a15c126","name":"te_agency"},{"id":"0","name":"op_gated_stone"},{"id":"0","name":"op_gated_tasssg1"},{"id":"0","name":"op_gated_tasssg2"},{"id":"0","name":"op_gated_tasssg4"},{"id":"0","name":"op_gated_tasssg5"},{"id":"0","name":"op_gated_tasssg6"}],"expires_at":"2017-05-24T06:54:12.508000Z","catalog":[{"endpoints":[{"url":"https://<emid="zh-cn_topic_0057845636__i1240281119913">sample.domain.com</em>/v3","interface":"public","region":"*","region_id":"*","id":"f2a24165ecf14efeb5fcb2682ebc4cde"}],"type":"identity","id":"90ded4a66ee14ecea72266ee2fdc2b0a","name":"keystone"}],"user":{"OS-FEDERATION":{"identity_provider":{"id":"stoneidp01"},"protocol":{"id":"saml"},"groups":[{"id":"b40189e26ea44f959877621b4b298db5"}]},"domain":{"xdomain_type":"TSI","id":"e31ac82d778b4d128cb6fed37fd72cdb","xdomain_id":"xdomainid006958149039445714459323","name":"exampledomain"},"id":"RMQTgtjjSNGDcKy7oUmI3AZg7GgsWG0Z","name":"exampleuser"},"issued_at":"2017-05-23T06:54:12.508000Z"}}
该接口用于在某一租户下创建用户。
URI格式POST/v3/users
RequestHeader参数说明RequestBody参数说明请求样例1.按照以下模板创建临时文件${filename}.json。${filename}是临时文件名，用户可以自定义。{"user":{"default_project_id":"acf2ffabba974fae8f30378ffde2cfa6","domain_id":"88b16b6440684467b8825d7d96e154d8","enabled":true,"name":"jamesdoe","password":"********"}}2.在${filename}.json文件同目录下，执行如下curl命令。<emid="zh-cn_topic_0057845637__i1861516017477">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPOST-d@${filename}.jsonhttps://172.30.48.86:31943/v3/users</em>3.在${filename}.json文件同目录下，执行如下命令删除临时文件${filename}.json。rm<emid="zh-cn_topic_0057845637__i147763528269">${filename}.json</em>
ResponseBody参数说明user格式说明响应样例{"user":{"name":"jamesdoe","links":{"self":"https://sample.domain.com/v3/users/614d1d2fb86940faab8f350bf1b9dbac"},"domain_id":"88b16b6440684467b8825d7d96e154d8","enabled":true,"id":"614d1d2fb86940faab8f350bf1b9dbac","default_project_id":"acf2ffabba974fae8f30378ffde2cfa6","password_expires_at":null}}
该接口用于查询用户列表。
URI格式GET/v3/users参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845638__i79494215553">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/users</em>
ResponseBody参数说明user格式说明响应样例{"users":[{"name":"james1234","links":{"self":"https://sample.domain.com/v3/users/6d8b04e3bf99445b8f76300903e5bf32"},"description":"james1234","domain_id":"88b16b6440684467b8825d7d96e154d8","enabled":false,"id":"6d8b04e3bf99445b8f76300903e5bf32","default_project_id":"263fd9","password_expires_at":"2016-12-07T00:00:00.000000Z"}],"links":{"self":"https://sample.domain.com/v3/users?domain_id=88b16b6440684467b8825d7d96e154d8&amp;enabled=false","previous":null,"next":null}}
该接口用于查询身份提供商信息。
URI格式GET/v3/OS-FEDERATION/identity_providers/{id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845639__i828511814210">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME</em>
ResponseBody参数说明响应样例{"identity_provider":{"description":"StoresACMEidentities","enabled":false,"id":"ACME","remote_ids":[],"links":{"protocols":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME"}}}
该接口提供查询某个项目对应的指定用户组的权限。
URI格式GET/v3/projects/{project_id}/groups/{group_id}/rolesURL参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845640__i42547293121755">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XGEThttps://10.22.44.158:31943/v3/projects/073bbf60da374853841cf6624c94de4b/groups/47d79cabc2cf4c35b13493d919a5bb3d/roles</em>
ReponseBody参数说明role参数说明响应样例{"links":{"self":"www.example.com/v3/projects/3a4cd4d559d8492bbe7bd355643f9763/groups/728da352c017480f80b5a96beb15f0e6/roles","previous":null,"next":null},"roles":[{"catalog":"BASE","display_name":"Guest","name":"readonly","links":{"self":"www.example.com/v3/roles/13d132b7856945788f6df7eb3ed5c35e"},"policy":{"Version":"1.0","Statement":[{"Action":["*:*:Get*","*:*:List*"],"Effect":"Allow"},{"Action":["identity:*"],"Effect":"Deny"}]},"domain_id":null,"type":"AA","id":"13d132b7856945788f6df7eb3ed5c35e","description":"Guest"},{"catalog":"BASE","display_name":"TenantAdministrator","name":"te_admin","links":{"self":"www.example.com/v3/roles/1def304b73f14e8eb8d1eb9bf8337ae6"},"policy":{"Version":"1.0","Statement":[{"Action":["*"],"Effect":"Allow"},{"Action":["identity:*"],"Effect":"Deny"}]},"domain_id":null,"type":"AA","id":"1def304b73f14e8eb8d1eb9bf8337ae6","description":"TenantAdministrator"}]}
该接口用于查询协议列表信息。
URI格式GET/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845644__i2929347191419">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/identity_providers/ACME/protocols/</em>
ResponseBody参数说明响应样例{"links":{"next":null,"previous":null,"self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols"},"protocols":[{"id":"saml","links":{"identity_provider":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME","self":"https://example.com/v3/OS-FEDERATION/identity_providers/ACME/protocols/saml"},"mapping_id":"ACME"}]}
该接口用于查询映射信息。
URI格式GET/v3/OS-FEDERATION/mappings/{id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845645__i38811058194315">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://10.185.190.118:31943/v3/OS-FEDERATION/mappings/ACME</em>
ResponseBody参数说明响应样例{"mapping":{"id":"ACME","links":{"self":"https://example.com/v3/OS-FEDERATION/mappings/ACME"},"rules":[{"local":[{"user":{"name":"{0}"}},{"group":{"name":"0cd5e9"}}],"remote":[{"type":"UserName"},{"type":"orgPersonType","not_any_of":["Contractor","Guest"]}]}]}}
统一命令行客户端工具的安装需要使用root权限，以下配置OpenstackClient的操作只需要普通用户权限。接口调用操作应该在一个安全的网络环境中进行（在VPN或者在租户的云服务器中），如果在不安全的网络环境中，可能会收到中间人攻击。使用文本编辑器创建环境变量文件，在文件中设置用户名、密码、区域、SAML协议版本、IAM地址和端口等信息。参数说明如表4-1所示。示例如下：exportOS_IDENTITY_API_VERSION=3exportOS_AUTH_TYPE=v3samlpasswordexportOS_AUTH_URL=https://iam.cn-north-1.myhwclouds.com:443/v3exportOS_IDENTITY_PROVIDER=idpidexportOS_PROTOCOL=samlexportOS_IDENTITY_PROVIDER_URL=https://idp.example.com/idp/profile/SAML2/SOAP/ECPexportOS_USERNAME=usernameexportOS_PASSWORD=userpasswordexportOS_PROJECT_NAME=cn-north-1执行如下命令，设置环境变量。sourcekeystonerc执行如下命令，获取token。openstacktokenissue
该接口用于删除映射信息。
URI格式DELETE/v3/OS-FEDERATION/mappings/{id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845648__i526622813575">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XDELETEhttps://10.185.190.118:31943/v3/OS-FEDERATION/mappings/ACME</em>
无响应体。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
该接口提供创建用户组的功能。
URI格式POST/v3/groups
RequestHeader参数说明RequestBody参数说明请求样例<emid="zh-cn_topic_0057845650__i1129411221695">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPOST-d'{"group":{"description":"Contractdevelopers","domain_id":"d54061ebcb5145dd814f8eb3fe9b7ac0","name":"jixiang2"}}'https://172.30.48.86:31943/v3/groups</em>
ReponseBody参数说明响应样例{"group":{"domain_id":"d54061ebcb5145dd814f8eb3fe9b7ac0","description":"Contractdevelopers","id":"ab9f261180d746ef8624beb5ae39b5aa","links":{"self":"https://sample.domain.com/v3/groups/ab9f261180d746ef8624beb5ae39b5aa"},"name":"abcdef"}}
本文主要指导用户如何通过OpenStackAPI对公有云各服务资源进行生命周期管理，以及如何使用OpenStackclient与公有云系统对接。
OpenStack社区提供独立命令行客户端（Individualcommand-lineclient）和统一命令行客户端（Unifiedcommand-lineclient）（参考两种工具，社区更加推荐用户使用统一命令行客户端工具，当前IAM仅支持统一命令行客户端，相关问题请参考OpenStack社区进行解决。统一命令行客户端工具的相关版本如下：python-openstackclient版本：2.4.0python-novaclient版本：3.3.2python-glanceclient版本：2.0.1python-keystoneclient版本：2.3.1python-neutronclient版本：4.1.2python-cinderclient版本：1.6.0python-heatclient版本：1.1.0python-designateclient：2.1.0python-swiftclient：3.0.0
该接口用于查询指定用户的详细信息。
URI格式GET/v3/users/{user_id}参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845652__i12161181595619">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/users/43cbe5e77aaf4665bbb962062dc1fc9d</em>
ResponseBody参数说明user格式说明响应样例{"user":{"default_project_id":"263fd9","domain_id":"1789d1","enabled":true,"id":"9fe1d3","links":{"self":"https://example.com/identity/v3/users/9fe1d3"},"name":"jsmith","description":"jsmith","password_expires_at":"2016-11-06T15:32:17.000000"}}
该接口用于用户修改自己密码。
URI格式POST/v3/users/{user_id}/passwordURI参数说明
RequestHeader参数说明RequestBody参数说明请求样例1.按照以下模板创建临时文件${filename}.json。${filename}是临时文件名，用户可以自定义。{"user":{"password":"********","original_password":"********"}}2.在${filename}.json文件同目录下，执行如下curl命令。<emid="zh-cn_topic_0057845653__i195976413240">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPOST-d@${filename}.json</em><emid="zh-cn_topic_0057845653__i17542122911521">https://172.30.48.86:31943/v3/users/2c1c6c54e59141b889c99e6fada5f19f/password</em>3.在${filename}.json文件同目录下，执行如下命令删除临时文件${filename}.json。rm<emid="zh-cn_topic_0057845653__i14664314272">${filename}.json</em>
无响应体。
该接口提供为用户组添加用户的功能。
URI格式PUT/v3/groups/{group_id}/users/{user_id}URI参数说明
RequestHeader参数说明请求样例<emid="zh-cn_topic_0057845654__i1199618795312">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XPUThttps://172.30.48.86:31943/v3/groups/00007111583e457389b0d4252643181b/users/edb66d2b656c43d0b67fb143d670bb3a</em>
无响应体。
该接口用来获取用户token，可以通过assume_role的方式进行认证。token的有效期为24小时，需要同一个token鉴权时，可以先缓存起来，避免频繁调用。
URI格式POST/v3/auth/tokens
RequestHeader参数说明RequestBody参数说明说明：上述参数信息的获取方式请参考“”。请求样例：<emid="ZH-CN_TOPIC_0064274720__i177624590415">curl-i-k-H'X-Auth-Token:$token'-H'Content-Type:application/json;charset=utf8'-XPOST-d'{"auth":{"identity":{"methods":["assume_role"],"assume_role":{"domain_name":"exampledomain","xrole_name":"op_service","restrict":{"roles":["secu_admin"]}}},"scope":{"domain":{"name":"exampledomain"}}}}'https://sample.domain.com/v3/auth/tokens</em>
ResponseHeader参数说明Token格式说明响应样例ResponseHeader中存储信息为：X-Subject-Token:MIIE9gYJKoZIhvcNAQcCoIIE5zCCBOMCAQExDTALBglghkgBZQMEAgEwggNEBgkqhkiG9w0BBwGgggM1BIIDMXsidG9rZW4iOnsibWV0aG9kcyI6WyJod19hc3N1bWVfcm9sZSJdLCJpc3N1ZWRfYXQiOiIyMDE3LTA1LTE4VDExOjQ0OjA1LjIzMjAwMFoiLCJleHBpcmVzX2F0IjoiMjAxNy0wNS0xOVQxMTo0NDowNS4yMzIwMDBaIiwidXNlciI6eyJpZCI6IjkzZTEyZWNkYWQ2ZjRhYmQ4NDk2ODc0MWRhZjVjNmEzIiwibmFtZSI6ImppeGlhbmcxL29wX3NlcnZpY2UiLCJkb21haW4iOnsiaWQiOiJjZTkyNWM0MmMyNTk0M2JlYmJhMTBlYTY0YWY5MzEwMiIsIm5hbWUiOiJqaXhpYW5nMSJ9fSwiZG9tYWluIjp7ImlkIjoiY2U5MjVjNDJjMjU5NDNiZWJiYTEwZWE2NGFmOTMxMDIiLCJuYW1lIjoiaml4aWFuZzEifSwicm9sZXMiOlt7ImlkIjoiYzExYzYxMzE5ZjA4NDA0ZWFmOTRmODAzMGI5ZDM3YmIiLCJuYW1lIjoic2VjdV9hZG1pbiJ9LHsiaWQiOiIwIiwibmFtZSI6Im9wX2xlZ2FjeSJ9LHsiaWQiOiIwIiwibmFtZSI6Im9wX3Jlc3RyaWN0ZWQifSx7ImlkIjoiMCIsIm5hbWUiOiJvcF9nYXRlZF90YXNzc2cxIn0seyJpZCI6IjAiLCJuYW1lIjoib3BfZ2F0ZWRfdGFzc3NnMiJ9LHsiaWQiOiIwIiwibmFtZSI6Im9wX2dhdGVkX3Rhc3NzZzQifSx7ImlkIjoiMCIsIm5hbWUiOiJvcF9nYXRlZF90YXNzc2c1In0seyJpZCI6IjAiLCJuYW1lIjoib3BfZ2F0ZWRfdGFzc3NnNiJ9XSwiYXNzdW1lZF9ieSI6eyJ1c2VyIjp7ImRvbWFpbiI6eyJuYW1lIjoib3Bfc2VydmljZSIsImlkIjoiYzFhNzhhODJkODFjNGExOWIwM2JmZTgyZDNhZGQ1ZTUifSwiaWQiOiJjZGViMTU4ZGRhODU0Y2MzYmFiNzdkODkyNmZmZWNmMyIsIm5hbWUiOiJyb2xlX191c2VyIn19fX0xggGFMIIBgQIBATBcMFcxCzAJBgNVBAYTAlVTMQ4wDAYDVQQIDAVVbnNldDEOMAwGA1UEBwwFVW5zZXQxDjAMBgNVBAoMBVVuc2V0MRgwFgYDVQQDDA93d3cuZXhhbXBsZS5jb20CAQEwCwYJYIZIAWUDBAIBMA0GCSqGSIb3DQEBAQUABIIBAB4IaWWzCwmqxH+ht4ZNWdvhwZ5NNAH1lcCeCjtEvKwu9jOAieeirCx6JjWcbN-uC0kRDHrAny3k-j02yAuGW0ndrzXDHQUC8PHzCdk3UPvJnwJdHp7drWIszPfDEM3ThwZTnq27gQY5V0MNFaoJKITtZhK2KcD7zD5GDFMRKF3pM5vy3naAd4dXCHCfoDsDxHt8XgrYjHEqlKmI-L2ScGBCuZAqQ0L4FwQYQ7W7QDW9ra1m9lo30KVdtWI0wb0vaUVx5OWcOPZVoQbJLyuZiX7b-u0c7lsQ34KegTHwgmWyUNJVfqxQPt8FFhoiXPSiFHVkhz++ioAd8ec-FeABbe8=X-Frame-Options:SAMEORIGINResponseBody中存储信息为：{"token":{"methods":["assume_role"],"issued_at":"2017-05-18T11:44:05.232000Z","expires_at":"2017-05-19T11:44:05.232000Z","user":{"id":"93e12ecdad6f4abd84968741daf5c6a3","name":"<emid="ZH-CN_TOPIC_0064274720__i1353871212136">exampledomain</em>/op_service","domain":{"id":"ce925c42c25943bebba10ea64af93102","name":"exampledomain"}},"domain":{"id":"ce925c42c25943bebba10ea64af93102","name":"exampledomain"},"roles":[{"id":"c11c61319f08404eaf94f8030b9d37bb","name":"secu_admin"},{"id":"0","name":"op_legacy"},{"id":"0","name":"op_restricted"},{"id":"0","name":"op_gated_tasssg1"},{"id":"0","name":"op_gated_tasssg2"},{"id":"0","name":"op_gated_tasssg4"},{"id":"0","name":"op_gated_tasssg5"},{"id":"0","name":"op_gated_tasssg6"}],"assumed_by":{"user":{"domain":{"name":"op_service","id":"c1a78a82d81c4a19b03bfe82d3add5e5"},"id":"cdeb158dda854cc3bab77d8926ffecf3","name":"example_op_service_user"}}}}
该接口提供创建项目功能。
URI格式POST/v3/projects
RequestHeader参数说明RequestBody参数说明请求样例<emid="ZH-CN_TOPIC_0066154565__i5844137113119">curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XPOST–d‘{"project":{"domain_id":"acf2ffabba974fae8f30378ffde2cfa6","name":"region_test1"}}’https://10.144.24.54:31943/v3/projects</em>
响应样例
该接口提供修改项目信息的功能。
URI格式PATCH/v3/projects/{project_id}URI参数说明
RequestHeader参数说明RequestBody参数说明请求示例curl-i-k-H"X-Auth-Token:$token"-H'Content-Type:application/json;charset=utf8'-XPATCH-d‘{"project":{"name":"region_test2","description":"test_project_desc"}}’https://10.144.24.54:31943/v3/projects/23da5961c8214f5caf701c27d9703959
响应示例
该接口提供根据ProjectID获取Project的详细信息。
URI格式GET/v3/projects/{project_id}URI参数说明
RequestHeader参数说明请求示例获取project.id=619d3e78f61b4be68bc5aa0b59edcf7b的project信息<emid="ZH-CN_TOPIC_0066154567__i1293816595357"><emid="ZH-CN_TOPIC_0066154567__i1614445043716">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-X"X-Auth-Token:$token"-X</em>GEThttps://10.64.23.150:31943/v3/projects/619d3e78f61b4be68bc5aa0b59edcf7b</em>
响应示例
该接口用于查询区域列表。
URI格式GET/v3/regions
RequestHeader参数说明请求样例<emid="ZH-CN_TOPIC_0067148043__i01061551111911">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/regions</em>
ReponseBody参数说明services格式说明响应样例（响应成功）{"regions":[{"parent_region_id":null,"description":"","links":{"self":"None/v3/regions/1500365963661574434"},"type":"private","id":"1500365963661574434","locales":{"pt-br":"POTRGA","en-us":"ENGLISH","es-es":"ESPANIAR","zh-cn":"<emid="ZH-CN_TOPIC_0067148043__i33782470102046">region_name</em>"}},{"parent_region_id":null,"description":"","links":{"self":"None/v3/regions/500017826026667755"},"type":"private","id":"500017826026667755","locales":{"pt-br":"POTRGA","en-us":"ENGLISH","es-es":"ESPANIAR","zh-cn":"<emid="ZH-CN_TOPIC_0067148043__i27160804102058">region_name1</em>"}},{"parent_region_id":null,"description":"","links":{"self":"None/v3/regions/<emid="ZH-CN_TOPIC_0067148043__i44172413102431">region_name</em>"},"type":"public","id":"Dec-test2","locales":{"zh-cn":"<emid="ZH-CN_TOPIC_0067148043__i12200323102017">region_name2</em>","en-us":"<emid="ZH-CN_TOPIC_0067148043__i46194484102020">region_name2</em>"}},{"parent_region_id":null,"links":{"self":"None/v3/regions/Dec-test1112244"},"id":"Dec-test1112244","locales":{"zh-cn":"测试区1_test01","en-us":"testregion1","es-es":"testregion1","pt-br":"testregion1"},"description":""}],"links":{"self":"None/v3/regions","previous":null,"next":null}}
该接口用于查询区域详情。
URI格式GET/v3/regions/{region_id}参数说明
RequestHeader参数说明请求样例<emid="ZH-CN_TOPIC_0067148044__i32761857135419">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/regions/test-pusb999999991</em>
该接口用于查询服务详情。
URI格式GET/v3/services/{service_id}参数说明
RequestHeader参数说明请求样例<emid="ZH-CN_TOPIC_0067148045__i45521226183716">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/services/5a4ed456d228428c800ed2b67b4363a7</em>
响应样例（响应成功）{"service":{"enabled":true,"type":"compute","name":"nova","links":{"self":"10.10.10.10/v3/services/5a4ed456d228428c800ed2b67b4363a7"},"id":"5a4ed456d228428c800ed2b67b4363a7"}}
该接口用于查询终端节点详情。
URI格式GET/v3/endpoints/{endpoint_id}参数说明
RequestHeader参数说明请求样例<emid="ZH-CN_TOPIC_0067148046__i129111653811">curl-i-k-H'Accept:application/json'-H'Content-Type:application/json;charset=utf8'-H"X-Auth-Token:$token"-XGEThttps://172.30.48.86:31943/v3/endpoints/62ea3602f8ee42b1825956473f5295a8</em>
响应样例（请求成功）{"endpoint":{"region_id":"<emid="ZH-CN_TOPIC_0067148046__i57391877102616">region_id</em>","links":{"self":"10.10.10.10/v3/endpoints/62ea3602f8ee42b1825956473f5295a8"},"url":"https://172.30.49.68:7443/v2/","region":"<emid="ZH-CN_TOPIC_0067148046__i5684482710266">region_name</em>","enabled":true,"interface":"public","service_id":"5a4ed456d228428c800ed2b67b4363a7","id":"62ea3602f8ee42b1825956473f5295a8"}}
该接口主要用于删除某个镜像的自定义标签，通过该接口，用户可以将私有镜像中一些不用的标签删除。
URI格式DELETE/v2/images/{image_id}/tags/{tag}参数说明
请求样例
正常204异常
镜像视图是提供给用户查询镜像属性的一些详情，比如取值类型，包含属性等。通过镜像视图，用户可以从宏观上对镜像基本情况有一定的了解。
该接口主要用于查询镜像视图，通过视图，用户可以了解到镜像包含哪些属性，同时也可以了解每个属性的数据类型等。
URI格式GET/v2/schemas/image
请求样例
要素说明响应样例
正常200异常
该接口主要用于查询镜像列表视图，通过该接口用户可以了解到镜像列表的详细情况和数据结构。
URI格式GET/v2/schemas/images
请求样例
要素说明响应样例
正常200异常
镜像是一个包含了软件及必要配置的云服务器模版，至少包含操作系统，还可以包含应用软件（例如数据库软件）和私有软件。镜像是镜像管理服务（IMS）管理的核心对象。
根据不同条件查询镜像列表信息。
URI格式GET/v2/cloudimages说明：可以在URI后面用‘?’和‘&amp;’添加不同的查询条件组合，请参考请求样例。参数说明
要素说明响应样例
正常200异常
查询单个镜像详情，用户可以通过该接口查询单个私有或者公共镜像的详情。
URI格式GET/v2/images/{image_id}参数说明
请求样例
要素说明响应样例
正常200异常
更新镜像信息接口，主要用于镜像属性的修改。目前允许用户修改私有镜像的名称和描述信息。当前仅支持可用（active）状态的镜像更新相关信息。
URI格式PATCH/v2/cloudimages/{image_id}参数说明URI参数说明
RequestBody参数说明请求样例
要素说明响应样例{"file":"/v2/images/33ad552d-1149-471c-8190-ff6776174a00/file","owner":"0b1e494e2660441a957313163095fe5c","id":"33ad552d-1149-471c-8190-ff6776174a00","size":2,"self":"/v2/images/33ad552d-1149-471c-8190-ff6776174a00","schema":"/v2/schemas/image","status":"active","tags":[],"visibility":"private","name":"ims_test","checksum":"99914b932bd37a50b983c5e7c90ae93b","deleted":false,"protected":false,"container_format":"bare","min_ram":0,"updated_at":"2015-12-08T02:30:49Z","__os_bit":"64","__os_version":"Ubuntu14.04server64bit","__description":"imstest","disk_format":"vhd","__isregistered":"true","__platform":"Ubuntu","__os_type":"Linux","min_disk":40,"virtual_env_type":"FusionCompute","__image_source_type":"uds","__imagetype":"private","created_at":"2015-12-04T09:45:33Z","virtual_size":0,"deleted_at":null,"__originalimagename":"33ad552d-1149-471c-8190-ff6776174a00","__backup_id":"","__productcode":"","__image_size":"449261568","__data_origin":null}
正常200异常
该接口主要用于删除镜像，用户可以通过该接口将自己的私有镜像删除。
URI格式DELETE/v2/images/{image_id}参数说明
请求样例
正常204异常
使用云服务器或者上传至OBS桶中的外部镜像文件制作私有镜像。作为异步接口，调用成功，只是说明公有云后台收到了制作请求，镜像是否制作成功需要通过异步任务查询接口查询该任务的执行状态，具体请参考。
URI格式POST/v2/cloudimages/action
使用云服务器制作镜像时的RequestBody参数说明使用上传至OBS桶中的外部镜像文件时的RequestBody参数说明请求样例<ulid="ZH-CN_TOPIC_0020092109__ul24159091151619"><liid="ZH-CN_TOPIC_0020092109__li5156003151615">使用云服务器制作镜像POST/v2/cloudimages/action{"name":"ims_test","description":"云服务器制作镜像","instance_id":"877a2cda-ba63-4e1e-b95f-e67e48b6129a"}使用上传至OBS桶中的外部镜像文件制作镜像POST/v2/cloudimages/action{"name":"ims_test_file","description":"OBS文件制作镜像","image_url":"ims-image:centos70.qcow2","os_version":"CentOS7.064bit","is_config_init":true,"min_disk":40,"is_config":true}
要素说明响应样例
正常200异常
镜像标签可供给用户对私有镜像进行自定义标记。通过镜像标签，用户可以自由地对私有镜像分类管理。
该接口主要用于为某个镜像添加一个自定义标签。通过自定义标签，用户可以将镜像进行分类。
URI格式PUT/v2/images/{image_id}/tags/{tag}参数说明
请求样例
STATUSCODE204
正常204异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0020521604__i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0020521604__i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0020592903__ol40047934162236"><liid="ZH-CN_TOPIC_0020592903__li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。
该接口为扩展接口，主要用于查询异步接口执行情况，比如查询导出镜像任务的执行状态。
URI格式GET/v1/{tenant_id}/jobs/{job_id}参数说明
请求样例
要素说明响应样例
正常200异常
所有公有云的扩展接口（目前包含查询镜像列表接口，更新镜像接口和导出镜像接口）发生400错误时，会有自定义错误信息返回，该节为您介绍每个错误码的含义。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024478020__i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024478020__i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0024478020__i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024478020__i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
__os_version取值如所示。__support_xen_gpu_type取值如所示。特殊镜像类型及支持的操作系统版本如所示。
该接口为扩展接口，用于用户将自己的私有镜像导出到指定的OBS桶中。
URI格式POST/v1/cloudimages/{image_id}/file参数说明
RequestBody参数说明请求样例POST/v1/cloudimages/d164b5df-1bc3-4c3f-893e-3e471fd16e64/file{"bucket_url":"ims-image:centos7_5.qcow2","file_format":"qcow2"}
要素说明响应样例：
正常200异常
镜像是一个包含了软件及必要配置的云服务器模版，至少包含操作系统，还可以包含应用软件（例如数据库软件）和私有软件。镜像是镜像管理服务（IMS）管理的核心对象。
用户共享镜像给其他用户时，使用该接口向该镜像成员中添加接受镜像用户的租户ID。
URI格式POST/v2/images/{image_id}/members
要素说明响应样例
用户接受或者拒绝共享镜像时，使用该接口更新镜像成员的状态。
URI格式PUT/v2/images/{image_id}/members/{member_id}参数说明
RequestBody参数说明请求样例
要素说明响应样例
该接口主要用于镜像共享中查询某个镜像成员的详情。
URI格式GET/v2/images/{image_id}/members/{member_id}参数说明URI参数说明
请求样例
要素说明响应样例{"status":"accepted","created_at":"2016-09-01T02:05:14Z","updated_at":"2016-09-01T02:37:11Z","image_id":"d164b5df-1bc3-4c3f-893e-3e471fd16e64","member_id":"edc89b490d7d4392898e19b2deb34797","schema":"/v2/schemas/member"}
该接口用于共享镜像过程中，获取接受该镜像的成员列表。
URI格式GET/v2/images/{image_id}/members参数说明
请求样例
要素说明响应样例：
该接口用于取消对某个用户的镜像共享。
URI格式DELETE/v2/images/{image_id}/members/{member_id}URI参数说明
请求样例DELETE/v2/images/d164b5df-1bc3-4c3f-893e-3e471fd16e64/members/edc89b490d7d4392898e19b2deb34797
响应样例
该接口为扩展接口，主要用于镜像共享时用户将多个镜像共享给多个用户。
URI格式POST/v1/cloudimages/members
RequestBody参数说明请求样例POST/v1/cloudimages/members{"images":["d164b5df-1bc3-4c3f-893e-3e471fd16e64","0b680482-acaa-4045-b14c-9a8c7dfe9c70"],"projects":["9c61004714024f9586705d090530f9fa","edc89b490d7d4392898e19b2deb34797"]}
要素说明响应样例{"job_id":"edc89b490d7d4392898e19b2deb34797"}
该接口为扩展接口，主要用于用户接受或者拒绝多个共享镜像时批量更新镜像成员的状态。
URI格式PUT/v1/cloudimages/members
RequestBody参数说明请求样例PUT/v1/cloudimages/members{"images":["d164b5df-1bc3-4c3f-893e-3e471fd16e64","0b680482-acaa-4045-b14c-9a8c7dfe9c70"],"project_id":"edc89b490d7d4392898e19b2deb34797","status":"accepted"}
要素说明响应样例：
该接口为扩展接口，主要用于用户对多个用户取消镜像共享。
URI格式DELETE/v1/cloudimages/members
RequestBody参数说明请求样例DELETE/v1/cloudimages/members{"images":["d164b5df-1bc3-4c3f-893e-3e471fd16e64","0b680482-acaa-4045-b14c-9a8c7dfe9c70"],"projects":["9c61004714024f9586705d090530f9fa","edc89b490d7d4392898e19b2deb34797"]}
要素说明响应样例：
该接口为扩展接口，主要用于用户将一个已有镜像复制为另一个镜像。复制镜像时，可以更改镜像的加密等属性，以满足不同的场景。
URI格式POST/v1/cloudimages/{image_id}/copyURI参数说明
RequestBody参数说明请求样例POST/v1/cloudimages/465076de-dc36-4aec-80f5-ef9d8009428f/copy{"name":"ims_encrypted_copy3","description":"testcopy","cmk_id":"bd66288c-9081-460a-8227-4cbd0c814cb4"}
要素说明响应样例：
该接口主要用于查询镜像成员视图，通过视图，用户可以了解到镜像成员包含哪些属性，同时也可以了解每个属性的数据类型。
URI格式GET/v2/schemas/member
请求样例
要素说明响应样例STATUSCODE200{"name":"member","properties":{"status":{"enum":["pending","accepted","rejected"],"type":"string","description":"Thestatusofthisimagemember"},"created_at":{"type":"string","description":"Dateandtimeofimagemembercreation"},"updated_at":{"type":"string","description":"Dateandtimeoflastmodificationofimagemember"},"image_id":{"pattern":"^([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}$","type":"string","description":"Anidentifierfortheimage"},"member_id":{"type":"string","description":"Anidentifierfortheimagemember(tenantId)"},"schema":{"readOnly":true,"type":"string"}}}
正常200异常
该接口主要用于查询镜像成员列表视图，通过视图，用户可以了解到镜像成员包含哪些属性，同时也可以了解每个属性的数据类型。
URI格式GET/v2/schemas/members
请求样例
要素说明响应样例STATUSCODE200{"name":"members","links":[{"href":"{schema}","rel":"describedby"}],"properties":{"members":{"items":{"name":"member","properties":{"status":{"enum":["pending","accepted","rejected"],"type":"string","description":"Thestatusofthisimagemember"},"created_at":{"type":"string","description":"Dateandtimeofimagemembercreation"},"updated_at":{"type":"string","description":"Dateandtimeoflastmodificationofimagemember"},"image_id":{"pattern":"^([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}$","type":"string","description":"Anidentifierfortheimage"},"member_id":{"type":"string","description":"Anidentifierfortheimagemember(tenantId)"},"schema":{"readOnly":true,"type":"string"}}},"type":"array"},"schema":{"type":"string"}}}
正常200异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
创建用户主密钥，可用来加密数据密钥。别名“/default”为服务默认主密钥的后缀名，由服务自动创建。因此用户创建的主密钥别名不能与服务默认主密钥的别名相同，即后缀名不能为“/default”。
URI格式POST/v1.0/{project_id}/kms/create-key参数说明
参数说明请求样例{"key_alias":"test","realm":"cn-north-1"}
要素说明响应样例{"key_info":{"key_id":"bb6a3d22-dc93-47ac-b5bd-88df7ad35f1e","domain_id":"b168fe00ff56492495a7d22974df2d0b"}}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
公有云的扩展接口发生400、500等错误时，会有自定义错误信息返回，该节为您介绍每个错误码的含义。
HTTP状态码500返回体样例{"error":{"error_code":"KMS.0101","error_msg":"kmserror."}}
创建数据密钥，返回结果包含明文和密文。
URI格式POST/v1.0/{project_id}/kms/create-datakey参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","datakey_length":"512"}
要素说明响应样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","plain_text":"8151014275E426C72EE7D44267EF11590DCE0089E19863BA8CC832187B156A72A5A17F17B5EF0D525872C59ECEB72948AF85E18427F8BE0D46545C979306C08D","cipher_text":"020098009EEAFCE122CAA5927D2E020086F9548BA1675FDB022E4ECC01B96F2189CF4B85E78357E73E1CEB518DAF7A4960E7C7DE8885ED3FB2F1471ABF400119CC1B20BD3C4A9B80AF590EFD0AEDABFDBB0E2B689DA7B6C9E7D3C5645FCD9274802586BE63779471F9156F2CDF07CD8412FFBE9230643034363662302D653732372D346439632D623335642D6638346262343734613337660000000045B05321483BD9F9561865EE7DFE9BE267A42EB104E98C16589CE46940B18E52"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0061756172__o4bc1a44f10ee410da97eaeaa40f347ee"><liid="ZH-CN_TOPIC_0061756172__lc9bd770117104d069bd3462f3bf669a4">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
禁用密钥，密钥禁用后不可以使用。
URI格式POST/v1.0/{project_id}/kms/disable-key参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f"}
要素说明响应样例{"key_info":{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","key_state":"3"}}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
密钥为启用状态才能禁用密钥。
查询配额，查询用户可以创建的用户主密钥配额总数及当前使用量信息。用户可以创建的用户主密钥配额不包括服务自动创建的默认主密钥数量。
URI格式GET/v1.0/{project_id}/kms/user-quotas参数说明
无
要素说明响应样例{"quotas":{"resources":[{"type":"CMK","used":15,"quota":20}]}}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
查询密钥详细信息。
URI格式POST/v1.0/{project_id}/kms/describe-key参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f"}
要素说明响应样例{"key_info":{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","domain_id":"b168fe00ff56492495a7d22974df2d0b","key_alias":"kms_test","realm":"cn-north-1","key_description":"","creation_date":"1472442386000","scheduled_deletion_date":"","key_state":"2","default_key_flag":"0","key_type":"1"}}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
生成512bit的随机数。
URI格式POST/v1.0/{project_id}/kms/gen-random参数说明
参数说明请求样例{"random_data_length":"512"}
要素说明响应样例{"random_data":"5791C223E87124AB9FC29B5A8AC60BE4B98D168F47A58BB2A88833E40D6ED32D57E2AAB5410492EB25096873F9CE3D45E0D22F820A5AB4EEADC33A1A6AE780F1"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
加密数据密钥，用指定的主密钥加密数据密钥。
URI格式POST/v1.0/{project_id}/kms/encrypt-datakey参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","plain_text":"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F5A5FD42D16A20302798EF6ED309979B43003D2320D9F0E8EA9831A92759FB4B","datakey_plain_length":"64"}
要素说明响应样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","cipher_text":"020098005273E14E6E8E95F5463BECDC27E80AF820B9FC086CB47861899149F67CF07DAFF2810B7D27BDF19AB7632488E0926A48DB2FC85BEA905119411B46244C5E6B8036C60A0B0B4842FFE6994518E89C19B1C1D688D9043BCD6053EA7BA0652642CE59F2543C80669139F4F71ABB9BD9A24330643034363662302D653732372D346439632D623335642D66383462623437346133376600000000D34457984F9730D57F228C210FD22CA6017913964B21D4ECE45D81092BB9112E","datakey_length":"64"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0061756179__afd503069399f4f09a36aa5de932ae2c7">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0061756179__ab36d9ea3dcb14928a7478c2456664e67">username</em>","password":"<emid="ZH-CN_TOPIC_0061756179__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0061756179__a4dd66546b21b4414a326c3f8c8f0e5ae">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
解密数据密钥，用指定的主密钥解密数据密钥。
URI格式POST/v1.0/{project_id}/kms/decrypt-datakey参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","datakey_cipher_length":"64","cipher_text":"020098005273E14E6E8E95F5463BECDC27E80AF820B9FC086CB47861899149F67CF07DAFF2810B7D27BDF19AB7632488E0926A48DB2FC85BEA905119411B46244C5E6B8036C60A0B0B4842FFE6994518E89C19B1C1D688D9043BCD6053EA7BA0652642CE59F2543C80669139F4F71ABB9BD9A24330643034363662302D653732372D346439632D623335642D66383462623437346133376600000000D34457984F9730D57F228C210FD22CA6017913964B21D4ECE45D81092BB9112E"}
要素说明响应样例{"data_key":"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","datakey_length":"64","datakey_dgst":"F5A5FD42D16A20302798EF6ED309979B43003D2320D9F0E8EA9831A92759FB4B"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
解密的数据为加密数据中的结果。
取消计划删除密钥。
URI格式POST/v1.0/{project_id}/kms/cancel-key-deletion参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f"}
要素说明响应样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","key_state":"3"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
密钥处于“计划删除”状态才能取消计划删除密钥。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0061756185__acc11d2befb8a49779fdd67fa522ec0c0">Endpoint</em>/<emid="ZH-CN_TOPIC_0061756185__aa804c82165984b69a192891d9fcf9876">uri</em>URL中的参数说明如所示。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
创建数据密钥，返回结果只包含密文。
URI格式POST/v1.0/{project_id}/kms/create-datakey-without-plaintext参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","datakey_length":"512"}
要素说明响应样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","cipher_text":"020098005CDC28E29EC3230AA42E8985FBABA095037D6474C64519C9B564AB28B15739C88E7E887500D1094973C2DC16353DB7ED3946C73339517AB1E983D521F9E9D700DC5D9C42F557EBF3F608E3CBBEE0BC68136EE7D2A49117E00332BAC4AE4ED805EB6068FA900C5A8019BFE2C2651BE3E130643034363662302D653732372D346439632D623335642D66383462623437346133376600000000F160727EBDB83400C21D80D713B49D3A2C37F24AE160E7BB3DAC025ADC0C45E3"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
其它header属性，请遵照http协议。
计划多少天后删除密钥，可设置7～1096天内删除密钥。
URI格式POST/v1.0/{project_id}/kms/schedule-key-deletion参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","pending_days":"7"}
要素说明响应样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","key_state":"4"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
密钥管理服务，即KMS（KeyManagementService），是一种安全可靠的管理密钥托管服务，用于集中管理控制密钥。KMS通过使用第三方硬件安全模块HSM（HardwareSecurityModule）保护密钥安全，帮助用户轻松创建和控制加密密钥，让用户密钥不会明文出现在HSM之外，避免密钥泄露。KMS对密钥的所有操作都会进行访问控制及日志跟踪，提供所有密钥的使用记录，满足监督和合规性要求。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
查询用户所有密钥列表。
URI格式POST/v1.0/{project_id}/kms/list-keys参数说明
参数说明请求样例{"limit":"","marker":""}
要素说明响应样例{"keys":["0d0466b0-e727-4d9c-b35d-f84bb474a37f","2e258389-bb1e-4568-a1d5-e1f50adf70ea","3cf69e11-f15f-4e86-a5d3-a14d22d7521c"],"next_marker":"","truncated":"false"}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
查询实例数，获取用户已经创建的用户主密钥数量。用户已经创建的用户主密钥不包括服务自动创建的默认主密钥。
URI格式GET/v1.0/{project_id}/kms/user-instances参数说明
无
要素说明响应样例{"instance_num":15}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
无
启用密钥，密钥启用后才可以使用。
URI格式POST/v1.0/{project_id}/kms/enable-key参数说明
参数说明请求样例{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f"}
要素说明响应样例{"key_info":{"key_id":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","key_state":"2"}}或{"error":{"error_code":"KMS.XXXX","error_msg":"XXX"}}
正常200异常
密钥为禁用状态才能启用密钥。
该接口规范适用于华为云M-OLAP平台接口。
M-OLAP通过高度灵活的RESTAPI对外开放接口，供客户系统集成使用。
接口参数类型中List的表现形式为数组。IP地址以点分格式表示，如：192.168.1.10。
华为云M-OLAP接口采用HTTPS传输协议。HTTPS请求方在和服务器建立连接并发出HTTPS请求后，不能在该连接上再发出其他请求，必须等待所发请求的响应，收到响应后才可以继续发请求。
媒体类型表示为：“version=2.0”表示该华为云M-OLAP接口的实现版本为2.0版本。
RestAPI支持POST、GET、PUT和DELETE请求方法。
日期、时间表示规范日期、时间分隔符定义
本章节介绍RESTAPI的使用流程，如所示。需要注意以下两点：箭头方向表示使用流程方向，需要先获取版本、组件、VPC、子网和区域信息，再使用M-OLAP接口。无箭头的线条表示接口无先后顺序，处于平行关系。
M-OLAP服务的请求消息头如所示。
M-OLAP服务的响应消息头如所示。
华为云M-OLAP服务接口采用HTTPS传输协议收发请求，请求响应码如所示。
获取租户创建的所有集群列表信息。
URL格式GET/molap/api/v1/clusters?clusterName=<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789635__i63731018114431">HadoopBigdataCluster1</em>&amp;pageSize=<emid="ZH-CN_TOPIC_0034789635__i6492228693515">10</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789635__i26038079103311">1&amp;</em>clusterState=<emid="ZH-CN_TOPIC_0034789635__i35632953103348">existing</em>参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters?clusterName=<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789635__i4961874893455">HadoopBigdataCluster1</em>&amp;pageSize=<emid="ZH-CN_TOPIC_0034789635__i4391555193455">10</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789635__i27528119105014">1&amp;</em>clusterState=<emid="ZH-CN_TOPIC_0034789635__i1610062105014">existing</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"clusterTotal":"1","clusters":[{"clusterId":"<emid="ZH-CN_TOPIC_0034789635__i4270261917748">3f53761f-74fc-4e1f-abbc-258855b66ed4</em>","clusterName":"<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789635__i88631111787">HadoopBigdataCluster1</em>","masterNodeNum":"<emid="ZH-CN_TOPIC_0034789635__i708945617811">2</em>","coreNodeNum":"<emid="ZH-CN_TOPIC_0034789635__i1746110917822">8</em>","clusterState":"<emid="ZH-CN_TOPIC_0034789635__i6447887017826">running</em>","createAt":"<emid="ZH-CN_TOPIC_0034789635__i4334036817832">1439436688</em>","vpc":null,"fee":null,"hadoopVersion":null,"masterNodeSize":null,"coreNodeSize":null,"componentList":null,"externalIp":null,"internalIp":null,"deploymentId":null,"remark":"","orderId":null,"azId":null,"masterNodeProductId":null,"masterNodeSpecId":null,"coreNodeProductId":null,"coreNodeSpecId":null,"azName":null}]}参数说明
成功200OK失败
创建一个新集群。
URL格式POST/molap/api/v1/clusters参数说明无。
请求样例POSThttps://{ip}:{port}/molap/api/v1/clustersRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ceRequestBody:{"BillingType":12,"MasterNodeNum":<emid="ZH-CN_TOPIC_0034789636__i4293136910511">2</em>,"MasterNodeSize":"<emid="ZH-CN_TOPIC_0034789636__i6575710316213">C2.2xlarge</em>","CoreNodeNum":3,"CoreNodeSize":"<emid="ZH-CN_TOPIC_0034789636__i884192216221">C2.2xlarge</em>","AvailableZoneId":"<emid="ZH-CN_TOPIC_0034789636__i28806993163610">ae04cf9d61544df3806a3feeb401b204</em>","ClusterName":"<emid="ZH-CN_TOPIC_0034789636__i5102713105254">newcluster</em>","VpcId":"<emid="ZH-CN_TOPIC_0034789636__i14942036121458">5b7db34d-3534-4a6e-ac94-023cd36aaf74</em>","SubnetId":"<emid="ZH-CN_TOPIC_0034789636__i33670256121454">815bece0-fd22-4b65-8a6e-15788c99ee43</em>","SubnetName":"<emid="ZH-CN_TOPIC_0034789636__i18072495121446">subnet</em>","VolumeType":"<emid="ZH-CN_TOPIC_0034789636__i47729151145610">SSD</em>","VolumeSize":<emid="ZH-CN_TOPIC_0034789636__i1565414141558">100</em>,"ClusterMasterSecret":"<emid="ZH-CN_TOPIC_0034789636__i10962483152711">Password</em>","ComponentList":[{"componentId":"FusionInsightV100R002C61_001","componentName":"Hadoop","componentVersion":"2.7.2","componentDesc":"分布式系统基础架构"},{"componentId":"FusionInsightV100R002C61_002","componentName":"Spark","componentVersion":"1.5.1","componentDesc":"内存分布式系统架构"},{"componentId":"FusionInsightV100R002C61_003","componentName":"Molap","componentVersion":"0.1.0","componentDesc":"新型Hadoop本地文件格式"}]}参数说明
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"clusterId":"<emid="ZH-CN_TOPIC_0034789636__i48275026114526">da1592c2-bb7e-468d-9ac9-83246e95447a</em>","result":<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789636__i65285456114529">true</em>,"msg":""}参数说明
成功200OK失败请参见。
创建集群后，查看集群详细配置信息。
URL格式GET/molap/api/v1/clusters/{clusterId}参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789637__i2613012891820">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"cluster":{"clusterId":"1A643B07-6C1C-B6F5-42B3-6666BE07001A","clusterName":"<emid="ZH-CN_TOPIC_0034789637__i66936173171616">core8xlarge1</em>","masterNodeNum":"<emid="ZH-CN_TOPIC_0034789637__i4104320171619">2</em>","coreNodeNum":"<emid="ZH-CN_TOPIC_0034789637__i34594483171621">8</em>","clusterState":"<emid="ZH-CN_TOPIC_0034789637__i60962261171624">running</em>","createAt":"<emid="ZH-CN_TOPIC_0034789637__i54194737171627">1439535179</em>","vpc":"<emid="ZH-CN_TOPIC_0034789637__i46525883171639">2a89f98f-919b-4202-840f-eee73dab2245</em>","fee":"0","hadoopVersion":"<emid="ZH-CN_TOPIC_0034789637__i54054412151144">2.7</em><emid="ZH-CN_TOPIC_0034789637__i56081105113257">.2</em>","masterNodeSize":"<emid="ZH-CN_TOPIC_0034789637__i1825318116319">C2.2xlarge</em>","coreNodeSize":"<emid="ZH-CN_TOPIC_0034789637__i3386301216328">C2.2xlarge</em>","componentList":[{"componentId":"FusionInsightV100R002C61_001","componentName":"Hadoop","componentVersion":"2.7.2","componentDesc":"分布式系统基础架构"},{"componentId":"FusionInsightV100R002C61_002","componentName":"Spark","componentVersion":"1.5.1","componentDesc":"内存分布式系统架构"},{"componentId":"FusionInsightV100R002C61_003","componentName":"Molap","componentVersion":"0.1.0","componentDesc":"新型Hadoop本地文件格式"}],"externalIp":"<emid="ZH-CN_TOPIC_0034789637__i24299941171937">172.20.27.125</em>","internalIp":"<emid="ZH-CN_TOPIC_0034789637__i4529793171943">172.20.27.125</em>","deploymentId":"<emid="ZH-CN_TOPIC_0034789637__i54531191171947">dca7972d-ee1c-42b2-9953-fc41ad0513f7</em>","remark":"","orderId":"<emid="ZH-CN_TOPIC_0034789637__i1631161171951">HWS001014F2AFBC34E</em>4","azId":"<emid="ZH-CN_TOPIC_0034789637__i24840084171956">12c47a78666b4e438cd0c692b9860387</em>","masterNodeProductId":"<emid="ZH-CN_TOPIC_0034789637__i5151686317201">a36536dd40bb42639e9eadf021c69984</em>","masterNodeSpecId":"<emid="ZH-CN_TOPIC_0034789637__i1542139017206">6a5eb6e8029945b8baeb24b6583a566f</em>","coreNodeProductId":"<emid="ZH-CN_TOPIC_0034789637__i2897257317209">a36536dd40bb42639e9eadf021c69984</em>","coreNodeSpecId":"<emid="ZH-CN_TOPIC_0034789637__i11163927172013">6a5eb6e8029945b8baeb24b6583a566f</em>","azName":"<emid="ZH-CN_TOPIC_0034789637__i3096113172020">az1.dc1</em>","vnc":"","volumeSize":<emid="ZH-CN_TOPIC_0034789637__i52494760152812">100</em>}}参数说明
成功200OK失败请参见。
获取作业执行情况列表。
URL格式GET/molap/api/v1/clusters/{clusterId}/jobExes?pageSize=<emid="ZH-CN_TOPIC_0034789639__i17094589101814">10</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789639__i42484488101814">1</em>参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789639__i170787050630">86d5400f-e6d6-4512-80ae-a06c82d37d5e</em>/jobExes?pageSize=<emid="ZH-CN_TOPIC_0034789639__i10825008101833">10</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789639__i4410487101833">1</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"JobExeTotal":2,"JobExes":[{"Id":"e37de32b-959d-4809-89c7-0be2789a5fb5","ClusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","GroupId":"e37de32b-959d-4809-89c7-0be2789a5fb5","JobMainId":"","JobStepId":"","StepSeq":1,"StepName":"distcp","JobType":5,"JarPath":"","HiveScriptPath":"","Input":"s3n://dingjing/xx_data/","Output":"/user/omm","Arguments":"","Progress":"","StartTime":1470239773,"SpendTime":0,"EndTime":1470239773,"State":2,"JobLog":"","FinalStatus":0,"UpdateAt":1470239773,"CreateBy":"4287ad58b0cf4cecb1c682b9ce8a0852","UpdateBy":"4287ad58b0cf4cecb1c682b9ce8a0852","FinishedStep":0,"JobName":"distcp","JobId":"","TaskNum":0,"StepNum":0,"Hql":"","FileAction":"import","Credential":"9HXIQBMBATUWWEBHMQMG","PostponeAt":1470239773},{"Id":"e467344e-28e5-449e-8bab-65956acfe899","ClusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","GroupId":"e467344e-28e5-449e-8bab-65956acfe899","JobMainId":"","JobStepId":"","StepSeq":1,"StepName":"M-OLAP","JobType":7,"JarPath":"","HiveScriptPath":"","Input":"","Output":"","Arguments":"","Progress":"","StartTime":1470232517,"SpendTime":0,"EndTime":1470232306,"State":3,"JobLog":"","FinalStatus":2,"UpdateAt":1470232517,"CreateBy":"4287ad58b0cf4cecb1c682b9ce8a0852","UpdateBy":"Executiontier","FinishedStep":0,"JobName":"M-OLAP","JobId":"","TaskNum":0,"StepNum":0,"Hql":"SHOWSHAREDCOLUMN;","FileAction":"","Credential":"9HXIQBMBATUWWEBHMQMG","PostponeAt":1470232517}]}参数说明
成功200OK失败请参见。
在M-OLAP集群中新增一个作业。
URL格式POST/molap/api/v1/clusters/{clusterId}/jobExes参数说明
请求样例POSThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789640__i2074626395913">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>/jobExesRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ceRequestBody:{"JobType":7,"JobName":"M-OLAP","Hql":"mU0hPVyBTSEFSRUQgQ09MVU1OOw=="}参数说明
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"innerId":"<emid="ZH-CN_TOPIC_0034789640__i61495335103545">1A325321B07-3D4C-E3A2-42B3-1234BE07002B</em>"}参数说明
成功200OK失败请参见。
获取作业详细配置信息。
URL格式GET/molap/api/v1/clusters/{clusterId}/jobExes/{innerId}参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789641__i1789095602156">86d5400f-e6d6-4512-80ae-a06c82d37d5e</em>/jobExes/<emid="ZH-CN_TOPIC_0034789641__i5053777502213">035d4e49-beaf-4407-b2b0-58d1c6976175</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"Id":"035d4e49-beaf-4407-b2b0-58d1c6976175","ClusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","GroupId":"035d4e49-beaf-4407-b2b0-58d1c6976175","JobMainId":"","JobStepId":"","StepSeq":1,"StepName":"M-OLAP","JobType":7,"JarPath":"","HiveScriptPath":"","Input":"","Output":"","Arguments":"","Progress":"","StartTime":1470240488,"SpendTime":0,"EndTime":1470240267,"State":3,"JobLog":"","FinalStatus":2,"UpdateAt":1470240488,"CreateBy":"4287ad58b0cf4cecb1c682b9ce8a0852","UpdateBy":"Executiontier","FinishedStep":0,"JobName":"M-OLAP","JobId":"","TaskNum":0,"StepNum":0,"Hql":"SHOWSHAREDCOLUMN;","FileAction":"","Credential":"9HXIQBMBATUWWEBHMQMG","PostponeAt":1470240488}参数说明
成功200OK失败请参见。
删除M-OLAP作业。
URL格式DELETE/molap/api/v1/clusters/{clusterId}/jobExes/{innerId}参数说明
请求样例DELETEhttps://{ip}:{port}/molap/api/v1/clusters/<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789643__i13570358103841">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>/<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789643__i55024361103841">jobExes</em>/<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034789643__i25457207103841">6B3E1A8B-EBA7-DC2A-E5A3-C0611DDACC65</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"Result":"<emid="ZH-CN_TOPIC_0034789643__i52530289103848">succeeded"</em>,}参数说明
成功200OK失败请参见。
获取文件列表信息。
URL格式GET/molap/api/v1/clusters/{clusterId}/files/{folderName}?op=LIST参数说明
请求样例GEThttps://{IP}:{PORT}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789645__i15899009155736">1de98887-2bc0-4365-a2b3-12e495156b5a</em>/files/test1?op=<emid="ZH-CN_TOPIC_0034789645__i11921635163056">LIST</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"FileStatuses":{"FileStatus":[{"accessTime":"<emid="ZH-CN_TOPIC_0034789645__i23164345155916">0</em>","blockSize":"<emid="ZH-CN_TOPIC_0034789645__i37030976155918">0</em>","childrenNum":"<emid="ZH-CN_TOPIC_0034789645__i33852435155920">0</em>","fileId":"<emid="ZH-CN_TOPIC_0034789645__i41506873155924">16453</em>","group":"<emid="ZH-CN_TOPIC_0034789645__i43694486155927">hdfs</em>","length":"<emid="ZH-CN_TOPIC_0034789645__i27143083155929">0</em>","modificationTime":"<emid="ZH-CN_TOPIC_0034789645__i21413428155933">1446513748486</em>","owner":"<emid="ZH-CN_TOPIC_0034789645__i32217368155938">bdsemr2</em>","pathSuffix":"<emid="ZH-CN_TOPIC_0034789645__i32329428155944">.staging</em>","permission":"<emid="ZH-CN_TOPIC_0034789645__i47590564155947">700</em>","replication":"<emid="ZH-CN_TOPIC_0034789645__i23474095155950">0</em>","type":"<emid="ZH-CN_TOPIC_0034789645__i2088529155954">DIRECTORY</em>","storagePolicy":"<emid="ZH-CN_TOPIC_0034789645__i12663741155956">0</em>"}]}}参数说明
成功200OK失败请参见。
创建一个新的文件夹。
URL格式POST/molap/api/v1/clusters/{clusterId}/files/{folderName}?op=MKDIR参数说明
请求样例https://{IP}:{PORT}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789646__i2969378416526">1de98887-2bc0-4365-a2b3-12e495156b5a</em>/files/<emid="ZH-CN_TOPIC_0034789646__i4040096816529">test1</em>?op=<emid="ZH-CN_TOPIC_0034789646__i52658025163552">MKDIR</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"result":true,"msg":}参数说明
成功200OK失败请参见。
删除一个文件夹或者文件。
URL格式DELETE/molap/api/v1/clusters/{clusterId}/files/{folderName}?op=DELETE参数说明
请求样例DELETEhttps://{IP}:{PORT}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034789647__i26166054163216">1de98887-2bc0-4365-a2b3-12e495156b5a</em>/files/<emid="ZH-CN_TOPIC_0034789647__i46576432163627">test1</em>?op=<emid="ZH-CN_TOPIC_0034789647__i56406386163210">DELETE</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"result":true,"msg":}参数说明
成功200OK失败请参见。
使用RESTAPI导入、导出数据时，弹性大数据会作为一个Job来处理。新增作业时，当“JobType”选择“DistCp”，就能实现数据的导入和导出。具体操作，请参见。
获取操作日志列表信息。
URL格式GET/molap/api/v1/log?pageSize=<emid="ZH-CN_TOPIC_0034789650__i1237283492029">3</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789650__i6267547592029">1</em>&amp;type=<emid="ZH-CN_TOPIC_0034789650__i4354874692029">1</em>&amp;start=<emid="ZH-CN_TOPIC_0034789650__i3778750092029">1431147910</em>&amp;end=<emid="ZH-CN_TOPIC_0034789650__i4088867592029">1431157910</em>参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/log?pageSize=<emid="ZH-CN_TOPIC_0034789650__i62755581115949">3</em>&amp;currentPage=<emid="ZH-CN_TOPIC_0034789650__i21245230121312">1</em>&amp;type=<emid="ZH-CN_TOPIC_0034789650__i60767706121315">1</em>&amp;start=<emid="ZH-CN_TOPIC_0034789650__i2648876102739">1470155207</em>&amp;end=<emid="ZH-CN_TOPIC_0034789650__i1723259502753">1470241607</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"logsTotal":5,"logs":[{"id":106,"clusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","userId":"4287ad58b0cf4cecb1c682b9ce8a0852","operationType":4,"operationContent":"deleteJob,jobId:e467344e-28e5-449e-8bab-65956acfe899,jobName:carbon,clusterId:86d5400f-e6d6-4512-80ae-a06c82d37d5e","operationContentEn":"","operationTime":1470241296,"ip":"129.188.0.37","userName":""},{"id":105,"clusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","userId":"4287ad58b0cf4cecb1c682b9ce8a0852","operationType":4,"operationContent":"createJob,jobId:035d4e49-beaf-4407-b2b0-58d1c6976175,jobName:carbon,clusterId:86d5400f-e6d6-4512-80ae-a06c82d37d5e","operationContentEn":"","operationTime":1470240488,"ip":"129.188.0.37","userName":""},{"id":104,"clusterId":"86d5400f-e6d6-4512-80ae-a06c82d37d5e","userId":"4287ad58b0cf4cecb1c682b9ce8a0852","operationType":4,"operationContent":"createJob,jobId:e37de32b-959d-4809-89c7-0be2789a5fb5,jobName:distcp,clusterId:86d5400f-e6d6-4512-80ae-a06c82d37d5e","operationContentEn":"","operationTime":1470239773,"ip":"129.188.0.37","userName":""}]}参数说明
成功200OK失败请参见。
获取VPC信息。
URL格式GET/molap/api/v1/vpc参数说明无。
请求样例GEThttps://{ip}:{port}/molap/api/v1/vpcRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明无。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"vpcs":[{"id":"5e05cc4a-77df-4f84-bf11-8ed41b4bcc2e","name":"vpc_test","cidr":"192.168.0.0/16","createTime":null,"status":"OK"}]}参数说明
成功200OK失败请参见。
获取子网信息。
URL格式GET/molap/api/v1/subnet?vpcId=<emid="ZH-CN_TOPIC_0034809437__i19545194111413">5e05cc4a-77df-4f84-bf11-8ed41b4bcc2e</em>参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/subnet?vpcId=5e05cc4a-77df-4f84-bf11-8ed41b4bcc2eRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"subnets":[{"id":"59c1d183-3bb3-4831-829f-8e65abfaaf58","name":"Subnet1","vpcId":"5e05cc4a-77df-4f84-bf11-8ed41b4bcc2e","cidr":"192.168.0.0/24","gatewayIp":"192.168.0.1","dhcpEnable":true,"primaryDNS":"114.114.114.114","secondaryDNS":"114.114.115.115","status":"ACTIVE","azId":"12c47a78666b4e438cd0c692b9860387"}]}参数说明
成功200OK失败请参见。
获取区域信息。
URL格式GET/molap/api/v1/bss/regions参数说明无。
请求样例GEThttps://{ip}:{port}/molap/api/v1/bss/regionsRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明无。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"regions":[{"regionId":"cn-north-1","regionName":"中国华北区1","regionDesc":"","regionTag":null,"regionCode":"cn-north-1","availableZones":[{"availableZoneId":"1d7b939b382c4c3bb3481a8ca10da768","availableZoneName":"az10.dc1","availableZoneType":1,"availableZoneCode":"az10.dc1"}]}]}参数说明
成功200OK失败请参见。
获取服务支持的版本信息。
URL格式GET/molap/api/v1/components/version参数说明无。
请求样例GEThttps://{ip}:{port}/molap/api/v1/components/versionRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明无。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT["FusionInsightV100R002C60","FusionInsightV100R002C61"]参数说明无。
成功200OK失败请参见。
获取服务指定版本下的组件列表信息。
URL格式GET/molap/api/v1/components?version=FusionInsightV100R002C61参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/components?version=FusionInsightV100R002C61RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"Components":[{"componentId":"FusionInsightV100R002C61_001","componentName":"Hadoop","componentVersion":"2.7.2","componentDesc":"分布式系统基础架构"},{"componentId":"FusionInsightV100R002C61_002","componentName":"Spark","componentVersion":"1.5.1","componentDesc":"内存分布式系统架构"},{"componentId":"FusionInsightV100R002C61_003","componentName":"Molap","componentVersion":"0.1.0","componentDesc":"新型Hadoop本地文件格式"}]}参数说明
成功200OK失败请参见。
数据完成处理分析后或者集群运行异常无法提供服务时可终止集群服务。
URL格式DELETE/molap/api/v1/clusters/{clusterId}参数说明
请求样例DELETEhttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034809441__i343746839184">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>RequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"result":<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034809441__i20257887114616">true</em>,"msg":""}参数说明
成功200OK失败请参见。
获取集群主机列表信息。
URL格式GET/molap/api/v1/clusters/{clusterId}/hosts参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034809442__i6287284293928">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>/hostsRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"hostTotal":2,"hosts":[{"Id":"1","ClusterId":"<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034809442__i224704519267">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>","HostId":"<emstyle="color:#000000;"id="ZH-CN_TOPIC_0034809442__i3755332592612">node_master1_eded9</em>","HostIp":"<emid="ZH-CN_TOPIC_0034809442__i2181835292616">192.168.1.155</em>","InternalIp":"<emid="ZH-CN_TOPIC_0034809442__i5208772192457">192.168.0.18</em>","HostStatus":"<emid="ZH-CN_TOPIC_0034809442__i2265859592621">started</em>","NodeSize":"<emid="ZH-CN_TOPIC_0034809442__i5429106616355">C2.2xlarge</em>","NodeType":"<emid="ZH-CN_TOPIC_0034809442__i345990392630">Master</em>","CreateAt":<emid="ZH-CN_TOPIC_0034809442__i1472855992633">0</em>,"CreateBy":"","UpdateAt":<emid="ZH-CN_TOPIC_0034809442__i4073607792636">0</em>,"UpdateBy":"""mem":"<emid="ZH-CN_TOPIC_0034809442__i1772069692621">8192</em>","cpu":"<emid="ZH-CN_TOPIC_0034809442__i4946533792628">2</em>","Frozen":"<emid="ZH-CN_TOPIC_0034809442__i5945732010750">false</em>"},{"Id":"<emid="ZH-CN_TOPIC_0034809442__i4130193992642">2</em>","ClusterId":"<emid="ZH-CN_TOPIC_0034809442__i4655399592647">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>","HostId":"<emid="ZH-CN_TOPIC_0034809442__i5180120992652">node_master2_f566d</em>","HostIp":"<emid="ZH-CN_TOPIC_0034809442__i6650397492657">192.168.1.154</em>","InternalIp":"<emid="ZH-CN_TOPIC_0034809442__i348019492443">192.168.0.20</em>","HostStatus":"<emid="ZH-CN_TOPIC_0034809442__i198217239272">started</em>","NodeSize":"<emid="ZH-CN_TOPIC_0034809442__i607159841642">C2.2xlarge</em>","NodeType":"<emid="ZH-CN_TOPIC_0034809442__i6626451892711">Master</em>","CreateAt":<emid="ZH-CN_TOPIC_0034809442__i3881530492714">0</em>,"CreateBy":"","UpdateAt":<emid="ZH-CN_TOPIC_0034809442__i3245727492718">0</em>,"UpdateBy":"""mem":"<emid="ZH-CN_TOPIC_0034809442__i5150448692634">8192</em>","cpu":"<emid="ZH-CN_TOPIC_0034809442__i2713813192639">2</em>","Frozen":"<emid="ZH-CN_TOPIC_0034809442__i535080151083">false</em>"}]}参数说明
成功200OK失败请参见。
创建集群后，扩容集群Core节点。
URL格式PUT/molap/api/v1/clusters/{clusterId}/scaling参数说明
请求样例PUThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034809443__i37364088104650">1A643B07-6C1C-B6F5-42B3-6666BE07001A</em>/scalingRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ceRequestBody:{"service_id":"","plan_id":"","parameters":{"order_id":"","scale_type":"scale_out","node_id":"node_orderadd","instances":"1","include_instances":[],"exclude_instances":[]},"previous_values":{"plan_id":""}}参数说明
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"Result":"succeeded"}参数说明
成功200OK失败请参见。
查看集群补丁信息。
URL格式GET/molap/api/v1/clusters/{clusterId}/datasight_patch参数说明
请求样例GEThttps://{ip}:{port}/molap/api/v1/clusters/<emid="ZH-CN_TOPIC_0034809444__i64761513164131">1A643B07-6C1C-B6F5-42B3-6666BE07001A/</em>datasight_patchRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明请参见。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT[{"Id":1,"Version":"FusionInsightV100R002C61","PatchId":"001","PatchName":"patch1.1","PatchPath":"/opt/huawei/patch","Description":"aaaaaaa"},{"Id":2,"Version":"FusionInsightV100R002C61","PatchId":"002","PatchName":"patch1.2","PatchPath":"/opt/huawei/patch2","Description":"bbbbbbb"}]参数说明
成功200OK失败请参见。
获取所有集群的作业状态统计信息。
URL格式GET/molap/api/v1/statistic/job参数说明无。
请求样例GEThttps://{ip}:{port}/molap/api/v1/statistic/jobRequestHeader:Content-Type:application/jsonX-Sdk-Date:20150820T024248ZAuthorization:SDK-HMAC-SHA256Credential=QRUP2R3QFNAOVAWMYHZW/20160202/northchina/test/sdk_request,SignedHeaders=host;x-sdk-date,Signature=9d8b56b055c0e1f7a9498d881a7cb726be91b4f0cde1773b0b1557e987a480ce参数说明无。
响应样例HTTP/1.1200OKContent-Type:application/jsonDate:Mon,15Jul201321:08:05GMT{"Killed":<emid="ZH-CN_TOPIC_0034809445__i2281192116245">0</em>,"Running":<emid="ZH-CN_TOPIC_0034809445__i6538135816247">0</em>,"Error":<emid="ZH-CN_TOPIC_0034809445__i54602286162410">0</em>,"Success":<emid="ZH-CN_TOPIC_0034809445__i25957946162411">0</em>"Abnormal":<emid="ZH-CN_TOPIC_0034809445__i12295406161223">0</em>}参数说明
成功200OK失败请参见。
MapReduce服务（MRS）打造了高可靠、高安全、易使用的运行维护平台，对外提供大容量的数据存储和分析能力，可解决各大企业的数据存储和处理需求。MRS支持创建集群，集群为用户专有，用于运行MapReduce、Spark、HiveScript、DistCP、SparkScript和SparkSQL作业。集群最大支持102个节点（Master固定为2个，Core为3～100个），每个节点对应一台弹性云服务器（ECS），两个EVS硬盘（一个40GB的系统数据盘和一个用户数据盘）和一个弹性IP（EIP）。Core节点默认的最大值为100，如果用户需要的Core节点数大于100，可以联系技术支持人员或者调用后台接口修改数据库。本文档中涉及的基本概念如所示。
MRS所提供的接口均为自研接口，提供了集群接口和作业接口。在开源的基础上，为解决公有云认证并区分不同集群，MRS在请求消息头中增加了特定的头域，分别为X-Sdk-Date、Authorization、Host、Content-type和Content-Length，具体头域说明请参见。
MRS接口调用的流程如下所示。调用接口前，请获取请求认证，填充至请求消息头中。在调用接口的时候，需要先在管理控制台上获取到项目编号。填充请求参数构建请求方法。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0042904471__zh-cn_topic_0037324631_i43323884114613">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参见.。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0042904471__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0042904471__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0042904471__zh-cn_topic_0037324631_zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”。
在使用MRS的RESTAPI前，您需要下载AK/SK证书至本地。每个用户只需下载一次AK/SK证书。
登录管理控制台。单击用户名，在下拉列表中选择“我的凭证”。选择“管理访问秘钥”页签。单击“新增访问密钥”，生成AK/SK的证书文件。在“新增访问密钥”界面，输入登录密码，获取并输入验证码。单击“确定”，系统显示确认界面。在弹出的对话框中，单击“确定”，完成证书下载。说明：为防止访问密钥泄漏，请妥善保管。
下载API网关签名工具。下载地址：解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0042904474__zh-cn_topic_0037324634_zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0042904474__zh-cn_topic_0037324634_zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URI中需要填入项目编号（project_id或者tenant_id，本文中project_id和tenant_id含义一样），所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。例如project_id:"5a3314075bfa49b9ae360f4ecd333695"。
创建一个MRS集群，并在集群中提交一个作业。该接口不兼容Sahara。支持同一时间并发创建10个集群。使用接口前，您需要先获取如所示的资源信息。
URI格式POST/v1.1/{project_id}/run-job-flow参数说明
请求样例{"billing_type":12,"data_center":"southchina","master_node_num":2,"master_node_size":"c2.2xlarge.linux.mrs","core_node_num":3,"core_node_size":"c2.2xlarge.linux.mrs","available_zone_id":"az1.dc1","cluster_name":"newcluster","vpc":"vpc1","vpc_id":"5b7db34d-3534-4a6e-ac94-023cd36aaf74","subnet_id":"815bece0-fd22-4b65-8a6e-15788c99ee43","subnet_name":"subnet","cluster_version":"MRS1.5.0","cluster_type":0,"volume_type":"SSD","volume_size":100,"node_public_cert_name":"SSHkey-bba1","safe_mode":0,"log_collection":1,"component_list":[{"component_name":"Hadoop"},{"component_name":"Spark"},{"component_name":"HBase"},{"component_name":"Hive"}],"add_jobs":[{"job_type":1,"job_name":"tenji111","jar_path":"s3a://bigdata/program/hadoop-mapreduce-examples-2.7.2.jar","arguments":"wordcount","input":"s3a://bigdata/input/wd_1k/","output":"s3a://bigdata/ouput/","job_log":"s3a://bigdata/log/","shutdown_cluster":true,"file_action":"","submit_job_once_cluster_run":true,"hql":"","hive_script_path":""}]}参数说明
响应样例{"cluster_id":"<emid="ZH-CN_TOPIC_0042904500__i1153122410328">da1592c2-bb7e-468d-9ac9-83246e95447a</em>","result":<emid="ZH-CN_TOPIC_0042904500__i1765500310328">true</em>,"msg":""}参数说明
状态码如所示。异常状态码请参见。
每一个请求通常由三部分组成，分别是：请求行、请求消息头、请求消息体(可选)。
请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：Method：表示请求方法（所有方法全为大写），各个方法的解释如下：<ulid="ZH-CN_TOPIC_0042904501__zh-cn_topic_0037324637_ul46065735155759"><liid="ZH-CN_TOPIC_0042904501__zh-cn_topic_0037324637_li42783561155612">GET：请求获取Request-URI所标识的资源。POST：在Request-URI所标识的资源后附加新的数据。PUT：请求服务器存储一个资源，并用Request-URI作为其标识。DELETE：请求服务器删除Request-URI所标识的资源。PATCH：请求服务器更新资源的部分内容，当资源不存在的时候，PATCH可能会去创建一个新的资源。HEAD：只请求页面的首部。OPTION：允许客户端查看服务器的性能。Request-URI：是一个统一资源标识符。说明：RequestURI中的参数分别为[path][?query]。其中：<ulid="ZH-CN_TOPIC_0042904501__zh-cn_topic_0037324637_ul63852547193530"><liid="ZH-CN_TOPIC_0042904501__zh-cn_topic_0037324637_li26050465193535">多个path之间使用“/”分隔。query与path之间使用“?”分隔。多个query之间使用“&amp;”分隔。HTTP-Version：表示请求的HTTP协议版本。CRLF：表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。
请求消息头由若干头域构成，每个头域由一个域名，冒号(:)和域值组成。MRS公共请求消息头如所示。
以JSON格式封装，基本语法是嵌套式的key:value形式。HTTP请求的正文针对不同的URI对象有不同的必须字段和可选字段。
共有三种方式可以基于已构建好的请求消息发起请求，分别为：cURLcURL是一个命令行工具，用来执行各种URL操作和信息传输。cURL充当的是HTTP客户端，可以发送HTTP请求给服务端，并接收响应消息。cURL适用于接口调试。关于cURL详细信息请参见。编码通过编码调用接口，组装请求消息，并发送处理请求消息。REST客户端Mozilla、Google都为REST提供了图形化的浏览器插件，发送处理请求消息。针对Firefox，请参见。针对Chrome，请参见。
请求消息接收之后，服务器会返回一个HTTP响应消息。响应也是由三个部分组成，分别是：状态行、响应头、响应消息体。
状态行格式如下：HTTP-Version：表示服务器HTTP协议的版本号。Status-Code：表示服务器发回的响应状态代码。状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<ulid="ZH-CN_TOPIC_0042904503__zh-cn_topic_0037324639_ul11431476161029"><liid="ZH-CN_TOPIC_0042904503__zh-cn_topic_0037324639_li4465811116959">1xx：指示信息，表示请求已接收，继续处理。2xx：成功，表示请求已被成功接收、理解、接受。3xx：重定向，要完成请求必须进行更进一步的操作。4xx：客户端错误，请求有语法错误或请求无法实现。5xx：服务器端错误，服务器未能实现合法的请求。Reason-Phrase：表示状态代码的文本描述。
响应的消息头如所示。
响应消息体为JSON格式的文本，并且输出内容是UTF-8编码格式。
状态码如所示。
公共请求消息头如所示。其它header属性，请遵照http协议。
公共响应消息头如所示。
创建集群后，扩容集群Core节点。该接口不兼容Sahara。处于running和scaling-error状态的集群才允许扩容，其他状态则不允许扩容。
URI格式PUT/v1.1/{project_id}/cluster_infos/{cluster_id}参数说明
请求样例{"service_id":"","plan_id":"","parameters":{"order_id":"","scale_type":"scale_out","node_id":"node_orderadd","instances":"1","include_instances":[],"exclude_instances":[]},"previous_values":{"plan_id":""}}参数说明
响应样例{"result":"succeeded"}参数说明操作失败时返回的错误码信息列表如下：
状态码如所示。异常状态码请参见。
数据完成处理分析后或者集群运行异常无法提供服务时可终止集群服务。该接口兼容Sahara。scaling-outscaling-instartingterminatingterminatedfailedscaling-error
URI格式DELETE/v1.1/{project_id}/clusters/{cluster_id}参数说明
请求样例无。参数说明无。
响应样例无。参数说明无。
状态码如所示。异常状态码请参见。
在MRS集群中新增一个作业，并执行作业。该接口不兼容Sahara。
URI格式POST/v1.1/{project_id}/jobs/submit-job参数说明
请求样例TherequestexampleofMapReducejob:{"job_type":1,"job_name":"mrs_test_jobone_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","jar_path":"s3a://mrs-opsadm/jarpath/hadoop-mapreduce-examples-2.7.2.jar","arguments":"wordcount","input":"s3a://mrs-opsadm/input/","output":"s3a://mrs-opsadm/output/","job_log":"s3a://mrs-opsadm/log/","file_action":"","hql":"","hive_script_path":""}TherequestexampleofSparkjob:{"job_type":2,"job_name":"mrs_test_sparkjob_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","jar_path":"s3a://mrs-opsadm/jarpath/spark-test.jar","arguments":"org.apache.spark.examples.SparkPi10","input":"","output":"s3a://mrs-opsadm/output/","job_log":"s3a://mrs-opsadm/log/","file_action":"","hql":"","hive_script_path":""}TherequestexampleofHiveScriptjob:{"job_type":3,"job_name":"mrs_test_SparkScriptJob_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","jar_path":"s3a://mrs-opsadm/jarpath/Hivescript.sql","arguments":"","input":"s3a://mrs-opsadm/input/","output":"s3a://mrs-opsadm/output/","job_log":"s3a://mrs-opsadm/log/","file_action":"","hql":"","hive_script_path":"s3a://mrs-opsadm/jarpath/Hivescript.sql"}TherequestexampleofDistCpjobforimport:{"job_type":5,"job_name":"mrs_test_importjob_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","input":"s3a://mrs-opsadm/jarpath/hadoop-mapreduce-examples-2.7.2.jar","output":"/user","file_action":"import"}TherequestexampleofDistCpjobforexport:{"job_type":5,"job_name":"mrs_test_exportjob_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","input":"/user/hadoop-mapreduce-examples-2.7.2.jar","output":"s3a://mrs-opsadm/jarpath/","file_action":"export"}TherequestexampleofSparkScriptjob:{"job_type":6,"job_name":"mrs_test_sparkscriptjob_20170602_141106","cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","jar_path":"s3a://mrs-opsadm/jarpath/sparkscript.sql","arguments":"","input":"s3a://mrs-opsadm/input/","output":"s3a://mrs-opsadm/output/","job_log":"s3a://mrs-opsadm/log/","file_action":"","hql":"","hive_script_path":"s3a://mrs-opsadm/jarpath/sparkscript.sql"}参数说明
响应样例{"job_execution":{"templated":false,"created_at":1496387588913,"updated_at":1496387588913,"id":"12ee9ae4-6ee1-48c6-bb84-fb0b4f76cf03","tenant_id":"c71ad83a66c5470496c2ed6e982621cc","job_id":"","job_name":"mrs_test_jobone_20170602_141106","input_id":null,"output_id":null,"start_time":1496387588913,"end_time":null,"cluster_id":"e955a7a3-d334-4943-a39a-994976900d56","engine_job_id":null,"return_code":null,"is_public":null,"is_protected":null,"group_id":"12ee9ae4-6ee1-48c6-bb84-fb0b4f76cf03","jar_path":"s3a://mrs-opsadm/jarpath/hadoop-mapreduce-examples-2.7.2.jar","input":"s3a://mrs-opsadm/input/","output":"s3a://mrs-opsadm/output/","job_log":"s3a://mrs-opsadm/log/","job_type":1,"file_action":"","arguments":"wordcount","hql":"","job_state":2,"job_final_status":0,"hive_script_path":"","create_by":"b67132be2f054a45b247365647e05af0","finished_step":0,"job_main_id":"","job_step_id":"","postpone_at":1496387588911,"step_name":"","step_num":0,"task_num":0,"update_by":"b67132be2f054a45b247365647e05af0","credentials":"","user_id":"b67132be2f054a45b247365647e05af0","job_configs":null,"extra":null,"data_source_urls":null,"info":null}}参数说明
状态码如所示。异常状态码请参见。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0043477038__zh-cn_topic_0043477063_i33826286111625">Endpoint</em>/<emid="ZH-CN_TOPIC_0043477038__zh-cn_topic_0043477063_i55574607111625">uri</em>URL中的参数说明如所示。
查看指定集群的详细信息。该接口不兼容Sahara。
URI格式GET/v1.1/{project_id}/cluster_infos/{cluster_id}参数说明
请求样例无。参数说明无。
响应样例{"cluster":{"clusterId":"bdb064ff-2855-4624-90d5-e9a6376abd6e","clusterName":"c17022001","masterNodeNum":"2","coreNodeNum":"3","clusterState":"scaling-in","createAt":"1487570757","updateAt":"1487668974","billingType":"Metered","dataCenter":southchina,"vpc":"20161218","duration":"0","fee":"0","hadoopVersion":"","masterNodeSize":"c2.2xlarge.linux.mrs","coreNodeSize":"c2.2xlarge.linux.mrs","componentList":[{"componentId":"MRS1.5.0_001","componentName":"Hadoop","componentVersion":"2.7.2","componentDesc":"Aframeworkthatallowsforthedistributedprocessingoflargedatasetsacrossclusters."},{"componentId":"MRS1.5.0_002","componentName":"Spark","componentVersion":"2.1.0","componentDesc":"Afastandgeneralengineforlarge-scaledataprocessing."},{"componentId":"MRS1.5.0_004","componentName":"Hive","componentVersion":"1.2.1","componentDesc":"Adatawarehouseinfrastructurethatprovidesdatasummarizationandadhocquerying."},{"componentId":"MRS1.5.0_003","componentName":"HBase","componentVersion":"1.0.2","componentDesc":"Ascalable,distributeddatabasethatsupportsstructureddatastorageforlargetables."}],"externalIp":"100.64.49.9","externalAlternateIp":"100.64.49.13","internalIp":"192.168.1.242","deploymentId":"4ac46ca7-a488-4b91-82c2-e4d7aa9c40c2","remark":"","orderId":"null","azId":"1d7b939b382c4c3bb3481a8ca10da768","masterNodeProductId":"b35cf2d2348a445ca74b32289a160882","masterNodeSpecId":"8ab05e503b4c42abb304e2489560063b","coreNodeProductId":"dc970349d128460e960a0c2b826c427c","coreNodeSpecId":"cdc6035a249a40249312f5ef72a23cd7","azName":az1.dc1,"instanceId":"4ac46ca7-a488-4b91-82c2-e4d7aa9c40c2","vnc":null,"tenantId":"3f99e3319a8943ceb15c584f3325d064","volumeSize":100,"volumeType":"SATA","subnetName":"subnet-ftest","securityGroupsId":"930e34e2-195d-401f-af07-0b64ea6603f8","slaveSecurityGroupsId":"2ef3343e-3477-4a0d-80fe-4d874e4f81b8","safeMode":1,"clusterVersion":"FusionInsightV100R002C61","nodePublicCertName":"myp","masterNodeIp":"192.168.1.242","privateIpFirst":"192.168.1.234","errorInfo":null,"chargingStartTime":"0","log_collection":1}}参数说明
状态码如所示。异常状态码请参见。
删除指定的作业执行对象。该接口兼容Sahara。
URI格式DELETE/v1.1/{project_id}/job-executions/{job_execution_id}参数说明
请求样例无。参数说明无。
响应样例无。参数说明无。
状态码如所示。异常状态码请参见。
查询所有作业的exe对象列表。该接口不兼容Sahara。
URI格式GET/v1.1/{project_id}/job-exes参数说明
请求样例GET/v1.1/{project_id}/job-exes?page_size=10&amp;current_page=1&amp;state=3&amp;job_name=myfirstjob参数说明无。
响应样例{"totalRecord":14,"job_executions":[{"id":"669476bd-89d2-45aa-8f1a-872d16de377e","create_at":1484641003707,"update_at":1484641003707,"tenant_id":"3f99e3319a8943ceb15c584f3325d064","job_id":"669476bd-89d2-45aa-8f1a-872d16de377e","job_name":"myfirstjob","start_time":1484641003707,"end_time":null,"cluster_id":"2b460e01-3351-4170-b0a7-57b9dd5ffef3","group_id":"669476bd-89d2-45aa-8f1a-872d16de377e","jar_path":"s3a://jp-test1/program/hadoop-mapreduce-examples-2.4.1.jar","input":"s3a://jp-test1/input/","output":"s3a://jp-test1/output/","job_log":"s3a://jp-test1/joblogs/","job_type":1,"file_action":"","arguments":"wordcount","hql":"","job_state":2,"job_final_status":1,"hive_script_path":null,"create_by":"3f99e3319a8943ceb15c584f3325d064","finished_step":0,"job_main_id":"","job_step_id":"","postpone_at":1484641003174,"step_name":"","step_num":0,"task_num":0,"update_by":"3f99e3319a8943ceb15c584f3325d064","spend_time":null,"step_seq":222,"progress":"firstprogress"}]}参数说明
状态码如所示。异常状态码请参见。
查询指定作业的exe对象详细信息。该接口不兼容Sahara。
URI格式GET/v1.1/{project_id}/job-exes/{job_exe_id}参数说明
请求样例无。参数说明无。
响应样例{"job_execution":{"id":"632863d5-15d4-4691-9dc1-1a72340cb097","create_at":1484240559176,"update_at":1484240559176,"tenant_id":"3f99e3319a8943ceb15c584f3325d064","job_id":"632863d5-15d4-4691-9dc1-1a72340cb097","job_name":"hive_script","start_time":1484240559176,"end_time":null,"cluster_id":"8b1d55f6-150e-45e2-8347-b2ca608d366b","group_id":"632863d5-15d4-4691-9dc1-1a72340cb097","jar_path":"s3a://jp-test1/program/Hivescript.sql","input":"s3a://jp-test1/input/","output":"s3a://jp-test1/output/","job_log":"s3a://jp-test1/joblogs/","job_type":3,"file_action":"","arguments":"wordcount","hql":null,"job_state":3,"job_final_status":1,"hive_script_path":"s3a://jp-test1/program/Hivescript.sql","create_by":"3f99e3319a8943ceb15c584f3325d064","finished_step":0,"job_main_id":"","job_step_id":"","postpone_at":1484240558705,"step_name":"","step_num":0,"task_num":0,"update_by":"3f99e3319a8943ceb15c584f3325d064","spend_time":null,"step_seq":222,"progress":"firstprogress"}}参数说明
状态码如所示。异常状态码请参见。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。：通过Token认证调用请求。：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
查看用户创建的集群列表信息。该接口不兼容Sahara。
URI格式GET/v1.1/{project_id}/cluster_infos参数说明
请求样例无。参数说明
响应样例{"clusterTotal":1,"clusters":[{"clusterId":"bc134369-294c-42b7-a707-b2036ba38524","clusterName":"mrs_D0zW","masterNodeNum":"2","coreNodeNum":"3","clusterState":"terminated","createAt":"1498272043","updateAt":"1498636753","chargingStartTime":"1498273733","log_collection":1,"billingType":"Metered","dataCenter":"cn-north-1","vpc":null,"duration":"0","fee":null,"hadoopVersion":null,"masterNodeSize":null,"coreNodeSize":null,"componentList":[{"componentId":"MRS1.5.0_001","componentName":"Hadoop","componentVersion":"2.7.2","componentDesc":"Aframeworkthatallowsforthedistributedprocessingoflargedatasetsacrossclusters."},{"componentId":"MRS1.5.0_003","componentName":"HBase","componentVersion":"1.0.2","componentDesc":"Ascalable,distributeddatabasethatsupportsstructureddatastorageforlargetables."},{"componentId":"MRS1.5.0_002","componentName":"Spark","componentVersion":"2.1.0","componentDesc":"Afastandgeneralengineforlarge-scaledataprocessing."},{"componentId":"MRS1.5.0_004","componentName":"Hive","componentVersion":"1.2.1","componentDesc":"Adatawarehouseinfrastructurethatprovidesdatasummarizationandadhocquerying."}],"externalIp":null,"externalAlternateIp":null,"internalIp":null,"deploymentId":null,"remark":"","orderId":null,"azId":null,"masterNodeProductId":null,"masterNodeSpecId":null,"coreNodeProductId":null,"coreNodeSpecId":null,"azName":"az10.dc1","instanceId":null,"vnc":"v2/5a3314075bfa49b9ae360f4ecd333695/servers/e2cda891-232e-4703-995e-3b1406add01d/action","tenantId":null,"volumeSize":0,"volumeType":null,"subnetId":null,"subnetName":null,"securityGroupsId":null,"slaveSecurityGroupsId":null,"safeMode":0,"clusterVersion":null,"nodePublicCertName":null,"masterNodeIp":"unknown","privateIpFirst":null,"errorInfo":"","clusterType":0}]}参数说明
状态码如所示。异常状态码请参见。
使用多段上传特性时，用户必须首先调用创建多段上传任务接口创建任务，系统会给用户返回一个全局唯一的多段上传任务号，作为任务标识。后续用户可以根据这个标识发起相关的请求，如：上传段、合并段、列举段等。创建多段上传任务不影响已有的同名对象；同一个对象可以同时存在多个多段上传任务；每个多段上传任务在初始化时可以附加消息头信息，包括acl、用户自定义元数据和通用的HTTP消息头contentType、contentEncoding等，这些附加的消息头信息将先记录在多段上传任务元数据中。
无。
无。
该接口的实现使用policy子资源来将指定桶的策略返回给客户端。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:GetBucketPolicy权限的用户。如果指定桶本身的策略不存在，则返回404“NoSuchBucketPolicy”的错误。
无。
无。
用户在OBS系统中创建了桶之后，可以采用PUT操作的方式将对象上传到桶中。
如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号，并且会在响应报头x-amz-version-id返回该版本号。如果桶的多版本状态是暂停的，则对象的版本号为null。
无。
OBS用户可以通过请求查询自己创建的桶列表。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
检查桶是否存在。
无。
无。
代码stBucketContext.certificateInfo=pCAInfo;中的pCAInfo表示双向认证所使用的证书内容，下文中的相同代码均表示这个意思。
获取该桶设置的生命周期配置信息。要正确执行此操作，需要确保执行者有s3:GetLifecycleConfiguration执行权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
从回调函数中，可以将桶的生命周期的配置信息获取出来。
无。
对桶拥有读权限的用户可以执行获取桶区域位置信息的操作。
无。
无。
用户可以通过“列出多段上传任务”接口查询一个桶中所有的初始化后还未合并或未取消的多段上传任务。
无。
无。
多版本功能可在用户意外覆盖或删除对象的情况下提供一种恢复手段。用户可以使用多版本功能来保存、检索和还原对象的各个版本，这样用户能够从意外操作或应用程序故障中轻松恢复数据。多版本功能还可用于数据保留和存档。默认情况下，桶没有设置多版本功能。本接口设置桶的多版本状态，用来开启或暂停桶的多版本功能。
无。
无。
该接口的目的是查询当前桶的日志管理配置情况。其实现是通过使用http的get方法再加入logging子资源来返回当前桶的日志配置情况。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:GetBucketLogging权限的用户。
无。
无。
OBS系统支持指定规则来实现定时删除桶中对象，这就是生命周期配置。典型的应用场景如：周期性上传的日志文件，可能只需要保留一个星期或一个月，到期后要删除它们。某些文档在一段时间内经常访问，但是超过一定时间后就可能不会再访问了。这种文档您可能会先选择归档，然后在一定时间后删除。本接口实现为桶创建或更新生命周期配置信息。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。生命周期配置实现了定时删除对象的功能，所以如果想要阻止用户删除对象，以下几项操作的权限都应该被禁止：s3:DeleteObjects3:DeleteObjectVersions3:PutLifecycleConfiguration如果想要阻止用户管理桶的生命周期配置，应该禁止s3:PutLifecycleConfiguration权限。
无。
无。
用户可以通过“列出段”接口查询一个任务所属的所有段信息。
无。
无。
OBS允许在桶内保存静态的网页资源，如.html网页文件、flash文件、音视频文件等，当客户端通过桶的Website接入点访问这些对象资源时，浏览器可以直接解析出这些支持的网页资源，呈现给最终用户。典型的应用场景有：重定向所有的请求到另外一个站点。设定特定的重定向规则来重定向特定的请求。本接口实现为桶创建或更新Website配置信息。要正确执行此操作，需要确保执行者有s3:PutBucketWebsite权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
对桶拥有读权限的用户可以执行获取桶区域位置信息的操作。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
列举多段上传任务的回调函数。
无。
接收到服务器响应时，进行回调。
用户可自己定义如何处理返回信息。
列举已上传的段的回调函数。
无。
设置低速率超时时间。当传输速率小于1B/秒，并持续超过设置时间时，则主动中断传输。
超时时间单位为秒。
无。
获取错误信息的字符串。
执行有返回值的接口失败后，可以用该接口获取错误信息。
无。
删除对象。
拥有对象所在桶的写权限的用户可以执行删除对象的操作。如果要删除的对象不存在，则仍然返回成功信息。
无。
桶的所有者可以获取指定桶的多版本状态。
无。
无。
对桶拥有读权限的用户可以执行获取桶内对象列表的操作。
无。
无。
该接口的实现是通过使用policy子资源来删除一个指定桶上的策略。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:DeleteBucketPolicy权限的用户。无论桶的策略本身是否存在，系统都直接返回204“NoContent”的结果。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
桶的拥有者可以执行获取桶配额信息的操作。桶的拥有者的状态是inactive状态不可以查询桶配额信息。桶空间配额值的单位为B(字节)，0代表不设上限。
无。
无。
用户执行获取桶ACL的操作，返回信息包含指定桶的权限控制列表信息。
用户必须拥有对指定桶读ACP的权限或FULL_CONTROL权限，才能执行获取桶ACL的操作。
无。
如果用户上传完所有的段，就可以调用合并段接口，系统将在服务端将用户指定的段合并成一个完整的对象。在执行“合并段”操作以前，用户不能下载已经上传的数据。在合并段时需要将多段上传任务初始化时记录的附加消息头信息拷贝到对象元数据中，其处理过程和普通上传对象带这些消息头的处理过程相同。在并发合并段的情况下，仍然遵循LastWriteWin策略，但“LastWrite”的时间定义为段任务的初始化时间。已经上传的段，只要没有取消对应的多段上传任务，都要占用用户的容量配额；对应的多段上传任务“合并段”操作完成后，只有指定的多段数据占用容量配额，用户上传的其他此多段任务对应的段数据如果没有包含在“合并段”操作制定的段列表中，“合并段”完成后删除多余的段数据，且同时释放容量配额。合并完成的多段上传数据可以通过已有的下载对象接口，下载整个多段上传对象或者指定Range下载整个多段上传对象的某部分数据。合并完成的多段上传数据可以通过已有的删除对象接口，删除整个多段上传对象的所有分段数据，删除后不可恢复。
无。
无。
设该接口的实现使用policy子资源创建或者修改一个桶的策略。如果桶已经存在一个策略，那么当前请求中的策略将完全覆盖桶中现存的策略。
要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:PutBucketPolicy权限的用户。本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
多段上传任务创建后，用户可以通过指定多段上传任务号，通过上传段接口为特定的任务上传段，从客户端上传新数据。同一个对象的同一个多段上传任务在上传段时，上传的顺序对后续的合并操作没有影响，也即支持多个段并发上传。段大小范围是[5MB，5GB]，但在进行合并段操作时，最后一个段的大小范围为[0,5GB]。上传的段的编号也有范围限制，其范围是[1,10000]。
无。
无。
获取指定桶的CORS配置信息。
无。
无。
上传段的回调函数。
无。
列举桶内对象（含多版本）的回调函数。
无。
桶的拥有者可以执行获取桶存量信息的操作，返回信息包含指定桶的空间大小以及对象个数。
无。
无。
删除指定桶的生命周期配置信息。删除后桶中的对象不会过期，OBS不会自动删除桶中对象。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
多段上传任务创建后，用户可以通过指定多段上传任务号，为特定的任务上传段。添加段的方式还包括调用段拷贝接口。允许客户将已上传对象的一部分或全部拷贝为段。
无。
无。
如果用户希望取消一个任务，可以调用取消多段上传任务接口取消任务。合并段或取消任务接口被调用后，用户不能再对任务进行上传段和列举段的操作。
无。
无。
批量删除对象特性用于将一个桶内的部分对象一次性删除，删除后不可恢复。批量删除对象要求返回结果里包含每个对象的删除结果。删除成功的对象不能进行List和Get操作，OBS的批量删除对象使用同步删除对象的方式，每个对象的删除结果返回给请求用户。批量删除对象支持两种响应方式：verbose和quiet。Verbose是指在返回响应时，不管对象是否删除成功都将删除结果包含在XML响应里；quiet是指在返回响应时，只返回删除失败的对象结果，没有返回的认为删除成功。OBS默认使用verbose模式，如果用户在请求消息体中指定quiet模式的话，使用quiet模式。批量删除的请求消息头中必须包含Content-MD5以及Content-Length，用以保证请求的消息体在服务端检测到网络传输。如果有错，则可以检测出来。
无。
无。
批量删除对象的回调函数。
无。
执行请求上下文中的所有请求。
传入S3RequestContext**指针，其中S3RequestContext**是由S3_create_request_context申请空间，S3RequestContext结构中的requests请求队列的维护，是在调用如桶操作、对象操作这些接口把请求入队，调用S3_runall_request_context会执行请求队列中的所有请求，且这些请求的发送是并发的、不保序的，执行后会在请求队列中删除已执行过的请求。S3RequestContext结构中的CURLM与requests由SDK来维护，调用者不必关心请求上下文中的请求队列的维护。
创建桶是指按照用户指定的桶名创建一个新桶的操作。
无。
无。
合并段的回调函数。
无。
复制对象（CopyObject）特性用来为OBS上已经存在的对象创建一个副本。当进行复制对象操作时，目标对象默认复制源对象的元数据；用户也可以将目标对象的元数据替换为本次请求中所带的元数据。新建的目标对象不会复制源对象的ACL信息，默认的新建对象的ACL是private，用户可以使用设置ACL的操作接口来重新设定新对象的ACL。复制对象操作的请求需要携带鉴权信息，不能携带消息实体。
目标桶的容量要不小于拷贝对象的大小。
无。
本章节下所有参数类型都为枚举类型。
设该接口的实现使用policy子资源创建或者修改一个桶的策略。如果桶已经存在一个策略，那么当前请求中的策略将完全覆盖桶中现存的策略。
要使用该接口，使用者要求必须是桶的所有者或者是被桶策略授权s3:PutBucketPolicy权限的用户。
无。
获取桶的CORS配置的回调函数。
无。
对桶拥有读权限的用户可以执行列举桶内对象（含多版本）的操作。
无。
无。
拥有对象读权限的用户（包括OBS注册用户和匿名用户）可以执行GET操作，返回信息会包含对象内容和对象的元数据信息。
操作用户拥有对象读权限。
无。
删除指定桶的生命周期配置信息。删除后桶中的对象不会过期，OBS不会自动删除桶中对象。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
服务器响应完成时，进行回调。
用户可自己定义如何处理返回信息。
无。
桶的拥有者可以执行获取桶配额信息的操作。桶的拥有者的状态是inactive状态不可以查询桶配额信息。桶空间配额值的单位为B(字节)，0代表不设上限。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
OBS支持对对象的操作进行权限控制。默认情况下，只有对象的创建者才有该对象的读写权限。用户也可以设置其他的访问策略，比如对一个对象可以设置公共访问策略，允许所有人对其都有读权限。OBS用户在上传对象时可以设置权限控制策略，也可以通过ACL操作API接口对已存在的对象更改或者获取ACL(accesscontrollist)。
无。
无。
获取对象的回调函数。
无。
获取该桶设置的生命周期配置信息。要正确执行此操作，需要确保执行者有s3:GetLifecycleConfiguration执行权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
OPTIONS，称为预请求，是客户端发送给服务端的一种请求，通常被用于检测客户端是否具有对服务端进行操作的权限。只有当预请求成功返回，客户端才开始执行后续的请求。OBS允许在桶内保存静态的网页资源，在正确的使用下，OBS的桶可以成为网站资源。在这种使用场景下，OBS中的桶作为服务端，需要处理客户端发送的OPTIONS预请求。
无。
无。
创建请求上下文。
传入S3RequestContext**指针，此函数为其分配空间。
创建桶是指按照用户指定的桶名创建一个新桶的操作。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
当调用本章节接口要使用Https请求时，需要获取相应的证书内容，示例代码如下：
CORS（CrossOriginResourceSharing），即跨域资源共享，是W3C标准化组织提出的一种规范机制，允许客户端的跨域请求的配置。在通常的网页请求中，由于安全策略SOP（SameOriginPolicy）的存在，一个网站和域的脚本和内容是不能与另一个网站的脚本和内容发生交互的。
无。
无。
删除指定桶的Website配置信息。要正确执行此操作，需要确保执行者有s3:DeleteBucketWebsite权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
获取桶的CORS配置的回调函数。
无。
删除桶操作用于删除用户指定的桶。只有桶的所有者可以执行删除桶的操作，要删除的桶必须是空桶。
无。
无。
列举桶内对象的回调函数。
无。
删除桶操作用于删除用户指定的桶。只有桶的所有者可以执行删除桶的操作，要删除的桶必须是空桶。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
获取桶列表的回调函数。
无。
桶的拥有者可以执行获取桶存量信息的操作，返回信息包含指定桶的空间大小以及对象个数。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
OBS系统支持指定规则来实现定时删除桶中对象，这就是生命周期配置。典型的应用场景如：周期性上传的日志文件，可能只需要保留一个星期或一个月，到期后要删除它们。某些文档在一段时间内经常访问，但是超过一定时间后就可能不会再访问了。这种文档您可能会先选择归档，然后在一定时间后删除。本接口实现为桶创建或更新生命周期配置信息。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。生命周期配置实现了定时删除对象的功能，所以如果想要阻止用户删除对象，以下几项操作的权限都应该被禁止：s3:DeleteObjects3:DeleteObjectVersions3:PutLifecycleConfiguration如果想要阻止用户管理桶的生命周期配置，应该禁止s3:PutLifecycleConfiguration权限。
无。
无。
取消初始化。
代码执行完毕，不再使用SDK时，调用该函数，回收资源。
无。
无。
无。
该接口的实现是通过使用policy子资源来删除一个指定桶上的策略。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:DeleteBucketPolicy权限的用户。无论桶的策略本身是否存在，系统都直接返回204“NoContent”的结果。
无。
无。
销毁请求上下文。
传入S3RequestContext**指针，此函数为释放其空间。
无。
只有桶的owner才可以修改桶配额值，桶的拥有者的状态是inactive状态不可以更改桶配额信息。桶空间配额值必须为非负整数，单位为B(字节)，能设的最大值为2<supid="ZH-CN_TOPIC_0040694681__sup56106789135613">63</sup>-1，配额值设为0表示桶的配额没有上限。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
初始化函数，设置默认参数。
使用SDK时，首先调用该接口设置一些默认值。
OPTIONS，称为预请求，是客户端发送给服务端的一种请求，通常被用于检测客户端是否具有对服务端进行操作的权限。只有当预请求成功返回，客户端才开始执行后续的请求。OBS允许在桶内保存静态的网页资源，在正确的使用下，OBS的桶可以成为网站资源。在这种使用场景下，OBS中的桶作为服务端，需要处理客户端发送的OPTIONS预请求。
无。
无。
OBS支持对桶操作进行权限控制。默认情况下，只有桶的创建者才有该桶的读写权限。用户也可以设置其他的访问策略，比如对一个桶可以设置公共访问策略，允许所有人对其都有读权限。OBS用户在创建桶时可以设置权限控制策略，也可以通过ACL操作API接口对已存在的桶更改或者获取ACL(accesscontrollist)。
无。
无。
对桶拥有读权限的用户可以获取元数据的操作。
无。
无。
CORS（CrossOriginResourceSharing），即跨域资源共享，是W3C标准化组织提出的一种规范机制，允许客户端的跨域请求的配置。在通常的网页请求中，由于安全策略SOP（SameOriginPolicy）的存在，一个网站和域的脚本和内容是不能与另一个网站的脚本和内容发生交互的。
无。
无。
获取该桶设置的Website配置信息。要正确执行此操作，需要确保执行者有s3:GetBucketWebsite执行权限。缺省情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
无。
无。
删除指定桶的CORS配置信息。删除后桶以及桶中的对象将不能再被其他网址发送的请求访问。
无。
无。
该接口的目的是提供一个关于日志访问的设置功能，通过这个设置可以指定那些用户可以查看和修改桶的日志文件。其实现是利用http的put方法并加入logging子资源来完成桶的日志配置参数的设置。在当前版本下，只有桶的所有者或者被桶策略授权s3:PutBucketLogging权限的用户才有对桶日志配置参数查看和修改的权限。桶的所有者本身自带对所有生成日志的FULL_CONTROL权限。所有者可以通过日志配置参数表授予其他人相应的访问桶日志的权限。创建桶时，默认是不生成桶的日志的，如果要需要生成桶的日志，需要打开日志配置管理的开关，同时授予日志投递用户组对该桶的WRITE和READ_ACP权限。配置管理开关的打开方法是在上传的logging文件中在LoggingEnabled标签下配置相应的日志管理功能。对应的，关闭的方法是上传一个带有空的BucketLoggingStatus标签的logging文件。
无。
无。
当调用本章节接口要使用Https请求时，需要获取相应的证书内容，示例代码如下：
上传对象时的回调函数。用于返回上传大小。
无。
获取桶的Website配置的回调函数。
无。
拥有对象读权限的用户可以执行HEAD操作命令获取对象元数据，返回信息包含对象的元数据信息。
无。
无。
只有桶的owner才可以修改桶配额值，桶的拥有者的状态是inactive状态不可以更改桶配额信息。桶空间配额值必须为非负整数，单位为B(字节)，能设的最大值为2<supid="ZH-CN_TOPIC_0040694702__sup59804790161240">63</sup>-1，配额值设为0表示桶的配额没有上限。
无。
无。
OBS用户可以通过请求查询自己创建的桶列表。
无。
无。
该接口的实现使用policy子资源来将指定桶的策略返回给客户端。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:GetBucketPolicy权限的用户。如果指定桶本身的策略不存在，则返回404“NoSuchBucketPolicy”的错误。
本接口不支持证书校验，如需增加证书校验，请使用接口。
无。
用户执行获取对象ACL的操作，返回信息包含指定对象的权限控制列表信息。用户必须拥有对指定对象读ACP(accesscontrolpolicy)的权限，才能执行获取对象ACL的操作。
无。
无。
获取指定桶的CORS配置信息。
无。
无。
本文主要介绍OBSCAPI接口设计，包括接口调用的方法概述，相关接口数据类型的定义，输入参数和返回值的描述，接口的使用示例等。
与本文档相配套的产品版本如下所示：
gcc4.3.4或更高版本
开发过程中，您有任何问题均可以在<uid="ZH-CN_TOPIC_0040694884__u22181384152741"></u>系统中提单跟踪。如果您在文档使用过程中有任何疑问，可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0040694884__ol40044822152741"><liid="ZH-CN_TOPIC_0040694884__li24859082152741">华为技术支持热线电话：400-8828-000华为技术支持邮箱：
eSDKOBS提供的CSDK接口调用基本遵循如下流程：
在调用服务的某个具体接口前，先要通过调用接口完成服务接口初始化并将日志功能启动。在完成1后可以进行OBS服务的调用，比如说调用接口来创建一个新桶。在完成所有服务调用后，请使用接口，对SDK做去初始化操作，并停止日志功能。
用户在OBS系统中创建了桶之后，可以采用PUT操作的方式将对象上传到桶中。
如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号，并且会在响应报头x-amz-version-id返回该版本号。如果桶的多版本状态是暂停的，则对象的版本号为null。
无。
拥有对象读权限的用户（包括OBS注册用户和匿名用户）可以执行GET操作，返回信息会包含对象内容和对象的元数据信息。
操作用户拥有对象读权限。
无。
复制对象（CopyObject）特性用来为OBS上已经存在的对象创建一个副本。当进行复制对象操作时，目标对象默认复制源对象的元数据；用户也可以将目标对象的元数据替换为本次请求中所带的元数据。新建的目标对象不会复制源对象的ACL信息，默认的新建对象的ACL是private，用户可以使用设置ACL的操作接口来重新设定新对象的ACL。复制对象操作的请求需要携带鉴权信息，不能携带消息实体。
目标桶的容量要不小于拷贝对象的大小。
无。
多段上传任务创建后，用户可以通过指定多段上传任务号，通过上传段接口为特定的任务上传段，从客户端上传新数据。同一个对象的同一个多段上传任务在上传段时，上传的顺序对后续的合并操作没有影响，也即支持多个段并发上传。段大小范围是[5MB，5GB]，但在进行合并段操作时，最后一个段的大小范围为[0,5GB]。上传的段的编号也有范围限制，其范围是[1,10000]。
无。
无。
多段上传任务创建后，用户可以通过指定多段上传任务号，为特定的任务上传段。添加段的方式还包括调用段拷贝接口。允许客户将已上传对象的一部分或全部拷贝为段。
无。
无。
使用多段上传特性时，用户必须首先调用创建多段上传任务接口创建任务，系统会给用户返回一个全局唯一的多段上传任务号，作为任务标识。后续用户可以根据这个标识发起相关的请求，如：上传段、合并段、列举段等。创建多段上传任务不影响已有的同名对象；同一个对象可以同时存在多个多段上传任务；每个多段上传任务在初始化时可以附加消息头信息，包括acl、用户自定义元数据和通用的HTTP消息头contentType、contentEncoding等，这些附加的消息头信息将先记录在多段上传任务元数据中。
无。
无。
拥有对象读权限的用户可以执行HEAD操作命令获取对象元数据，返回信息包含对象的元数据信息。
无。
无。
执行请求上下文中的所有请求。
无。
当启用通知功能后，在您的桶上所发生的指定操作，都能及时通知到您。有关事件通知的详细信息，请访问对象存储服务开发指南中的通知功能章节。默认情况下，您的桶没有配置事件通知。即该桶的通知配置将是一个空NotificationConfiguration。对已配置有事件通知的桶，您可以通过添加空NotificationConfiguration元素禁用通知功能。当对象存储服务（OBS）接收到配置消息通知的请求后，会验证指定的简单通知服务（SMN）主题是否存在及主题策略是否授权给了对象存储服务，验证通过后向该主题发送测试通知。为了能成功执行此配置操作，需要确保执行者拥有s3:PutBucketNotification权限。缺省情况下只有桶的所有者拥有该权限，但可以通过设置桶策略或用户策略授权给其他用户。
需要确保执行者拥有s3:PutBucketNotification权限。
无。
获取指定桶的通知配置信息。为了能成功执行此配置操作，需要确保执行者拥有s3:PutBucketNotification权限。缺省情况下只有桶的所有者拥有该权限，但可以通过设置桶策略或用户策略授权给其他用户
无。
无。
OBS支持在创建桶或上传对象时通过x-amz-acl头域设置桶或对象的权限控制策略，其设置的权限控制策略只能选择预定义的几种策略。
无。
无。
OBS支持在创建桶或上传对象时通过x-amz-acl头域设置桶或对象的权限控制策略，其设置的权限控制策略只能选择预定义的几种策略。
无。
无。
本文主要介绍OBSPHPNativeAPI接口设计，包括接口调用的方法概述，相关接口数据类型的定义，输入参数和返回值的描述。
与本文档相配套的产品版本如下所示：
5.6版本的PHP开发环境。
开发过程中，您有任何问题均可以在<uid="ZH-CN_TOPIC_0041585675__zh-cn_topic_0040433143_u22181384152741"></u>系统中提单跟踪。如果您在文档使用过程中有任何疑问，可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0041585675__zh-cn_topic_0040433143_ol40044822152741"><liid="ZH-CN_TOPIC_0041585675__zh-cn_topic_0040433143_li24859082152741">华为技术支持热线电话：400-8828-000华为技术支持邮箱：
本文主要介绍OBSPythonNativeAPI接口设计，包括接口调用的方法概述，相关接口数据类型的定义，输入参数和返回值的描述。
与本文档相配套的产品版本如下所示：
Python：2.7.9及以上版本
开发过程中，您有任何问题均可以在<uid="ZH-CN_TOPIC_0042281985__u22181384152741"></u>系统中提单跟踪。如果您在文档使用过程中有任何疑问，可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0042281985__ol40044822152741"><liid="ZH-CN_TOPIC_0042281985__li24859082152741">华为技术支持热线电话：400-8828-000华为技术支持邮箱：
本文主要介绍OBSRubyAPI接口设计，包括接口调用的方法概述，相关接口数据类型的定义，输入参数和返回值的描述。
与本文档相配套的产品版本如下所示：
1.9.3版本的Ruby开发环境
开发过程中，您有任何问题均可以在<uid="ZH-CN_TOPIC_0044693180__u22181384152741"></u>系统中提单跟踪。如果您在文档使用过程中有任何疑问，可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0044693180__ol40044822152741"><liid="ZH-CN_TOPIC_0044693180__li24859082152741">华为技术支持热线电话：400-8828-000华为技术支持邮箱：
该接口的目的是提供一个关于日志访问的设置功能，通过这个设置可以指定哪些用户可以查看和修改桶的日志文件。其实现是利用http的put方法并加入logging子资源来完成桶的日志配置参数的设置。在当前版本下，只有桶的所有者或者被桶策略授权s3:PutBucketLogging权限的用户才有对桶日志配置参数查看和修改的权限。创建桶时，默认是不生成桶的日志的，如果需要生成桶的日志，该桶需要打开日志配置管理的开关，同时授予日志投递用户组对存放日志桶的WRITE和READ_ACP权限。配置管理开关的打开方法是在上传的logging文件中在LoggingEnabled标签下配置相应的日志管理功能。对应的，关闭的方法是上传一个带有空的BucketLoggingStatus标签的logging文件。在设置桶日志管理配置时，源桶的所有者可以指定一个目标桶，将生成的所有日志放到该桶中。源桶所有者只能将日志投递到其所拥有的任意一个桶，同时目标桶必须是和源桶在同一个区域（Region）内的桶。此外，默认存储类别为近线存储或归档存储的桶不能作为目标桶。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体请参见章节。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
1、设置目标桶的ACL权限2、设置源桶Logging
1、ACL设置响应2、Logging设置响应
用户可以使用普通方式上传、下载对象，也可以使用服务端加密方式进行上传、下载对象。OBS支持服务端加密功能，使加密的行为在服务端进行。用户可以根据自身的需求，使用不同的密钥管理方式来使用服务端加密功能。当前支持两种服务端加密方式：KMS托管密钥的服务端加密(SSE-KMS)和客户提供加密密钥的服务端加密(SSE-C)。SSE-KMS方式，OBS使用KMS（KeyManagementService）服务提供的密钥进行服务端加密。SSE-C方式，OBS使用用户提供的密钥和密钥的MD5值进行服务端加密。使用服务端加密，返回的ETag值不是对象的MD5值。使用服务端加密上传对象，服务端不会校验传入的Content-MD5。
多版本功能可在用户意外覆盖或删除对象的情况下提供一种恢复手段。用户可以使用多版本功能来保存、检索和还原对象的各个版本，这样用户能够从意外操作或应用程序故障中轻松恢复数据。多版本功能还可用于数据保留和存档。默认情况下，桶没有设置多版本功能。本接口设置桶的多版本状态，用来开启或暂停桶的多版本功能。设置桶的多版本状态为Enabled，开启桶的多版本功能：上传对象时，系统为每一个对象创建一个唯一版本号，上传同名的对象将不再覆盖旧的对象，而是创建新的不同版本号的同名对象；可以指定版本号下载对象，不指定版本号默认下载最新对象；删除对象时可以指定版本号删除，不带版本号删除对象仅产生一个带唯一版本号的删除标记，并不删除对象；列出桶内对象列表时默认列出最新对象列表，可以指定列出桶内所有版本对象列表；除了删除标记外，每个版本的对象存储均需计费（不包括对象元数据）。设置桶的多版本状态为Suspended，暂停桶的多版本功能：旧的版本数据继续保留；上传对象时创建对象的版本号为null，上传同名的对象将覆盖原有同名的版本号为null的对象；可以指定版本号下载对象，不指定版本号默认下载最新对象；删除对象时可以指定版本号删除，不带版本号删除对象将产生一个版本号为null的删除标记，并删除版本号为null的对象；除了删除标记外，每个版本的对象存储均需计费（不包括对象元数据）。只有桶的所有者可以设置桶的多版本状态。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
在此请求中，需要在请求的消息体中配置桶的多版本状态，配置信息以XML格式上传。具体的配置元素如描述。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
桶策略可基于各种条件，如OBS操作、申请人、资源和请求的其他要素（如IP地址）提供对桶和对象的集中访问控制。附加到某个桶上的权限适用于该桶内所有对象。个人和公司均可使用桶策略。当公司注册OBS时，会创建一个账户。即在OBS上，该公司等同于该账户。该账户在财务上为该公司及其员工所创建的S3资源负责。账户可基于各种条件授予权限给桶策略和员工。例如，账户可以按以下维度制定策略，授予某用户的写权限：给予用户特定的桶的写权限给予特定的网络中的用户写权限给予用户的自定程序写权限访问控制列表（accesscontrollists，ACL）只能对单个对象进行权限的添加，而桶策略可对一个桶内的所有对象进行权限的添加和禁止。账户可通过同一请求对某桶内任意数量的对象进行权限设置。此外，账户还可以对亚马逊资源名称（Amazonresourcenames，ARNs）及其他值添加通配符（类似于正则表达式运算符），从而实现对一组对象的访问控制。BucketPolicy允许桶的所有者执行PutBucketPolicy操作，给Bucket设置访问控制策略，如果Bucket已有Policy，则新的Policy会覆盖老的Policy。BucketOwner也可以执行GetBucketPolicy或DeleteBucketPolicy操作，获取或删除已设置的BucketPolicy。设置Policy后，后续对此Bucket的访问请求都会受到Policy的限制，表现为拒绝或接受请求。对拒绝或接受的判断，取决于Policy的描述。如下所示的Policy允许账户783fc6652cf246c096ea836694f71855（域ID）和219d520ceac84c5a98b237431a2cf4c2（域ID）对桶mybucket下的所有对象执行GetObject权限:
一个Policy由JSON描述，格式定义为：其中Id和Version为可选字段：Statement包含若干条statement，一条statement的结构包括：在单条statement中，Action与NotAction必须二选一，Resource与NotResource必须二选一，Principal与NotPrincipal必须二选一。OBS支持的桶Action有：s3:CreateBuckets3:DeleteBuckets3:ListBuckets3:ListBucketVersionss3:ListBucketMultipartUploadss3:GetBucketAcls3:PutBucketAcls3:GetBucketCORSs3:PutBucketCORSs3:GetBucketVersionings3:PutBucketVersionings3:GetBucketLocations3:GetBucketPolicys3:DeleteBucketPolicys3:PutBucketPolicys3:GetBucketLoggings3:PutBucketLoggings3:GetBucketWebsites3:PutBucketWebsites3:DeleteBucketWebsites3:GetLifecycleConfigurations3:PutLifecycleConfigurationOBS支持的对象Action有：s3:GetObject(可作用于GETObject,HEADObject)s3:GetObjectVersions3:PutObject(可作用于PUTObject,POSTObject,InitiateMultipartUpload,UploadPart,CompleteMultipartUpload)s3:GetObjectAcls3:GetObjectVersionAcls3:PutObjectAcls3:PutObjectVersionAcls3:DeleteObjects3:DeleteObjectVersions3:ListMultipartUploadPartss3:AbortMultipartUploads3:RestoreObjectOBS支持操作S3Resource的ARN表示：arn:aws:s3:::<emid="zh-cn_topic_0031051916__i5623542792822">bucketname</em>(桶操作)arn:aws:s3:::<emid="zh-cn_topic_0031051916__i5877571192822">bucketname/path</em>/<emid="zh-cn_topic_0031051916__i5921935892822">objectname</em>(对象操作)以下示例策略向账户b4bf1b36d9ca43d984fbcb9491b6fce9（域ID）下的用户ID为71f3901173514e6988115ea2c26d1999的用户授予examplebucket的所有操作权限（包含桶操作与对象操作）。如果在上传对象时没有指定path，则ARN中省去“/path”。Statement中可选的Condition判断类型如下表所示：Condition关键字区分大小写。Date格式符合ISO8601规范，参考http://www.w3.org/TR/NOTE-datetime每个Condition块可以包含多个key-value的组合如下图的Condition组合表示的判断条件为请求时间从2009-04-16T12:00:00Z到2009-04-16T15:00:00Z，请求的IP地址范围是192.168.176.0/24"或"192.168.143.0/24"网段的请求。Condition块中可选的key包括两种：和Action无关的通用key、和Action有关系的S3服务特有的key。和Action无关的key包括：和OBSAction有关的Key包括：
Policy在做权限判断时，每条statement会有3种结果，explicitdeny、allow和defaultdeny。BucketPolicy对于Policy中的多条statement采用以下规则进行判定：BucketPolicy对Policy中包含的每条statement都要进行ExplicitDeny、Allow和DefaultDeny的判断，最终的判决结果遵循explicitdeny&gt;allow&gt;defaultdeny的规则；1.如果没有显式的Deny和Allow，则请求权限判别为DefaultDeny2.显式的Deny覆盖Allow；3.Allow覆盖默认的DefaultDeny；4.statement的顺序没有影响
OBS是按使用收费的服务，为了防止用户在OBS的数据被其他人盗链，OBS支持基于HTTPheader中表头字段referer的防盗链方法。OBS同时支持访问白名单和访问黑名单的设置。白名单设置使用访问白名单功能可以参考如下policy设置进行实现："Statement":[{"Sid":"1","Effect":"Deny","Principal":{"CanonicalUser":["*"]},"Action":["s3:*"],"Resource":["arn:aws:s3:::bucket/*"],"Condition":{"StringNotEquals":{"aws:Referer":["www.example01.com","www.example02.com"]}}}]如果按照此方式设置，只有referer为"www.example01.com"或"www.example02.com"可以对桶bucket中的资源进行操作。黑名单设置使用访问黑名单功能可以参考如下policy设置进行实现："Statement":[{"Sid":"1","Effect":"Deny","Principal":{"CanonicalUser":["*"]},"Action":["s3:*"],"Resource":["arn:aws:s3:::bucket/*"],"Condition":{"StringEquals":{"aws:Referer":["www.example01.com","www.example02.com"]}}}]如果按照此方式设置，当referer为"www.example01.com"或"www.example02.com"时，就不能对桶bucket中的资源进行操作。
OBS允许在桶内保存静态的网页资源，如.html网页文件、flash文件、音视频文件等，当客户端通过桶的Website接入点访问这些对象资源时，浏览器可以直接解析出这些支持的网页资源，呈现给最终用户。典型的应用场景有：重定向所有的请求到另外一个站点。设定特定的重定向规则来重定向特定的请求。本接口实现为桶创建或更新网站配置信息。要正确执行此操作，需要确保执行者有s3:PutBucketWebsite权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。设置完成后，网站配置会在两分钟内生效。尽量避免目标桶名中带有“.”，否则通过HTTPS访问时可能出现客户端校验证书出错。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
在此请求中，需要在请求的消息体中配置桶的网站配置信息，配置信息以XML格式上传。如果重定向所有请求，网站配置元素如描述。如果想要设定重定向规则，网站配置元素如描述。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
OBS通过简单的WebServices接口提供对象存储服务。通过对象存储服务可以构建基于存储的互联网应用，例如WebHosting、在线视频、在线相册、在线备份等应用。OBS提供REST形式的访问接口，使用户能够非常容易地从Web应用中访问对象存储服务。用户可以通过本文档提供的简单的REST接口，在任何时间、任何地点、任何互联网设备上进行上传和下载数据。在确保已充分了解OBS产品信息、使用协议以及收费方式后，再使用本文档所提到的接口。
创建桶是指按照用户指定的桶名创建一个新桶的操作。一个用户可以拥有的桶的数量不能超过100个。新创建桶的桶名在OBS中必须是唯一的。如果是同一个用户重复创建同一区域的同名桶时返回200。除此以外的其他场景重复创建同名桶返回409，桶已存在。用户可以在请求消息头中加入x-amz-acl参数，设置要创建桶的权限控制策略。注：在单Region/多Region场景下，如果用户A创建一个桶，然后删除该桶，用户B立即创建同名桶，系统返回409。如果用户B等待30分钟再创建同名桶，则系统返回200。在多Region场景下，如果用户A创建一个桶，然后删除该桶，用户A立即创建不同区域的同名桶，系统返回409。如果用户A等待30分钟再创建不同区域的同名桶，则系统返回200。如果创建桶时，服务端返回5XX错误或超时，系统需要10分钟左右的时间进行桶信息一致性处理，在此期间桶的信息会不准确。
允许用户创建不同默认存储类型的桶。发送创桶请求时携带头域“x-default-storage-class”来指定桶的默认存储类型。桶内对象的存储类型与桶默认存储类型保持一致。存储类型有3种：STANDARD（标准存储）、STANDARD_IA（近线存储）、GLACIER（归档存储）。如果没有携带此头域，则创建的桶为标准存储类型。
创建桶操作没有使用请求消息参数。
该操作消息头与普通请求一样，请参见见章节，但可以带附加消息头，附加请求消息头如所示。
该操作可以带附加请求消息元素，附加请求消息元素的具体描述如所示。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
CORS（CrossOriginResourceSharing），即跨域资源共享，是W3C标准化组织提出的一种规范机制，允许客户端的跨域请求的配置。在通常的网页请求中，由于安全策略SOP（SameOriginPolicy）的存在，一个网站的脚本和内容是不能与另一个网站的脚本和内容发生交互的。OBS允许在桶内保存静态的网页资源，在正确的使用下，OBS的桶可以成为网站资源（请参见）。只有进行了适当的CORS配置，OBS中的网站才能响应另一个网站的跨域请求。典型的应用场景如下：你可以使用CORS支持，使用JavaScript和HTML5来构建Web应用，直接访问OBS中的资源，而不再需要代理服务器做中转。可以使用HTML5中的拖拽功能，直接向OBS上传文件，展示上传进度，或是直接从Web应用中更新内容。托管在不同域中的外部网页、样式表和HTML5应用，现在可以引用存储在OBS中的Web字体或图片，让这些资源能被多个网站共享。要正确执行此操作，需要确保执行者有s3:PutBucketCORS权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。设置完成后，CORS配置会在两分钟内生效。
该请求消息中不使用消息参数。
该请求使用的消息头如下所示。
在此请求中，需要在请求的消息体中配置桶的CORS配置信息。配置信息以XML格式上传，具体的配置元素如描述。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
OBS系统支持指定规则来实现定时删除桶中对象，这就是生命周期配置。典型的应用场景如：周期性上传的日志文件，可能只需要保留一个星期或一个月，到期后要删除它们。某些文档在一段时间内经常访问，但是超过一定时间后就可能不会再访问了。这种文档您可能会先选择归档，然后在一定时间后删除。本接口实现为桶创建或更新生命周期配置信息。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。生命周期配置实现了定时删除对象的功能，所以如果想要阻止用户删除对象，以下几项操作的权限都应该被禁止：s3:DeleteObjects3:DeleteObjectVersions3:PutLifecycleConfiguration如果想要阻止用户管理桶的生命周期配置，应该禁止s3:PutLifecycleConfiguration权限。
该请求消息中不使用消息参数。
该请求使用的消息头如下所示。
在此请求中，需要在请求的消息体中配置桶的生命周期配置信息。配置信息以XML格式上传，具体的配置元素如描述。如果桶的多版本是Enabled或者Suspended，那么可以设置NoncurrentVersionExpiration来控制对象的历史版本的生命周期。一个历史版本的生命周期，取决于它成为历史版本的时刻（即被新版本覆盖的那个时刻）和NoncurrentDays。例如NoncurrentDays配置为1的话，表示当一个版本成为历史版本之后，再过1天才能删除。对象A的版本V1创建于1号，5号的时候又上传新的版本V2，此时V1成为历史版本，那么再过1天，7号的0点，V1就过期了。（备注：对象过期后被删除的时间可能会有一定的延迟，一般不超过48小时。）如果桶的多版本是Enabled或者Suspended，且最新版本对象满足Expiration规则时的处理：桶当前的多版本状态为enabled：如果对象的最新版本不是deletemarker，则该对象会产生一个新的deletemarker；如果最新版本是deletemarker，且该对象只有这一个版本，则这个版本会被删除；如果最新版本是deletemarker，且对象还有其他版本，则该对象的所有版本维持不变，没有新增和删除，也不会被修改（即无任何变化）。桶当前的多版本状态为suspended：如果最新版本不是null版本，则会产生一个新的null版本的deletemarker；如果最新版本是null版本，则这个null版本会被新产生的null版本的deletemarker覆盖。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
每个桶或者对象在创建时都会生成默认的ACL，ACL列表的每项包含了对被授权用户授予什么样的权限。对存在的桶或对象也可以调用更改ACL接口生成新的ACL。被授权用户ACL格式在执行PUT/BucketName?acl,PUT/BucketName/ObjectKey?acl操作时，需要在请求消息体中包含ACL,ACL的格式如下所示：其中permission是OBS支持的5种权限（详见），&lt;Grantee&gt;节点按照不同的被授予权限用户包括OBS用户、注册用户组用户、匿名用户以及日志投递用户组用户，有不同的格式。授予OBS用户&lt;Granteexmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:type="CanonicalUser"&gt;&lt;ID&gt;domainId&lt;/ID&gt;&lt;DisplayName&gt;displayname&lt;/DisplayName&gt;&lt;/Grantee&gt;授予注册用户组&lt;Granteexmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:type="Group"&gt;&lt;URI&gt;http://acs.amazonaws.com/groups/global/AuthenticatedUsers&lt;/URI&gt;&lt;/Grantee&gt;授予匿名用户&lt;Granteexmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:type="Group"&gt;&lt;URI&gt;http://acs.amazonaws.com/groups/global/AllUsers&lt;/URI&gt;&lt;/Grantee&gt;日志投递用户组&lt;Granteexmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:type="Group"&gt;&lt;URI&gt;http://acs.amazonaws.com/groups/s3/LogDelivery&lt;/URI&gt;&lt;/Grantee&gt;在一个请求中最多支持100个授权。每一次对桶或对象的授权操作都将覆盖桶或对象已有的权限列表，而不会对其新增权限。权限控制策略OBS支持在创建桶或上传对象时通过x-amz-acl头域设置桶或对象的权限控制策略，其设置的权限控制策略只能选择预定义的几种策略，如所示。系统默认权限控制策略为private权限。
本章描述了OBS系统返回的对象存储访问错误响应消息，包括所有的错误码列表和错误响应消息的格式。
当错误发生时，消息头中都会包含：•Content-Type:application/xml。•对应的3xx,4xx,或5xxHTTP状态码，具体的错误码请参见。
响应的消息体中同样会包含对错误的描述信息。下面的错误响应示例展示了所有REST错误响应中公共的元素。
REST错误响应消息元素如所示。许多错误响应包含其他的结构化数据，方便程序员在诊断程序错误时阅读和理解。
OBS系统提供的默认配置为根域名跨域访问允许所有域访问，会使客户端存在被攻击的风险。客户端可通过在自己的桶内创建配有自己规则的crossdomain.xml，并在其flash代码中添加Security.loadPolicyFile("http://obs.myhwclouds.com/bucket/crossdomain.xml")，从而避免被攻击的风险。crossdomain.xml需严格遵守XML语法，有且仅有一个根节点cross-domain-policy，且不包含任何属性。在此根节点下只能包含如下的子节点：site-control、allow-access-from、allow-access-from-identity、allow-http-request-headers-from。下表为对其子节点的介绍。
本章描述OBS系统使用ACL、BucketPolicy控制用户访问桶或对象资源的访问权限。
如果ACL和BucketPolicy同时使用，则ACL对某个账户的授权结果allow，可以被BucketPolicy的显示Deny覆盖。如果BucketPolicy和IAMPolicy同时使用，同样遵循explicitdeny&gt;allow&gt;defaultdeny的规则。SSE-KMS服务端加密对象，不支持BucketACL/Policy进行跨租户授权访问。
权限控制用来管理请求者对请求资源（桶或者对象）的访问权限，请求用户只能访问自己被授权的资源，如果访问未被授权的资源，则请求失败。用户创建的桶或者对象，其所有者为这个用户所属的domain。默认情况下，只有这个domain下的用户对这个桶或者资源有访问权限。可以通过ACL(AccessControlList)或者BucketPolicy两种方式管理权限ACL：使用权限控制列表授予某个账户对资源的访问权限，每个表项指定一个确定的权限给指定的账户；ACL只能授予账户(Account)，不能授予Account下的用户(User)；ACL只能用来授予权限，不能禁止权限；BucketPolicy：控制单个用户或多个用户访问桶或桶下对象的访问权限；BucketPolicy既可以用来授予权限，也可以禁止权限；桶策略即可作用于Account，也可作用于User；
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行了介绍。
OBS系统对象服务的公共请求消息头如所示。
OBS系统对象服务的公共响应消息头如所示。
在向OBS系统发出请求后，如果遇到错误，会在响应中包含响应的错误码描述错误信息。对象存储访问服务的错误码如所示。
管理员账户可以设置用户组的角色（Roles），不同角色有不同的权限范围，例如：对象存储服务的角色在“统一身份认证服务”界面，“管理区域或项目”选项卡的“对象存储服务”子项中设置。
OBS提供的交互接口遵循REST规范（HTTP1.1版本）。使用OBS提供的REST接口，用户可以发送标准的HTTP请求完成创建、获取、删除桶或对象的操作。用户可以使用任何支持REST请求的工具向OBS发送请求。基本对象存储服务操作接口如下表所示。
OBS向用户提供的帐户包括了AK（AccessKeyID）和SK（SecretAccessKey），用于鉴别用户身份。在向OBS系统发送请求时，客户端发送的消息头需要包含由SK、请求时间、请求类型等信息生成的鉴权信息。特别的，在进行鉴权之前，需要对桶名，对象名单独进行URLEncode编码，再生成鉴权信息。OBS支持两个版本的鉴权方式，V2鉴权和V4鉴权，相对于V2鉴权，V4鉴权是一种更加安全的鉴权方式。与V2鉴权方式的区别主要有三点：一、V4鉴权计算签名时使用更加安全的HMAC-SHA256算法。二、V4鉴权会将用户数据纳入签名计算。三、V4鉴权计算签名时要纳入签名计算的头域可以由用户指定。V2鉴权的安全性较低，推荐使用V4鉴权
普通请求鉴权是指将通过HTTP/HTTPS消息头Authorization进行鉴权，V2普通请求鉴权消息的格式为：鉴权消息（signature）生成过程如下：构造Request字符串，参数说明如所示。StringToSign=HTTP-Verb+"\n"+Content-MD5+"\n"+Content-Type+"\n"+Date+"\n"+CanonicalizedOBSHeaders+CanonicalizedResource。生成StringToSign的例子：根据Request和SK生成signature，生成过程使用HMAC(hash-basedauthenticationcode)算法，Signature=Base64(HMAC-SHA1(UTF-8-Encoding-Of(YourSecretAccessKeyID,StringToSign)))。
临时授权(QueryString签名)请求：OBS服务支持已经注册且激活的用户用自己的账户，构造一个特定操作的URL，这个URL中会包含鉴权信息，任何拿到这个URL的用户均可执行这个操作。例如临时授权方式下载对象，拿到相应URL的用户都能下载这个对象，但该URL只在Expires指定的失效时间内有效。V2临时授权请求的格式如下：临时授权请求通过消息参数指定临时鉴权信息，参数具体意义如所示。临时授权方式的Signature计算方法和Authorization消息头有两处不同：临时授权方式Base64编码后的签名信息还要经过URL编码。StringToSign中的Expires和原来Authorization消息中的消息头Date对应。
V4鉴权签名计算流程如所示。具体来说，计算签名分为以下几个步骤：1.生成StringToSign其中CanonicalRequest由以下字段组成：2.生成SigningKey其中各个字段的含义为：<sampclass="codeph"style="color:#FF0001;"id="ZH-CN_TOPIC_0071882240__codeph13308941112352">&lt;SecretAccessKey&gt;</samp>：是请求者的SK。<sampclass="codeph"style="color:#FF0001;"id="ZH-CN_TOPIC_0071882240__codeph4282435112352">&lt;yyyymmdd&gt;</samp><sampclass="codeph"id="ZH-CN_TOPIC_0071882240__codeph38541916112352">：</samp><sampclass="codeph"id="ZH-CN_TOPIC_0071882240__codeph11332925112352">时间，</samp>从HTTPheader中Authorization字段获取SigningKey的有效时间。<sampclass="codeph"style="color:#FF0001;"id="ZH-CN_TOPIC_0071882240__codeph45551715112352">&lt;aws-region&gt;</samp><sampclass="codeph"id="ZH-CN_TOPIC_0071882240__codeph7312259112352">：</samp>请求的region。<sampclass="codeph"style="color:#FF0001;"id="ZH-CN_TOPIC_0071882240__codeph55422103112352">&lt;aws-service&gt;</samp><sampclass="codeph"id="ZH-CN_TOPIC_0071882240__codeph29036886112352">：</samp>请求的服务类型。使用HMAC-SHA256算法计算出签名后，将签名转换为16进制编码形式即得到最终的签名。普通请求鉴权中有一种特殊情形chunked上传鉴权，此方式是指当用户使用chunked方式上传对象时的鉴权。chunked上传是指用户上传的数据流是由一个个数据块组成，每个数据块称做一个chunk，每个chunk由chunk元数据和chunk数据两部分组成。其中，chunk元数据中包含当前chunk数据的大小以及签名。整个chunk的格式为：每个chunk的签名计算流程如所示。chunk的签名计算是一个迭代的过程，每个chunk计算签名时都要基于前一个chunk的签名(previous-signature)来计算，对于第一个chunk来说，其前一个chunk的签名使用请求头域中的携带的签名（种子签名）。对象存储服务在收到chunked上传对象的请求之后，首先会对请求头域中的签名进行校验，然后在上传用户数据时会对每一个chunk的签名进行校验。头域签名和每个chunk的签名都校验通过才能上传对象成功。
其中6个查询参数的含义为：V4临时授权请求签名计算流程如所示。V4临时鉴权的签名计算流程与V4普通鉴权的签名计算流程一致，唯一的区别在于，V4临时鉴权计算CanonicalRequest时使用的HashedPayload值是固定字符串"UNSIGNED-PAYLOAD"。
对象存储服务支持基于浏览器的POST上传对象请求，此类请求的鉴权信息通过表单的方式上传，请求中必须包含的参数如下：Policy是JSON格式的字符串，Policy由两部分组成，expiration表示请求的过期时间，conditions表示对表单中参数的限制条件。Policy的示例如下：Policy中必须包含的参数如下：V4POST上传的签名计算流程与V4普通鉴权的签名计算流程大致相同，区别在于V4POST上传计算签名时的StringToSign使用请求中携带的Policy，请求中携带的Policy是由原始的Policy字符串经过Base64编码得到。具体计算流程如所示。
OBS用户可以通过请求查询自己创建的桶列表。
该请求消息中不带请求参数。
该请求消息头使用公共消息字段，具体请参见章节。
该请求消息中不带有请求参数。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中，会以XML形式将用户拥有的桶列出来，元素的具体含义如所示。
该请求无特殊错误，所有错误已经包含在中。
实际执行实例如下：
对桶拥有读权限的用户可以执行获取桶内对象列表的操作。如果用户在请求的URI里只指定了桶名，即GET/BucketName，则返回信息中会包含桶内部分或所有对象的描述信息(一次最多返回1000个对象信息)；如果用户还指定了prefix、marker、max-keys、delimiter参数中的一个或多个，则返回的对象列表将按照如所示规定的语义返回指定的对象。用户也可以请求参数中添加versions参数来执行列举桶内多版本对象的操作。
该请求可以通过带参数，列举出桶内的一部分对象，参数的具体含义如所示。
该请求使用公共的请求消息头，具体如章节所示。如果想要获取CORS配置信息，则需要使用的消息头如下所示。
该请求消息头中不带消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息中，会以XML形式将桶中的对象列出来，元素的具体含义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
对桶拥有读权限的用户可以执行查询桶元数据是否存在的操作。
该请求消息中不带消息参数。
该请求使用公共消息头，具体参见章节。如果想要获取CORS配置信息，则需要使用的消息头如下所示。
该请求消息中不带消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
对桶拥有读权限的用户可以执行获取桶区域位置信息的操作。
该请求消息中不带消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不带消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该响应中将桶的区域信息以消息元素的形式返回，元素的具体含义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
桶的拥有者可以执行获取桶存量信息的操作，返回信息包含指定桶的空间大小以及对象个数，桶的空间大小值为非负整数，单位为Byte（字节）。
该请求不使用请求消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用请求消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该响应中将桶存量信息以消息元素的形式返回，元素的具体含义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
删除桶操作用于删除用户指定的桶。只有桶的所有者或者拥有桶的删桶policy权限的用户可以执行删除桶的操作，要删除的桶必须是空桶。如果桶中有对象或者有多段任务则认为桶不为空，可以使用列举桶内对象和列举出多段上传任务接口来确认桶是否为空。注：如果删除桶时，服务端返回5XX错误或超时，系统需要10分钟左右的时间进行桶信息一致性处理，在此期间桶的信息会不准确。
该请求消息中不使用消息参数。
该请求使用公共的请求消息头，具体请参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
无特殊错误，错误已经包含在中。
实际执行实例如下：
该接口的实现使用policy子资源创建或者修改一个桶的策略。如果桶已经存在一个策略，那么当前请求中的策略将完全覆盖桶中现存的策略。要使用该接口，使用者要求必须是桶的所有者。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体请参见章节。
请求消息体是一个符合JSON格式的字符串，包含了桶策略的信息。这里JSON格式的生成与亚马逊兼容。关于如何设置policy内容及格式，请参考：
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
账户域ID为783fc6652cf246c096ea836694f71855。
用户ID为71f3901173514e6988115ea2c26d1999，用户所属账户的域ID为219d520ceac84c5a98b237431a2cf4c2。
只有桶的owner才可以修改桶配额值，桶的拥有者的状态是inactive状态不可以更改桶配额信息。桶空间配额值必须为非负整数，单位为Byte（字节），能设的最大值为2<supid="ZH-CN_TOPIC_0071882253__sup7473453143624">63</sup>-1，配额值设为0表示桶的配额没有上限。
该请求在请求消息中没有带有参数。
该请求没有特殊的请求消息头，公共部分参见章节。
该操作需要附加请求消息元素来指定桶的空间配额，具体见。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
OBS支持对桶操作进行权限控制。默认情况下，只有桶的创建者才有该桶的读写权限。用户也可以设置其他的访问策略，比如对一个桶可以设置公共访问策略，允许所有人对其都有读权限。OBS用户在创建桶时可以设置权限控制策略，也可以通过ACL操作API接口对已存在的桶更改或者获取ACL(accesscontrollist)。
该操作请求不带消息参数。
使用者可以使用cannedACL的方式来更改桶的ACL，每一种cannedACL都有一套自己预先定义好的被授权用户以及相应权限，通过cannedACL的方式授予访问权限，使用者必须添加以下的头域并且指定cannedACL的值。
更改桶的ACL请求需要在消息元素中带上ACL信息，元素的具体含义如所示。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
当启用通知功能后，在您的桶上所发生的指定操作，都能及时通知到您。有关事件通知的详细信息，请访问对象存储服务开发指南中的通知功能章节。默认情况下，您的桶没有配置事件通知。即该桶的通知配置将是一个空NotificationConfiguration。对已配置有事件通知的桶，您可以通过添加空NotificationConfiguration元素禁用通知功能。当对象存储服务（OBS）接收到配置消息通知的请求后，会验证指定的简单通知服务（SMN）主题是否存在及主题策略是否授权给了对象存储服务，验证通过后向该主题发送测试通知。为了能成功执行此配置操作，需要确保执行者拥有s3:PutBucketNotification权限。默认情况下只有桶的所有者拥有该权限，但可以通过设置桶策略或用户策略授权给其他用户。有关主题策略授权给对象存储服务的操作请参考SMN的用户手册。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
在此请求中，需要在请求的消息体中配置桶的通知，通知的配置信息以XML格式上传。具体的配置元素如描述。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
当用户执行调用本接口时，系统将会检查NotificationConfiguration元素的有效性，以及配置是否有效。下表中列出本接口的一些常见错误，以及可能原因。
实际执行实例如下：
该接口的实现使用policy子资源来将指定桶的策略返回给客户端。要使用该接口，使用者必须是桶的所有者。如果指定桶本身的策略不存在，则返回404“NoSuchBucketPolicy”的错误。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
响应消息体是一个JSON格式的桶策略字符串。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
桶的拥有者可以执行获取桶配额信息的操作。桶的拥有者的状态是inactive状态不可以查询桶配额信息。桶空间配额值的单位为Byte（字节），0代表不设上限。
该请示消息中不带消息参数。
该请求使用公共的请求消息头，具体参见章节。
该请求消息不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该响应以消息元素的形式返回桶的配额信息，元素的具体意义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
用户执行获取桶ACL的操作，返回信息包含指定桶的权限控制列表信息。用户必须拥有对指定桶读ACP的权限或FULL_CONTROL权限，才能执行获取桶ACL的操作。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应中以消息元素的形式返回桶的ACL信息，元素的具体意义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
该接口的目的是查询当前桶的日志管理配置情况。其实现是通过使用http的get方法再加入logging子资源来返回当前桶的日志配置情况。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:GetBucketLogging权限的用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应中以消息元素的形式返回桶的日志信息，元素的具体意义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
获取该桶设置的生命周期配置信息。要正确执行此操作，需要确保执行者有s3:GetLifecycleConfiguration执行权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
在此请求返回的响应消息体中包含的配置元素如下描述。
此请求可能的特殊错误如下描述。其余错误已经包含在中。
实际执行实例如下：
桶的所有者可以获取指定桶的多版本状态。如果从未设置桶的多版本状态，则此操作不会返回桶的多版本状态，参见。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应中以消息元素的形式返回桶的多版本状态，元素的具体意义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
获取指定桶的通知配置信息。为了能成功执行此配置操作，需要确保执行者拥有s3:PutBucketNotification权限。默认情况下只有桶的所有者拥有该权限，但可以通过设置桶策略或用户策略授权给其他用户
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
在此请求中，需要在请求的消息体中配置桶的通知，通知的配置信息以XML格式上传。具体的配置元素如描述。
该请求的响应消息使用公共消息头，具体请参考章节。
在此请求返回的响应消息体中包含的配置元素如下描述。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
该接口的实现是通过使用policy子资源来删除一个指定桶上的策略。要使用该接口，使用者必须是桶的所有者或者是被桶策略授权s3:DeleteBucketPolicy权限的用户。无论桶的策略本身是否存在，系统都直接返回204“NoContent”的结果。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
无特殊错误，所有错误已经包含在中
实际执行实例如下：
删除指定桶的生命周期配置信息。删除后桶中的对象不会过期，OBS不会自动删除桶中对象。要正确执行此操作，需要确保执行者有s3:PutLifecycleConfiguration权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
OPTIONS，称为预请求，是客户端发送给服务端的一种请求，通常被用于检测客户端是否具有对服务端进行操作的权限。只有当预请求成功返回，客户端才开始执行后续的请求。OBS允许在桶内保存静态的网页资源，在正确的使用下，OBS的桶可以成为网站资源。在这种使用场景下，OBS中的桶作为服务端，需要处理客户端发送的OPTIONS预请求。要处理OPTIONS，OBS的桶必须已经配置CORS，关于CORS的使用说明，请参见章节。
该请求消息中不使用消息参数。
该请求使用的消息头如下所示。
该请求消息中不使用消息元素。
该响应使用的消息头如下所示。
该请求的响应消息中不带消息元素。
此请求可能的特殊错误如下描述。其余错误已经包含在中。
实际执行实例如下：
请参见章节。
该请求消息中不使用消息参数。
该请求使用的消息头如下所示。
该请求消息中不使用消息元素。
该请求使用的消息头如下所示。
该请求的响应消息中不带消息元素。
此请求可能的特殊错误如下描述。其余错误已经包含在中。
实际执行实例如下：
获取该桶设置的网站配置信息。要正确执行此操作，需要确保执行者有s3:GetBucketWebsite执行权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
在此请求返回的响应消息体中包含的配置元素与设置桶的网站配置请求的请求消息元素一致，见。
此请求可能的特殊错误如下描述。其余错误已经包含在中。
实际执行实例如下：
获取指定桶的CORS配置信息。要正确执行此操作，需要确保执行者有s3:GetBucketCORS权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
在此请求返回的响应消息体中包含的配置元素如下描述。
此请求可能的特殊错误如下描述。其余错误已经包含在中。
实际执行实例如下：
删除指定桶的网站配置信息。要正确执行此操作，需要确保执行者有s3:DeleteBucketWebsite权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
删除指定桶的CORS配置信息。删除后桶以及桶中的对象将不能再被其他网址发送的请求访问。要正确执行此操作，需要确保执行者有s3:PutBucketCORS权限。默认情况下只有桶的所有者可以执行此操作，也可以通过设置桶策略或用户策略授权给其他用户。
该请求消息中不使用消息参数。
该请求使用公共消息头，具体参见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
上传对象操作是指在指定的桶内增加一个对象，执行该操作需要用户拥有桶的写权限。用户上传的对象存储在桶中。用户必须对桶有WRITE权限，才可以在桶中上传对象。同一个桶中存储的对象名必须是唯一的。如果在指定的桶内已经有相同的对象键值的对象，用户上传的新对象会覆盖原来的对象；为了确保数据在传输过程中没有遭到破坏，用户可以在请求消息头中加入Content-MD5参数。在这种情况下，OBS收到上传的对象后，会对对象进行MD5校验，如果不一致则返回出错信息。用户还可以在上传对象时指定x-amz-acl参数，设置对象的权限控制策略。该操作支持服务端加密功能。用户在OBS系统中创建了桶之后，可以采用PUT操作的方式将对象上传到桶中。
如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号，并且会在响应报头x-amz-version-id返回该版本号。如果桶的多版本状态是暂停的，则对象的版本号为null。关于桶的多版本状态，参见。
该请求消息中不使用参数。
该请求可以使用附加的消息头，具体如所示。
该请求消息中不使用消息元素，在消息体中带的是对象的数据。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如中的消息头。
该请求的响应消息不带消息元素。
该请求的返回无特殊错误，所有错误已经包含在中。
实际执行实例如下：
上传对象操作是指在指定的桶内增加一个对象，执行该操作需要用户拥有桶的写权限。用户上传的对象存储在桶中。用户必须对桶有WRITE权限，才可以在桶中上传对象。同一个桶中存储的对象名必须是唯一的。如果在指定的桶内已经有相同的对象键值的对象，用户上传的新对象会覆盖原来的对象；为了确保数据在传输过程中没有遭到破坏，用户可以在请求消息头中加入Content-MD5参数。在这种情况下，OBS收到上传的对象后，会对对象进行MD5校验，如果不一致则返回出错信息。用户还可以在上传对象时指定x-amz-acl参数，设置对象的权限控制策略。用户除了可以用PUT直接上传对象外，还可以使用POST上传对象。该操作支持服务端加密功能。
如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号；如果桶的多版本状态是暂停的，则系统生成的对象版本号为null，并由响应报头x-amz-version-id返回该版本号。关于桶的多版本状态，参见。
该请求消息中不使用参数。
该请求使用公共的消息头，具体请参见章节。如果想要获取CORS配置信息，则需要使用的消息头如下所示。
该请求消息的消息元素以表单形式组织，表单字段的具体含义如所示。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如中的消息头。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
复制对象（CopyObject）特性用来为OBS上已经存在的对象创建一个副本。当进行复制对象操作时，目标对象默认复制源对象的元数据；用户也可以将目标对象的元数据替换为本次请求中所带的元数据。新建的目标对象不会复制源对象的ACL信息，默认的新建对象的ACL是private，用户可以使用设置ACL的操作接口来重新设定新对象的ACL。复制对象操作的请求需要携带鉴权信息，不能携带消息实体。该操作支持服务端加密功能。
默认情况下，x-amz-copy-source标识复制源对象的最新版本。如果源对象的最新版本是删除标记，则认为该对象已删除。要复制指定版本的对象，可以在x-amz-copy-source请求消息头中携带versionId参数。如果目标对象的桶的多版本状态是开启的，系统为目标对象生成唯一的版本号（此版本号与源对象的版本号不同），并且会在响应报头x-amz-version-id返回该版本号。如果目标对象的桶的多版本状态是暂停的，则目标对象的版本号为null。在桶没有开启多版本的情况下，将源对象objecta复制为目标对象objectb，如果在复制操作之前对象objectb已经存在，复制操作执行之后老对象objectb则会被新复制对象objectb覆盖，复制成功后，只能下载到新的对象objectb，老对象objectb将会被删除。因此在使用copy接口时请确保目标对象不存在或者已无价值，避免因copy导致数据误删除。复制过程中源对象objecta无任何变化。复制对象的结果不能仅根据HTTP返回头域中的status_code来判断请求是否成功，头域中status_code返回200时表示服务端已经收到请求，且开始处理复制对象请求。复制是否成功会在响应消息的body中，只有body体中有ETag标签才表示成功，否则表示复制失败。
如果源对象是归档存储对象，需要判断源对象的取回状态，只有当源对象处于已取回状态时，才能复制成功。源对象未取回或者正在取回时，会复制失败，返回错误403Forbidden。异常描述为：ErrorCode:InvalidObjectStateErrorMessage:Operationisnotvalidforthesourceobject'sstorageclass
该请求消息中不使用消息参数。
该消息可以带附加的消息头指定复制的信息，具体如所示。其他消息头请参见章节。
该请求在消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息通过消息元素来返回复制结果，元素具体含义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
OBS支持对对象的操作进行权限控制。默认情况下，只有对象的创建者才有该对象的读写权限。用户也可以设置其他的访问策略，比如对一个对象可以设置公共访问策略，允许所有人对其都有读权限。SSE-KMS方式加密的对象即使设置了ACL，跨租户也不生效。OBS用户在上传对象时可以设置权限控制策略，也可以通过ACL操作API接口对已存在的对象更改或者获取ACL(accesscontrollist)。本节将介绍如何更改对象ACL，改变对象的访问权限。
默认情况下，更改的是最新版本的对象ACL。要设置指定版本的对象ACL，请求可以带参数versionId。
请求参数说明如所示。
该请求使用公共请求消息头，具体参见章节。
该请求消息通过带消息元素来传递对象的ACL信息，元素的意义如所示。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如中的消息头。
该请求的响应消息中不带有消息元素。
该请求的响应无特殊错误，所有错误已经包含在中。
实际执行实例如下：
拥有对象读权限的用户（包括OBS注册用户和匿名用户）可以执行GET操作，返回信息会包含对象内容和对象的元数据信息。该操作支持服务端加密功能。
默认情况下，获取的是最新版本的对象。如果最新版本的对象是删除标记，则返回404。如果要获取指定版本的对象，请求可携带versionId消息参数。
对于归档存储对象，对象处于不同的取回状态时，给出不同响应：如果对象已取回，下载对象成功时需要返回x-amz-restore头域指示取回失效时间。对未取回或正在取回的归档存储对象发送下载请求时，会返回错误403Forbidden。
其中Range字段可选，如果没有的话得到全部内容。
GET操作获取对象内容时，允许用户通过请求参数的方式对一些消息头值进行重写，可以重写的消息头有：Content-Type、Content-Language、Expires、Cache-Control、Content-Disposition以及Content-Encoding共6个，具体的说明如所示。
该请求除使用公共消息头外，还可以使用附加的消息头来完成获取对象的功能，消息头的意义如所示。
该请求消息中不使用消息元素。
该请求的响应消息使用公消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
拥有对象读权限的用户可以执行HEAD操作命令获取对象元数据，返回信息包含对象的元数据信息。该操作支持服务端加密功能。
默认情况下，获取的是最新版本的对象元数据。如果最新版本的对象是删除标记，则返回404。如果要获取指定版本的对象元数据，请求可携带versionId消息参数。
请求参数说明如所示。
该请求使用公共消息头，具体请参考章节。另外该请求可以使用附加的消息头，具体如所示。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息中不带消息元素。
无特殊错误；所有错误已经包含在中。
实际执行实例如下：
用户执行获取对象ACL的操作，返回信息包含指定对象的权限控制列表信息。用户必须拥有对指定对象读ACP(accesscontrolpolicy)的权限，才能执行获取对象ACL的操作。
默认情况下，获取最新版本的对象ACL。如果最新版本的对象是删除标记，则返回404。如果要获取指定版本的对象ACL，请求可携带versionId消息参数。
该请求需要在请求消息参数中指定是在获取对象ACL，参数意义如所示。
该请求使用公共消息头，具体请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息中通过消息元素返回对象的ACL信息，元素的具体意义如所示。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
拥有对象所在桶的写权限的用户可以执行删除对象的操作。如果要删除的对象不存在，则仍然返回成功信息。
当桶的多版本状态是开启时，不指定版本删除对象将产生一个带唯一版本号的删除标记，并不删除对象；当桶的多版本状态是暂停时，不指定版本删除对象将产生一个版本号为null的删除标记，并删除版本号为null的对象（如果该对象存在）。如果要删除指定版本的对象，请求可携带versionId消息参数。
请求参数说明如所示。
该请求使用公共消息头，具体请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如下中的消息头。
该请求的响应消息中不带消息元素。
无特殊错误，所有错误已经包含在中。
实际执行实例如下：
批量删除对象特性用于将一个桶内的部分对象一次性删除，删除后不可恢复。批量删除对象要求返回结果里包含每个对象的删除结果。删除成功的对象不能进行List和Get操作，OBS的批量删除对象使用同步删除对象的方式，每个对象的删除结果返回给请求用户。批量删除对象支持两种响应方式：verbose和quiet。Verbose是指在返回响应时，不管对象是否删除成功都将删除结果包含在XML响应里；quiet是指在返回响应时，只返回删除失败的对象结果，没有返回的认为删除成功。OBS默认使用verbose模式，如果用户在请求消息体中指定quiet模式的话，使用quiet模式。批量删除的请求消息头中必须包含Content-MD5以及Content-Length，用以保证请求的消息体在服务端检测到网络传输如果有错，则可以检测出来。
该请求的请求消息中不使用消息参数。
该请求使用公共消息头，具体请参考章节。
该请求通过在请求消息的消息元素中指定要批量删除的对象列表，元素的具体含义如所示。请求约束批量删除对象一次能接收最大对象数目为1000个，如果超出限制，服务端会返回请求不合法。并发任务分配后，在循环删除多个对象过程中，如果发生内部错误，有可能出现数据不一致的情况（某个对象索引数据删除但还有元数据）。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应通过消息元素返回删除的结果，元素的具体意义如中所示。
1、用户收到请求后首先进行XML的解析，如果超过1000个对象返回400BadRequest。2、如果XML消息体中包含的对象Key不合法，比如超过1024字节，OBS返回400BadRequest。3、如果请求消息头中不包含Content-MD5，OBS则返回400BadRequest。4、OBS查询桶元数据信息，如果没有，OBS返回404NotFound，错误码为NoSuchBucket。5、检查用户DomainId是否有桶的写权限，如果没有，则OBS返回403Forbidden，提示信息为AccessDenied。其他错误已经包含在中。
实际执行实例如下：
使用多段上传特性时，用户必须首先调用创建多段上传任务接口创建任务，系统会给用户返回一个全局唯一的多段上传任务号，作为任务标识。后续用户可以根据这个标识发起相关的请求，如：上传段、合并段、列举段等。创建多段上传任务不影响已有的同名对象；同一个对象可以同时存在多个多段上传任务；每个多段上传任务在初始化时可以附加消息头信息，包括acl、用户自定义元数据和通用的HTTP消息头contentType、contentEncoding等，这些附加的消息头信息将先记录在多段上传任务元数据中。该操作支持服务端加密功能。
该请求需要在消息中指定参数，表明这是多段上传，参数意义如所示。
该请求可以使用附加的消息头，具体如所示。其他公共消息头请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求响应消息中通过返回消息元素，返回本次多段上传任务的多段上传任务号、桶名、对象名，供后续上传段、合并段使用，元素的具体意义如所示。
1、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。2、如果桶不存在，OBS返回404NotFound，错误码为NoSuchBucket。3、检查用户是否具有指定桶的写权限，如果没有权限，OBS返回403Forbidden，错误码为AccessDenied。其他错误已包含在中。
实际执行实例如下：
用户可以通过“列出多段上传任务”接口查询一个桶中所有的初始化后还未合并或未取消的多段上传任务。
该请求可以通过在请求消息中指定参数，查询指定范围的多段上传任务，请求参数说明如所示。
该请求使用公共请求消息头，具体请见章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中通过消息元素返回多段上传任务，元素的具体意义如所示。
1、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。2、如果请求的桶不存在，OBS返回404NotFound，错误码为NoSuchBucket。3、OBS系统判断用户DomainId是否具有指定桶的读权限，如果没有权限，则OBS返回403Forbidden，错误码为AccessDenied。4、OBS系统对maxUploads进行判断，如果maxUploads不为整数类型或者小于0，OBS返回400BadRequest。其他错误已经包含在中。
实际执行实例如下：
多段上传任务创建后，用户可以通过指定多段上传任务号，通过上传段接口为特定的任务上传段，从客户端上传新数据。同一个对象的同一个多段上传任务在上传段时，上传的顺序对后续的合并操作没有影响，也即支持多个段并发上传。段大小范围是[5MB，5GB]，但在进行合并段操作时，最后一个段的大小范围为[0,5GB]。上传的段的编号也有范围限制，其范围是[1,10000]。该操作支持服务端加密功能。多并发上传同一对象的同一段时，服务端遵循LastWriteWin策略，但“LastWrite”的时间定义为段元数据创建时间。为了保证数据准确性，客户端需要加锁保证同一对象的同名段上传的并发性。同一对象的不同段并发上传不需要加锁。
在上传段的时候需要通过在消息参数中指定多段上传任务号和段号来上传指定段，参数的具体意义如所示。
该请求使用公共消息头，具体请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
1、如果段序号超过范围[1,10000]，则返回错误400BadRequest。2、如果段大小超过5G，则返回错误400BadRequest。3、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。4、查询桶是否存在，如果桶不存在，OBS返回404NotFound，错误码为NoSuchBucket。5、检查桶的ACL，判断用户DomainId是否具有指定桶的写权限，如果没有权限，则OBS返回403Forbidden，错误码为AccessDenied。6、检查多段上传任务是否存在，如果不存在，OBS返回404NotFound，错误码为NoSuchUpload。7、检查请求用户是否是多段上传任务的发起者（Initiator），如果不是，OBS返回403Forbidden，错误码为AccessDenied。其他错误已包含在中。
实际执行实例如下：
多段上传任务创建后，用户可以通过指定多段上传任务号，为特定的任务上传段。添加段的方式还包括调用段拷贝接口。允许客户将已上传对象的一部分或全部拷贝为段。该操作支持服务端加密功能拷贝段的结果不能仅根据HTTP返回头域中的status_code来判断请求是否成功，头域中status_code返回200时表示服务端已经收到请求，且开始处理拷贝段请求。拷贝是否成功会在响应消息的body中，只有body体中有ETag标签才表示成功，否则表示拷贝失败。将源对象object拷贝为一个段part1，如果在拷贝操作之前part1已经存在，拷贝操作执行之后老段数据part1会被新拷贝的段数据覆盖。拷贝成功后，只能列举到最新的段part1，老段数据将会被删除。因此在使用拷贝段接口时请确保目标段不存在或者已无价值，避免因拷贝段导致数据误删除。拷贝过程中源对象object无任何变化。
如果源对象是归档存储对象，需要判断源对象的取回状态，只有当源对象处于已取回状态时，才能拷贝成功。源对象未取回或者正在取回时，会拷贝失败，返回错误403Forbidden。异常描述为：ErrorCode:InvalidObjectStateErrorMessage:Operationisnotvalidforthesourceobject'sstorageclass
拷贝段需要在参数中指定目标段的段号和多段上传任务号，参数的具体意义如所示。
该请求的除了使用公共消息头外，还使用了两个扩展的消息头，如所示。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息使用消息元素来返回段拷贝的结果，元素的意义如所示。
1、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。2、查询源桶或目的桶是否存在，如果不存在，OBS返回404NotFound，错误码为NoSuchBucket。3、如果源对象不存在，OBS返回404NotFound，错误码为NoSuchKey。4、如果用户对指定对象没有读权限，OBS返回403Forbidden，错误码为AccessDenied。5、如果用户对目的桶没有写权限，OBS返回403Forbidden，错误码为AccessDenied。6、查询指定的任务不存在，OBS返回404NotFound，错误码为NoSuchUpload。7、如果用户不是多段上传任务的发起者，OBS返回403Forbidden，错误码为AccessDenied。8、当拷贝的单段超过5G时，OBS返回400BadRequest。9、如果段序号超过范围[1,10000]，OBS返回错误400BadRequest。其他错误已包含在中。
实际执行实例如下：
用户可以通过“列出段”接口查询一个任务所属的所有段信息。
该请求通过请求消息参数指定多段上传任务以及列出的段数量，参数的具体含义如所示。
该请求使用公共消息头，具体请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应通过消息元素返回已上传了的段信息，元素的具体含义如所示。
1、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。2、如果请求的桶不存在，OBS返回404Forbidden，错误码为NoSuchBucket。3、如果请求的多段上传任务不存在，OBS返回404NotFound，错误码为NoSuchUpload。4、OBS判断用户DomainId是否具有指定桶的读权限，如果没有权限，则OBS返回403Forbidden，错误码为AccessDenied。其他错误已经包含在中。
实际执行实例如下：
如果用户上传完所有的段，就可以调用合并段接口，系统将在服务端将用户指定的段合并成一个完整的对象。在执行“合并段”操作以前，用户不能下载已经上传的数据。在合并段时需要将多段上传任务初始化时记录的附加消息头信息拷贝到对象元数据中，其处理过程和普通上传对象带这些消息头的处理过程相同。在并发合并段的情况下，仍然遵循LastWriteWin策略，但“LastWrite”的时间定义为段任务的初始化时间。已经上传的段，只要没有取消对应的多段上传任务，都要占用用户的容量配额；对应的多段上传任务“合并段”操作完成后，只有指定的多段数据占用容量配额，用户上传的其他此多段任务对应的段数据如果没有包含在“合并段”操作制定的段列表中，“合并段”完成后删除多余的段数据，且同时释放容量配额。合并完成的多段上传数据可以通过已有的下载对象接口，下载整个多段上传对象或者指定Range下载整个多段上传对象的某部分数据。合并完成的多段上传数据可以通过已有的删除对象接口，删除整个多段上传对象的所有分段数据，删除后不可恢复。合并完成的多段上传数据不记录整个对象的MD5作为Etag，在下载多段数据或List桶内对象看到的多段数据其Etag的生成方式为：<emid="ZH-CN_TOPIC_0071882293__i4965703110528">MD5</em><emid="ZH-CN_TOPIC_0071882293__i1997389410528">（M</em><emid="ZH-CN_TOPIC_0071882293__i2641000910528"><subid="ZH-CN_TOPIC_0071882293__sub4759976010528">1</sub></em><emid="ZH-CN_TOPIC_0071882293__i6161444310528">M</em><emid="ZH-CN_TOPIC_0071882293__i2118653010528"><subid="ZH-CN_TOPIC_0071882293__sub1386978510528">2</sub></em><emid="ZH-CN_TOPIC_0071882293__i2016057810528">……M</em><emid="ZH-CN_TOPIC_0071882293__i3481080210528"><subid="ZH-CN_TOPIC_0071882293__sub2298224610528">N</sub></em><emid="ZH-CN_TOPIC_0071882293__i2756811610528">）-N，</em>其中，<emid="ZH-CN_TOPIC_0071882293__i3260568310528">M</em><emid="ZH-CN_TOPIC_0071882293__i3260568310528_1"><subid="ZH-CN_TOPIC_0071882293__sub15199885101626">n</sub></em>表示第n段的MD5值，N表示总共的段数。
如果桶的多版本状态是开启的，则合并段后得到的对象生成一个唯一的版本号，并且会在响应报头x-amz-version-id返回该版本号。如果桶的多版本状态是暂停的，则合并段后得到的对象版本号为null。关于桶的多版本状态，参见。如果上传了10个段，但合并时只选择了9个段进行合并，那么未被合并的段将会被系统自动删除，未被合并的段删除后不能恢复。在进行合并之前请使用列出已上传的段接口进行查询，仔细核对所有段，确保没有段被遗漏。
该请求在消息参数中指定多段上传任务号来标明它要合并哪一个上传段任务，参数意义如所示。
该请求使用公共消息头，具体请参考章节。
该请求需要在消息中带消息元素，指定要合并的段列表，元素的具体意义如中所示
该请求的响应消息使用公共消息头，具体请参考章节。除之外，还可能使用如中的消息头。
该请求的响应消息中通过返回消息元素来返回合并段的结果，元素的具体意义如所示。
1、如果没有消息体，OBS返回400BadRequest。2、如果消息体格式不正确，OBS返回400BadRequest。3、消息体中如果段信息未按照段序号升序排列，OBS返回400BadRequest，错误码为InvalidPartOrder。4、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。5、如果请求的桶不存在，OBS返回404NotFound，错误码为NoSuchBucket。6、如果请求的多段上传任务不存在，OBS返回404NotFound，包含错误信息NoSuchUpload。7、如果用户不是该任务的发起者（initiator），OBS返回403Forbidden，错误码为AccessDenied。8、在合并段时如果请求段列表中包含了不存在的段，OBS返回400BadRequest，错误码为InvalidPart。9、如果请求段列表中包含的段的Etag错误，OBS返回400BadRequest，错误码为InvalidPart。10、除最后一个段之外的其它段尺寸过小（小于5MB），OBS返回400BadRequest。11、对象在合并完成后总大小如果超过5TB，OBS返回400BadRequest。其他错误已包含在中。
实际执行实例如下：
如果用户希望取消一个任务，可以调用取消多段上传任务接口取消任务。合并段或取消任务接口被调用后，用户不能再对任务进行上传段和列举段的操作。
该请求通过消息参数，指定要取消的段任务的多段上传任务号，参数的意义如所示。
该请求使用公共消息头，具体请参考章节。
该请求消息中不使用消息元素。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带消息元素。
1、如果AccessKey或签名无效，OBS返回403Forbidden，错误码为AccessDenied。2、如果请求的桶不存在，OBS返回404NotFound，错误码为NoSuchBucket。3、用户执行取消多段上传任务操作时判断用户是否是任务初始化者或是桶的所有者，如果不是则OBS则返回403Forbidden。4、操作成功，OBS向用户返回204NoContent。其他错误已包含在中。
实际执行实例如下：
SSE-KMS方式，OBS使用KMS（KeyManagementService）服务提供的密钥进行服务端加密。用户首次向区域中的桶上传SSE-KMS加密的对象时，OBS将自动为您创建一个默认客户主密钥，客户主密钥用于加密和解密KMS提供的密钥。SSE-KMS方式不支持用户自建密钥。BucketACL/Policy不支持SSE-KMS加密对象进行跨租户授权访问。SSE-KMS方式新增加两个头域来支持SSE-KMS加密。OBS支持BucketPolicy，如果您要对所有存储在桶中的对象执行服务端加密限制，则可以使用这些策略。例如，如果本租户的上传对象请求不包含用于请求服务端加密(SSE-KMS)的头域x-amz-server-side-encryption:"aws:kms"，则下面的BucketPolicy将拒绝该上传对象请求。{"Version":"2008-10-17","Id":"PutObjPolicy","Statement":[{"Sid":"DenyUnEncryptedObjectUploads","Effect":"Deny","Principal":"*","Action":"s3:PutObject","Resource":"arn:aws:s3:::YourBucket/*","Condition":{"StringNotEquals":{"s3:x-amz-server-side-encryption":"aws:kms"}}}]}
SSE-C方式，OBS使用用户提供的密钥和密钥的MD5值进行服务端加密。OBS不存储您提供的加密密钥，如果您丢失加密密钥，则会无法获取该对象。SSE-C方式新增加六个头域来支持SSE-C加密。使用SSE-C方式加密对象，您必须使用下面的三个头域。针对复制对象和拷贝段，另外增加三个头域支持源对象是SSE-C加密的场景。
本节介绍，与服务端加密相关的接口，以及使用该接口时服务端加密对传输协议和鉴权的使用要求。与服务端加密相关的接口对使用传输协议和鉴权有具体要求，详情如表所示。
当客户端发起的写/删除请求返回成功之后，客户端可以获取到最新数据。当写操作客户端等待超时、服务端返回500或者503的HTTP响应错误码时，之后的读取操作有可能成功读取到数据，也有可能读不到数据。建议客户端在出现上述错误时，查询数据是否已经上传成功，如果不成功则重新上传。针对同一个对象或桶的操作，比如多个客户端对同一个对象并行上传、查询和删除时，具体操作结果依赖于操作到达系统的时间和系统内部处理的时延，可能返回不一致的结果。比如，当多个客户端并行上传同一个对象时，系统最后收到的上传请求会覆盖前一个上传的对象。如果需要避免同一个对象被并行访问，需要在上层应用中增加对象的锁机制。
1.当客户端1正在上传一个对象v1时，客户端2同时上传一个同名的对象v2成功后，不管是客户端1还是客户端2都能够读取最新的对象数据v2，如所示。2.当客户端1上传一个对象v1的时候，如果在对象数据上传且还没有写入对象元数据的过程中，客户端2删除同名的对象成功后，客户端1的上传对象操作仍然返回成功，并且不论客户端1还是客户端2都能读取到对象数据v1，如所示。3.当客户端1上传一个对象v1的时候，如果在对象数据上传完成，系统写入对象元数据的短暂过程中，客户端2发起删除同名的对象成功后，客户端1的上传对象操作仍然返回成功，但是客户端1和客户端2下载对象Object1时，有可能读到对象数据v1，也有可能返回对象不存在，如所示。4.当客户端1下载一个对象的过程中，客户端2发起删除同名对象操作，此时客户端1可能下载到完整的对象数据，也有可能只能下载到对象的一部分数据。当客户端2的删除操作返回成功后，再发起下载对象请求，则返回对象不存在，如所示。5.当客户端1下载一个对象的过程中，客户端2发起更新同名对象操作，此时客户端1可能下载到完整的对象数据，也有可能只能下载到对象的一部分数据。当客户端2的更新操作返回成功后，再发起下载对象请求，则返回最新的对象数据，如所示。6.当客户端1正在上传一个对象的段v1时，客户端2同时上传同一个对象的相同段号的段v2成功后，不管是客户端1还是客户端2列举段时都能够列举etag为v2的段信息，如所示。7.当客户端上传一个对象，客户端等待超时、服务端返回500或503的错误码，在之后的对象下载和列举桶中对象会有如下四种可能：（1）对象上传失败，对象下载和列举桶中对象均无该对象信息。（2）客户端等待超时，有极低的概率出现head该对象正常，但是下载该对象报500错误，若遇到此问题，请重新上传该对象。（3）客户端上传的是新创建对象，查看桶中对象列表将查询不到该对象，但是通过对象名直接下载，可能下载此对象。（4）客户端上传的是原有对象或同名对象，查看桶中对象列表可以查询到该对象，但查看到的对象的大小、etag、创建时间、owner信息与下载对象时得到的信息不一致。8.客户端1上传一个对象v1，客户端2同时上传一个同名的对象v2，服务端返回200，在之后的对象下载和列举桶中对象会有如下四种可能：（1）对象下载和列举桶中对象信息均为对象v1的信息。（2）对象下载和列举桶中对象信息均为对象v2的信息。（3）下载对象为v1，列举桶中对象为对象v2的信息。（4）下载对象为v2，列举桶中对象为对象v1的信息。9.客户端使用同一用户并发创删同名桶时，有较小概率会发生创删桶冲突，导致请求失败返回500。
如果要获取归档存储对象的内容，需要先将对象取回。然后再执行下载数据的操作。
默认情况下，取回的是最新版本的对象。如果最新版本的对象是删除标记，则返回404。如果要取回指定版本的对象，请求可携带versionId消息参数。
该请求使用公共消息头，具体请参见章节。
该请求的响应消息使用公共消息头，具体请参考章节。
该请求的响应消息中不带有响应元素。
实际执行实例如下：
正常响应要素参考具体API章节：、、。
异常相应要素说明[1]error数据结构异常响应样例（HTTPBody）{"status":"failed","error":{"code":"错误编码","message":"导致错误的原因说明"}}
使用指定的名称和描述在DevCloud平台上创建项目。
URI格式POST/v1/projects
参数说明请求样例{"name":"项目名","description":"项目描述","type":"scrum"}
要素说明[1]project字段数据结构响应样例{"result":{"project":{"project_uuid":"d2b7c5dd89804fed92abf8d83aa3374a"}},"status":"success"}
请参考。
根据项目UUID获取已创建项目的项目信息，用户须有项目的浏览权限。
URI格式GET/v1/projects/{project_uuid}参数说明
N/A
要素说明[1]project字段数据结构说明说明：和项目相关的API都需要project_uuid作为项目唯一标识，project_id字段可以忽略。响应样例{"result":{"project":{"project_name":"test_name","description":"desc","project_id":3345,"project_uuid":"d2b7c5dd89804fed92abf8d83aa3374a","type":"scrum"}},"status":"success"}
请参考。
获取指定项目相关的动态消息。
URI格式GET/v1/projects/{project_uuid}/messages?{page_no,page_size}参数说明获取项目动态的查询检索参数
N/A
要素说明[1]messages字段数据结构说明响应样例{"result":{"messages":[{"id":"1aaafd14c3f149348b054315a69c4f73","content":"content11","type":"codeci","name":"编译构建","operator":"user001","target":"user002","url":"https://rnd-devcloud.huawei.com/codeci/detail/workspace?jobId=dca95316dcea4bf98cc2fb6e3c0fb5d6","create_time":"2017-02-2814:34:55"},{"id":"1aaafd14c3f149348b054315a69c4f73","content":"content11","type":"projectman","name":"项目管理","operator":"user001","target":"user002","url":"https://rnd-devcloud.huawei.com/codeci/detail/workspace?jobId=dca95316dcea4bf98cc2fb6e3c0fb5d6","create_time":"2017-02-2814:34:55"},{"id":"1aaafd14c3f149348b054315a69c4f73","content":"content11","type":"pipeline","name":"流水线","operator":"user001","target":"user002","url":"https://rnd-devcloud.huawei.com/codeci/detail/workspace?jobId=dca95316dcea4bf98cc2fb6e3c0fb5d6","create_time":"2017-02-2814:34:55"}],"total":3},"status":"success"}
请参考。
在指定的项目中创建迭代。
URI格式POST/v1/projects/{project_uuid}/iterations参数说明
参数说明请求样例{"name":"3.0.1","description":"3.0.1版本","start_date":"2017-02-15","end_date":"2017-03-15"}
要素说明[1]iteration字段数据结构响应样例{"result":{"iteration":{"iteration_id":145}},"status":"success"}
请参考。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
在指定的项目中更新指定的迭代。
URI格式PUT/v1/projects/{project_uuid}/iterations/{iteration_id}参数说明
参数说明请求样例{"name":"3.0.1","description":"3.0.1版本","start_date":"2017-02-15","end_date":"2017-03-15"}
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
获取指定项目的迭代列表。
URI格式GET/v1/projects/{project_uuid}/iterations?{page_no,page_size}参数说明获取项目迭代的查询检索参数
N/A
要素说明[1]iterations字段数据结构说明响应样例{"result":{"iterations":[{"id":11261,"name":"迭代1","description":"","end_date":"2017-03-28","start_date":"2017-02-28"},{"id":11262,"name":"迭代2","description":"","end_date":"2017-04-29","start_date":"2017-03-29"},{"id":11263,"name":"迭代3","description":"","end_date":"2017-05-30","start_date":"2017-04-30"}],"total":3},"status":"success"}
请参考。
删除指定项目中指定的迭代。
URI格式DELETE/v1/projects/{project_uuid}/iterations/{iteration_id}参数说明
N/A
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
该接口用于把指定用户添加到指定的项目中，加入后成为项目的成员，成员角色为开发人员。调用此接口的用户必须有项目管理权限。
URI格式POST/v1/projects/{project_uuid}/members参数说明
参数说明请求样例{"domain_id":"5eea7dbd5eee43e09a76c9fe8e732348","domain_name":"domain","user_name":"user001","user_id":"user001"}
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
获取指定项目的成员用户列表。
URI格式GET/v1/projects/{project_uuid}/members{?page_no,page_size}参数说明获取项目成员的查询检索参数
N/A
要素说明[1]members字段数据结构说明响应样例{"result":{"total":6,"members":[{"user_id":"040dfab3322f41268106a3194baeb086","role_id":3,"is_creator":1,"is_manager":0,"domain_name":"domain1","user_name":"user001","domain_id":"1338dd626fd542f2892c127055ee8d1c"}]},"status":"success"}
请参考。
删除指定项目中的指定用户。执行成功后，指定的用户没有项目浏览权限，不能查看项目任何信息。
URI格式DELETE/v1/projects/{project_uuid}/members/{user_id}参数说明
N/A
根据HTTP状态码和错误码获取响应结果。响应样例{"result":{},"status":"success"}
请参考。
正常异常
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为（带方括号的为可选项）：URL中的参数说明，如下表所示。URL中的参数说明
在HTTP协议中，可以使用多种请求方法，例如：GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。请求方法一览表
调用接口采用如下Token认证方式，您需要使用Token认证进行行认证鉴权。Token认证：通过Token认证调用请求。
当您使用Token认证方式时，请采用如下步骤调用接口：发送“POSThttps://IAM的Endpoint/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参考获取用户Token。说明：<ulid="ZH-CN_TOPIC_0073620121__ul398313420114"><liid="ZH-CN_TOPIC_0073620121__li15983193418115">Token值即接口返回消息Header中的“X-Subject-Token”的值。Token的有效期为24小时，需要同一个Token鉴权时，可以先缓存起来，避免频繁调用。调用接口时，在业务接口请求消息头中增加“X-Auth-Token”，取值为上面步骤中的Token值。
发送“POSThttps://IAM的Endpoint/v3/auth/tokens”，请求内容示例如下：{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0073620121__i835248578">username</em>","password":"<emid="ZH-CN_TOPIC_0073620121__i143521481676">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0073620121__i335210811719">domainname</em>"}}}},"scope":{"project":{"name":"<emid="ZH-CN_TOPIC_0073620121__i03521288714">projectname</em>"}}}}说明：示例代码中的斜体字需要替换为实际内容。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为前面步骤中获取的Token。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
公共请求消息头说明：其它header属性，请遵照http协议。
公共响应消息头
文档修订记录累积了每次文档更新的说明。最新版本的文档包含以前所有文档版本的更新内容。
其它header属性，请遵照http协议。
查询当前支持的API版本列表。
URI格式PATH：/rds/Method：GET参数说明N/AHeader说明
N/A
要素说明响应样例{"versions":[{"id":"v1","links":[],"status":"CURRENT","updated":"2017-02-07T17:34:02Z"},{"id":"v1.0","links":[{"href":"","rel":"self"}],"status":"CURRENT","updated":"2017-03-23T17:34:02Z"}]}
请参见。
查询API指定版本信息。
URI格式PATH：/rds/{versionId}Method：GET参数说明Header说明
N/A
要素说明响应样例{"versions":{"id":"v1","links":[],"status":"CURRENT","updated":"2017-03-23T17:34:02Z"},"version":{"id":"v1","links":[],"status":"CURRENT","updated":"2016-11-22T00:00:00Z"}}
请参见。
第三方应用对RDSAPI的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
删除数据库实例。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}Method：DELETE参数说明Header说明接口约束备机不允许删除。删除主机时，如果有只读副本不允许删除，如果没有，映射删除集群。
要素说明响应样例{"jobId":"ff8080815a88d52c015a8a0db2250003"}
请参见。
获取指定类型的数据库版本相关信息。
URI格式PATH：/rds/{versionId}/{project_id}/datastores/{datastore_name}/versionsMethod：GET参数说明Header说明
N/A
要素说明响应样例{"dataStores":[{"id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a62","name":"5.6.33","datastore":"736270b9-27c7-4f03-823b-447d8245e1c2","image":"988f7639-4bc9-4225-bdfe-f47bcde1a5f2","packages":"MySQL-server-5.6.33","active":1},{"id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61","name":"5.6.30","datastore":"736270b9-27c7-4f03-823b-447d8245e1c2","image":"14daaee9-f2c6-4c5c-9736-bbbd40bcb327","packages":"MySQL-server-5.6.30","active":1},{"id":"96cccede-bc51-11e6-bd4d-286ed488dd62","name":"5.6.34","datastore":"736270b9-27c7-4f03-823b-447d8245e1c2","image":"fdf4cf41-2a5a-49e9-be75-bdc4d73ad1e8","packages":"MySQL-server-5.6.34","active":1},{"id":"35a3d5ba-6f74-4b29-824d-6de20f1ac090","name":"5.6.35","datastore":"736270b9-27c7-4f03-823b-447d8245e1c2","image":"8dad6ec4-775b-4aaf-90c6-5020ceccd53d","packages":"MySQL-server-5.6.35","active":1},{"id":"87620726-6802-46c0-9028-a8785e1f1922","name":"5.7.17","datastore":"736270b9-27c7-4f03-823b-447d8245e1c2","image":"e59a0bac-5509-493b-a033-10b4bec25873","packages":"MySQL-server-5.7.17","active":1}]}
请参见。
获取指定数据库ID和区域下的所有实例规格信息。
URI格式PATH：/rds/{versionId}/{project_id}/flavorsMethod：GET参数说明Header说明
参数说明请求样例说明：请求样例中参数“region”的值为示例值。/rds/v1/375d8d8fad1f43039e23d3b6c0f60a19/flavors?dbId=e8a8b8cc-63f8-4fb5-8d4a-24c502317a6&amp;region=<emid="ZH-CN_TOPIC_0032347783__i51915335194132">aaa</em>
要素说明响应样例{"flavors":[{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","name":"RDS_MYHP_LARGE","ram":4096,"specCode":"rds.mysql.c2.large"},{"id":"f7f51f85-cfcd-4409-ae91-b3eae186d0ea","name":"RDS_MYLM_XLARGE","ram":32768,"specCode":"rds.mysql.m1.xlarge"}]}
请参见。
获取指定规格ID下的实例规格信息。
URI格式PATH：/rds/{versionId}/{project_id}/flavors/{flavorId}Method：GET参数说明Header说明
N/A
要素说明响应样例{"flavor":{"id":"f7f51f85-cfcd-4409-ae91-b3eae186d0ea","name":"RDS_MYLM_XLARGE","ram":32768,"specCode":"rds.mysql.m1.xlarge"}}
请参见。
创建的RDS实例，可分单实例、HA实例和只读副本。
URI格式PATH：/rds/{versionId}/{project_id}/instancesMethod：POST参数说明Header说明
参数说明请求样例中参数“region”和“availabilityZone”的值为示例值。请求样例创建单实例：{"instance":{"name":"trove-instance-rep2","datastore":{"type":"MySQL","version":"5.6.30"},"flavorRef":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","volume":{"type":"COMMON","size":100},"region":"<emid="ZH-CN_TOPIC_0032347785__i30452542192233">aaa</em>","availabilityZone":"<emid="ZH-CN_TOPIC_0032347785__i38871848192351">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3},"dbRtPd":"Test@123"}}创建HA实例：{"instance":{"name":"trove-instance-ha","datastore":{"type":"MySQL","version":"5.6.30"},"flavorRef":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","volume":{"type":"COMMON","size":100},"region":"<emid="ZH-CN_TOPIC_0032347785__i10213660192416">aaa</em>","availabilityZone":"<emid="ZH-CN_TOPIC_0032347785__i49640077192435">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3},"dbRtPd":"Test@123","ha":{"enable":true,"replicationMode":"async"}}}创建只读副本：{"instance":{"name":"trove-instance-replica2","flavorRef":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","replicaOf":"373af3b8-8f44-44f6-bb90-85f1c32c50d6"}}
要素说明响应样例中参数“region”和“availabilityZone”的值为示例值。响应样例单实例：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032347785__i33637188192513">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032347785__i20730064192532">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"dbPort":8635,"volume":{"type":"COMMON","size":100},"dataStoreInfo":null,"extendparam":{"jobs":[{"id":"ff8080815564ddf5015564f64a560024"}]},"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}HA实例：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032347785__i9515699192547">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032347785__i4544795019261">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100},"dbPort":8635,"dataStoreInfo":null,"extendparam":{"jobs":[{"id":"ff8080815564ddf5015564f64a560024"},{"id":"ae3081675564ddf5357564f64a560025"}]},"backupStrategy":{"startTime":"01:00:00","keepDays":3},"slaveId":"9405d8b8-a87d-4531-bd3a-e504c8434281","ha":{"replicationMode":"async"}}}只读副本：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"","hostname":"","type":"readreplica","region":"<emid="ZH-CN_TOPIC_0032347785__i66984315192625">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032347785__i34028300192640">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100},"dbPort":8635,"dataStoreInfo":null,"extendparam":{"jobs":[{"id":"ff8080815564ddf5015564f64a560024"}]},"replica_of":"252f11f1-2912-4c06-be55-1999bde659c5"}}
请参见。
RDS的OpenAPI提供针对用户数据库实例的创建、查看、删除等基本操作，以及查询系统支持的API版本、数据库引擎及版本、运行环境规格、可用区域等操作。其主要的调用场景见下图：在创建实例之前，需要获取系统支持的数据库引擎及版本，运行环境规格以及可用区域信息。在获取到信息之后，可以将返回结果作为调用参数，执行创建实例操作。在实例创建成功后，用户可以对自己所属的实例进行列举、查询详细信息、以及删除操作。数据库实例需要先查询数据库所有参数和参数信息后才能进行设置参数取值和参数恢复默认值。数据库实例可以进行扩容和重启，可以将返回的任务号作为调用参数查询异步任务的进展情况。MicrosoftSQLServer不支持扩容磁盘。
在RDS的Web界面中，考虑到面向用户的易用性，将用户的数据库实例组织成集群的形式进行展现，通常一个MySQL集群中可以包含一个主实例、一个HA备实例、以及若干个只读副本，或者只包含一个主实例和若干个只读副本，不包含备实例，其中只读副本不超过5个。如下图：在RDS的OpenAPI中，考虑到与OpenStackTrove的兼容，对外只以实例级别提供服务，与Web界面上的集群组织方式的对应关系为：在创建实例时会默认创建出一个集群，并将创建出的实例显示在此集群下。在列举实例时会将此用户所属的所有实例以列表方式给出，不会体现出集群到实例的层次关系。删除只读副本与界面功能相同，都是指定实例进行删除；删除主备实例时会同时将实例所属的集群一同删除，但前提条件是必须将集群下属的只读副本提前删除。
RDSAPI符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，客户端应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0032347789__i55212610">Endpoint</em>/<emid="ZH-CN_TOPIC_0032347789__i43036453">uri</em>URL中的参数说明如所示。
RDSAPI的访问需经过签名认证，当RDSAPI采用Token认证方式来完成认证鉴权时，需要获取用户Token，并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。获取Token，请参见《统一身份认证服务API参考》的“获取用户Token”章节，请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。curl命令获取Token具体如下示：正确响应如下示：
本节说明创建数据库单实例流程及调用接口过程。
流程如下：查询ListDatastoreVersion接口获取数据库ID、版本，响应结构体中的ID定义为$dbId，version定义为$version。获取region。变量定义为$region。请参见。查询ListFlavor接口获取flavorRef（对应接口ID），查询时用到的$dbId、的$region，响应ID定义为$flavorId。获取availabilityZone，变量定义为$availabilityZone。请参见。查询VPC接口，响应结果分别为$vpc、$subnetId、$securityGroup.id。调用CreateDatabaseInstance接口，请求body用到的$region、的$flavorId、的$availabilityZone、的$vpc、$subnetId、$securityGroup.id。
curl命令获取数据库版本信息的请求如下所示：curl-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"$SERVER_URL/v1/{project_id}/datastores/{datastore_name}/versions正确响应如下所示：{"id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61","name":"5.6.30","datastore":"abc8b8cc-63f8-4fb5-8d4a-24c502317a61","image":"89932337-cde6-4d8f-847a-b76014ec6796","packages":"MySQL-server-5.6.30","active":1}获取region。变量定义为$region。请参见。curl命令获取flavorId的请求如下所示。curl-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"$SERVER_URL/v1/{project_id}/flavors?dbId=$dbId&amp;region=$region正确响应如下所示：{"flavors":[{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","name":"RDS_MYHP_LARGE","ram":4096},{"id":"c5cac226-b5d3-4169-a7e9-3c19369b4072","name":"RDS_MYHP_XLARGE","ram":8192},{"id":"ece7aa3f-f457-4ecf-ba46-3a72e6518e03","name":"RDS_MYHP_2XLARGE","ram":16384},{"id":"5ae73301-8e5e-4b7e-bb75-6a1851e6bcf7","name":"RDS_MYHP_8XLARGE","ram":131072}]}flavorId变量定义为$flavorId。curl命令创建单实例的请求如下所示：curl-XPOST$SERVER_URL/v1/{project_id}/instances-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"-d'{"instance":{"name":"tenant-instance-123","datastore":{"type":"MySQL","version":"$version"},"flavorRef":"$flavorId","volume":{"type":"COMMON","size":100},"region":"$region","availabilityZone":"$availabilityZone","vpc":"$vpc","nics":{"subnetId":"$subnetid"},"securityGroup":{"id":"bb62ffb9-a37a-4821-92b9-f9e0712e389f"},"backupStrategy":{"startTime":"01:00:00","keepDay":3},"dbRtPd":"Test@123"}}'正确响应如下所示：{"instance":{"id":"b0468a4a-5790-4a4f-8442-9030e52369e6","status":"BUILD","name":"tenant-instance-123","created":"","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032347793__i6138733520247">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032347793__i6457042820258">bbb</em>","vpc":"f7513b5d-5c48-4332-8f47-a3c29c2613e7","nics":{"subnetId":"4a7d3555-6410-4338-8859-2be61d51662a"},"securityGroup":{"id":"bb62ffb9-a37a-4821-92b9-f9e0712e389f"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volumn":{"type":"COMMON","size":100},"extendparam":{"jobs":[{"id":"8a3eb75e5577819f0155778220600001"}]},"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}说明：响应样例中参数“region”和“availabilityZone”的值为示例值。
本节说明删除数据库实例流程及客户端调用过程。
查询ListDatabaseInstance获取租户数据库实例ID，响应ID定义为$instanceId。调用DeleteDatabaseInstance接口，请求URL中{instanceId}为的$instanceId。
curl命令获取实例列表的请求如下所示：curl-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"$SERVER_URL/v1/{project_id}/instances正确响应如下所示：{"instance":{"id":"b0468a4a-5790-4a4f-8442-9030e52369e6","status":"ACTIVE","name":"tenant-instance-1232213","created":"2016-06-22T17:47:44+0800","hostname":"172.16.4.208","type":"master","region":"<emid="ZH-CN_TOPIC_0032347796__i6621179220825">aaa</em>","updated":"2016-06-22T17:47:44+0800","availabilityZone":"<emid="ZH-CN_TOPIC_0032347796__i325928020838">bbb</em>","vpc":"f7513b5d-5c48-4332-8f47-a3c29c2613e7","nics":{"subnetId":"4a7d3555-6410-4338-8859-2be61d51662a"},"securityGroup":{"id":"bb62ffb9-a37a-4821-92b9-f9e0712e389f"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volumn":{"type":"COMMON","size":100,},"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}curl命令删除实例的请求如下所示：curl-XDELETE$SERVER_URL/v1/{project_id}/instances/{instanceId}-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"正确响应如下所示：{"jobId":"ff8080815a88d52c015a8a0db2250003"}响应样例中参数“region”和“availabilityZone”的值为示例值。
本节说明创建数据库HA实例流程及调用接口过程。
创建数据库HA实例流程同创建数据库单实例流程，具体参见。
查询ListDatastoreVersion接口。请参见中。获取region。请参见中。查询ListFlavor接口。请参见中。curl命令创建数据库HA实例的请求如下所示：replicationMode值定义为$replicationMode。curl-XPOST$SERVER_URL/v1/{project_id}/instances-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"-d'{"instance":{"name":"tenant-instance-123","datastore":{"type":"MySQL","version":"$version"},"flavorRef":"$flavorId","volume":{"type":"COMMON","size":100},"region":"$region","availabilityZone":"$availabilityZone","vpc":"$vpc","nics":{"subnetId":"$subnetid"},"securityGroup":{"id":"bb62ffb9-a37a-4821-92b9-f9e0712e389f"},"backupStrategy":{"startTime":"01:00:00","keepDay":3},"dbRtPd":"Test@123","ha":{"enable":true,"replicationMode":"$replicationMode"}}}'正确响应如下所示：{"instance":{"id":"b0468a4a-5790-4a4f-8442-9030e52369e6","status":"BUILD","name":"tenant-instance-123","created":"","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032347799__i2685974120416">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032347799__i3802081120430">bbb</em>","vpc":"f7513b5d-5c48-4332-8f47-a3c29c2613e7","nics":{"subnetId":"4a7d3555-6410-4338-8859-2be61d51662a"},"securityGroup":{"id":"bb62ffb9-a37a-4821-92b9-f9e0712e389f"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volumn":{"type":"COMMON","size":100},"extendparam":{"jobs":[{"id":"8a3eb75e5577819f0155778220600001"},{"id":"ae3081675564ddf5357564f64a560025"}]},"backupStrategy":{"startTime":"01:00:00","keepDays":3},"slaveId":"9405d8b8-a87d-4531-bd3a-e504c8434281","ha":{"replicationMode":"async"}}}说明：响应样例中参数“region”和“availabilityZone”的值为示例值。创建数据库HA实例返回实例信息列表中，主机status为FAILED时、则在调用ShowDatabaseInstanceDetails、DeleteDatabaseInstance接口时需要使用备机ID。
在HTTP协议中，请求可以使用多种请求方法，如：GET、PUT、POST、DELETE，用于指明以何种方式来访问指定的资源，目前获取的REST接口所支持的请求方法如下表所示。
调用接口需进行Token认证鉴权。Token认证：通过Token认证调用请求。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0032347804__i4227070012354">IAM</em><emid="ZH-CN_TOPIC_0032347804__i4489198512354">的Endpoint</em>/v3/auth/tokens”请求。获取IAM的Endpoint以及消息体中的区域名称，请参见。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详细情况请参见《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0032347804__i1322869015296">username</em>","password":"<emid="ZH-CN_TOPIC_0032347804__i15294466152910">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0032347804__i65968558152916">domainname</em>"}}}},"scope":{"project":{"name":"<emid="ZH-CN_TOPIC_0032347804__i22210883181111">regioncode</em>",}}}}说明：请求体中的regioncode，请参见。获取Token，请参见《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。从Token的响应结构体中可以获取到对应的project_id（部分URL需要填入project_id）。Token响应结构体示例如下：{"token":{"expires_at":"2016-06-24T07:42:43.907000Z","issued_at":"2016-06-23T07:42:43.907000Z","methods":["password"],"project":{"name":"projectname","id":"project_id","domain":{"name":"domainname","id":"domainid","xdomain_type":"xdomaintype","xdomain_id":"xdomainid"}},"user":{"domain":{"name":"domainname","id":"domainid","xdomain_type":"xdomaintype","xdomain_id":"xdomainid"},"id":"userid","name":"username"},"catalog":[],"roles":[{"name":"rolesname1","id":"rolesid1"},{"id":"rolesid2","name":"rolesname2"}]}}调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
获取实例列表。
URI格式PATH：/rds/{versionId}/{project_id}/instancesMethod：GET参数说明Header说明
N/A
要素说明说明：响应样例中参数“region”和“availabilityZone”的值为示例值。响应样例单实例：{"instances":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032348280__i37691946193628">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348280__i56341066193643">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}HA实例：{"instances":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032348280__i3622380219371">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348280__i49431351193715">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3},"slaveId":"9405d8b8-a87d-4531-bd3a-e504c8434281","ha":{"replicationMode":"async"}}}只读实例：{"instances":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"readreplica","region":"<emid="ZH-CN_TOPIC_0032348280__i18853020193729">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348280__i42893665193740">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"replica_of":"252f11f1-2912-4c06-be55-1999bde659c5"}}
请参见。
获取指定实例详细信息。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}Method：GET参数说明Header说明
N/A
要素说明说明：响应样例中参数“region”和“availabilityZone”的值为示例值。响应样例单实例：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032348281__i2548556193830">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348281__i55459389193841">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100,"used":"14.99"},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}HA实例：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032348281__i56417955193856">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348281__i23840684193914">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100,"used":"8.45"},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"backupStrategy":{"startTime":"01:00:00","keepDays":3},"slaveId":"9405d8b8-a87d-4531-bd3a-e504c8434281","ha":{"replicationMode":"async"}}}只读实例：{"instance":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"BUILD","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"readreplica","region":"<emid="ZH-CN_TOPIC_0032348281__i60297717193927">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032348281__i12353595193940">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100,"used":"13.99"},"dataStoreInfo":{"type":"MySQL","version":"5.6.30"},"dbPort":8635,"replica_of":"252f11f1-2912-4c06-be55-1999bde659c5"}}
请参见。
本节说明创建数据库主实例只读副本流程及客户端调用过程。
流程如下：查询ListDatastoreVersion接口，获取数据库ID、版本，响应结构体中的ID定义为$dbId，version定义为$version。获取region。变量定义为$region。请参见。查询ListFlavor接口获取flavorRef（对应接口ID），查询时用到的$dbId、的$region，响应ID定义为$flavorId。查询ListDatabaseInstance获取租户数据库实例ID，响应ID定义为$instanceId。调用CreateReadReplica接口，请求body用到了的$flavorId、的$instanceId参数。
查询ListDatastoreVersion接口。请参见中。获取region。请参见中。查询ListFlavor接口。请参见中。curl命令查询实例列表获取主实例ID，定义为$instanceId，作为只读副本的replicaOf。请求如下所示：curl-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"$SERVER_URL/v1/{project_id}/instances正确响应如下所示：{"instances":{"id":"252f11f1-2912-4c06-be55-1999bde659c5","status":"ACTIVE","name":"trove-instance-rep3","created":"2016-06-18T21:21:50+0200","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0032450202__i773585720637">aaa</em>","updated":"2016-06-18T21:21:50+0200","availabilityZone":"<emid="ZH-CN_TOPIC_0032450202__i3461633320651">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volume":{"type":"COMMON","size":100,},"backupStrategy":{"startTime":"01:00:00","keepDays":3}}}curl命令创建只读副本的请求如下所示：curl-XPOST$SERVER_URL/v1/{project_id}/instances-H"Content-Type:application/json""X-Auth-Token:$X-Subject-Token""X-Language:en-us"-d'{"instance":{"name":"tenant-instance-123-rep","flavorRef":"$flavorId","replicaOf":$instanceId}}'正确响应如下所示：{"instance":{"id":"b0468a4a-5790-4a4f-8442-9030e52369e6","status":"BUILD","name":"tenant-instance-123-rep","created":"","hostname":"172.16.4.210","type":"readreplica","region":"<emid="ZH-CN_TOPIC_0032450202__i3214184820724">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0032450202__i4279085220742">bbb</em>","vpc":"490a4a08-ef4b-44c5-94be-3051ef9e4fce","nics":{"subnetId":"0e2eda62-1d42-4d64-a9d1-4e9aa9cd994f"},"securityGroup":{"id":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5"},"flavor":{"id":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4"},"volumn":{"type":"COMMON","size":100},"extendparam":{"jobs":[{"id":"8a3eb75e5577819f0155778220600001"}]},"replica_of":"252f11f1-2912-4c06-be55-1999bde659c5"}}响应样例中参数“region”和“availabilityZone”的值为示例值。
异常响应要素说明响应样例{"errCode":"RDS.0016","externalMessage":"未找到资源"}
正常异常
错误码列表：
ReplicationMode列表
调整实例相关的容量大小。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/actionMethod：POST参数说明Header说明接口约束<olid="ZH-CN_TOPIC_0034943367__ol51058783111130"><liid="ZH-CN_TOPIC_0034943367__li44896577111130">调整实例容量高于原来容量，扩容容量要为10的倍数。扩容不超过4次。备实例大小和主实例大小一致，当主实例扩容时，会同时扩容备实例。如果只读实例扩容，扩容后的大小不能超过主实例大小。实例状态仅为服务中和还原中时可以进行扩容。该接口不支持实例的数据库引擎MicrosoftSQLServer。
参数说明请求样例{"resize":{"volume":{"size":400}}}
要素说明响应样例{"extendparam":{"jobs":[{"id":"2b414788-a600-4883-a023-90e2eb0ea227"}]}}
请参见。
重启实例的数据库服务。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/actionMethod：POST参数说明Header说明接口约束实例在创建、扩容、变更规格、备份、恢复或冻结状态下不能重启。
参数说明请求样例{"restart":{}}
要素说明响应样例{"extendparam":{"jobs":[{"id":"2b414788-a600-4883-a023-90e2eb0ea227"}]}}
请参见。
获取数据库版本的所有可修改参数信息。
URI格式PATH：/rds/{versionId}/{project_id}/datastores/versions/{datastore_version_id}/parametersMethod：GET参数说明Header说明
N/A
要素说明响应样例{"configuration-parameters":[{"name":"autocommit","type":"boolean","value_range":"ON|OFF","description":"Theautocommitmode.IfsettoON,allchangestoatabletakeeffectimmediately.IfsettoOFF,youmustuseCOMMITtoacceptatransactionorROLLBACKtocancelit.","restart_required":false,"datastore_version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},{"name":"auto_increment_increment","min":1,"max":65535,"type":"integer","description":"auto_increment_incrementandauto_increment_offsetareintendedforusewithmaster-to-masterreplication,andcanbeusedtocontroltheoperationofAUTO_INCREMENTcolumns.","restart_required":false,"datastore_version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},{"name":"auto_increment_offset","min":1,"max":65535,"type":"integer","description":"auto_increment_incrementandauto_increment_offsetareintendedforusewithmaster-to-masterreplication,andcanbeusedtocontroltheoperationofAUTO_INCREMENTcolumns.","restart_required":false,"datastore_version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},{"name":"back_log","min":1,"max":65535,"type":"integer","description":"ThenumberofoutstandingconnectionrequestsMySQLcanhave.ThiscomesintoplaywhenthemainMySQLthreadgetsverymanyconnectionrequestsinaveryshorttime.Itthentakessometime(althoughverylittle)forthemainthreadtochecktheconnectionandstartanewthread.Theback_logvalueindicateshowmanyrequestscanbestackedduringthisshorttimebeforeMySQLmomentarilystopsansweringnewrequests.Thedefaultvaluedependsonsystemarchitecture.","restart_required":true,"datastore_version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"}]}
请参见。
获取指定数据库版本下的参数信息。
URI格式PATH：/rds/{versionId}/{project_id}/datastores/versions/{datastore_version_id}/parameters/{parameter_name}Method：GET参数说明Header说明
N/A
要素说明响应样例{"name":"connect_timeout","min":2,"max":31536000,"restart_required":false,"type":"integer","description":"mysqld在用‘Badhandshake’消息响应连接请求包之前等待的秒数。","datastore_version_id":"f8e67741-e767-4137-b394-3fb8a3fafd2f"}
请参见。
设置实例参数。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/parametersMethod：PUT参数说明Header说明接口约束<olid="ZH-CN_TOPIC_0034973638__ol21831363162953"><liid="ZH-CN_TOPIC_0034973638__li57958739162953">对于boolean型的参数修改，Value只能填写ON或OFF。修改主实例参数，则备实例对应的参数也会同步修改，备实例和只读副本的参数不允许修改。
要素说明请求样例{"values":{"connect_timeout":17,"sync_binlog":1}}
要素说明响应样例{"shouldRestart":0,"setParameteResult":0}
请参见。
实例参数恢复默认值。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/parameters/defaultMethod：PUT参数说明Header说明接口约束如果是主实例参数恢复默认，则备实例参数也会同步恢复默认，不能直接对备实例参数恢复默认。
{}
要素说明响应样例{"shouldRestart":1,"setParameteResult":0}
请参见。
以列表形式返回所有快照信息。
URI格式PATH：/rds/{versionId}/{project_id}/backupsMethod：GET参数说明Header说明
N/A
要素说明响应样例{"backups":[{"id":"2a4d0f86-67cd-408a-8b66-017454fb7793","name":"50deafb3e45d451a9406ca146b71fe9a_rds-1_4f87d3c4-9e33-482f-b962-e23b30d1a18c_2016_08_23_01_59_23.tar.gz","description":"","locationRef":"","created":"2016-08-23T03:59:23","updated":"2016-08-23T04:01:40","size":0.0,"status":"COMPLETED","backuptype":"1","dataStore":{"type":"MySQL","version":"5.6.30","version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},"instance_id":"4f87d3c4-9e33-482f-b962-e23b30d1a18c","parent_id":null},{"id":"4af11460-06ec-48a4-b3ad-0e3bbdcd8ab1","name":"50deafb3e45d451a9406ca146b71fe9a_rds-lichao-1_4f87d3c4-9e33-482f-b962-e23b30d1a18c_2016_08_23_16_20_00.tar.gz","description":"","locationRef":"","created":"2016-08-23T18:20:00","updated":"2016-08-23T18:22:12","size":3.73E-4,"status":"COMPLETED","backuptype":"1","dataStore":{"type":"MySQL","version":"5.6.30","version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},"instance_id":"4f87d3c4-9e33-482f-b962-e23b30d1a18c","parent_id":null}]}
请参见。
设置自动备份策略。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/backups/policyMethod：PUT参数说明Header说明
请求样例{"policy":{"keepday":7,"starttime":"00:00:00"}}
{}
请参见。
获取自动备份策略。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/backups/policyMethod：GET参数说明Header说明
N/A
响应样例{"policy":{"keepday":7,"starttime":"00:00:00"}}
请参见。
创建快照。
URI格式PATH：/rds/{versionId}/{project_id}/backupsMethod：POST参数说明Header说明
请求样例{"backup":{"description":"MyBackup","instance":"44b277eb-39be-4921-be31-3d61b43651d7","name":"snapshot"}}
响应样例{"backup":{"created":"2016-09-12T01:17:05","dataStore":{"type":"MySQL","version":"5.6.30","version_id":"e8a8b8cc-63f8-4fb5-8d4a-24c502317a61"},"description":"123","id":"2f4ddb93-b901-4b08-93d8-1d2e472f30fe","instance_id":"0bc7300c-dc63-45d4-aa3b-d85bf577baac","locationRef":null,"name":"test011111","parent_id":null,"size":null,"status":"BUILDING","updated":null,"backuptype":"1"},"extendparam":{"jobs":["ff80808157127d9301571bf8160c001d"]}}
请参见。
删除快照信息。
URI格式PATH：/rds/{versionId}/{project_id}/backups/{backupId}Method：DELETE参数说明Header说明
N/A
{}
请参见。
恢复当前指定实例。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/actionMethod：POST参数说明Header说明接口约束该接口不支持实例的数据库引擎PostgreSQL。
参数说明请求样例{"restore":{"backupRef":"a9832168-7541-4536-b8d9-a8a9b79cf1b4"}}
要素说明响应样例{"extendparam":{"jobs":[{"id":"ff80808156fa51c50156fa7c20210bc9"}]}}
请参见。
恢复指定实例到新实例。
URI格式PATH：/rds/{versionId}/{project_id}/instancesMethod：POST参数说明Header说明接口约束该接口不支持实例的数据库引擎MicrosoftSQLServer。
参数说明请求样例{"instance":{"name":"trove-newinstance","flavorRef":"bf07a6d4-844a-4023-a776-fc5c5fb71fb4","volume":{"size":100},"restorePoint":{"backupRef":"2f4ddb93-b901-4b08-93d8-1d2e472f30fe","sourceInstanceId":"0bc7300c-dc63-45d4-aa3b-d85bf577baac"}}}
要素说明响应样例中参数“region”和“availabilityZone”的值为示例值。响应样例{"instance":{"id":"9fbe7995-9851-47ea-b7af-6037104a1dd5","status":"BUILD","name":"rds-f1d61","created":"","hostname":"","type":"master","region":"<emid="ZH-CN_TOPIC_0037147509__i38043604194526">aaa</em>","updated":"","availabilityZone":"<emid="ZH-CN_TOPIC_0037147509__i34827625194541">bbb</em>","vpc":"2d6d6053-6dd1-46d7-99b4-02c62686a628","nics":{"subnetId":"a2c3a6e3-5204-4f53-aa4c-bc3d22c98176"},"securityGroup":{"id":"8c3f8730-f63b-48d4-a183-d0c8a091db8c"},"flavor":{"id":"0d922098-553c-4124-80df-e627a1d41a0d"},"volume":{"type":"COMMON","size":100},"dataStoreInfo":null,"extendparam":{"jobs":[{"id":"ff80808156fd9aee0156fe1fef4a294f"}]},"backupStrategy":{"startTime":"22:00:00","keepDays":2}}}
请参见。
查询数据库错误日志信息。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/errorlogMethod：GET参数说明Header说明接口约束该接口不支持实例的数据库引擎为PostgreSQL。
参数说明请求样例/rds/v1/68e3010955d748099f62a0df726fe09b/instances/02cf1fd7-24ae-4fec-a621-329ec732e4f6/errorlog?startDate=2016-08-29+06%3A35&amp;endDate=2016-09-05+06%3A35&amp;curPage=1&amp;perPage=10
要素说明响应样例{"errorLogList":[{"datetime":"2016-08-3009:55:39","content":"[Warning]'proxies_priv'entry'@root@rds-bf83'ignoredin--skip-name-resolvemode.",}]"totalRecord":1}
请参见。
查询数据库慢日志信息。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/slowlogMethod：GET参数说明Header说明接口约束该接口不支持实例的数据库引擎PostgreSQL与MicrosoftSQLServer。
参数说明请求样例/rds/v1/68e3010955d748099f62a0df726fe09b/instances/02e47383-9222-4d29-bf5b-54b3013b0f71/slowlog?sftype=&amp;top=10
要素说明响应样例{"slowLogList":[{"count":"409(99.76%)","time":"1.29","lockTime":"0","rowsSent":"0","rowsExamined":"0","database":"","users":"\trdsBackup@localhost:100.00%(409)ofquery,99.76%(409)ofallusers","querySample":"flushlogs;"},{"count":"1(0.24%)","time":"5.0","lockTime":"0","rowsSent":"1","rowsExamined":"0","database":"","users":"\trdsAdmin@localhost:100.00%(1)ofquery,0.24%(1)ofallusers","querySample":"selectsleep(5);"}],"totalRecord":2}
请参见。
调整实例的规格。
URI格式PATH：/rds/{versionId}/{project_id}/instances/{instanceId}/actionMethod：POST参数说明Header说明接口约束<olid="ZH-CN_TOPIC_0037365603__ol51058783111130"><liid="ZH-CN_TOPIC_0037365603__li44896577111130">需要改变的规格不能与原规格一样。实例状态仅为服务中时可以进行调整CPU/内存。包周期实例不能修改规格。只能变更为同种实例类型的规格，比如，单实例只能变更为单实例对应的规格，不能改为HA的规格。
参数说明请求样例{"resize":{"flavorRef":"0d922098-553c-4123-80df-e627a1d41a0d"}}
要素说明响应样例{"jobId":["ff8080815703e6de015703e98504001a"]}
请参见。
本节定义了关系型数据库上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索关系型数据库产生的监控指标和告警信息。
SYS.RDS
通过API接口来检索RDS监控指标数据，具体调用方法及参数说明请参见《云监控服务接口参考》中的“查询监控数据”章节。调用样例如下：请求样例：响应样例：
接口名称DeleteTopic功能描述删除一个主题以及它的所有订阅者。删除Topic操作会导致未推送的消息无法再推送给该Topic的订阅者。
URI格式DELETE/v2/{project_id}/notifications/topics/{topic_urn}参数说明
要素说明响应样例{"request_id":"5fcba32bd2814ea39431829c22bda94b",}
请参考。
接口名称ListTopics功能描述分页查询主题列表，主题列表按照主题创建时间进行降序排列。分页查询可以指定offset以及limit。如果不存在主题，则返回空列表。
URI格式GET/v2/{project_id}/notifications/topics?offset=0&amp;limit=2参数说明
要素说明响应样例{"request_id":"70bb40bef50e4a14b116a5a527fd7432","topic_count":1,"topics":[{"topic_urn":"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:test_topic_v2","display_name":"testtest","name":"test_topic_v1","push_policy":0}]}
请参考。
接口名称QueryTopicDetail功能描述查询Topic的详细信息。
URI格式GET/v2/{project_id}/notifications/topics/{topic_urn}参数说明
要素说明响应样例{"update_time":"2016-08-01T02:16:38Z","push_policy":0,"create_time":"2016-08-01T02:16:38Z","name":"test_create_topic_v2","topic_urn":"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:test_create_topic_v2","display_name":"testcreatetopicv2","request_id":"6837531fd3f54550927b930180a706bf"}
请参考。
接口名称ListSubscriptions功能描述分页返回请求者的所有的订阅列表，订阅列表按照订阅创建时间进行升序排列。分页查询可以指定offset以及limit。如果订阅者不存在，返回空列表。
URI格式GET/v2/{project_id}/notifications/subscriptions?offset=0&amp;limit=2参数说明
要素说明响应样例{"request_id":"4650b14bf221492fb819c231d167e6fe","subscription_count":2,"subscriptions":[{"topic_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1","protocol":"sms","subscription_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1:2e778e84408e44058e6cbc6d3c377837","owner":"762bdb3251034f268af0e395c53ea09b","endpoint":"xxxxxxxxxxx","remark":"","status":0},{"topic_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1","protocol":"email","subscription_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1:a2d52a9f5c3b47f48c3fafb177a58796","owner":"762bdb3251034f268af0e395c53ea09b","endpoint":"xx@xx.com","remark":"","status":0}]}
请参考。
接口名称ListSubscriptionsByTopic功能描述分页获取特定主题的订阅列表，订阅列表按照订阅创建时间进行升序排列。分页查询可以指定offset以及limit。如果指定主题不存在订阅者，返回空列表。
URI格式GET/v2/{project_id}/notifications/topics/{topic_urn}/subscriptions?offset=0&amp;limit=10参数说明
要素说明响应样例{"request_id":"4650b14bf221492fb819c231d167e6fe","subscription_count":2,"subscriptions":[{"topic_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1","protocol":"sms","subscription_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1:2e778e84408e44058e6cbc6d3c377837","owner":"762bdb3251034f268af0e395c53ea09b","endpoint":"xxxxxxxxxx","remark":"","status":0},{"topic_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1","protocol":"email","subscription_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1:a2d52a9f5c3b47f48c3fafb177a58796","owner":"762bdb3251034f268af0e395c53ea09b","endpoint":"xx@xx.com","remark":"","status":0}]}
请参考。
接口名称Subscribe功能描述为指定Topic添加一个订阅者，如果订阅者的状态为未确认，则向订阅者发送一个确认的消息。待订阅者进行ConfirmSubscription确认后，该订阅者才能收到Topic发布的消息。接口是幂等的，如果添加已存在的订阅者，则返回成功，且statuscode为200，否则statuscode为201。
URI格式POST/v2/{project_id}/notifications/topics/{topic_urn}/subscriptions参数说明
参数说明请求样例POST/v2/{project_id}/notifications/topics/urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1/subscriptions{"protocol":"email","endpoint":"xxx@xxx.com","remark":"运维"}
要素说明响应样例{"request_id":"fdbabe38ead6482b8574f82a3d1168e9","subscription_urn":"urn:smn:regionId:762bdb3251034f268af0e395c53ea09b:test_topic_v1:2e778e84408e44058e6cbc6d3c377837"}
请参考。
接口名称Unsubscribe功能描述删除一个订阅，订阅需要鉴权才能删除，仅仅订阅者或者这个主题的拥有者可以删除，删除时会对身份进行确认。
URI格式DELETE/v2/{project_id}/notifications/subscriptions/{subscription_urn}参数说明
要素说明响应样例{"request_id":"f3197b274a6b473a8007eed79e716c30"}
请参考。
接口名称UpdateMessageTemplate功能描述修改消息模板的内容。
URI格式PUT/v2/{project_id}/notifications/message_template/{message_template_Id}参数说明
参数说明请求样例PUT/v2/{project_id}/notifications/message_template/b3ffa2cdda574168826316f0628f774f{"content":"(1/22)Youareinvitedtosubscribetotopic({topic_id_id1}).ClickthefollowingURLtoconfirmsubscription:(Ifyoudonotwanttosubscribetothistopic,ignorethismessage.)"}
要素说明响应样例{"request_id":"5fcba32bd2814ea39431829c22bda94b"}
请参考。
接口名称DeleteMessageTemplate功能描述删除消息模板。删除模板之前的消息请求都可以使用该模板发送，删除之后无法再使用该模板发送消息。
URI格式DELETE/v2/{project_id}/notifications/message_template/{message_template_id}参数说明
要素说明响应样例{"request_id":"5fcba32bd2814ea39431829c22bda94b"}
请参考。
接口名称ListMessageTemplates功能描述分页查询模板列表，模板列表按照创建时间进行升序排列。分页查询可以指定offset以及limit。如果不存在模板，则返回空列表。额外的查询参数分别有message_template_name和protocol。模板列表只能查询模板概要信息，查询模板内容请参考。
URI格式GET/v2/{project_id}/notifications/message_template?offset=0&amp;limit=2参数说明
要素说明响应样例{"message_templates":[{"message_template_name":"confirm_message","update_time":"2016-08-02T08:22:18Z","create_time":"2016-08-02T08:22:18Z","tag_names":["topic_urn"],"message_template_id":"79227dfdf88d4e52a1820ca1eb411635"},{"message_template_name":"confirm_message","protocol":"email","update_time":"2016-08-02T08:22:19Z","create_time":"2016-08-02T08:22:19Z","tag_names":["topic_id"],"message_template_id":"ecf63465804a4b10a0573980be78ffba"},{"message_template_name":"confirm_message","protocol":"https","update_time":"2016-08-02T08:22:20Z","create_time":"2016-08-02T08:22:20Z","tag_names":["topic_id"],"message_template_id":"57ba8dcecda844878c5dd5815b65d10f"}],"request_id":"ce7f2f7343224f8c9597b05a9a0bcc2e","message_template_count":3}
请参考。
接口名称QueryMessageTemplateDetail功能描述查询模板详情，包括模板内容。
URI格式GET/v2/{project_id}/notifications/message_template/{message_template_id}参数说明
要素说明响应样例{"message_template_name":"confirm_message","protocol":"https","update_time":"2016-08-02T08:22:25Z","create_time":"2016-08-02T08:22:20Z","tag_names":["topic_id_id4"],"content":"(1/24)Youareinvitedtosubscribetotopic({topic_id_id4}).ClickthefollowingURLtoconfirmsubscription:(Ifyoudonotwanttosubscribetothistopic,ignorethismessage.)","message_template_id":"57ba8dcecda844878c5dd5815b65d10f"}
请参考。
接口名称CreateTopic功能描述创建一个Topic，用户最多允许创建3000个Topic。接口是幂等的，如果存在同名的Topic，则返回成功，statuscode为200，否则statuscode为201。
URI格式POST/v2/{project_id}/notifications/topics参数说明
参数说明请求样例POST/v2/{project_id}/notifications/topics{"name":"test_topic_v2","display_name":"testtest"}
要素说明响应样例{"request_id":"6a63a18b8bab40ffb71ebd9cb80d0085","topic_urn":"urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_topic_v2"}
请参考。
接口名称UpdateTopic功能描述修改主题的属性，目前仅仅支持修改topic的display_name字段。
URI格式PUT/v2/{project_id}/notifications/topics/{topic_urn}参数说明
参数说明请求样例PUT/v2/{project_id}/notifications/topics/urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_topic_v2{"display_name":"testtest222"}
要素说明响应样例{"request_id":"6a63a18b8bab40ffb71ebd9cb80d0085"}
请参考。
接口名称CreateMessageTemplate功能描述创建一个模板，用户可以按照模板去发送消息，这样可以减少请求的数据量。用户最多允许创建90个模板。
URI格式POST/v2/{project_id}/notifications/message_template参数说明
参数说明请求样例POST/v2/{project_id}/notifications/message_template{"message_template_name":"confirm_message","protocol":"https","content":"(1/2)Youareinvitedtosubscribetotopic({topic_id}).ClickthefollowingURLtoconfirmsubscription:(Ifyoudonotwanttosubscribetothistopic,ignorethismessage.)"}
要素说明响应样例{"request_id":"ca03efa691624d8eb2dfeba01a1bcf6e","message_template_id":"57ba8dcecda844878c5dd5815b65d10f"}
请参考。
接口名称Publish功能描述将消息发送给Topic的所有订阅端点。当返回消息ID时，该消息已被保存并开始尝试将其推送给主题的订阅者。消息格式，取决于该主题每一个订阅者的通知协议。
URI格式POST/v2/{project_id}/notifications/topics/{topic_urn}/publish参数说明
参数说明请求样例POST/v2/{project_id}/notifications/topics/urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_create_topic_v2/publish{"subject":"testmessagev2","message":"Messagetestmessagev2"}
要素说明响应样例{"message_id":"bf94b63a5dfb475994d3ac34664e24f2","request_id":"9974c07f6d554a6d827956acbeb4be5f"}
请参考。
接口名称Publish功能描述使用消息结构体的方式发送消息，将消息发送给Topic的所有订阅端点。当返回消息ID时，该消息已被保存并开始尝试将其推送给主题的订阅者。消息格式，取决于该主题每一个订阅者的通知协议。
URI格式POST/v2/{project_id}/notifications/topics/{topic_urn}/publish参数说明
参数说明请求样例POST/v2/{project_id}/notifications/topics/urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_create_topic_v2/publish{"subject":"testmessagev2","message_structure":"{\"default\":\"testv2default\",\"email\":\"abc\"}"}
要素说明响应样例{"message_id":"bf94b63a5dfb475994d3ac34664e24f2","request_id":"9974c07f6d554a6d827956acbeb4be5f"}
请参考。
接口名称Publish功能描述使用消息模板的方式发送消息，将消息发送给Topic的所有订阅端点。当返回消息ID时，该消息已被保存并开始尝试将其推送给主题的订阅者。消息格式，取决于该主题每一个订阅者的通知协议。
URI格式POST/v2/{project_id}/notifications/topics/{topic_urn}/publish参数说明
参数说明请求样例POST/v2/{project_id}/notifications/topics/urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_create_topic_v2/publish{"subject":"testmessagetemplatev2","message_template_name":"confirm_message","tags":{"topic_urn":"topic_urn3331","topic_id":"topic_id3332"}}
要素说明响应样例{"message_id":"bf94b63a5dfb475994d3ac34664e24f2","request_id":"9974c07f6d554a6d827956acbeb4be5f"}
请参考。
异常响应要素说明异常响应举例{"request_id":"aad0860d089c482b943971f802a6718e","code":"SMN.0006","message":"Topicnotfound."}
正常异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0036017317__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0036017317__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0036017320__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0036017320__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0036017320__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0036017320__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0036017323__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0036017323__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
接口名称ListTopicAttributes功能描述查询Topic的属性信息。
URI格式GET/v2/{project_id}/notifications/topics/{topic_urn}/attributes?name=access_policy参数说明说明：如果查询不带attributes_name参数，则查询Topic的所有属性值。目前支持的属性值见
要素说明响应样例{"request\_id":"6837531fd3f54550927b930180a706bf","attributes":{"access\_policy":"{\"Version\":\"2016-09-07\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__user_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"CSP\":[\"urn:csp:iam::93dc1b4697ac493d9b7d089569f86b32:root\"]},\"Action\":[\"SMN:Publish\",\"SMN:QueryTopicDetail\"],\"Resource\":\"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:aaa\"},{\"Sid\":\"__service_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"obs\"]},\"Action\":[\"SMN:Publish\",\"SMN:QueryTopicDetail\"],\"Resource\":\"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:bbb\"}]}"}}
请参考。
接口名称UpdateTopicAttribute功能描述更新Topic的属性。
URI格式PUT/v2/{project_id}/notifications/topics/{topic_urn}/attributes/{attributes_name}参数说明说明：目前支持的属性值见
参数说明请求样例PUT/v2/{project_id}/notifications/topics/{topic_urn}/attributes/access_policy{"value":"{\"Version\":\"2016-09-07\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__user_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"CSP\":[\"urn:csp:iam::93dc1b4697ac493d9b7d089569f86b32:root\"]},\"Action\":[\"SMN:Publish\",\"SMN:QueryTopicDetail\"],\"Resource\":\"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:aaa\"},{\"Sid\":\"__service_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"obs\"]},\"Action\":[\"SMN:Publish\",\"SMN:QueryTopicDetail\"],\"Resource\":\"urn:smn:regionId:8bad8a40e0f7462f8c1676e3f93a8183:bbb\"}]}"}
要素说明响应样例{"request_id":"6837531fd3f54550927b930180a706bf"}
请参考。
接口名称DeleteTopicAttributeByName功能描述删除指定名称的Topic属性。
URI格式DELETE/v2/{project_id}/notifications/topics/{topic_urn}/attributes/{attributes_name}参数说明说明：目前支持的属性值见
要素说明响应样例{"request_id":"6837531fd3f54550927b930180a706bf"}
请参考。
接口名称DeleteTopicAttributes功能描述删除所有Topic属性。
URI格式DELETE/v2/{project_id}/notifications/topics/{topic_urn}/attributes参数说明
要素说明响应样例{"request_id":"6837531fd3f54550927b930180a706bf"}
请参考。
Topic属性表
接口名称SmsPublish功能描述将短信发送给指定的手机号码。
URI格式POST/v2/{project_id}/notifications/sms参数说明
参数说明请求样例POST/v2/{project_id}/notifications/sms{"endpoint":"+159****1990","message":"Smsmessagetest","sign_id":"94d3b63a5dfb475994d3ac34664e2346"}
要素说明响应样例{"message_id":"bf94b63a5dfb475994d3ac34664e24f2","request_id":"9974c07f6d554a6d827956acbeb4be5f"}
请参考。
接口名称ListSmsSigns功能描述查询短信签名列表。说明：该接口暂时仅提供给企业用户使用。
URI格式GET/v2/{project_id}/notifications/sms_sign参数说明
请求样例GET/v2/{project_id}/notifications/sms_sign
要素说明响应样例{"sms_sign_count":2,"sms_signs":[{"sign_name":"签名名称1","create_time":"2017-06-22T07:35:25Z","sign_id":"e497f5c23aef44248f11f098615e489a","reply":"","status":3},{"sign_name":"签名名称2","create_time":"2017-06-22T08:22:11Z","sign_id":"ed12951570be4aeb933d7c9b19a77437","reply":"ERROR_002","status":4}],"request_id":"7e556edf4d6f4e05b0bbc3559d295976"}
请参考。
接口名称DeleteSmsSign功能描述删除短信签名。说明：该接口暂时仅提供给企业用户使用。
URI格式DELETE/v2/{project_id}/notifications/sms_sign/{sign_id}参数说明
请求样例DELETE/v2/{project_id}/notifications/sms_sign/f4ff88c7ccaf4ffba0c9aa149ab2aa14
要素说明响应样例{"request_id":"d581efa691624d8eb2dfeba01a1b4878"}
请参考。
Sms_sign结构体参数说明。
审批失败错误码说明。
本章介绍了接口的使用过程和注意事项。
华为云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0068221437__i570173693716">Endpoint</em>/<emid="ZH-CN_TOPIC_0068221437__i1970113369373">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0068221440__i1200102411339">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称，请参见。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0068221440__i7200124103310">username</em>","password":"<emid="ZH-CN_TOPIC_0068221440__i18200024203314">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0068221440__i1420032415330">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”。
在调用接口的时候，部分URI中需要填入项目编号（project_id或者tenant_id，本文中project_id和tenant_id含义一样），所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。例如project_id:"5a3314075bfa49b9ae360f4ecd333695"。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
公共请求消息头如所示。其它header属性，请遵照http协议。
公共响应消息头如所示。
在使用MRS的RESTAPI前，您需要下载AK/SK证书至本地。每个用户只需下载一次AK/SK证书。
登录管理控制台。单击用户名，在下拉列表中选择“我的凭证”。选择“管理访问秘钥”页签。单击“新增访问密钥”，生成AK/SK的证书文件。在“新增访问密钥”界面，输入登录密码，获取并输入验证码。单击“确定”，系统显示确认界面。在弹出的对话框中，单击“确定”，完成证书下载。说明：为防止访问密钥泄漏，请妥善保管。
下载API网关签名工具。下载地址：解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0068331871__ol7864713516"><liid="ZH-CN_TOPIC_0068331871__li48647111514">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对步骤1创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService：抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo：运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl：实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
此接口用于创建新增队列，该队列将会绑定用户指定的计算资源。
URI格式：POST/v1.0/queues
请求样例：{"queue_name":"queue1","description":"test","cu_count":1}参数说明
响应样例：{"is_success":true,"message":"","queue_id":"0c1cd925_db93_44ae_8118_3bc9f39f9267"}参数说明
该API用于列出当前用户有权使用的所有队列。
URI格式：GET/v1.0/queues
请求样例：None
响应样例：{"is_success":true,"message":"","queues":[{"create_time":1501785128,"cu_count":1,"description":"test","owner":"tenant1","queue_id":"1149d4e6_b1a3_46c6_ab08_87815acc6ea9","queue_name":"queue1"}]}参数说明
该API用于删除指定队列。
URI格式：DELETE/v1.0/queues/{queue_id}参数说明
请求样例：None
响应样例：{"is_success":true,"message":""}参数说明
该API用于执行SQL语句，即向集群提交作业。用户可使用其他API接口来查询作业状态和作业结果。
URI格式：POST/v1.0/queues/{queue_id}/jobs/submit-job参数说明
请求样例：{"currentdb":"db1","sql":"desctab1/select*fromtab1","conf":["uquery.sql.shuffle.partitions=200"]}参数说明
响应样例：{"is_success":true,"message":"","job_id":"8ecb0777-9c70-4529-9935-29ea0946039c","job_type":"DDL","schema":[{"col_name":"string"},{"data_type":"string"},{"comment":"string"}],"rows":[["c1","int",null],["c2","string",null]]}参数说明
此API用于将数据从文件导入表。
URI格式：POST/v1.0/jobs/import-table
请求样例：{"data_path":"s3n:///home/data1/uquery/t1.csv","data_type":"csv","database_name":"db2","table_name":"t2","with_column_header":false,"delimiter":",","quote_char":",","escape_char":",","date_format":"yyyy-MM-dd","timestamp_format":"yyyy-MM-dd'T'HH:mm:ss.SSSZZ"}参数说明
响应格式：{"is_success":true,"message":"importdatatotablet2started","job_id":"6b29eb77-4c16-4e74-838a-2cf7959e9202"}参数说明
此API用于将数据从UQuery表导出到文件。
URI格式：POST/v1.0/jobs/export-table
请求样例：{"data_path":"s3a:///home/data1/uquery/export.csv","data_type":"csv","database_name":"db2","table_name":"t2","export_columns":["id","name"],"compress":"gzip"}参数说明
响应样例：{"is_success":true,"message":"","job_id":"6b29eb77-4c16-4e74-838a-2cf7959e9202"}参数说明
此API用于在作业提交后获取作业状态。
URI格式：GET/v1.0/jobs/{job_id}/status参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","job_id":"a386edc9-770d-4bd6-97fb-7e9fcf241935","job_type":"QUERY","queue_id":"9ded5f57_d2c8_4c05_bb8a_7014849ac084","owner":"tenant1","start_time":1501990564461,"statement":"select*fromtb7""description":"","duration":133457,"status":"FINISHED","input_size":0,"result_count":3,"database_name":null,"table_name":null,"detail":"{\"type\":\"struct\",\"fields\":[{\"name\":\"id\",\"type\":\"integer\",\"nullable\":true,\"metadata\":{}},{\"name\":\"name\",\"type\":\"string\",\"nullable\":true,\"metadata\":{}}]}"}参数说明
该API用于查询导入和导出类型的作业的详细信息。
URI格式：GET/v1.0/jobs/{job_id}/detail参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","data_path":"s3n:///home/data1/uquery/export.csv","data_type":"csv","database_name":"db2","duration":249,"file_size":"currentlynotavailable","job_id":"3bf172d7-4922-4192-8f1b-d87ce52dd8d2","owner":"tenant1","start_time":1501996640271,"table_name":"t2","with_column_header":false,"timestamp_format":"yyyy-MM-dd'T'HH:mm:ss.SSSZZ","date_format":"yyyy-MM-dd""columns":["id","name"],"compress":"gzip",}参数说明
该API用于在作业完成后，查询作业执行的结果.
URI格式：GET/v1.0/queues/{queue_id}/jobs/{job_id}?page-size=100&amp;current-page=1参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","job_id":"ead0b276-8ed4-4eb5-b520-58f1511e7033","job_type":"QUERY","row_count":1,"input_size":74,"schema":[{"c1":"int"},{"c2":"string"}],"rows":[[23,"sda"]]}参数说明
该API用于将SQL语句的查询结果导出到OBS对象存储中。
URI格式：POST/v1.0/jobs/{job_id}/export-result参数说明
请求样例：{"data_path":"s3n:/obs-bucket1/path","data_type":"json","compress":"gzip"}参数说明
响应样例：{"is_success":true,"message":""}参数说明
该API用于查询当前工程下面的所有作业的信息.
URI格式：GET/v1.0/jobs?page-size=10&amp;current-page=1&amp;start=1497236901492&amp;end=1497236996452&amp;job-type=IMPORT参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","job_count":1,"jobs":[{"duration":17731,"detail":"{\"type\":\"struct\",\"fields\":[{\"name\":\"name\",\"type\":\"string\",\"nullable\":true,\"metadata\":{}},{\"name\":\"age\",\"type\":\"integer\",\"nullable\":true,\"metadata\":{}}]}","end_time":1502349821460,"input_size":0,"job_id":"37286cc7-0508-4ffd-b636-951c8a5c75de","job_type":"QUERY","owner":"tenant1","queue_id":"1149d4e6_b1a3_46c6_ab08_87815acc6ea9","result_count":3,"start_time":1502349803729,"statement":"select*fromt_json_002","status":"FINISHED","with_column_header":false}]}参数说明查询编辑框历史作业功能介绍该API用于查询当前工程下，在编辑框中提交的最近执行的作业的信息.URIURI格式：GET/v1.0/jobs/sql-jobs?page-size=10&amp;current-page=1参数说明请求请求样例：None响应响应样例：{"is_success":true,"message":"","job_count":1,"jobs":[{"detail":"{\"type\":\"struct\",\"fields\":[{\"name\":\"id\",\"type\":\"integer\",\"nullable\":true,\"metadata\":{\"comment\":\"intfield\"}},{\"name\":\"name\",\"type\":\"string\",\"nullable\":true,\"metadata\":{\"comment\":\"stringfield\"}}]}","duration":17731,"end_time":1502349821460,"input_size":824,"job_id":"9b9be633-c485-4763-900d-99cf91aae368","job_type":"QUERY","message":"","owner":"tenant1","queue_id":"1fca6a8f_dc21_48dc_be5b_1fba4677f93e","result_count":5,"start_time":1502349803729,"statement":"select*fromdts","status":"FINISHED","with_column_header":false}]}参数说明
该接口用于取消已经提交的作业，若作业已经执行结束或失败则无法取消。
URI格式：DELETE/v1.0/queues/{queue_id}/jobs/{job_id}参数说明
请求样例：None
响应样例：{"is_success":true,"message":""}参数说明
该接口用于新增数据库。
URI格式：POST/v1.0/databases
请求样例：{"database_name":"db1","description":"thisisfortest"}参数说明
响应样例：{"is_success":true,"message":""}参数说明
该接口用于查询出所有的数据库信息。
URI格式：GET/v1.0/databases
请求样例：None
响应样例：{"is_success":true,"message":"","database_count":1,"databases":[{"database_name":"db2","description":"thisisfortest","owner":"tenant1","table_count":1}]}参数说明
该接口用于删除数据库。
URI格式：DELETE/v1.0/databases/{database_name}参数说明
请求样例：None
响应样例：{"is_success":true,"message":""}参数说明
该接口用于查询指定数据库的下的所有表信息。
URI格式：GET/v1.0/databases/{database_name}?keyword=db&amp;with-detail=true参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","table_count":1,"tables":[{"create_time":1501924841000,"data_location":"UQUERY","last_access_time":0,"owner":"UQuery","table_name":"t1","table_size":0}]}参数说明
该接口用于描述指定表的元数据信息。
URI格式：GET/v1.0/databases/{database_name}/tables/{table_name}参数说明
请求样例：NONE
响应样例：{"is_success":true,"message":"","column_count":2,"columns":[{"column_name":"id","description":"","type":"int"},{"column_name":"name","description":"","type":"string"}]}参数说明
该接口用于创建新的表。
URI格式：POST/v1.0/databases/{database_name}/tables参数说明
请求样例：{"table_name":"tb1","data_location":"OBS/UQUERY","description":"","data_type":"csv","data_path":"/obs/path1","columns":[{"column_name":"column1","type":"int","description":"",}],"with_column_header":true,"delimiter":",","quote_char":"\"","escape_char":"\","sort_columns":["column1","column2"]}参数说明
响应样例：{"is_success":true,"message":""}参数说明
该接口用于删除指定的表。
URI格式：DELETE/v1.0/databases/{database_name}/tables/{table_name}参数说明
请求样例：None
响应样例：{"is_success":true,"message":""}参数说明
该接口用于与其他用户共享指定的队列，可以给用户赋权使用指定的队列或者收回使用权限。
URI格式：PUT/v1.0/queues/user-authorization
请求样例：{"queue_id":"9ded5f57_d2c8_4c05_bb8a_7014849ac084","user_id":"tenant2","action":"grant","privileges":[“DROP_QUEUE”,“UPDATE_QUEUE”]}参数说明
响应样例：{"is_success":true,"message":""}参数说明
该接口用于查询指定队列可以使用的所有用户ID。
URI格式：GET/v1.0/queues/{queue_id}/users参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","queue_id":"9ded5f57_d2c8_4c05_bb8a_7014849ac084","queue_name":"queue1""privileges":[{"user_id":"user1","privilege":["DROP_QUEUE",“SUBMIT_JOB"]},{"user_id":"user2","privilege":["UPDATE_QUEUE"]}]}参数说明
该接口用于将数据库或表的数据权限赋给指定的其他用户。
URI格式：PUT/v1.0/user-authorization
请求样例：{"user_id":"user2","action":"grant/revoke","privileges":[{"object":"databases.db1.tables.tb2.columns.column1","privileges":["SELECT"]},{"object":"databases.db1.tables.tbl","privileges":["SELECTwithGrant"]},{"object":"databases.db1","privileges":["SELECT"]}]}参数说明
响应样例：{"is_success":true,"message":""}参数说明
查看当前数据库有权限使用或访问的所有用户ID。
URI格式：GET/v1.0/databases/{database_name}/users参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","database_name":"db1","privileges":[{"user_id":"user1","privilege":["select","create"]},{"user_id":"user2","privilege":["select"]}]}参数说明
该接口用于查看有权访问指定表或表的列的所有用户。
URI格式：GET/v1.0/databases/{database_name}/tables/{table_name}/users参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","user_ids":["user1","user2"]}参数说明
该接口用于查询指定用户在表上的权限列表。
URI格式：GET/v1.0/databases/{database_name}/tables/{table_name}/users/{user_id}参数说明
请求样例：None
响应样例：{"is_success":true,"message":"","user_id":"user2","privileges":[{"object":"databases.db2.tables.tb6","privilege":["select","update"]},{"object":"db1.tb1.column1","privilege":["delete"]}]}参数说明
查询job的状态，可用于查询创建备份，删除备份，从备份恢复磁盘等API的执行状态。
URI格式GET/v1/{tenant_id}/jobs/{job_id}参数说明
无
要素说明响应样例{"status":"SUCCESS","entities":{"bks_create_volume_name":"autobk_volume","backup_id":"ba5401a2-7cd2-4c01-8c0d-c936ab412d6d","volume_id":"7e5fdc5a-5e36-4b22-8bcc-7f17037290cc","snapshot_id":"a77a96bf-dd18-40bf-a446-fdcefc1719ec"},"job_id":"4010b39b5281d3590152874bfa3b1604","job_type":"bksCreateBackup","begin_time":"2016-01-28T16:14:09.466Z","end_time":"2016-01-28T16:25:27.690Z","error_code":null,"fail_reason":null}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
创建一个云硬盘备份。共享盘和磁盘模式为SCSI的云硬盘不支持备份。
URI格式POST/v2/{tenant_id}/cloudbackups参数说明
参数说明请求样例{"backup":{"volume_id":<emid="ZH-CN_TOPIC_0020237255__i60346796">"c68ae7fb-0aa5-4a97-ab01-ed02c5b7e768"</em>,"name":<emid="ZH-CN_TOPIC_0020237255__i56252285">"backup1"</em>,"description":<emid="ZH-CN_TOPIC_0020237255__i60141268">"Backup_Demo"</em>}}
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b"}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
删除一个云硬盘备份。
URI格式POST/v2/{tenant_id}/cloudbackups/{backup_id}参数说明
无
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b"}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
从备份恢复磁盘。
URI格式POST/v2/{tenant_id}/cloudbackups/{backup_id}/restore参数说明
参数说明请求样例{"restore":{"volume_id":"c96e4a94-927a-425c-8795-63f9964cfebd"}}
要素说明响应样例{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b"}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
查询备份概要信息列表。
URI格式GET/v2/{tenant_id}/backups参数说明Requestfilter参数说明请求示例GET/v2/{tenant_id}/backups?name=backup&amp;status=error&amp;limit=10&amp;volume_id=7d7c6fbe-d7ee-4b4d-8bae-bdd08b5604bb
无
要素说明响应样例{"backups":[{"id":"1d1139d8-8989-49d3-8aa1-83eb691e6db2","links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"bookmark"}],"name":null},{"id":"b3cf7a16-decc-4beb-8077-682737d94a58","links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/b3cf7a16-decc-4beb-8077-682737d94a58","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/b3cf7a16-decc-4beb-8077-682737d94a58","rel":"bookmark"}],"name":null}],"backups_links":[{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups?limit=1&amp;offset=1&amp;marker=b3cf7a16-decc-4beb-8077-682737d94a58","rel":"next"}]}
正常200异常
查询备份详细信息列表。
URI格式GET/v2/{tenant_id}/backups/detail参数说明Requestfilter参数说明请求示例GET/v2/{tenant_id}/backups/detail?name=backup&amp;status=error&amp;limit=10&amp;volume_id=7d7c6fbe-d7ee-4b4d-8bae-bdd08b5604bb
无
要素说明响应样例{"backups":[{"status":"error","description":null,"links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"bookmark"}],"availability_zone":null,"volume_id":"2748f2f2-4394-4e6e-af8d-8dd34496c024","fail_reason":"Connectiontoswiftfailed:[Errno111]ECONNREFUSED","id":"1d1139d8-8989-49d3-8aa1-83eb691e6db2","size":1,"object_count":null,"container":"volumebackups","name":null,"created_at":"2013-06-27T08:48:03.000000","os-bak-tenant-attr:tenant_id":"b23b579f08c84228b9b4673c46f0c442","service_metadata":"{\"bootable\":false,\"backupurl\":\"58d94782-6509-45ad-9442-970d2a005050\",\"BackupSize\":0,\"progress\":\"0\",\"snap_id\":\"665e411f5d87431ca98c199fbd4a64fd\",\"Type\":0}"},{"status":"error","description":null,"links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/80e17946-6e56-46e0-9547-e9ba4f1619bd","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/80e17946-6e56-46e0-9547-e9ba4f1619bd","rel":"bookmark"}],"availability_zone":null,"volume_id":"2748f2f2-4394-4e6e-af8d-8dd34496c024","fail_reason":"Connectiontoswiftfailed:[Errno111]ECONNREFUSED","id":"80e17946-6e56-46e0-9547-e9ba4f1619bd","size":1,"object_count":null,"container":"volumebackups","name":null,"created_at":"2013-06-27T08:56:58.000000"},{"status":"error","description":null,"links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/b3cf7a16-decc-4beb-8077-682737d94a58","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/b3cf7a16-decc-4beb-8077-682737d94a58","rel":"bookmark"}],"availability_zone":null,"volume_id":"2748f2f2-4394-4e6e-af8d-8dd34496c024","fail_reason":"Connectiontoswiftfailed:[Errno111]ECONNREFUSED","id":"b3cf7a16-decc-4beb-8077-682737d94a58","size":1,"object_count":null,"container":"volumebackups","name":null,"created_at":"2013-06-27T08:46:31.000000"}],"backups_links":[{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups?limit=1&amp;offset=1&amp;marker=b3cf7a16-decc-4beb-8077-682737d94a58","rel":"next"}]}
正常200异常
查询单个备份详情。
URI格式GET/v2/{tenant_id}/backups/{backup_id}参数说明
无
要素说明响应样例{"backup":{"status":"error","description":null,"links":[{"href":"http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"self"},{"href":"http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2","rel":"bookmark"}],"availability_zone":null,"volume_id":"2748f2f2-4394-4e6e-af8d-8dd34496c024","fail_reason":"Connectiontoswiftfailed:[Errno111]ECONNREFUSED","id":"1d1139d8-8989-49d3-8aa1-83eb691e6db2","size":1,"object_count":null,"container":"volumebackups","name":null,"created_at":"2013-06-27T08:48:03.000000","os-bak-tenant-attr:tenant_id":"b23b579f08c84228b9b4673c46f0c442","service_metadata":"{\"bootable\":false,\"backupurl\":\"58d94782-6509-45ad-9442-970d2a005050\",\"BackupSize\":0,\"progress\":\"0\",\"snap_id\":\"665e411f5d87431ca98c199fbd4a64fd\",\"Type\":0}"}}
正常200异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0020805603__a361ec48202ae4efbbe3f31bc98bd63c4">Endpoint</em>/<emid="ZH-CN_TOPIC_0020805603__a13b2c8453302424ebd0ccab7c233fd82">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0020805607__o8bc040362193489b87965f5abae682de"><liid="ZH-CN_TOPIC_0020805607__l67d4c8c333154eba8224aef185ce38f1">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的认证”。在“我的认证”页面的项目列表中查看项目ID。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0024492779__adb8258b3bba24c43928346ec3a2f7172">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0024492779__abe4127ef4218438bb48b9da48d3670ce">username</em>","password":"<emid="ZH-CN_TOPIC_0024492779__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0024492779__aa2f661f0c4164b818e8a747f2dc76aa4">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
创建一个备份策略，一个租户最多只能创建10个备份策略。
URI格式POST/v2/{tenant_id}/backuppolicy参数说明
参数说明请求样例{"backup_policy_name":"policy_01","scheduled_policy":{"remain_first_backup_of_curMonth":"Y","rentention_num":10,"frequency":1,"start_time":"12:00","status":"ON"}}
要素说明响应样例{"backup_policy_id":"af8a20b0-117d-4fc3-ae53-aa3968a4f870"}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
查询租户的所有备份策略。
URI格式GET/v2/{tenant_id}/backuppolicy参数说明
无
要素说明响应样例{"backup_policys":[{"backup_policy_id":"XX""backup_policy_name":"plan01","scheduled_policy":{"remain_first_backup_of_curMonth":"Y","rentention_num":10,"frequency":1,"start_time":"12:00","status":"ON"},"policy_resource_count":0},{"backup_policy_id":"YY""backup_policy_name":"plan02","scheduled_policy":{"remain_first_backup_of_curMonth":"Y","rentention_num":10,"frequency":1,"start_time":"14:00","status":"ON"}"policy_resource_count":10}}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
修改一个备份策略。
URI格式PUT/v2/{tenant_id}/backuppolicy/{policy_id}参数说明
参数说明请求样例{"backup_policy_name":"policy_01","scheduled_policy":{"remain_first_backup_of_curMonth":"Y","rentention_num":10,"frequency":1,"start_time":"12:00","status":"ON"}}
要素说明响应样例{"backup_policy_id":"af8a20b0-117d-4fc3-ae53-aa3968a4f870"}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
删除一个备份策略。
URI格式DELETE/v2/{tenant_id}/backuppolicy/{policy_id}参数说明
无。
要素说明响应样例无响应体或{"error":{"message":"XXXX","code":"XXX"}}
正常204异常
将一个或多个资源绑定到指定的备份策略。
URI格式POST/v2/{tenant_id}/backuppolicyresources参数说明
参数说明请求样例{"backup_policy_id":"915d1fd8-63cb-4054-a2b0-2778210e3a75","resources":[{"resource_id":"0f187b65-8d0e-4fc0-9096-3b55d330531e","resource_type":"volume"},{"resource_id":"0f187b65-8d0e-4fc0-9096-3b55d330531d","resource_type":"volume"}]}
要素说明响应样例{"success_resources":[{"resource_id":"bce8d47a-af17-4169-901f-4c7ae9f29c2c","os_vol_host_attr":"pod01.cn-north-1","availability_zone":"cn-north-1","resource_type":"volume"}],"fail_resources":[]}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
从指定的备份策略上解绑一个或者多个资源。
URI格式POST/v2/{tenant_id}/backuppolicyresources/{policy_id}/deleted_resources参数说明
参数说明请求样例{"resources":[{"resource_id":"bce8d47a-af17-4169-901f-4c7ae9f29c2c"}]}
要素说明响应样例{"success_resources":[],"fail_resources":[{"resource_id":"bbba7509-f457-4732-97f1-a8e24b6ed9bc"}]}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
立即对策略下的资源进行一次备份。
URI格式POST/v2/{tenant_id}/backuppolicy/{policy_id}/action参数说明
无。
要素说明响应样例无响应体。或{"error":{"message":"XXXX","code":"XXX"}}
正常204异常
启用或停用一个备份策略，启用表示策略根据指定的调度时间进行调度，停用则不会按调度时间进行调度。可参考，调用时将如下字段设置为ON或OFF。
根据条件查询指定策略下备份任务的执行情况。
URI格式GET/v2/{tenant_id}/backuppolicy/{policy_id}/backuptasks参数说明Requestfilter参数说明请求示例GET/v2/{tenant_id}/backuppolicy/{policy_id}/backuptasks?limit=10
无
要素说明响应样例{"tasks":[{"status":"RUNNING","job_id":"0781095c-b8ab-4ce5-99f3-4c5f6ff75319","created_at":"2016-12-03T06:24:34.467","backup_name":"autobk_a61d","resource_id":"f47a4ab5-11f5-4509-97f5-80ce0dd74e37","resource_type":"volume"},{"status":"EXECUTE_SUCCESS","job_id":"c11b5a18-4559-4731-b7b3-58e2bd89cdb9","created_at":"2016-12-02T09:06:46.706","finished_at":"2016-12-02T13:00:00.121","backup_name":"autobk_e6d2","resource_id":"f47a4ab5-11f5-4509-97f5-80ce0dd74e37","resource_type":"volume"}],"count":2}或{"error":{"message":"XXXX","code":"XXX"}}
正常200异常
创建子网。
POST/v1/{tenant_id}/subnets参数说明
参数说明subnet字段说明：请求样例{"subnet":{"name":"subnet","cidr":"192.168.20.0/24","gateway_ip":"192.168.20.1","dhcp_enable":"true","primary_dns":"114.114.114.114","secondary_dns":"114.114.115.115","dnsList":["114.114.114.114","114.114.115.115"],"availability_zone":"<emid="ZH-CN_TOPIC_0020090590__i12568497191222">aa-bb-cc</em>",//假设可用分区标识为<emid="ZH-CN_TOPIC_0020090590__i51960329192735">aa-bb-cc</em>"vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85"}}
要素说明subnet字段说明：响应样例{"subnet":{"id":"4779ab1c-7c1a-44b1-a02e-93dfc361b32d","name":"subnet","cidr":"192.168.20.0/24","dnsList":["114.114.114.114","1114.114.115.115"],"status":"UNKNOW","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","gateway_ip":"192.168.20.1","dhcp_enable":true,"primary_dns":"114.114.114.114","secondary_dns":"114.114.115.115","availability_zone":"<emid="ZH-CN_TOPIC_0020090590__i3800095192855">aa-bb-cc</em>"//假设可用分区标识为<emid="ZH-CN_TOPIC_0020090590__i39372260192855">aa-bb-cc</em>。}}
正常200异常
查询子网。
GET/v1/{tenant_id}/subnets/{subnet_id}参数说明
参数说明无请求样例无
要素说明subnet字段说明：响应样例{"subnet":{"id":"4779ab1c-7c1a-44b1-a02e-93dfc361b32d","name":"subnet","cidr":"192.168.20.0/24","dnsList":["114.114.114.114","114.114.115.115"],"status":"ACTIVE","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","gateway_ip":"192.168.20.1","dhcp_enable":true,"primary_dns":"114.114.114.114","secondary_dns":"114.114.115.115","availability_zone":"<emid="ZH-CN_TOPIC_0020090591__i17777308192955">aa-bb-cc</em>"//假设可用分区名称为<emid="ZH-CN_TOPIC_0020090591__i30675883192955">aa-bb-cc</em>。}}
正常200异常
查询子网列表。
GET/v1/{tenant_id}/subnets样例/v1/{tenant_id}/subnets?limit=10&amp;marker=4779ab1c-7c1a-44b1-a02e-93dfc361b32d&amp;vpc_id=3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85参数说明
参数说明无请求样例无
要素说明subnets字段说明：响应样例{"subnets":[{"id":"4779ab1c-7c1a-44b1-a02e-93dfc361b32d","name":"subnet","cidr":"192.168.20.0/24","dnsList":["114.114.114.114","114.114.115.115"],"status":"ACTIVE","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","gateway_ip":"192.168.20.1","dhcp_enable":true,"primary_dns":"114.114.114.114","secondary_dns":"114.114.115.115","availability_zone":"<emid="ZH-CN_TOPIC_0020090592__i62225171193022">aa-bb-cc</em>"//假设可用分区名称为<emid="ZH-CN_TOPIC_0020090592__i7074128193022">aa-bb-cc</em>。},{"id":"531dec0f-3116-411b-a21b-e612e42349fd","name":"Subnet1","cidr":"192.168.1.0/24","dnsList":["114.114.114.114","114.114.115.115"],"status":"ACTIVE","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","gateway_ip":"192.168.1.1","dhcp_enable":true,"primary_dns":"114.114.114.114","secondary_dns":"114.114.115.115","availability_zone":"<emid="ZH-CN_TOPIC_0020090592__i63324820193032">aa-bb-cc</em>"//假设可用分区名称为<emid="ZH-CN_TOPIC_0020090592__i29036828193032">aa-bb-cc</em>。}]}
正常200异常
更新子网。
PUT/v1/{tenant_id}/vpcs/{vpc_id}/subnets/{subnet_id}参数说明
参数说明subnet字段说明：请求样例{"subnet":{"name":"subnetqq","dhcp_enable":"false","primary_dns":"114.114.114.115","secondary_dns":"114.114.115.116"}}
要素说明subnet字段说明：响应样例{"subnet":{"id":"4779ab1c-7c1a-44b1-a02e-93dfc361b32d","status":"ACTIVE"}}
正常200异常
删除子网。
DELETE/v1/{tenant_id}/vpcs/{vpc_id}/subnets/{subnet_id}参数说明
参数说明无请求样例无
正常204异常
申请弹性IP。
POST/v1/{tenant_id}/publicips参数说明
参数说明publicip字段说明：bandwidth字段说明：请求样例{"publicip":{"type":"5_bgp"},"bandwidth":{"name":"bandwidth123","size":10,"share_type":"PER"}}
要素说明publicip字段说明：响应样例{"publicip":{"id":"f588ccfa-8750-4d7c-bf5d-2ede24414706","status":"PENDING_CREATE","type":"5_bgp","public_ip_address":"161.17.101.7","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","create_time":"2015-07-1604:10:52","bandwidth_size":0}}
正常200异常
查询弹性IP。
GET/v1/{tenant_id}/publicips/{publicip_id}参数说明
参数说明无请求样例无
要素说明publicip字段说明：响应样例{"publicip":{"id":"2ec9b78d-9368-46f3-8f29-d1a95622a568","status":"DOWN","type":"5_bgp","public_ip_address":"161.17.101.12","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","private_ip_address":"192.168.10.5","create_time":"2015-07-1604:32:50","bandwidth_id":"49c8825b-bed9-46ff-9416-704b96d876a2","bandwidth_share_type":"PER","bandwidth_size":10,"bandwidth_name":"bandwidth-test"}}
正常200异常
查询弹性IP列表。
GET/v1/{tenant_id}/publicips样例/v1/{tenant_id}/publicips?limit=10&amp;marker=4779ab1c-7c1a-44b1-a02e-93dfc361b32d参数说明
参数说明无请求样例无
要素说明publicips字段说明：响应样例{"publicips":[{"id":"6285e7be-fd9f-497c-bc2d-dd0bdea6efe0","status":"DOWN","type":"5_bgp","public_ip_address":"161.17.101.9","private_ip_address":"192.168.10.5","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","create_time":"2015-07-1604:22:32","bandwidth_id":"3fa5b383-5a73-4dcb-a314-c6128546d855","bandwidth_share_type":"PER","bandwidth_size":5,"bandwidth_name":"bandwidth-test"},{"id":"80d5b82e-43b9-4f82-809a-37bec5793bd4","status":"DOWN","type":"5_bgp","public_ip_address":"161.17.101.10","private_ip_address":"192.168.10.6","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","create_time":"2015-07-1604:23:03","bandwidth_id":"a79fd11a-047b-4f5b-8f12-99c178cc780a","bandwidth_share_type":"PER","bandwidth_size":5,"bandwidth_name":"bandwidth-test1"}]}
正常200异常
更新弹性IP，将弹性IP跟一个网卡绑定或者解绑定。
PUT/v1/{tenant_id}/publicips/{publicip_id}参数说明
参数说明publicip字段说明：请求样例{"publicip":{"port_id":"f588ccfa-8750-4d7c-bf5d-2ede24414706"}}
要素说明publicip字段说明：响应样例{"publicip":{"id":"f588ccfa-8750-4d7c-bf5d-2ede24414706","status":"PENDING_UPDATE","type":"5_bgp","public_ip_address":"161.17.101.7","port_id":"f588ccfa-8750-4d7c-bf5d-2ede24414706","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","create_time":"2015-07-1604:10:52","bandwidth_size":6}}
正常200异常
删除弹性IP。
DELETE/v1/{tenant_id}/publicips/{publicip_id}参数说明
参数说明无请求样例无
响应样例无
正常204异常
查询带宽。
GET/v1/{tenant_id}/bandwidths/{bandwidth_id}参数说明
参数说明无请求样例无
要素说明bandwidth字段说明：publicip_info对象响应样例{"bandwidth":{"id":"3fa5b383-5a73-4dcb-a314-c6128546d855","name":"2222","size":5,"share_type":"PER","publicip_info":[{"publicip_id":"6285e7be-fd9f-497c-bc2d-dd0bdea6efe0","publicip_address":"161.17.101.9","publicip_type":"5_bgp"}],"tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","bandwidth_type":"bgp"}}
正常200异常
查询带宽列表。
GET/v1/{tenant_id}/bandwidths样例/v1/{tenant_id}/bandwidths?limit=10&amp;marker=4779ab1c-7c1a-44b1-a02e-93dfc361b32d参数说明
参数说明无请求样例无
要素说明bandwidths字段说明：publicip_info对象响应样例{"bandwidths":[{"id":"a79fd11a-047b-4f5b-8f12-99c178cc780a","name":"ddddd","size":5,"share_type":"PER","publicip_info":[{"publicip_id":"80d5b82e-43b9-4f82-809a-37bec5793bd4","publicip_address":"161.17.101.10","publicip_type":"5_bgp"}],"tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","bandwidth_type":"bgp"},{"id":"3fa5b383-5a73-4dcb-a314-c6128546d855","name":"22212","size":6,"share_type":"PER","publicip_info":[{"publicip_id":"6285e7be-fd9f-497c-bc2d-dd0bdea6efe0","publicip_address":"161.17.101.9","publicip_type":"5_bgp"}],"tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","bandwidth_type":"bgp"},{"id":"f54e0df7-422d-4ab6-8d65-fd436151479c","name":"2222","size":5,"share_type":"PER","publicip_info":[{"publicip_id":"4ca21961-8e52-4ff4-b9c5-af2dcc2c7b50","publicip_address":"161.17.102.13","publicip_type":"5_bgp"}],"tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","bandwidth_type":"bgp"}]}
正常200异常
更新带宽。
PUT/v1/{tenant_id}/bandwidths/{bandwidth_id}参数说明
参数说明bandwidth字段说明：请求样例{"bandwidth":{"name":"bandwidth123","size":10}}
要素说明bandwidth字段说明：publicip_info对象响应样例{"bandwidth":{"id":"3fa5b383-5a73-4dcb-a314-c6128546d855","name":"bandwidth123","size":10,"share_type":"PER","publicip_info":[{"publicip_id":"6285e7be-fd9f-497c-bc2d-dd0bdea6efe0","publicip_address":"161.17.101.9","publicip_type":"5_bgp"}],"tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","bandwidth_type":"bgp"}}
正常200异常
查询单租户在VPC服务下的网络资源配额,包括vpc配额、子网配额、安全组配额、安全组规则配额、安全组规则配额，弹性IP配额，vpn。
GET/v1/{tenant_id}/quotas样例/v1/{tenant_id}/quotas?type=vpc参数说明
参数说明无请求样例无
要素说明quotas字段说明：resources字段说明：响应样例{"quotas":{"resources":[{"type":"vpc","used":5,"quota":5},{"type":"subnet","used":4,"quota":100},{"type":"securityGroup","used":7,"quota":100},{"type":"securityGroupRule","used":16,"quota":5000},{"type":"publicIp","used":3,"quota":6},{"type":"vpn","used":0,"quota":5}]}}
正常200异常
创建虚拟私有云。
POST/v1/{tenant_id}/vpcs参数说明
参数说明vpc字段说明：请求样例{"vpc":{"name":"<emid="ZH-CN_TOPIC_0020090608__i341514893850">vpc</em>","cidr":"<emid="ZH-CN_TOPIC_0020090608__i3073633593850">192.168.0.0/16</em>"}}
要素说明vpc字段说明：响应样例{"vpc":{"id":"99d9d709-8478-4b46-9f3f-2206b1023fd3","name":"vpc","cidr":"192.168.0.0/16","status":"CREATING",}}
正常200异常
申请私有IP。
POST/v1/{tenant_id}/privateips参数说明
参数说明privateips字段说明：请求样例{"privateips":[{"subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd"},{"subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","ip_address":"192.168.1.17"}]}
要素说明privateips字段说明：响应样例{"privateips":[{"status":"DOWN","id":"c60c2ce1-1e73-44bd-bf48-fd688448ff7b","subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","device_owner":"","ip_address":"192.168.1.10"},{"status":"DOWN","id":"4b123c18-ae92-4dfa-92cd-d44002359aa1","subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","device_owner":"","ip_address":"192.168.1.17"}]}
正常200异常
指定IP的ID查询私有IP。
GET/v1/{tenant_id}/privateips/{privateip_id}参数说明
参数说明无请求样例无
要素说明privateip字段说明：响应样例{"privateip":{"status":"DOWN","id":"d600542a-b231-45ed-af05-e9930cb14f78","subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","device_owner":"","ip_address":"192.168.1.11"}}
正常200异常
查询指定子网下的私有IP列表。
GET/v1/{tenant_id}/subnets/{subnet_id}/privateips样例/v1/{tenant_id}/subnets/{subnet_id}/privateips?limit=10&amp;marker=4779ab1c-7c1a-44b1-a02e-93dfc361b32d参数说明
参数说明无请求样例无
要素说明privateips字段说明：响应样例{"privateips":[{"status":"DOWN","id":"d600542a-b231-45ed-af05-e9930cb14f78","subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","device_owner":"","ip_address":"192.168.1.11"},{"status":"DOWN","id":"d600542a-b231-45ed-af05-e9930cb14f79","subnet_id":"531dec0f-3116-411b-a21b-e612e42349fd","tenant_id":"8b7e35ad379141fc9df3e178bd64f55c","device_owner":"","ip_address":"192.168.1.12"}]}
正常200异常
删除私有IP。
DELETE/v1/{tenant_id}/privateips/{privateip_id}参数说明
参数说明无请求样例无
响应样例无
正常204异常
创建安全组。
POST/v1/{tenant_id}/security-groups参数说明
参数说明请求样例{"security_group":{"name":"qq","description":"qq","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85"}}
要素说明security_group字段说明：security_group_rules对象响应样例{"security_group":{"id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","name":"qq","description":"qq","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","security_group_rules":[{"direction":"egress","ethertype":"IPv4","id":"369e6499-b2cb-4126-972a-97e589692c62","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"},{"direction":"ingress","ethertype":"IPv4","id":"0222556c-6556-40ad-8aac-9fd5d3c06171","remote_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"}]}}
正常200异常
查询单个安全组。
GET/v1/{tenant_id}/security-groups/{security_group_id}参数说明
参数说明无请求样例无
要素说明响应样例{"security_group":{"id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","name":"qq","description":"qq","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","security_group_rules":[{"direction":"egress","ethertype":"IPv4","id":"369e6499-b2cb-4126-972a-97e589692c62","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"},{"direction":"ingress","ethertype":"IPv4","id":"0222556c-6556-40ad-8aac-9fd5d3c06171","remote_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"}]}}
正常200异常
查询安全组列表。
GET/v1/{tenant_id}/security-groups样例/v1/{tenant_id}/security-groups?limit=10&amp;marker=4779ab1c-7c1a-44b1-a02e-93dfc361b32d&amp;vpc_id=3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85参数说明
参数说明无请求样例无
要素说明响应样例{"security_groups":[{"id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","name":"qq","description":"qq","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","security_group_rules":[]},{"id":"9c0f56be-a9ac-438c-8c57-fce62de19419","name":"default","description":"default","vpc_id":"13551d6b-755d-4757-b956-536f674975c0","security_group_rules":[]}]}{"security_groups":[{"id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","name":"qq","description":"qq","vpc_id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","security_group_rules":[{"direction":"egress","ethertype":"IPv4","id":"369e6499-b2cb-4126-972a-97e589692c62","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"},{"direction":"ingress","ethertype":"IPv4","id":"0222556c-6556-40ad-8aac-9fd5d3c06171","remote_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6","security_group_id":"16b6e77a-08fa-42c7-aa8b-106c048884e6"}]},{"id":"9c0f56be-a9ac-438c-8c57-fce62de19419","name":"default","description":"qq","vpc_id":"13551d6b-755d-4757-b956-536f674975c0","security_group_rules":[{"direction":"egress","ethertype":"IPv4","id":"95479e0a-e312-4844-b53d-a5e4541b783f","security_group_id":"9c0f56be-a9ac-438c-8c57-fce62de19419"},{"direction":"ingress","ethertype":"IPv4","id":"0c4a2336-b036-4fa2-bc3c-1a291ed4c431","remote_group_id":"9c0f56be-a9ac-438c-8c57-fce62de19419","security_group_id":"9c0f56be-a9ac-438c-8c57-fce62de19419"}]}]}
正常200异常
查询虚拟私有云。
GET/v1/{tenant_id}/vpcs/{vpc_id}参数说明
参数说明无请求样例无
要素说明vpc字段说明：响应样例{"vpc":{"id":"99d9d709-8478-4b46-9f3f-2206b1023fd3","name":"vpc","cidr":"192.168.0.0/16","status":"OK",}}
正常200异常
查询虚拟私有云列表。
GET/v1/{tenant_id}/vpcs样例/v1/{tenant_id}/vpcs?limit=10&amp;marker=13551d6b-755d-4757-b956-536f674975c0参数说明
参数说明无请求样例无
要素说明vpcs字段说明：route字段说明响应样例{"vpcs":[{"id":"13551d6b-755d-4757-b956-536f674975c0","name":"default","cidr":"172.16.0.0/16","status":"OK",},{"id":"3ec3b33f-ac1c-4630-ad1c-7dba1ed79d85","name":"222","cidr":"192.168.0.0/16","status":"OK",},{"id":"99d9d709-8478-4b46-9f3f-2206b1023fd3","name":"vpc","cidr":"192.168.0.0/16","status":"OK",}]}
正常200异常
更新虚拟私有云。
PUT/v1/{tenant_id}/vpcs/{vpc_id}参数说明
参数说明vpc字段说明：请求样例{"vpc":{"name":"vpc1","cidr":"192.168.0.0/16"}}
要素说明vpc字段说明：响应样例{"vpc":{"id":"99d9d709-8478-4b46-9f3f-2206b1023fd3","name":"vpc1","cidr":"192.168.0.0/16","status":"OK",}}
正常200异常
删除虚拟私有云。
DELETE/v1/{tenant_id}/vpcs/{vpc_id}参数说明
参数说明无请求样例无
响应样例无
正常204异常
API调用发生错误时，会有错误结构体返回，该小节主要是对VPC封装接口（不包括openstack原生接口）错误结构的解释。
REST公共消息头包含两类：公共请求消息头和公共响应消息头，本章对这部分内容进行介绍。
其它header属性，请遵照http协议。
本节定义了VPC服务上报云监控服务的监控指标的命名空间，监控指标列表和维度定义，用户可以通过云监控服务提供的API接口来检索VPC服务产生的监控指标和告警信息。
SYS.VPC
创建端口。
POST/v1/ports
参数说明port字段说明：fixed_ip对象allow_address_pair对象extra_dhcp_opt对象请求样例{"port":{"admin_state_up":true,"fixed_ips":[{"ip_address":"10.128.1.10","subnet_id":"70f2e74b-e660-410a-b754-0ca46744348a"}],"name":"test","network_id":"5b808927-13c9-4e60-a4f4-ed6ffe225167","tenant_id":"43f2d1cca56a40729dcb17212482f34d"}}{"port":{"admin_state_up":true,"fixed_ips":[{"ip_address":"10.128.1.10","subnet_id":"70f2e74b-e660-410a-b754-0ca46744348a"}],"name":"test","network_id":"5b808927-13c9-4e60-a4f4-ed6ffe225167","tenant_id":"43f2d1cca56a40729dcb17212482f34d"}}
要素说明port字段说明：fixed_ip对象allow_address_pair对象extra_dhcp_opt对象响应样例{"port":{"id":"d00f9c13-412f-4855-8af3-de5d8c24cd60","name":"test","status":"DOWN","admin_state_up":"true","fixed_ips":[{"subnet_id":"70f2e74b-e660-410a-b754-0ca46744348a","ip_address":"10.128.1.10"}],"mac_address":"fa:16:3e:d7:f2:6c","network_id":"5b808927-13c9-4e60-a4f4-ed6ffe225167","tenant_id":"43f2d1cca56a40729dcb17212482f34d","device_id":"","device_owner":"","security_groups":["02b4e8ee-74fa-4a31-802e-5490df11245e"],"extra_dhcp_opts":[],"allowed_address_pairs":[],"binding:vnic_type":"normal"}}
正常201异常
查询单个端口
GET/v1/ports/{port_id}参数说明
参数说明无请求样例无
要素说明port字段说明：fixed_ip对象allow_address_pair对象extra_dhcp_opt对象响应样例：{"port":{"id":"d00f9c13-412f-4855-8af3-de5d8c24cd60","name":"test","status":"DOWN","admin_state_up":"true","fixed_ips":[{"subnet_id":"70f2e74b-e660-410a-b754-0ca46744348a","ip_address":"10.128.1.10"}],"mac_address":"fa:16:3e:d7:f2:6c","network_id":"5b808927-13c9-4e60-a4f4-ed6ffe225167","tenant_id":"43f2d1cca56a40729dcb17212482f34d","device_id":"","device_owner":"","security_groups":["02b4e8ee-74fa-4a31-802e-5490df11245e"],"extra_dhcp_opts":[],"allowed_address_pairs":[],"binding:vnic_type":"normal"}}
正常200异常
查询端口列表
GET/v1/ports样例/v1/ports?id={port_id}&amp;name={port_name}&amp;admin_state_up={is_admin_status_up}&amp;network_id={network_id}&amp;mac_address={port_mac}&amp;device_id={port_device_id}&amp;device_owner={device_owner}&amp;status={port_status}参数说明
参数说明无请求样例无
要素说明ports字段说明：fixed_ip对象allow_address_pair对象extra_dhcp_opt对象响应样例{"ports":[{"id":"d00f9c13-412f-4855-8af3-de5d8c24cd60","name":"test","status":"DOWN","admin_state_up":"true","fixed_ips":[{"subnet_id":"70f2e74b-e660-410a-b754-0ca46744348a","ip_address":"10.128.1.10"}],"mac_address":"fa:16:3e:d7:f2:6c","network_id":"5b808927-13c9-4e60-a4f4-ed6ffe225167","tenant_id":"43f2d1cca56a40729dcb17212482f34d","device_id":"","device_owner":"","security_groups":["02b4e8ee-74fa-4a31-802e-5490df11245e"],"extra_dhcp_opts":[],"allowed_address_pairs":[],"binding:vnic_type":"normal"},{"id":"28ba8f45-7636-45e4-8c0a-675d7663717c","name":"test1","status":"DOWN","admin_state_up":"true","fixed_ips":[{"subnet_id":"061d3ca2-bd1f-4bd1-a01d-7a5155328c0e","ip_address":"192.168.10.10"}],"mac_address":"fa:16:3e:3d:91:cd","network_id":"be2fe79a-3ee2-4d87-bd71-5afa78a5670d","tenant_id":"43f2d1cca56a40729dcb17212482f34d","device_id":"","device_owner":"","security_groups":["0bfc8687-ca18-4c37-ac84-d2198baba585"],"extra_dhcp_opts":[],"allowed_address_pairs":[],"binding:vnic_type":"normal"}]}
正常200异常
更新端口
PUT/v1/ports/{port_id}参数说明
参数说明port字段说明：extra_dhcp_opt对象请求样例:{"port":{"name":"adc"}}
要素说明port字段说明：fixed_ip对象allow_address_pair对象extra_dhcp_opt对象响应样例:{"port":{"id":"7204e0da-40de-4207-a536-6f59b84f6f0e","name":"adc","status":"DOWN","admin_state_up":"true","fixed_ips":[{"subnet_id":"689156ca-038f-4478-b265-fd26aa8bbe31","ip_address":"192.168.0.9"}],"mac_address":"fa:16:3e:d7:f2:6c","network_id":"b4152e98-e3af-4e49-bb7f-7766e2b5ec63","tenant_id":"caa6cf4337ea47fb823b15709ebe8591","device_id":"","device_owner":"","security_groups":["59b39002-e79b-4bac-8e27-aa884ab1beb6"],"extra_dhcp_opts":[],"allowed_address_pairs":[],"binding:vnic_type":"normal"}}
正常200异常
删除端口
DELETE/v1/ports/{port_id}参数说明
device_owner不为空的端口不允许删除。
参数说明无请求样例无
响应样例无
正常204异常
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
公有云API符合RESTfulAPI的设计理论。REST从资源的角度来观察整个网络，分布在各处的资源由URI（UniformResourceIdentifier）确定，而客户端的应用通过URL（UnifiedResourceLocator）来获取资源。URL的一般格式为：https://<emid="ZH-CN_TOPIC_0050065466__zh-cn_topic_0020521604_i1747860612420">Endpoint</em>/<emid="ZH-CN_TOPIC_0050065466__zh-cn_topic_0020521604_i1395032112430">uri</em>URL中的参数说明如所示。
在HTTP协议中，请求可以使用多种请求方法例如GET、PUT、POST、DELETE、PATCH，用于指明以何种方式来访问指定的资源，目前提供的REST接口支持的请求方法如下表所示。
调用接口有如下两种认证方式，您可以任选其中一种进行认证鉴权。Token认证：通过Token认证调用请求。AK/SK认证：通过AK(AccessKeyID)/SK(SecretAccessKey)加密调用请求。AK/SK认证安全性更高。
当您使用Token认证方式完成认证鉴权时，需要获取用户Token并在调用接口时增加“X-Auth-Token”到业务接口请求消息头中。本节介绍如何调用接口完成Token认证。
发送“POSThttps://<emid="ZH-CN_TOPIC_0050065469__zh-cn_topic_0024478020_i36679159105021">IAM的Endpoint</em>/v3/auth/tokens”，获取IAM的Endpoint及消息体中的区域名称。请参考。请求内容示例如下：说明：下面示例代码中的斜体字需要替换为实际内容，详情请参考《统一身份认证服务API参考》。{"auth":{"identity":{"methods":["password"],"password":{"user":{"name":"<emid="ZH-CN_TOPIC_0050065469__zh-cn_topic_0024478020_i3005717212249">username</em>","password":"<emid="ZH-CN_TOPIC_0050065469__zh-cn_topic_0024478020_i207909212249">password</em>","domain":{"name":"<emid="ZH-CN_TOPIC_0050065469__zh-cn_topic_0024478020_i1871183512249">domainname</em>"}}}},"scope":{"project":{"name":"cn-north-1"//假设区域名称是“cn-north-1”}}}}获取Token，请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。调用业务接口，在请求消息头中增加“X-Auth-Token”，“X-Auth-Token”的取值为中获取的Token。
通过API网关向下层服务发送请求时，必须使用AK(AccessKeyID)、SK(SecretAccessKey)对请求进行签名。AK(AccessKeyID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。SK(SecretAccessKey)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。
注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。单击“管理访问密钥”。单击“新增访问密钥”，进入“新增访问密钥”页面。输入当前用户的登录密码。通过邮箱或者手机进行验证，输入对应的验证码。说明：在统一身份服务中创建的用户，如果创建时未填写邮箱或者手机号，则只需校验登录密码。单击“确定”，下载访问密钥。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。
下载API网关签名工具。下载地址：。解压下载的压缩包。创建java工程，将解压出来的jar引用到依赖路径中。
创建用于签名的请求com.cloud.sdk.DefaultRequest(JAVA)。设置DefaultRequest的目标APIURL、HTTPS方法、内容等信息。对DefaultRequest进行签名：<oltype="a"id="ZH-CN_TOPIC_0050065472__zh-cn_topic_0020592903_ol40047934162236"><liid="ZH-CN_TOPIC_0050065472__zh-cn_topic_0020592903_li24887089162236">调用SignerFactory.getSigner(StringserviceName,StringregionName)获取一个签名工具实现的实例。调用Signer.sign(Request&lt;?&gt;request,Credentialscredentials)对创建的请求进行签名。以下代码展示了这个步骤：//选用签名算法，对请求进行签名Signersigner=SignerFactory.getSigner(serviceName,region);//对请求进行签名，request会发生改变signer.sign(request,newBasicCredentials(this.ak,this.sk));把上步中签名产生的request转换为一个适合发送的请求，并将签名后request中的header信息放入新的request中。以ApacheHttpClient为例，需要把DefaultRequest转换为HttpRequestBase，把签名后的DefaultRequest的header信息放入HttpRequestBase中。具体过程请查看“”中的AccessServiceImpl.java。
下面代码展示了如何对一个请求进行签名，并通过HTTPClient发送一个HTTPS请求的过程：代码分成三个类进行演示：AccessService:抽象类，将GET/POST/PUT/DELETE归一成access方法。Demo:运行入口，模拟用户进行GET/POST/PUT/DELETE请求。AccessServiceImpl:实现access方法，具体与API网关通信的代码都在access方法中。下面示例代码中的region和serviceName（英文服务名缩写），请参考。AccessService.java:AccessServiceImpl.java:Demo.java:URI、AK、SK、HTTPMETHOD是必须设置的参数。可通过request.addHeader()添加头信息。
在调用接口的时候，部分URL中需要填入项目编号(project_id或者tenant_id，本文中project_id和tenant_id含义一样)，所以需要先在管理控制台上获取到项目编号。项目编号获取步骤如下：注册并登录管理控制台。单击用户名，在下拉列表中单击“我的凭证”。在“我的凭证”页面的项目列表中查看项目ID。
查询浮动IP列表。
不涉及
无
查询浮动IP详情。
不涉及。
无
创建浮动IP。
创建浮动IP的外部网络UUID，请使用GET/v2.0/networks?router:external=True或neutronnet-external-list方式获取。
更新浮动IP。
绑定浮动IP过程中，如果浮动IP处于“error”状态，请先尝试执行浮动IP解绑定动作。不支持直接把已经绑定端口的浮动ip重新绑定到另外一个端口上，必须先解绑定再绑定。
删除浮动IP。
无。
无。
无。
无。
查询网络列表。
不涉及。
无。
查询网络详情。
不涉及。
无。
创建网络。
不涉及。
更新端口。
不涉及。
不涉及。
删除网络。
不涉及。
无。
无。
不涉及。
对路由器资源进行管理和操作，包括查询、路由器列表、创建路由器、查询指定路由器、删除路由器以及更新路由器等接口。
查询路由器详情。
不涉及。
无。
创建路由器。
不涉及。
更新路由器。
不涉及
删除路由器。
不涉及。
无。
无。
无。
添加路由器接口。
使用端口的时候，端口上有且只有一个IP地址。使用子网的时候，子网上必须配置gatewayIP地址。“provider:network_type”为“geneve”的网络不可以添加路由器。
删除路由器接口。
不涉及。
对安全组和规则资源进行管理和操作，包括查询安全组和规则列表、创建安全组和规则、查询安全组和格则、删除安全组和规则以及更新安全组等接口。
查询安全组。
不涉及。
无。
查询安全组详情。
不涉及。
无。
创建安全组。
不涉及。
更新安全组。
不涉及。
删除安全组。
不涉及。
无。
无。
无。
查询安全组规则。
不涉及。
无。
查询安全组规则详情。
不涉及。
无。
创建安全组规则。
不涉及
删除安全组规则。
不涉及。
无。
无。
对浮动IP资源进行管理和操作，包括查询浮动IP、创建浮动IP、查询指定浮动IP、删除浮动IP以及更新浮动IP等接口。
对子网资源进行管理和操作，包括查询子网列表、创建子网、查询指定子网、删除子网以及更新子网等接口。
查询子网列表。
不涉及
无
查询子网详情
不涉及
无
创建子网
不涉及
更新子网。
更新allocation_pools字段时范围不能包含网关和广播地址的所有IP。
删除子网。
不涉及
无
无
无
对端口资源进行管理和操作，包括查询端口列表、创建端口、查询指定端口、删除端口以及更新端口等接口。
查询端口列表。
不涉及。
不涉及。
不涉及。
【样例一】JSON请求样例GET/v2.0/ports?limit=2&amp;marker=0000f817-6d8d-46a0-85b7-2eb53a2e6bcbJSON响应样例{"ports":[{"admin_state_up":true,"allowed_address_pairs":[],"binding:vnic_type":"normal","device_id":"dhcp4ebd0208-8328-5d69-8c44-ec50939c0967-babaf0c4-d6e5-409c-9bbc-ede841e010f0","device_owner":"network:dhcp","port_security_enabled":false,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"172.16.1.2","subnet_id":"4d57c51a-e53c-4895-9dc4-23dec6bd6699"}],"id":"0050d1cb-202a-4a46-8674-03eb6f06a814","mac_address":"fa:16:3e:7f:ed:2c","name":"distributed_dhcp_port","network_id":"babaf0c4-d6e5-409c-9bbc-ede841e010f0","security_groups":[],"status":"DOWN","tenant_id":"3e4a1816927f405cacbc3dca1e05111e"},{"admin_state_up":true,"allowed_address_pairs":[],"binding:host_id":"dummy_725DFB13-D21D-B211-9630-000000821800","binding:vnic_type":"normal","device_id":"3dc6d518-460e-47c1-a786-5ff2c382fdd6","device_owner":"network:router_gateway","port_security_enabled":false,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"10.10.10.53","subnet_id":"bb739afa-d755-4cd9-a268-f419927c5a12"}],"id":"0102ddd1-e444-4786-9897-d6ae8f6e27c1","mac_address":"fa:16:3e:51:fd:8c","name":"","network_id":"f65e9ebc-ed5d-418b-a931-9a723718ba4e","security_groups":[],"status":"ACTIVE","tenant_id":""}],"ports_links":[{"href":"https://network.localdomain.com:8020/v2.0/ports?limit=2&amp;marker=0102ddd1-e444-4786-9897-d6ae8f6e27c1","rel":"next"},{"href":"https://network.localdomain.com:8020/v2.0/ports?limit=2&amp;marker=0050d1cb-202a-4a46-8674-03eb6f06a814&amp;page_reverse=True","rel":"previous"}]}【样例二】JSON请求样例GET/v2.0/ports?mac_address=fa:16:3e:f1:0b:09JSON响应样例{"ports":[{"admin_state_up":true,"allowed_address_pairs":[],"binding:vnic_type":"normal","device_id":"e6c05704-c907-4cc1-8106-69b0996c43b9","device_owner":"compute:az3.dc1","port_security_enabled":true,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"172.16.0.37","subnet_id":"b3ac1347-63f2-4e82-b853-3d86416a0db5"}],"id":"7bb64706-6e46-4f94-a28a-4bc7caaab87d","mac_address":"fa:16:3e:f1:0b:09","name":"port_vm_50_3","network_id":"a54e1b19-ce78-4b7e-b28b-d2d716cdc161","security_groups":["ef69bc60-2f4b-4f97-b95b-e3b68df0c0b2"],"status":"ACTIVE","tenant_id":"6c9298ec8c874f7f99688489ab65f90e"}]}【样例三】JSON请求样例GET/v2.0/ports?admin_state_up=FalseJSON响应样例{"ports":[{"admin_state_up":false,"allowed_address_pairs":[],"binding:vnic_type":"normal","device_id":"","device_owner":"","port_security_enabled":true,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"10.100.100.62","subnet_id":"9b28f20c-0234-419f-a0b4-4a84f182f64b"}],"id":"ffc0bdee-8413-4fa2-bd82-fa8efe5b3a87","mac_address":"fa:16:3e:2b:bc:57","name":"small_net_port","network_id":"b299b151-7a66-4c6f-a313-cdd3b5724296","security_groups":["ef69bc60-2f4b-4f97-b95b-e3b68df0c0b2"],"status":"DOWN","tenant_id":"6c9298ec8c874f7f99688489ab65f90e"}]}【样例四】JSON请求样例GET/v2.0/ports?device_id=e6c05704-c907-4cc1-8106-69b0996c43b9JSON响应样例{"ports":[{"admin_state_up":true,"allowed_address_pairs":[],"binding:vnic_type":"normal","device_id":"e6c05704-c907-4cc1-8106-69b0996c43b9","device_owner":"compute:az3.dc1","port_security_enabled":true,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"10.1.0.37","subnet_id":"b3ac1347-63f2-4e82-b853-3d86416a0db5"}],"id":"7bb64706-6e46-4f94-a28a-4bc7caaab87d","mac_address":"fa:16:3e:f1:0b:09","name":"port_vm_50_3","network_id":"a54e1b19-ce78-4b7e-b28b-d2d716cdc161","security_groups":["ef69bc60-2f4b-4f97-b95b-e3b68df0c0b2"],"status":"ACTIVE","tenant_id":"6c9298ec8c874f7f99688489ab65f90e"}]}【样例五】JSON请求样例GET/v2.0/ports?tenant_id=6c9298ec8c874f7f99688489ab65f90e&amp;name=port_vm_50_3JSON响应样例{"ports":[{"admin_state_up":true,"allowed_address_pairs":[],"binding:vnic_type":"normal","device_id":"e6c05704-c907-4cc1-8106-69b0996c43b9","device_owner":"compute:az3.dc1","port_secuirty_enabled":true,"extra_dhcp_opts":[],"fixed_ips":[{"ip_address":"10.1.0.37","subnet_id":"b3ac1347-63f2-4e82-b853-3d86416a0db5"}],"id":"7bb64706-6e46-4f94-a28a-4bc7caaab87d","mac_address":"fa:16:3e:f1:0b:09","name":"port_vm_50_3","network_id":"a54e1b19-ce78-4b7e-b28b-d2d716cdc161","security_groups":["ef69bc60-2f4b-4f97-b95b-e3b68df0c0b2"],"status":"ACTIVE","tenant_id":"6c9298ec8c874f7f99688489ab65f90e"}]}【样例六】JSON请求样例GET/v2.0/ports?name=port_vm_50_3JSON响应样例{"ports":[{"status":"DOWN","allowed_address_pairs":[],"extra_dhcp_opts":[],"device_owner":"","port_security_enabled":true,"fixed_ips":[{"subnet_id":"391c74f7-e3b1-405c-8473-2f71a0aec7dc","ip_address":"10.1.0.33"}],"id":"0f405555-739f-4a19-abb7-ec11d005b3a9","security_groups":["043548bc-1020-4be0-885a-caac8530e8f6"],"device_id":"","port_security_enabled":true,"name":"port_vm_50_3","admin_state_up":true,"network_id":"9898a82d-7795-4ad5-bf2c-0ed8b822be4f","tenant_id":"3e4a1816927f405cacbc3dca1e05111e","binding:vnic_type":"normal","mac_address":"fa:16:3e:b0:d9:cf"},{"status":"ACTIVE","allowed_address_pairs":[],"extra_dhcp_opts":[],"device_owner":"compute:az3.dc1","port_security_enabled":true,"fixed_ips":[{"subnet_id":"b3ac1347-63f2-4e82-b853-3d86416a0db5","ip_address":"10.1.0.37"}],"id":"7bb64706-6e46-4f94-a28a-4bc7caaab87d","security_groups":["ef69bc60-2f4b-4f97-b95b-e3b68df0c0b2"],"device_id":"e6c05704-c907-4cc1-8106-69b0996c43b9","name":"port_vm_50_3","admin_state_up":true,"network_id":"a54e1b19-ce78-4b7e-b28b-d2d716cdc161","tenant_id":"6c9298ec8c874f7f99688489ab65f90e","binding:vnic_type":"normal","mac_address":"fa:16:3e:f1:0b:09"}]}
查询端口详情。
不涉及。
不涉及
不涉及。
创建端口。
不涉及。
不涉及。
更新端口。
不涉及。
不涉及。
删除端口。
不允许删除device_owner或device_id为非空的端口。
不涉及。
不涉及。
不涉及
不涉及。
不涉及。
对网络资源进行管理和操作，包括查询网络列表、创建网络、查询指定网络、删除网络以及更新网络等接口。
查询路由器。
不涉及。
无。
NeutronAPIv2.0提供分页查询功能，通过在list请求的url中添加limit和marker参数实现分页返回列表信息。分页显示的结果以显示对象的id升序排序。响应消息中的nextref，代表了下一页的url。响应消息中的previousref，代表了上一页的url。
哈希值是用来区分同一个进程的各历史状态的唯一标识。
本地进程，即当前用户弹性云服务器中所有处于运行中的程序。
A
C
参见
程序运行认证服务，是一个智能的进程管理服务，基于可定制的白名单机制，监视程序的执行，保障弹性云服务器的安全性。
弹性伸缩服务（AutoScaling）是根据用户的业务需求，通过策略自动调整其业务资源的服务，简称弹性伸缩或AS。您可以根据业务需求自行定义伸缩配置和伸缩策略，降低人为反复调整资源以应对业务变化和高峰压力的工作量，帮助您节约资源和人力成本。典型的弹性伸缩活动如所示。
弹性伸缩的云服务器中运行的应用需要是无状态、可横向扩展的。因为AS会自动释放云服务器，所以弹性伸缩组内的ECS云服务器不可以保存应用的状态信息（例如session）和相关数据（如数据库、日志等）。如果应用中需要ECS云服务器保存状态或日志信息，可以考虑把相关信息保存到独立的服务器中。弹性伸缩服务对用户的资源数量或容量做的配额限制如所示。
您默认可以创建10个弹性伸缩组，100个弹性伸缩配置。每个弹性伸缩组同一时刻支持使用1个伸缩配置，10个伸缩策略。如果系统提供的默认配额不能满足您的需求，请联系管理员进行处理。
云服务器创建完成后，数据盘需要初始化后才能使用。当使用弹性伸缩为伸缩组增加数量较多的云服务器时，您就需要逐一手动初始化数据盘，将会占用较长时间。本节为您介绍通过脚本自动化完成初始化磁盘的操作，包括磁盘分区和挂载指定目录。本节介绍的自动初始化脚本示例仅支持初始化一个数据盘。本节操作以centos6.5为例。其他操作系统配置方法略有区别，请参考对应操作系统的相关资料进行操作，文档中不对此进行详细说明。
以root用户登录已有云服务器。执行以下命令，进入脚本存放目录。cd/脚本目录例如：cd/home执行以下命令，创建并编辑脚本。vi脚本名称例如：vifdisk_mount.sh以下脚本为云服务器只有一个数据盘时的自动初始化，仅供参考，请用户根据实际情况修改。#!/bin/bashbash_scripts_name=fdisk_mount.shini_path=/home/fdisk.inidisk=size=mount=partition=functionget_disk_from_ini(){disk=`cat$ini_path|grepdisk|awk-F'=''{print$2}'`if[$disk=""]thenecho"diskisnullinfile,exit"exitfiresult=`fdisk-l$disk|grep$disk`if[$result=1]thenecho"diskpathisnotexistinlinux,exit"exitfi}functionget_size(){size=`cat$ini_path|grepsize|awk-F'=''{print$2}'`if[$size=""]thenecho"sizeisnull,exit"exitfi}functionmake_fs_mount(){mkfs.ext4-Tlargefile$partitionif[$?-ne0]thenecho"mkfsdiskfailed,exit"exitfidir=`cat$ini_path|grepmount|awk-F'=''{print$2}'`if[$dir=""]thenecho"mountdirisnullinfile,exit"exitfiif[!-d$dir]thenmkdir-p$dirfimount$partition$dirif[$?-ne0]thenecho"mountdiskfailed,exit"exitfiecho"$partition$dirext3defaults00"&gt;&gt;/etc/fstab}functionremove_rc(){cat/etc/rc.local|grep$bash_scripts_nameif[$?ne0]thensed-i'/'$bash_scripts_name'/d'/etc/rc.localfi}##################start#########################1、判断配置文件是否存在if[!-f$ini_path]thenecho"inifilenotexist,exit"exitfi##2、获取配置文件中disk指定的设备路径get_disk_from_ini##3、获取配置文件中size分区大小get_size##4、将磁盘分区fdisk$disk&lt;&lt;EOFnp11$sizewEOFpartition=`fdisk-l$disk2&gt;/dev/null|grep"^/dev/[xsh].*d"|awk'{print$1}'`##5、格式化分区，挂载分区到对应目录make_fs_mount##6、修改开机启动项，避免重试执行remove_rcecho'SUCESS'按“Esc”键，输入:wq，按“Enter”保存并退出编辑。执行以下命令，创建并编辑配置文件。vifdisk.ini配置文件中设置了数据盘的盘符、大小和挂载目录信息，用户可参考如下所示信息，根据实际情况修改。disk=/dev/xdevsize=+100Gmount=/opt/test按“Esc”键，输入:wq，按“Enter”保存并退出编辑。执行以下命令，打开配置文件“rc.local”。vi/etc/rc.local按“i”，在“rc.local”文件中添加如下内容。/home/fdisk_mount.sh配置“rc.local”后，云服务器首次启动时会自动执行初始化数据盘脚本。按“Esc”键，输入:wq，按“Enter”保存并退出编辑。通过已有云服务器创建私有镜像。创建伸缩配置。填写伸缩配置信息时，请选择上述步骤中创建的私有镜像，并选择一个数据盘。创建伸缩组。配置伸缩组时，请选择上述步骤中创建的伸缩配置。伸缩组创建成功后，通过该组的伸缩活动产生的云服务器，会按照私有镜像中的配置自动初始化数据盘。
伸缩策略可以启用一个，也可以启用多个。
可以，但是需要您增加一条删除的伸缩策略。
您需要在创建私有镜像前，在源云服务器中安装应用，并设置开机自动启动。在“弹性伸缩组”页签，单击伸缩组名称，在“配置名称”栏查看该伸缩组使用的伸缩配置详情。确认该伸缩配置选择的镜像是否为中创建的私有镜像。<ulclass="subitemlist"id="as_faq_0011__ul32038923"><liid="as_faq_0011__li19914855">是，结束。弹性伸缩添加的可以自动部署您的应用了。否，执行。创建一个新的伸缩配置，确认该伸缩配置选择的镜像即为中创建的私有镜像。在“弹性伸缩组”页签，单击伸缩组名称，并在“配置名称”栏单击“修改”，将该伸缩组的伸缩配置变更为中新创建的伸缩配置。
用户使用密钥文件登录弹性伸缩组中的云服务器时，登录失败。
该弹性伸缩组使用的伸缩配置中的镜像为用户自己制作的私有镜像，且在创建该私有镜像时用户未安装Cloud-init工具。创建私有镜像时不安装Cloud-init工具，用户将无法对云服务器进行自定义配置，只能使用镜像原有密码或密钥登录云服务器。
判断是否需要继续登录该云服务器。<ulclass="subitemlist"id="as_faq_0012__ul23262209"><liid="as_faq_0012__li8033291">是，请使用镜像原有密码或密钥登录云服务器。其中，镜像原有密码或密钥指创建私有镜像时，用户自己设置的操作系统密码或密钥。否，跳转。更换弹性伸缩组的伸缩配置，更换方法请参见。请确保新伸缩配置中的镜像已安装了Cloud-init/Cloudbase-init工具，Cloud-init/Cloudbase-init工具的安装方法请参见。更换伸缩配置后，弹性伸缩组进行伸缩活动而新增的弹性云服务器可以直接使用密钥文件正常登录，无需再使用镜像原有密码或密钥登录云服务器。
Cloud-init是开源的云初始化程序，能够对新创建弹性云服务器中指定的自定义信息（主机名、密钥和用户数据等）进行初始化配置。在创建伸缩配置时，通过Cloud-init进行对云服务器的初始化配置。如使用未安装Cloudbase-init的Windows私有镜像创建的弹性云服务器，在获取弹性云服务器密码时，系统将提示查询不到密码。您只能通过镜像本身的密码登录此云服务器。若忘记镜像本身密码，可以通过云服务器页面“重置密码”功能，自助完成云服务器的密码重置。如使用未安装Cloud-init的Linux私有镜像创建的云服务器，使用创建时输入的密码或秘钥将无法正常登录云服务器。您只能通过镜像本身的密码或秘钥登录此云服务器。若忘记镜像本身密码，或镜像本身的秘钥丢失，可以通过云服务器页面“重置密码”功能，自助完成云服务器的密码重置。如使用未安装Cloud-init/Cloudbase-init的私有镜像创建云服务器时，用户数据注入会失败。鉴于出现上述情况，在使用弹性伸缩服务时，请检查伸缩配置中的私有镜像是否已经安装并配置了Cloud-init或者Cloudbase-init工具，请将使用了未安装Cloud-init/Cloudbase-init的私有镜像的伸缩配置删除，并使用已安装Cloud-init/Cloudbase-init的私有镜像创建新的伸缩配置。具体操作步骤：<olid="as_faq_0013__ol14058987195048"><liid="as_faq_0013__li59422025195048">登录管理控制台。选择“计算&gt;弹性伸缩服务”。选择“伸缩配置”页签，进入伸缩配置列表页面。单击“创建伸缩配置”，选择已安装Cloud-init或Cloudbase-init工具的私有镜像创建新的伸缩配置。在伸缩组中将伸缩配置修改为新创建的伸缩配置。
伸缩组异常情况及其处理方法：情况描述：云服务器配额不足、云硬盘配额不足、弹性IP配额不足等。可能原因：配额不足。处理方法：申请扩大配额或者删除不需要的资源，之后重新启用伸缩组。情况描述：VPC不存在、安全组不存在、子网不存在。可能原因：虚拟私有云服务异常或者相关资源被删除。处理方法：等待虚拟私有云服务恢复或者修改伸缩组中VPC、子网、安全组相关参数，之后重新启用伸缩组。情况描述：负载均衡监听器不存在。可能原因：负载均衡服务异常或者相关资源被删除。处理方法：等待负载均衡服务恢复或者修改伸缩组中负载均衡相关参数，之后重新启用伸缩组。情况描述：镜像不存在、伸缩配置使用的密钥对不存在等。可能原因：相关资源被删除。处理方法：为伸缩组更换新的伸缩配置，之后重新启用伸缩组。情况描述：生命周期挂钩使用的通知主题不存在。可能原因：伸缩活动开始前生命周期挂钩使用的通知主题被删除，如果伸缩活动开始后通知主题被删除，则下次伸缩活动时伸缩组会异常。处理方法：修改生命周期挂钩使用的通知主题，之后重新启用伸缩组。情况描述：您选择的子网下私有IP不足。可能原因：该子网下私有IP地址被用尽。处理方法：修改伸缩组的子网信息，之后重新启用伸缩组。情况描述：您选择的可用分区下的该类型云服务器资源已售罄，请选择其他可用分区。可能原因：您为伸缩组选择的可用分区下资源售罄，或者该可用分区不支持该类型云服务器，该类型云服务器指的是伸缩配置里选择的云服务器类型。处理方法：修改伸缩组的子网信息，之后重新启用伸缩组。
未安装VMTools，云监控服务无法提供监控弹性云服务器的内存使用率、磁盘使用率、带内网络流入速率和带内网络流出速率四个指标。但可以监控带外网络流入速率和带外网络流出速率指标，这样导致CPU使用率指标的精确性可能会降低。如果弹性云服务器类型是IO优化实例，无论是否安装了vmtools，云监控服务监控弹性云服务器的监控指标不包含磁盘使用率、带内网络流入速率和带内网络流出速率指标。弹性伸缩组支持的监控指标，请参见。因此，当上述情况发生时，弹性伸缩组支持的内存使用率、带内网络流入速率和带内网络流出速率三个指标会受到影响，无法获取监控数据。
本身不收取费用。但会按伸缩组内的实例收取云服务器的费用。
可以单独使用，也可以同（ELB），（CES）一起使用。其中，CES服务为免费服务，系统默认开通；ELB服务在有需求时可以部署，例如，有分布式集群需求的场景下，可以使用ELB。
不会。的监控数据基于服务来获取的，监控周期可配置多个档位，如：五分钟，二十分钟，一小时等。不会因为一次指标的高峰而导致错误伸缩。同时，弹性伸缩服务还支持配置冷却时间，防止由于监控的变化造成伸缩组的反复无效变化。该时间可由用户进行自定义。
A-E
K-O
S<h5>伸缩策略</h5><p>伸缩活动的触发条件，当满足条件时，会触发一次伸缩活动。</p><h5>伸缩活动</h5><p>伸缩活动是指在伸缩组内由于伸缩条件满足而触发的云服务器实例数量变更的活动，可以是增加或减少几台云服务器实例。</p><h5>伸缩配置</h5><p>伸缩配置即伸缩活动中添加的云服务器的规格。</p><h5>伸缩组</h5><p>伸缩组是具有相同属性和应用场景的云服务器、伸缩配置和伸缩策略的集合。伸缩组是弹性伸缩服务中启停伸缩策略和进行伸缩活动的基本单位。</p>T<h5>弹性伸缩服务</h5><p>弹性伸缩服务（AutoScaling）是根据用户的业务需求，通过策略自动调整其业务资源的服务。</p>
T
参见
冷却时间是指冷却伸缩活动的时间，在每次触发伸缩活动之后，系统开始计算冷却时间。伸缩组在冷却时间内，会拒绝由告警策略触发的伸缩活动，其他类型的告警策略（如定时策略和周期策略等）触发的伸缩活动不受限制。
伸缩活动的触发条件，当满足条件时，会触发一次伸缩活动。
伸缩活动是指在伸缩组内由于伸缩条件满足而触发的云服务器实例数量变更的活动，可以是增加或减少几台云服务器实例。
伸缩配置即伸缩活动中添加的云服务器的规格。
伸缩组是具有相同属性和应用场景的云服务器、伸缩配置和伸缩策略的集合。伸缩组是弹性伸缩服务中启停伸缩策略和进行伸缩活动的基本单位。
弹性伸缩服务（AutoScaling）是根据用户的业务需求，通过策略自动调整其业务资源的服务。
弹性伸缩服务（AutoScaling）是根据用户的业务需求，通过策略自动调整其业务资源的服务。
华北、华东、华南东北区软件开发云华北区BGP查看详细备案流程备案是中国大陆的一项法规，使用大陆节点服务器开办网站的用户，需要在接入服务商处提交备案申请。现备案分三种类型：现备案分三种类型：1）新增备案：主体和域名均为第一次做备案。2）新增网站：该主体已备案过其他网站，域名未备案且作新建网站使用。3）新增接入：主体和域名均已备案，此次备案是变更或增加接入商。备案详细步骤如下：查看详细备案流程备案是中国大陆的一项法规，使用大陆节点服务器开办网站的用户，需要在接入服务商处提交备案申请。现备案分三种类型：现备案分三种类型：1）新增备案：主体和域名均为第一次做备案。2）新增网站：该主体已备案过其他网站，域名未备案且作新建网站使用。3）新增接入：主体和域名均已备案，此次备案是变更或增加接入商。备案详细步骤如下：查看详细备案流程备案是中国大陆的一项法规，使用大陆节点服务器开办网站的用户，需要在接入服务商处提交备案申请。现备案分三种类型：现备案分三种类型：1）新增备案：主体和域名均为第一次做备案。2）新增网站：该主体已备案过其他网站，域名未备案且作新建网站使用。3）新增接入：主体和域名均已备案，此次备案是变更或增加接入商。备案详细步骤如下：（蓝汛）BGP备案，可咨询备案热线：4000-955-988转7。
<em>*</em>请在地图中点击您所在的省份，查看具体政策
证件地址非本地区的，不能进行备案（单位性质和个人性质的都包括）。主体信息发生变更时，需提供《核验单》、当面核验照片（统一背景前的网站负责人照片）、主体以及网站负责人的有效证件复印件。网站负责人需提供"网络信息安全人员从业资格证书"复印件或管局开的证明复印件。个人主体，网站服务内容选择"博客/个人空间"需提供前置审批文件。证件地址非本地区的，不能进行备案（单位性质和个人性质的都包括）。主体信息发生变更时，需提供《核验单》原件、当面核验照片（统一背景前的网站负责人照片）、主体以及网站负责人的有效证件。网站负责人需提供"网络信息安全人员从业资格证书"复印件或管局开的证明复印件。
主体性质为企业性质，《核验单》需加盖单位公章。网站服务内容，不能选择"即时通信"等涉及前置审批的内容。需提供营业执照副本原件（如复印件需加盖公章）扫描件主体负责人和网站负责人身份证正反面原件扫描件。网站服务内容，不能选择"即时通信"等涉及前置审批的内容。个人备案证件住所非青海本省不能在青海进行备案。主体负责人身份证正反面必须提供原件扫描件
核验单可机打，签字盖章需要按要求完成。核验单可机打，签字盖章需要按要求完成。
主体性质为企业性质，《核验单》需加盖单位公章。内蒙管局不接受外省主体备案。主办单位有效证件必须是本省的，包含企业性质主体、个人性质主体。企业性质的网站，要求单位的证件是本省的，例如工商营业执照、机构代码证是本省的号；对网站负责人证件是否为本省的，未作明确要求。网站服务内容选择"博客/个人空间"需要办理前置审批文件。备案信息被管局退回，需重新邮寄核验单。网站首页URL只能填写一个。主体负责人必须填写法人相关信息。主办单位有效证件必须是本省的，包含企业性质主体、个人性质主体。个人性质的网站，主办者身份证必须是本省。网站服务内容选择"博客/个人空间"需要办理前置审批文件。备案信息被管局退回，需重新邮寄核验单。网站首页URL只能填写一个。个人性质的备案，网站备注中需详细注明网站开办后是什么用途。如果网站内容选择其他，需更加详细的注明网站内容，及开办网站用途等。
网站主办者为单位用户，《核验单》需加盖单位公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。投资者或上级主管单位名称和主体负责人基本信息都应填写法人姓名，及其相关信息；网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。
修改任何备案信息，需要重新邮寄核验单。网站名称涉及"中国、中央"等字眼的，需以组织机构代码证备案，需要在网站备注中说明：是经过哪个部门批准的，并邮寄批文复印件。网站备案域名列表中的域名，须全部填写在核验单上。需提供营业执照副本原件扫描件主体负责人和网站负责人身份证正反面原件扫描件。修改任何备案信息，需要重新邮寄核验单。山西个体工商户，没有字号的以个人名义备案，并在网站备注里说明是个体工商户无工商字号，需要注明注册号。网站名称涉及"中国、中央"等字眼的，需以组织机构代码证备案，需要在网站备注中说明：是经过哪个部门批准的，并邮寄批文复印件。网站备案域名列表中的域名，须全部填写在核验单上。需提供身份证正反面原件扫描件。
主体性质为企业性质，《核验单》需加盖单位公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。核验单上网站域名填写，不能带www。主体性质为企业性质，主体负责人信息必须填写法人信息。一个备案主体下有5个网站或一个网站有5个域名（包含5个）备案时需向提交纸质域名证书2份盖章。修改任何备案信息，都需要重新邮寄核验单。每个网站备案中的首页网址和网站域名必须一致，如报备信息的首页网址为www.123.com时，则域名列表中应含有123.com的域名。两个首页URL之间必须用半角分号（";"）隔开。个人网站服务内容选择"博客/个人空间"的，必须先申请电子公告服务前置审批，并获得批准。个体工商户字号是*号或是空白的，以企业进行备案。主办单位名称填写法人姓名，并在网站备注中说明：是个体工商户无工商字号，以及证件号码。主体负责人必须填写法人相关信息，法定代表人或网站负责人拍摄当面核验照片，法定代表人不能拍摄当面核验照片的需委托本单位相关部门的领导拍摄，办理人应持法人签字且单位盖章的委托书。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。核验单上网站域名填写，不能带www。个人网站，主体信息下有5个或者5个以上域名的，要求全部附域名证书2份签字。修改任何备案信息，都需要重新邮寄核验单。每个网站备案中的首页网址和网站域名必须一致，如报备信息的首页网址为www.123.com时，则域名列表中应含有123.com的域名。两个首页URL之间必须用半角分号（";"）隔开。个人网站服务内容选择"博客/个人空间"的，必须先申请电子公告服务前置审批，并获得批准。
单位用户核验单上需加盖单位公章。首页url只能填写一个；网站下的多个域名只能指向同一网站。如网站主办者为政府机关、事业单位、社会团体、军队、企业，投资者或上级主管单位名称此项应与单位性质等信息一致填写上一级主管单位全称或本单位全称。企业也可填写法人姓名。没有工商字号的个体工商户以个人性质备案，并在备注中说明。备案信息域名列表中的域名，必须全部写在核验单上。首页只能填写一个；网站下的多个域名只能指向同一网站。没有工商字号的个体工商户以个人性质备案，并在备注中说明。备案信息域名列表中的域名，必须全部写在核验单上。
新增网站和变更关键信息都需要重新进行真实性核验。备案主办单位证件必须在有效期内，且是经过年检的证件。企业用户必须使用企业营业执照备案，通信地址写到门牌号。外地企业营业执照不能在北京提交备案。中国公民请用身份证进行备案。民办非企业必须要办组织机构代码证，个体工商户可以使用个人名义提交备案。主体下多个网站，网站负责人不是同一人，需要网站负责人都拍照，或主体负责人拍照。新增主体，域名需全写在核验单上；新增网站，需填写此次新增的所有域名。已有备案号，网站新增加域名不需提供核验单。以企业名义进行备案，备案成功后，无法变更备案主体性质及名称。（如确认主体性质或主体名称需要变更，需要进行对原备案注销操作后重新进行备案）如因公司名称变更需要做备案主体变更时（仅限单位名称或注册号唯一变更），变更后的公司名称与前公司名称有一定的关联性（如果相差太多（例如A公司变更成B公司）则无法进行变更，需要注销重新备案），需客户提供变更证明原件扫描件。北京可进行备案的域名仅限：国际域名、国内域名和、cc域名，其他国别域无法进行备案。域名注册商是国外的用户，域名不能在北京提交备案。网站首页URL只能填写一个。新增接入的用户，需把此次接入的网站中所有域名都写在核验单中。前缀明显不一致的域名，请分为不同的网站依次添加。同一个备案网站的域名个数为2个及以上时，需要在网站备注栏注明"*个域名访问同一个网站"。新增网站和变更关键信息都需要重新进行真实性核验。中国公民请用身份证进行备案。个体工商户可以使用个人名义提交备案。新增主体，域名需全写在核验单上；新增网站，需填写此次新增的所有域名。已有备案号，网站新增加域名不需提供核验单。以个人名义进行备案，备案成功后，无法变更备案主体性质及名称。（如确认主体性质或主体名称需要变更，需要进行对原备案注销操作后重新进行备案）北京可进行备案的域名仅限：国际域名、国内域名和、cc域名，其他国别域无法进行备案。域名注册商是国外的用户，域名不能在北京提交备案。网站首页URL只能填写一个。个人网站服务内容不能选择"博客/个人空间"。新增接入的用户，需把此次接入的网站中所有域名都写在核验单中。如多个域名访问不同的网站则须操作新增网站，对不同的域名进行分开备案。，请勿在同一网站信息下填写，如指向同一网站需要在备注中说明。前缀明显不一致的域名，请分为不同的网站依次添加。同一个备案网站的域名个数为2个及以上时，需要在网站备注栏注明"*个域名访问同一个网站"。
企业性质的网站，核验单上需加盖对应单位的公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。备案期间网站不得打开，否则不予通过。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。辽宁地区个人用户，办公电话必须要填写。备案期间网站不得打开，否则不予通过。
主体性质为企业性质，《核验单》需加盖单位公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。域名注册所有人应与网站主办单位相一致。网站内容中若涉及医疗、药品、教育、文化等前置审批项目的，需提交前置审批文件原件。投资者或上级主管单位，应与主办单位性质（事业单位、政府机关、军队、社会团体）相一致。企业的应填写主办单位名称。网站首页url只能填写一个。吉林地区教育和卫生对应的主管部门，所下发的前置审批文件若无编号，可以填写"无"。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上域名注册所有人应与网站主办者相一致网站内容中若涉及医疗、药品、教育、文化等前置审批项目的，需提交前置审批文件原件。网站首页url只能填写一个。吉林地区教育和卫生对应的主管部门，所下发的前置审批文件若无编号，可以填写"无"。个人主体，网站内容不能选择&nbsp;博客/个人空间。
主办单位有效证件归属黑龙江省的企业最新的营业执照，其它性质的单位或组织要提供最新的有18位统一社会信用代码的证件。网站服务内容应与将来网站开通后实际提供内容一致。主体负责人必须为法人主体负责人应为单位或组织的法定代表人（如果因单位人事变动，或法人因特殊原因不能提供证件，单位可以委托现履行法人职责的领导或其他领导，同时上传委托书）。主体负责人应为单位或组织的法定代表人（如果因单位人事变动，或法人因特殊原因不能提供证件，单位可以委托现履行法人职责的领导或其他领导，同时上传委托书）。法定代表人如果是外籍，需要提供护照、台胞证、港澳通行证。如果主办单位名称、证件号码、主体负责人均发生变化，需要提交新备案申请。变更主体负责人时，均需要同时上传新的主体负责人证件；若变更主办单位名称，均需同时上传主办单位有效证件电子信息和真实性核验单。网站首页网址只能填报一个，如多个域名均指向同一个首页网址，则将指向该首页网址的域名一同填写到域名列表中。归属黑龙江省的个人主体需要提供有效身份证（身份证补办期间可以提供有效期内的临时身份证，正反两面）。通信地址要明确到街道名称、门牌号，门市名；写字楼名称、楼号、房间号；学校宿舍楼号、房间号；小区名称、楼号、单元号、房间号（以邮寄信息能够准确送达的标准填写）。如主办单位性质为个人的网站，不得以“某某有限公司”或个人姓名等命名。主办单位是个人，网站负责人可以是主办者，也可以是主办者委托的具备网站维护管理能力的专业人员。提交变更网站负责人申请时，应同时上传真实性核验单。
主体为企业性质，单位有效证件必须提供工商营业执照提交备案。学校类的民办非企业和律师事务所，没有营业执照的，组织机构代码证上必须明确写的是民办非企业，备案信息中对应：企业-组织机构代码。个体工商户没有字号的，主办单位名称填写实体店名称。新增备案、新增域名需将域名全部填写在核验单上；新增网站只需填写此次新增的域名即可。《核验单》需填写域名较多时，可是当调整《核验单》间距大小。核验授权书需要到上下载。法人进行当面核验的，可以不用提供授权书。网站主办者为企业、律师事务所，投资者或上级主管单位名称应填写其股东姓名。主体负责人和网站负责人不能是同一个人。法人是外籍人员，电话需填写国内的，不能国外的。电话确保可以接通，必须是法人手机号码。一代身份证不能进行备案，二代临时身份证有效期内可以使用。多个域名指向同一网站时，首页URL中只填写一个地址，将指向该首页网址的域名一同填写到域名列表中。网站服务内容为：网络媒体-网络新闻，备案前置审批专项应选择"新闻"选项。网站服务内容为：数字娱乐-网络游戏，备案前置审批专项应选择"文化"选项。网站服务内容为：数字娱乐-网络影视，备案前置审批专项应选择"广播电影电视节目"选项。网站服务内容为：其他-网络教育，备案前置审批专项应选择"教育"选项。涉及前置审批的，审批文件需提供原件。备案信息中的座机均需是天津本地的（即座机区号为022的）。网站主办者、主办单位有效证件类型选择"护照"选项，应向备案所在省通信管理局提交含有中外文对照的护照复印件。不同主体的网站负责人手机号码及证件号码不能重复（即：一个网站负责人只能备案一个主体）。网站主办者为企业性质的，必须使用营业执照副本进行核验新增备案、新增域名需将域名全部填写在核验单上；新增网站只需填写此次新增的域名即可。《核验单》需填写域名较多时，可是当调整《核验单》间距大小。一代身份证不能进行备案，二代临时身份证有效期内可以使用。多个域名指向同一网站时，首页URL中只填写一个地址，将指向该首页网址的域名一同填写到域名列表中。网站服务内容为：网络媒体-网络新闻，备案前置审批专项应选择"新闻"选项。网站服务内容为：数字娱乐-网络游戏，备案前置审批专项应选择"文化选项。网站服务内容为：数字娱乐-网络影视，备案前置审批专项应选择"广播电影电视节目"选项。网站服务内容为：其他-网络教育，备案前置审批专项应选择"教育"选项。涉及前置审批的，审批文件需提供原件。备案信息中的座机均需是天津本地的（即座机区号为022的）。个人必须要填写办公电话。个人网站，网站备注中需添加说明。网站主办者、主办单位有效证件类型选择"护照"选项，应向备案所在省通信管理局提交含有中外文对照的护照复印件。不同主体的网站负责人手机号码及证件号码不能重复。（即：一个网站负责人只能备案一个主体。）备注中标明“本网站是个人网站，不含有企业、单位等非个人网站的信息，若在核实中发现网站中含有企业、单位等信息，本人愿接受以虚假信息进行备案，注销网站，并将主体和域名加入黑名单的处罚”。
系统填写采用文字全角，半角，名称含括号的，括号内容也要正确。主体负责人必须为法人，且证件须为大陆证件，如非大陆居民可授权大陆负责人为主体负责人。主体性质为企业性质，《核验单》需加盖单位公章。个体工商户没有字号的，主办单位名称需填写实体店名称，并在备注中说明原因。核验单可以机打，只需签字盖章。网站首页URL只能填写一个。主办单位名称、证件号码需与原备案信息一致，若不一致需先到原接入商进行变更备案或注销后重新备案。必须使用营业执照（正副本均可，无年检章要求），可使用复印件加盖公章。临时身份证不能用于备案使用。身份证件号码中未满18周岁不提供备案服务。网站负责人必须为中国公民，且未满18周岁不提供备案服务。个人性质的备案，网站备注中需注明网站开办后用途等。临时身份证不能用于备案使用。身份证件号码中未满18周岁不提供备案服务。同一网站下若备案3个以上（含3个）前缀不同的域名，需备注“域名指向同一网站”。网站备案中需填写网站开办后的具体内容。
主体性质为企业性质，《核验单》需加盖单位公章。网站首页URL只能填写一个。个体工商户营业执照上没有字号、名称的，以单位备案，如客户有公章的主办单位名称填写必须和公章保持一致；如没有公章，主办单位名称填写实体店的名称，在备注中说明是个体工商户，《核验单》不用加盖公章。企业用户必须使用企业营业执照备案。企业性质备案，备案信息中"投资者或上级主管"必须填写主办单位名称。主体负责人与网站负责人不是同一人时，上传资料需填写网站负责人姓名并需要上传网站负责人的相关证件。企业、个人备案证件住所必须为河南本省，非本省的不能在河南进行备案（新备案用户）。个体工商户营业执照上没有字号名称并且无公章的以企业性质备案，主办单位名称以“个体工商户***”命名，例如：个体工商户张三，在备注中说明是个体工商户，不用加盖公章。客户有公章的主办单位名称填写和公章保持一致。网站首页URL只能填写一个。个人备案证件住所必须为河南本省，非本省的不能在河南进行备案（新备案用户）。
主体性质为企业性质，《核验单》需加盖单位公章。网站备案域名列表中的域名，必须全部填写在核验单上。核验单可以机打，只需签字盖章。通信地址要与办公电话，主办单位所在省、所在市一致。地址需要精确到门牌、号码。网站备案域名列表中的域名，必须全部填写在核验单上。核验单可以机打，只需签字盖章。通信地址要与办公电话，主办单位所在省、所在市一致。地址需要精确到门牌、号码。
网站备案域名列表中的域名，必须全部填写在核验单上。同一个备案网站的域名个数为2个及以上时，需要在网站备注栏注明"*个域名访问同一个网站"。如多个域名访问不同的网站则须操作新增网站，对不同的域名进行分开备案。主体性质为企业性质，《核验单》需加盖单位公章。个体工商户没有字号、字号为*、字号为负责人名字。备案需要以单位名义备案，备案信息中"主办单位名称"处填写负责人姓名，核验单上"网站主办者名称"处填写负责人姓名，姓名后面备注（个体工商户），名称和备注中间要留有一定的空隙，没有公章的需在主体备注中说明。网站首页url只能填写一个。主体负责人必须填写法人及其相关信息。若主体负责人不是法人，需提供法人授权委托书。网站备案域名列表中的域名，必须全部填写在核验单上。同一个备案网站的域名个数为2个及以上时，需要在网站备注栏注明"*个域名访问同一个网站"。如多个域名访问不同的网站则须操作新增网站，对不同的域名进行分开备案。网站首页url只能填写一个。
主体性质为企业性质，《核验单》需加盖单位公章。企业用户，必须使用企业营业执照提交备案。备案涉及的办公电话、手机号码必须属于上海本地号段。备案网站，必须属于上海本地企业或个人信息。如网站内容不属于上海地区企业或个人不能通过上海办理备案。上海网站服务内容不能选择"搜索引擎"和"即时通信"。备案涉及的办公电话、手机号码必须属于上海本地号段。备案网站，必须属于上海本地企业或个人信息。如网站内容不属于上海地区企业或个人不能通过上海办理备案。上海网站服务内容不能选择"搜索引擎"和"即时通信"。
主体性质为企业性质，《核验单》需加盖单位公章。修改任何备案信息，都需要重新邮寄核验单。浙江地区企业用户，必须使用企业营业执照进行备案。新增主体，域名需全写在核验单上；新增网站，需把此次新增的域名全部填写在核验单上；新增域名，域名需全部写在核验单上（已获取备案号和没有备案号的域名）。企业用户，主体负责人必须填写法人信息。个体工商户，字号为"*"号的个体户，用营业执照号码备案，主办单位名称填写法人姓名加括号个体工商户（如：张三（个体工商户））。网站名称可以为用户自己的个体经营实际的名称。网站首页URL只能填写一个。网站服务内容涉及"证券、期货、基金、投资咨询"相关信息，需由国务院证券监督管理机构认定，并提供证券业务资格相关证明复印件。办公电话必须与主办单位所在省，所在市一致。不受理国外主体的备案。有效证件电子件均需要原件扫描件。修改任何备案信息，都需要重新邮寄核验单。新增主体，域名需全写在核验单上；新增网站，需把此次新增的域名全部填写在核验单上；新增域名，域名需全部写在核验单上（已获取备案号和没有备案号的域名）。企业用户，主体负责人必须填写法人信息。个人主体，网站服务内容不能选择：网络购物、电子政务、电子商务、网上支付/网站银行、网络新闻、网络教育、博客/个人空间。网站首页URL只能填写一个。网站服务内容涉及"证券、期货、基金、投资咨询"相关信息，需由国务院证券监督管理机构认定，并提供证券业务资格相关证明复印件。个人主体的备案，网站备注中需注明网站开办后的主要用途。办公电话必须与主办单位所在省，所在市一致。不受理国外主体的备案。有效证件电子件均需要原件扫描件。
核验单可以机打，网站负责人签字处须手写签字盖章。网站首页URL只能填写一个。选择一个网站备案多个域名，须确保所有域名指向同一网站。没有工商字号的个体工商户以个人性质备案，并在备注中说明。网站备案域名列表中的域名，必须全部填写在核验单上，若一张核验单写不下，可分多张核验单填写，不可另附清单。个人用户"办公电话"项必须填写。个人性质的网站，核验单上需按手印。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。涉及前置审批，需邮寄前置审批文件复印件。可以使用临时身份证进行备案。首页URL需与域名列表中的一致。备案期间网站不得打开，否则不予通过。
主体性质为企业性质，《核验单》需加盖单位公章。使用临时身份证和一代身份证时，邮寄资料中需要增加临时身份证和一代身份证复印件。网站备案域名列表中的域名，须全部填写在核验单上。修改任何信息都需要重新邮寄核验单。单位名称及网站将来开办后所涉及到新闻、出版、教育、医疗保障、药品和医疗器械、文化、广播电影电视节目的需到相关主管部门办理前置或专项审批文件。若已办理前置审批手续，需在系统中上传前置审批文件原件扫描件；若不需办理，请在主体备注中说明：所联系主管部门的对应名称、对应联系人、电话及确认结果，并需要邮寄"担保书"，"担保书"中需写明：已咨询上级主管单位，本公司不需要办理，该公司网站不涉及前置审批里的内容，如果有违规情况，一切承担自行负责。前置审批文件，企业主体的需加盖单位公章，个人主体的需个人签字。高中以上学校（含高中）的需办理教育类前置审批。主办单位所属地必须为湖北省。个人性质证件住所地址非湖北省内，须提供"湖北省暂住证"。个体工商户，主办单位名称需填写实体店名称。备注中要说明为什么营业执照上没有字号、名称，另附一张纸说明签字和其他资料一起提供。域名所有人信息与备案主办者或法人信息一致。主办单位性质为非省级单位的网站，不得以“湖北”等字头命名。即主办单位有效证件上单位名称必须包含“湖北”。使用临时身份证和一代身份证时，邮寄资料中需要增加临时身份证和一代身份证复印件。网站备案域名列表中的域名，须全部填写在核验单上。修改任何信息都需要重新邮寄核验单。前置审批文件，企业主体的需加盖单位公章，个人主体的需个人签字。主办单位所属地必须为湖北省。个人性质证件住所地址非湖北省内，须提供"湖北省暂住证"。个人网站名称可以使用"xxx的个人网站"。个人性质主体，必须以域名所有人姓名进行备案。域名所有人信息与备案主办者信息一致。主办单位性质为非省级单位的网站，不得以“湖北”等字头命名。即主办单位有效证件上单位名称必须包含“湖北”。
主体性质为企业性质，《核验单》需加盖单位公章。新增备案需将域名全部填写在核验单上；新增域名、新增网站只需填写此次新增的即可。《核验单》上域名不能填写www。域名所有人信息与备案主办者信息需一致，域名所有人需与主办者全称或是法人姓名保持一致。企业主体，网站服务内容只能选择"单位门户网站"。个体户（营业执照上面是个人名称或**经营部的）以单位备案，没有公章，核验单备注中写明情况，然后盖上发票专用章。单位和个人证件住所必须是重庆地区的。主体负责人必须是法人及其基本信息，&nbsp;若网站负责人进行核验，需提供对应的授权书（法人提供的，需加盖单位公章）网站首页URL与网站域名需一一对应。涉及前置审批的，需要邮寄前置审批文件原件。指向不同网站的多个域名，需按不同网站信息分开备案，请勿在同一网站信息下填写,如指向同一网站需要在备注中说明。网站首页url只能填写一个企业用户网站名称必须与主办单位名称一致。新增备案需将域名全部填写在核验单上；新增域名、新增网站只需填写此次新增的即可。《核验单》上域名不能填写www。保持域名所有人信息与备案主办者信息一致个人主体的网站，服务内容必须选择个人博客空间。个人用户"办公电话"项必须填写。单位和个人证件住所必须是重庆地区的。网站首页URL与网站域名需一一对应。涉及前置审批的，需要邮寄前置审批文件原件。个人主体的备案，备注中需注明网站开办后主要用途。个人网站服务内容只能选择“博客/个人空间”。指向不同网站的多个域名，需按不同网站信息分开备案，请勿在同一网站信息下填写,如指向同一网站需要在备注中说明。网站首页url只能填写一个
主体性质为企业性质，《核验单》需加盖单位公章。此次要备案的网站备案域名列表中的域名，必须全部填写在核验单上，不能另附域名清单。首页URL需与域名列表一致。WAP、即时通信、网络广告、搜索引擎、网络游戏、电子邮箱、有偿信息、短信彩信服务为经营性质，需在当地管局办理增值电信业务许可证后选择以上内容。备案信息中，手机号码必须是能联系到本人的号码。办公电话要求必须是本地、本人的号码。此次要备案的网站备案域名列表中的域名，必须全部填写在核验单上，不能另附域名清单。首页URL需与域名列表一一对应。个人性质主体，网站服务内容不能选择"博客/个人空间"。四川管局不接受外省个人用户的网站备案WAP、即时通信、网络广告、搜索引擎、网络游戏、电子邮箱、有偿信息、短信彩信服务为经营性质，需在当地管局办理增值电信业务许可证后选择以上内容。备案信息中，手机号码必须是能联系到本人的号码。个人用户"办公电话"项必须填写，办公电话要求必须是本地、本人的号码。
主体性质为企业性质，《核验单》需加盖单位公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。当域名过多时，可单独附一张域名清单，域名清单需加盖对应接入商的公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。当域名过多时，可单独附一张域名清单，域名清单需加盖对应接入商的公章。个人主体，网站服务内容不得选择或填写"博客/个人空间"。办公电话必须填写。个人备案，如身份证不是贵州省的，需提供有效的贵州省居住证、暂住证等证明文件。
所有的证件必须提供原件扫描件。主体性质为企业性质，《核验单》需加盖单位公章。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。没有工商字号的个体工商户以个人性质备案；有字号的个体工商户，核验单上必须加盖公章。网站内容选择，电子政务、电子商务，网络购物经营性网站需办理经营许可证。未经相关部门前置审批的网站，不得开办博客内容的网站。网站首页URL只能填写一个。修改任何备案信息，均需提供核验单。备案用户手机号必须是湖南本地的，座机需真实有效。资料，均需提供原件扫描件，不能使用拍照的图片。申请接入操作时，核验单需填写此次接入网站的全部域名。主办单位性质为非国家级单位的网站，不得以“中国”、“中央”、“国家”、“中华”、“人大”、“人民”、“反腐”、“纪检”、“监察”、“信访”、“维权”、“投诉”等字头作为域名前缀出现。个人性质的网站域名同理。主体负责人必须填写法人信息，若主体负责人进行真实性核验，不需要提供授权书；若网站负责人进行真实性核验，需提供授权书。网站备案（已获取备案号和此次准备要提交的未获取备案号的网站域名）的域名，必须全部填写在核验单上。没有工商字号的个体工商户以个人性质备案网站内容选择，电子政务、电子商务，网络购物经营性网站需办理经营许可证。未经相关部门前置审批的网站，不得开办博客内容的网站。网站首页URL只能填写一个。修改任何备案信息，均需提供核验单。备案用户手机号必须是湖南本地的，座机需真实有效。上传的资料，均需提供原件扫描件，不能使用拍照的图片。申请接入操作时，核验单需填写此次接入网站的全部域名。主办单位性质为非国家级单位的网站，不得以“中国”、“中央”、“国家”、“中华”、“人大”、“人民”、“反腐”、&nbsp;“纪检”、“监察”、“信访”、“维权”、“投诉”等字头作为域名前缀出现。个人性质的网站域名同理。
核验单可以机打，网站负责人签字处须手写签字盖章。网站首页URL只能填写一个。选择一个网站备案多个域名，须确保所有域名指向同一网站。没有工商字号的个体工商户以个人性质备案，并在备注中说明。网站备案域名列表中的域名，必须全部填写在核验单上。律师事务所、会计师事务所按企业性质备案；民办非企业单位按社会团体性质备案；个体工商户若有商号的按企业性质备案，若无商号按个人性质备案。投资者或上级主管单位名称：如网站主办者为政府机关、事业单位、社会团体、军队、民办学校，投资者或上级主管单位名称应填写该单位实际上一级主管单位全称；如网站主办者为企业，投资者或上级主管应填写其法人或单位全称。福建管局只受理在福建省注册的公司备案，不接受外省公司在福建管局备案。如为外省单位在福建的分支机构，需提供已在福建注册的分支机构营业执照。核验单可以机打，网站负责人签字处须手写签字盖章。网站首页URL只能填写一个。选择一个网站备案多个域名，须确保所有域名指向同一网站。没有工商字号的个体工商户以个人性质备案，并在备注中说明。网站备案域名列表中的域名，必须全部填写在核验单上，若一张核验单写不下，可分多张核验单填写，不可另附清单。个人用户"办公电话"项必须填写。
主体性质为企业性质，《核验单》需加盖单位公章。核验单可以机打，并按要求签字盖章。备案域名数量要求：企业主体，前缀不同的域名超过31个（包括31个）时，须提供每个域名的网站建设方案书、双方接入合同、组织机构代码证工商营业执照、网站负责人身份证以复印件，网站负责人单位授权书、网站建设方案书以原件，照片以打印件（网站建设方案书客户自己写，无格式要求）。主办单位所属地必须为广东省。备案填写的办公电话、手机必须为广东地区的号码。域名所有人信息与备案主办单位名称必须一致。广东地区客户需要提供备案涉及的全部域名的域名证书复印件（单位需加盖公章）。企业用户必须使用企业营业执照备案，没有工商字号的个体工商户需以个人名义备案，备注中写上该主体是个体工商户，注册号是XXXXXX；如果个体工商户没有公章的，可以不盖公章，须在备注中说明是个体户。网站服务内容选择"其他"的，需在备案栏中加以说明。网站内容涉及以下信息时，需提供前置审批文件。基础应用：即时通信/搜索引擎/综合门户；其他：网上求职/网站建设/WAP；数字娱乐：网络图片/网络软件/下载电子政务；电子商务：网络购物/网上支付/网上银行；网络媒体：网络新闻/网络广告/信息/单位门户网站。如证件上盖的是民政局的章，单位性质需选择社会团体。网站内容凡是涉及网络购物，需办理经营许可证。办理经营性许可证的咨询电话：020-87692337，要先办理非经营性备案通过才能办经营许可证。广东地区公司和个人均不能备案论坛类网站。网站首页URL只能填写一个。单位性质：如网站负责人和主体负责人不是同一人，需要上传网站负责人的相关证件及照片，协议、核验单签网站负责人的名字，并且向管局邮寄授权书原件。已备案网站，申请新增接入时，需保证网站主页底部的中央位置正确标明备案编号，并在备案编号下方链接工业和信息化部备案管理系统网址。核验单可以机打，并按要求签字盖章。备案域名数量要求：个人主体，前缀不同的域名数超过4个（包括4个）须提供每个域名的网站建设方案书、双方接入合同、组织机构代码证工商营业执照、网站负责人身份证以复印件，网站负责人单位授权书、网站建设方案书以原件，照片以打印件（网站建设方案书客户自己写，无格式要求）。当主体性质为个人时，须在网站备注中填写网站开办后的主要内容，并填写"本人承诺本网站是个人网站，未含企业、单位等非个人网站的信息，一旦超出备案项目提供服务的，愿承担关闭网站并注销备案（列黑名单）等相应处理。"主体性质为个人，《核验单》需手写以下内容："本人已履行网站备案信息当面核验手续，承认网站备案信息和核验记录真实有效，承诺本网站是个人网站，未含企业、单位等非个人网站的信息，承诺网站备案信息一旦发生变更，将及时进行更新，填报虚假备案信息、未履行备案变更手续、超出备案项目提供服务的，愿承担关闭网站并注销备案（列黑名单）等相应处理。"已备案网站，申请新增接入时，需保证网站主页底部的中央位置正确标明备案编号，并在备案编号下方链接工业和信息化部备案管理系统网址。备案填写的办公电话、手机必须为广东地区的号码。域名所有人信息与备案主办单位名称必须一致。广东地区客户需要提供备案涉及的全部域名的域名证书复印件。没有工商字号的个体工商户需以个人名义备案，备注中写上该主体是个体工商户，注册号是XXXXXX；如果个体工商户没有公章的，可以不盖公章，须在备注中说明是个体户。网站服务内容选择"其他"的，需在备案栏中加以说明。网站内容涉及以下信息时，需提供前置审批文件。基础应用：即时通信/搜索引擎/综合门户；其他：网上求职/网站建设/WAP；数字娱乐：网络图片/网络软件/下载电子政务；电子商务：网络购物/网上支付/网上银行；网络媒体：网络新闻/网络广告/信息/单位门户网站。个人性质的网站，服务内容不能涉及"网络……"，例网络购物。个人不能备案论坛类网站。网站首页URL只能填写一个,注明详细的网站内容。
网站备案域名列表中的域名，必须全部填写在核验单上。网站首页URL只能填写一个。主办单位性质为企业或社会团体时，填写主办单位全称。主办单位性质为政府机关，事业单位则填写其上级主管单位全称。备案信息中填写的手机号码必须是广西本地手机号码。网站负责人与主体负责人一致时，座机可以为同一个；若网站负责人与主体负责人不一致时，座机需不一致。手机号码不能重复。申请接入操作时，若单位名称变更（仅限本单位名称变更），需进行真实性核验（需提供工商局变更证明复印件）。企业需提供单位有效证件、主体负责人（上传资料为主体负责人时）或网站负责人（上传资料为网站负责人时）有效身份证件复印件（均加盖公章和签字确认）。核验单有效期为6个月。凡主办单位名称包含"律师事务所"关键字且主办单位名称中不包含"公司"关键字，则主办单位性质必须选择企业，提供组织机构代码证备案。网站名称必须与实际网站开通后的网站名称一致。原个人备案不能变更为企业备案，企业备案不能变更为个人备案，如需变更，需注销原备案后重新备案。企业用户若不是法人进行真实性核验，需提供法人授权的委托书。同一网站备案多个域名的，域名前缀必须一致，如不一致必须分开对不同域名进行新增网站操作。中、英文域名必须分开备案。网站备案域名列表中的域名，必须全部填写在核验单上。网站首页URL只能填写一个。个人主体，不能开通博客网站。备案信息中填写的手机号码必须是广西本地手机号码。网站负责人与主体负责人一致时，座机可以为同一个；若网站负责人与主体负责人不一致时，座机需不一致。手机号码不能重复。个人主体的网站，网站名称可以涉及到自己的姓名。申请接入操作时，若单位名称变更（仅限本单位名称变更），需进行真实性核验（需提供工商局变更证明复印件）。个人需提供签字确认的有效身份证件复印件。核验单有效期为6个月。个人性质的网站，备注需注明"本网站是个人网站，不含有企业、单位等非个人网站的信息，若在核实中发现网站中含有企业、单位等信息，本人愿接受以虚假信息进行备案，注销网站，并将主体和域名加入黑名单的处罚"网站名称必须与实际网站开通后的网站名称一致。原个人备案不能变更为企业备案，企业备案不能变更为个人备案，如需变更，需注销原备案后重新备案。同一网站备案多个域名的，域名前缀必须一致，如不一致必须分开对不同域名进行新增网站操作。中、英文域名必须分开备案。
网站备案域名列表中的域名，必须全部填写在核验单上。（本次要备案的域名）主体信息发生变更时，需提供《核验单》原件两份、当面核验照片（统一背景前的网站负责人照片）、主体以及网站负责人的有效证件复印件。核验单可以机打，只需签字盖章。网站服务内容不能选择即时通信、搜索引擎、WAP、博客，若网站涉及这几项内容，需提供相关部门审批同意文件的复印件。主体负责人必须填写法人及其相关信息。（若网站负责人为其他人，网站负责人进行当面核验即可）。需提供营业执照副本原件（如复印件需加盖公章）扫描件&nbsp;主体负责人和网站负责人身份证正反面扫描。网站备案域名列表中的域名，必须全部填写在核验单上。（本次要备案的域名）主体信息发生变更时，需提供《核验单》原件两份、当面核验照片（统一背景前的网站负责人照片）、主体以及网站负责人的有效证件复印件。核验单可以机打，只需签字盖章。网站服务内容不能选择即时通信、搜索引擎、WAP、博客，若网站涉及这几项内容，需提供相关部门审批同意文件的复印件。个人主体性质，网站服务内容包含旅游内容的，需办理前置审批，并提供前置审批核准文件原件。需提供营身份证正反面原件扫描件。
网站备案域名列表中的域名，必须全部填写在核验单上。网站首页URL只能填写一个。主办单位性质为企业或社会团体时，填写主办单位全称。主办单位性质为政府机关，事业单位则填写其上级主管单位全称。备案信息中填写的手机号码必须是广西本地手机号码。网站负责人与主体负责人一致时，座机可以为同一个；若网站负责人与主体负责人不一致时，座机需不一致。手机号码不能重复。申请接入操作时，若单位名称变更（仅限本单位名称变更），需进行真实性核验（需提供工商局变更证明复印件）。企业需提供单位有效证件、主体负责人（上传资料为主体负责人时）或网站负责人（上传资料为网站负责人时）有效身份证件复印件（均加盖公章和签字确认）。核验单有效期为6个月。凡主办单位名称包含"律师事务所"关键字且主办单位名称中不包含"公司"关键字，则主办单位性质必须选择企业，提供组织机构代码证备案。网站名称必须与实际网站开通后的网站名称一致。原个人备案不能变更为企业备案，企业备案不能变更为个人备案，如需变更，需注销原备案后重新备案。企业用户若不是法人进行真实性核验，需提供法人授权的委托书。同一网站备案多个域名的，域名前缀必须一致，如不一致必须分开对不同域名进行新增网站操作。中、英文域名必须分开备案。主体性质为企业性质，《核验单》需加盖单位公章。常见问题
裸金属服务器（BareMetalServer）提供单租户专属的物理服务器，通过卓越的计算性能，满足核心应用场景对高性能及稳定性的需求，同时可以和VPC等其他云产品灵活结合使用，结合了传统托管主机带来的稳定性能与云上资源高度弹性的优势。裸金属服务器的开通是自助完成的，您只需要指定具体的服务器类型、镜像、所需要的网络配置，我们将会在最短的时间内帮您开通。
弹性云服务器由多个租户共享物理资源，而裸金属服务器的资源归用户独享。对于关键类应用，使用裸金属服务器效果更好。对于性能要求较高的业务，使用裸金属服务器更为合适、性价比更高。
裸金属服务器提供更加稳定、强大的性能，因此适用于对性能要求很高的应用。典型应用场景包括：关系数据库和NoSQL数据库、内存分析解决方案、分布式高速缓存系统、大规模在线/移动广告平台、大数据类应用、游戏、3D渲染、通信平台、移动商务平台。
通常在72小时之内开通成功。
“删除”是指删除已申请的裸金属服务器，删除时可以选择同时删除弹性IP。如果不选择，则会保留，您需要单独删除弹性IP。
这是一种裸金属服务器的中间状态。说明服务器已被正常删除，在该状态下的裸金属服务器，不能对外提供业务，将会在短时间内从系统中彻底清除。
删除过程中的裸金属服务器不能被再次开通，彻底被清除的裸金属服务器可以再次开通使用。
裸金属服务器配置完成后，我们会以邮件方式通知您该服务器的初始密码。首次登录服务器后，请及时修改密码。系统无法获取您的新密码，所以需要您妥善保管。
不同帐号下的裸金属服务器内网是不通的。
由于您可以自定义网络，所以裸金属服务器是否在一个子网，完全由您来控制。
可以。您创建的VPC，可能存在多个网段，裸金属服务器和弹性云服务器在同一个网段时进行二层通信，在不同网段时进行三层通信。此外，与弹性云服务器通信时必须配置安全组规则。由于裸金属服务器暂不支持安全组配置，所以只需在与弹性云服务器关联的安全组中配置相应的规则，对裸金属服务器IP进行放通操作。
暂不支持。当前仅能使用裸金属服务器本地磁盘。
当前裸金属服务器本地磁盘仅支持SATA及SAS磁盘。
裸金属服务器需要使用我们提供的操作系统，不能自行添加或升级，操作系统可以打补丁。
暂时不支持更换操作系统。
当前提供的Linux操作系统是命令行界面，用户如果需要可以自己设置图形管理。
裸金属服务器操作系统没有自带，FTP需要用户自行安装和配置。
在弹性IP资源不足的情况下，用户通过管理控制台创建一台绑定弹性IP的裸金属服务器，此时裸金属服务器创建成功，但是绑定弹性IP失败。这种情况下，裸金属服务器申请状态栏显示任务失败，但裸金属服务器列表页面显示服务器创建成功。
裸金属服务器列表中呈现的是创建成功的裸金属服务器列表和详情。申请状态栏显示的是创建裸金属服务器任务的执行状态，包括创建裸金属服务器任务的各个子状态，例如创建裸金属服务器资源、绑定弹性IP等子任务，只有所有子任务全部成功时，任务才会成功，否则都是失败任务。对于裸金属服务器资源创建成功，但是绑定弹性IP失败的情况而言，该任务处理失败。对于成功创建的裸金属服务器资源，会短时间内出现在裸金属服务器列表中，待系统完成回退操作后，将会在列表自动消失。
当您绑定服务商账号成功后，您在华为云官网www.huaweicloud.com注册账号时，签署的所有协议中，由华为/华为云承担的责任全部转由您选择的服务商承担。您在产品及服务使用过程中的一切问题请由您的代理方为您解决。您不再享有由华为提供的包括但不限华为云网站现有的、不时更新的或新发布的云服务产品相对应的服务条款、《服务等级协议（SLA）》和《隐私权政策》以及其他各项规则、制度规定的权利，但是您必须承担对应责任。因华为对您使用商业合作伙伴平台期间与您的服务商产生的纠纷是免责的，所以您在绑定服务商账号前一定确保服务商已与您签署了销售或服务协议。如果您与您的服务商进行解除销售或服务协议时，请确保您的数据进行了备份，在没有您服务商确认您已与其解除协议的情况下，华为将为您提供直接服务。您可通过您的服务商获取华为云商业合作伙伴平台的操作指导及云服务的技术培训。
云容器引擎（CloudContainerEngine）是为开发者、合作伙伴提供开发、部署、托管的容器应用平台，帮助用户快速、低成本地实现业务创新，缩短应用上市周期。
CCE支持创建容器集群和共享集群。容器集群用于运行Docker应用，在创建Docker应用前，您需要先创建容器集群，容器集群是私有集群，对其他用户不可见，可以保证您的容器应用与其他用户的应用之间更安全的隔离。共享集群可供用户免费体验，方便用户更快的体验CCE服务。每个用户最多能够创建2个集群。集群由一个或多个节点组成，每个集群最多15个节点。当前，CCE使用的Docker版本已从1.11.0升级到1.11.2。Docker版本的升级，不涉及已经创建好的集群。老集群所用的Docker版本仍为1.11.0。
图形化编排工具可以通过拖拽的方式完成复杂应用的编排及拓扑设计，并且可以保存为应用模板，使用模板可以直接创建多个容器组成的复杂应用，简化应用部署难度，提升效率。
服务定义了实例以及访问实例的途径，比如单个稳定的IP地址和相应的DNS名称。在创建应用时会指定服务名称。服务的类型有三种，分别是InternalService、NodePort、LoadBalancer。InternalService类型的服务只能在集群内部访问。NodePort、LoadBalancer类型的服务支持从内部和外部访问。
命名空间类似于资源名称的前缀，帮助不同的应用共享同一个集群，例如防止不相关的应用之间的名称冲突。
Docker镜像是一个模板。例如，一个Docker镜像可以包含一个完整的ubuntu操作系统环境，里面仅安装了用户需要的应用程序及其依赖文件。Docker镜像用于创建Docker容器。Docker本身提供了一个简单的机制来创建新的镜像或者更新已有镜像，您也可以下载其他人已经创建好的镜像来使用。镜像分为示例镜像、我的镜像和Docker官方镜像。示例镜像为CCE服务内置示例镜像，任何用户均可使用。我的镜像为CCE镜像仓库中的镜像，为私有镜像。私有镜像是由用户上传的仅供个人使用的个人镜像。Docker官方镜像为第三方公共仓库中的镜像。CCE支持从第三方公共仓库中下载使用镜像。
每一个节点对应一台虚拟机，容器应用运行在节点上。节点上运行着代理程序（kubelet），用于管理节点上运行的容器实例。节点规格最小是CPU为1core，内存为2048MB；最大是CPU为32core，内存为128GB。
环境变量是指容器运行环境中设定的一个变量，您可以在创建容器模板时设定不超过30个的环境变量。
数据卷是指将宿主机（节点）的某个绝对路径挂载到容器的某个路径，与Docker命令的“-v”参数效果相同，通过挂载可以实现宿主机和容器之间的共享。下面的Docker命令启动一个名称为frontend的容器，将宿主机的/src/webapp目录挂载到容器的/opt/webapp目录中。在CCE中，您可以在使用图形化编排工具的时候设置挂载点，将宿主机的目录挂载到容器中。
mcore是CPU使用单位，为千分之一个核。通常容器应用的CPU用量以mcore为单位衡量。
CCE服务常见的使用场景如下：适用于传统IT架构渐进式转型的场景，实现单一架构解耦拆分为多个容器，系统更灵活，轻松应对市场变化。适用于业务上线效率低下的场景，实现容器镜像贯穿从开发到运维各环节，统一环境配置，业务快速上线。适用于访问量有明显波峰、波谷的应用，实现自动弹性伸缩，系统秒级自动弹性扩容，快速响应并发高峰。适用于系统IT资源浪费严重的场景，使平均负载维持较高水平，每分钱都真正支持业务。适用于复杂系统运维压力大的场景，基于容器服务实现自动化运维，基于实时日志快速问题定位，界面化操作和短信通知实现24小时自动监控。
会过期，认证文件默认有效时间为一年，超过期限需要重新下载认证文件，然后配置Docker客户端。
使用CCE服务不收取任何额外费用。您只需为您使用的用于计算，存储和网络的资源付费。
集群删除之后，部署在集群上的应用也会同步删除，无法恢复，请慎重删除集群。
CCE应用部署失败的可能原因有以下几点：应用所需资源超过集群可用资源。CCE使用的Docker版本为1.11.2，如果您使用的镜像不兼容Docker1.11.2，则会导致应用部署失败。应用模板中配置的镜像地址有误，导致无法下载镜像。集群所在的VPC安全组未添加可访问外部的出方向规则，导致无法下载镜像。关于为安全组添加安全组规则可参考“帮助中心&gt;虚拟私有云&gt;用户指南&gt;快速入门&gt;配置无需访问公网的弹性云服务器的VPC&gt;为安全组添加安全组规则”。应用部署在集群上，该集群所在VPC子网的DNS地址配置有误，导致无法下载镜像。关于修改子网网络信息可参考“帮助中心&gt;虚拟私有云&gt;用户指南&gt;管理&gt;修改子网网络信息”。
当节点的实际状态发生变化时，CCE界面上的节点状态可能不会立即更新（延迟大概2分钟），而该节点上的应用状态能够实时更新，所以会出现节点状态与应用状态不一致的现象。
当容器镜像的tag不是latest时，用户更新该容器镜像但没有更改镜像的tag，则使用该镜像创建应用时，就不会重新拉取更新后的镜像，需要您在更新镜像的同时更改镜像的版本tag。
云容器引擎提供了Web化的服务管理平台，即管理控制台和基于HTTPS请求的API（Applicationprogramminginterface）管理方式。API方式用户可以通过调用API访问云容器引擎，具体操作请参见《云容器引擎接口参考》。管理控制台方式如果用户已注册云容器引擎，可直接登录管理控制台，从主页选择“云容器引擎”。
弹性云服务器弹性云服务器是由CPU、内存、镜像、云硬盘组成的一种可随时获取、弹性可扩展的计算服务器，同时它结合虚拟私有云、虚拟防火墙、数据多副本保存等能力，为您打造一个高效、可靠、安全的计算环境，确保您的服务持久稳定运行。在云容器引擎中一个节点就是一台弹性云服务器和两块云硬盘，您可以在创建节点时指定弹性云服务器的规格。云硬盘可以将云硬盘挂载到云服务器，并可以随时扩容云硬盘容量。在云容器引擎中一个节点就是一台弹性云服务器和两块云硬盘，您可以在创建节点时指定云硬盘的大小。虚拟私有云为弹性云服务器提供一个逻辑上完全隔离的专有网络，您还可以在VPC中定义安全组、VPN、IP地址段、带宽等网络特性。用户可以通过VPC方便地管理、配置内部网络，进行安全、快捷的网络变更。同时，用户可以自定义安全组内与组间弹性云服务器的访问规则，加强弹性云服务器的安全保护。在云容器引擎中创建的集群需要运行在虚拟私有云中，从而保障网络安全。弹性负载均衡云容器引擎支持将创建的应用对接到弹性负载均衡，从而提高应用系统对外的服务能力，提高应用程序容错能力。对象存储服务对象存储服务是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力，包括：创建、修改、删除桶，上传、下载、删除对象等。云容器引擎使用对象存储服务存储用户上传的私有镜像。云审计服务云审计服务（CloudTraceService），为您提供云服务资源的审计操作记录，审计信息包括时间、资源对象、资源ID、请求源IP和开放API发起的云服务资源操作请求以及每次响应的结果，供您查询、审计和回溯使用。当前CTS记录CCE的操作有：<ulid="cce_faq_00022__ul26538279212335"><liid="cce_faq_00022__li902917212328">CCE资源的创建CCE资源的更新CCE资源的删除说明：CCE资源包括集群、节点、应用、图形化编排和容器镜像。
集群节点显示不可用，通过linux用户登录node节点执行<b>servicedockerstatuslevel=fatalmsg="Errorstartingdaemon:errorinitializinggraphdriver:BaseDeviceUUIDandFilesystemverificationfailed.exitstatus2<h4class="sectiontitle">可能原因</h4><ulid="cce_faq_00023__ul1666938516553"><liid="cce_faq_00023__li5804315916553">应用挂载在容器内的路径包含“/”、“/var”、“/var/lib”或“/var/lib/docker”。</li><liid="cce_faq_00023__li52279922165515">应用部署在容器中，其产生的业务数据导致容器磁盘空间被占满。</li></ul><h4class="sectiontitle">恢复指导</h4><ulid="cce_faq_00023__ul14948239152950"><liid="cce_faq_00023__li42746742152950">重启node节点虚拟机，容器会在重启过程中迁移到其它节点。</li><liid="cce_faq_00023__li62334408152954">如果是由于容器磁盘空间被占满，可以扩容对应磁盘。</li></ul><h4class="sectiontitle">建议</h4><ulid="cce_faq_00023__ul2970351165528"><liid="cce_faq_00023__li33198767165537">尽量不要将包含“/”、“/var”、“/var/lib”或“/var/lib/docker”的目录挂载到容器内。</li><liid="cce_faq_00023__li20634201165537">不要将业务数据放在容器内，将业务数据放在外部数据卷中；即使放在容器内也需要对数据定期备份或清理，避免占满磁盘空间。</li><liid="cce_faq_00023__li51490088165537">实时监控节点磁盘使用量，避免磁盘空间被占满。</li>
应用挂载在容器内的路径包含“/”、“/var”、“/var/lib”或“/var/lib/docker”。应用部署在容器中，其产生的业务数据导致容器磁盘空间被占满。
重启node节点虚拟机，容器会在重启过程中迁移到其它节点。如果是由于容器磁盘空间被占满，可以扩容对应磁盘。
尽量不要将包含“/”、“/var”、“/var/lib”或“/var/lib/docker”的目录挂载到容器内。不要将业务数据放在容器内，将业务数据放在外部数据卷中；即使放在容器内也需要对数据定期备份或清理，避免占满磁盘空间。实时监控节点磁盘使用量，避免磁盘空间被占满。
会过期，认证文件默认有效时间为一年，超过期限需要重新上传认证文件，选择“总览&gt;认证&gt;上传访问密钥（已过期）”。
C
K-O
P-T
Y
参见
mcore是CPU使用单位，为千分之一个核。通常容器应用的CPU用量以mcore为单位衡量。
容器集群用于运行Docker应用，在创建Docker应用前，您需要先创建容器集群，容器集群是私有集群，对其他用户不可见，可以保证您的容器应用与其他用户的应用之间更安全的隔离。
云容器引擎（CloudContainerEngine）是为开发者、合作伙伴提供开发、部署、托管的容器应用平台，帮助用户快速、低成本地实现业务创新，缩短应用上市周期。
<h5>2、创建集群</h5><h5>3、使用Docker官方镜像创建容器应用Wordpress</h5><h5>4、使用私有镜像创建容器应用1—制作镜像</h5><h5>5、使用私有镜像创建容器应用2—上传镜像</h5><h5>6、使用私有镜像创建容器应用3—Guestbook</h5>
<h5>3、使用Docker官方镜像创建容器应用Wordpress</h5><h5>4、使用私有镜像创建容器应用1—制作镜像</h5><h5>5、使用私有镜像创建容器应用2—上传镜像</h5><h5>6、使用私有镜像创建容器应用3—Guestbook</h5>
<h5>4、使用私有镜像创建容器应用1—制作镜像</h5><h5>5、使用私有镜像创建容器应用2—上传镜像</h5><h5>6、使用私有镜像创建容器应用3—Guestbook</h5>
<h5>5、使用私有镜像创建容器应用2—上传镜像</h5><h5>6、使用私有镜像创建容器应用3—Guestbook</h5>
<h5>6、使用私有镜像创建容器应用3—Guestbook</h5>
云目录服务（CloudCatalogService）是一个对可在华为云上进行部署的IT服务进行集中管理、分配和使用的服务。云目录服务的用户分为管理员和最终用户。利用云目录服务，管理员可以集中管理和部署IT服务，并将资源合理、有效、高效地分配给需要的最终用户。同时让最终用户能够快速查找和启用其需要的、已获批准的IT服务，简化部署和整合IT服务的成本。云目录服务的基本组成部分有：产品、产品组合、版本、授权、约束、产品实例、配额管理。云目录服务的架构如所示。
云目录服务本身不收取费用。但会按创建的产品实例按照所使用的资源收取资源的费用。如产品实例为云服务器实例时，收取云服务器的费用。
可以。您可以根据需求将产品1和其他产品添加到产品组合A中分配给一些用户，还可以将产品1和另外一些产品添加到产品组合B中分配给另一些用户，来满足产品的组合包装和灵活分配。
启动约束是通过云目录服务代理没有产品资源权限的用户来创建产品实例。
管理员将产品的新版本发布后，所有已获得该产品使用权限的最终用户即可以直接查看和使用。
产品实例创建后，不会自动更新版本，可以使用新版本重新创建实例。
您默认可以创建25个产品组合，25个产品，200个产品实例。每个产品可以创建50个版本，每个产品组合可以创建25个约束。如果系统提供的默认配额不能满足您的需求，请联系管理员进行处理。
产品的剩余配额是管理员为最终用户分配的该产品可创建的产品实例数，但它受可创建产品实例的总数的限制（默认额度为200）。当企业内所有用户已创建产品实例的总数超过额度限制时，无法再创建新的产品实例。
可能的原因有以下几种：产品在别的产品组合中被授权给该用户。用户在该产品上的已使用额度不为零。数据清理需要花费大约1～10分钟，请耐心等待。
当您的浏览器是IE9时，创建版本时可能无法使用导入模板功能，请参考如下步骤修改浏览器默认属性后重试。在浏览器主界面，单击&nbsp;。选择“Internet选项”。单击选择“安全”页签。单击“Internet”。（可选）单击“默认级别”按钮。如果安全级别显示为“自定义”，请将设置还原为默认级别。滑动安全级别滑块，将安全级别调到“中”级别。单击“应用”按钮。单击“自定义级别”。将“对未标记为可安全执行脚本的ActiveX控件初始化并执行脚本”设置为“提示”。单击“确定”。
C
S
Y
参见
最终用户需要在企业云上进行部署并使用的IT服务（IT服务是指开发平台、数据库软件，完整的多层应用程序架构等）。
IT产品及配置信息的集合。使用产品组合有助于管理产品配置、管理使用人员、管理使用方式。
帮助管理员向最终用户授予产品组合的访问权限，让最终用户能够浏览、快速获取并启动该产品组合中的产品。
系统为产品提供了启动约束，即通过云目录服务为没有产品资源权限的用户启动产品。用来让用户使用产品的同时，限制用户的权限，方便企业进行管理。
对可在华为云上进行部署的IT服务进行集中管理、分配和使用的服务。
不同业务类型的加速配置存在一定差异，当前支持以下方式：网站加速文件下载加速点播加速直播加速（内测中，支持线下配置，需要提交工单申请）
不支持。
不可以。如果域名审核未通过，那表明该域名未通过工信部备案。此类域名不允许接入CDN。不过对于正在备案中未审核通过的域名，华为云后台将会定期扫描，如果审核通过后，CDN状态将自动切换到已开启状态。
不可以。用户访问加速域名的网站资源，当CDN节点上没有缓存对应的内容时，CDN节点会回到源站获取，然后再返回给用户。如果源站域名与加速域名一致，将会造成访问请求反复解析到CDN节点，导致CDN节点无法回源拉取请求内容。
CDN是对域名进行加速，当启用CDN加速后，加速域名下的所有文件的访问请求都将转向CDN节点。
当CDN节点没有缓存用户请求的内容时，会回源拉取资源。当CDN节点上缓存的内容已过期时，会回源拉取资源。
CDN节点的缓存内容不是实时更新的，只有当缓存内容到期后才能回源拉取最新的内容。您可以通过设置缓存过期时间规则或者提交刷新请求来实现缓存内容的更新。
缓存刷新源站内容更新后，希望用户可以获取到最新资源，CDN租户可以通过提交刷新请求将CDN节点上指定的缓存内容强制过期。当用户再次访问时，CDN节点将回源获取已更新内容返回给用户并在节点缓存最新资源。缓存预热提交指定资源的缓存预热请求后，对应源站资源将分发到CDN节点，当用户发起访问请求时，可以直接从CDN节点获取，有效地降低了回源率。
B<h5>边缘节点</h5><p>边缘节点也称CDN节点、Cache节点等，指距离最终用户接入具有较少的中间环节的网络节点，对最终接入用户有较好的响应能力和连接速度。</p>C<h5>CNAME</h5><p>参见。</p><h5>CNAME记录</h5><p>CNAME记录是指域名解析中的别名记录（CanonicalName），允许将多个域名映射到同一个域名。</p><h5>CNAME域名</h5><p>用户在管理控制台添加加速域名后，系统会为加速域名分配一个对应的“CNAME域名”（域名形式为：*.c.cdnhwc1.com）。用户需要在域名服务商处，配置一条CNAME记录，将自己的域名作CNAME指向这个*.c.cdnhwc1.com的域名，记录生效后，域名解析的工作就正式转向CDN服务，该域名所有的请求都将转向CDN节点。</p><h5>CDN</h5><p>参见。</p>D<h5>DNS</h5><p>参见。</p>
C<h5>CNAME</h5><p>参见。</p><h5>CNAME记录</h5><p>CNAME记录是指域名解析中的别名记录（CanonicalName），允许将多个域名映射到同一个域名。</p><h5>CNAME域名</h5><p>用户在管理控制台添加加速域名后，系统会为加速域名分配一个对应的“CNAME域名”（域名形式为：*.c.cdnhwc1.com）。用户需要在域名服务商处，配置一条CNAME记录，将自己的域名作CNAME指向这个*.c.cdnhwc1.com的域名，记录生效后，域名解析的工作就正式转向CDN服务，该域名所有的请求都将转向CDN节点。</p><h5>CDN</h5><p>参见。</p>D<h5>DNS</h5><p>参见。</p>
D
F-J
K-O
U-Z
边缘节点也称CDN节点、Cache节点等，指距离最终用户接入具有较少的中间环节的网络节点，对最终接入用户有较好的响应能力和连接速度。
参见。
CNAME记录是指域名解析中的别名记录（CanonicalName），允许将多个域名映射到同一个域名。
用户在管理控制台添加加速域名后，系统会为加速域名分配一个对应的“CNAME域名”（域名形式为：*.c.cdnhwc1.com）。用户需要在域名服务商处，配置一条CNAME记录，将自己的域名作CNAME指向这个*.c.cdnhwc1.com的域名，记录生效后，域名解析的工作就正式转向CDN服务，该域名所有的请求都将转向CDN节点。
参见。
参见。
参见。
CNAME记录是指域名解析中的别名记录（CanonicalName），允许将多个域名映射到同一个域名。
用户在管理控制台添加加速域名后，系统会为加速域名分配一个对应的“CNAME域名”（域名形式为：*.c.cdnhwc1.com）。用户需要在域名服务商处，配置一条CNAME记录，将自己的域名作CNAME指向这个*.c.cdnhwc1.com的域名，记录生效后，域名解析的工作就正式转向CDN服务，该域名所有的请求都将转向CDN节点。
参见。
参见。
参见。
加速域名是用户提供的需要使用CDN加速服务的域名，域名是便于记忆和沟通的一组服务器的地址，应用于网站，电子邮件，FTP等。
内容分发网络（ContentDeliveryNetwork，CDN）是构建在现有的互联网基础之上的一层智能虚拟网络，通过在网络各处部署节点服务器，实现将源站内容分发至全国所有节点，使用户可以就近获得所需的内容。
CNAME是一个别名的正规名，也称作规范名字。CNAME记录允许将多个域名映射到同一台计算机。
TCP/IP网络中的功能实体，通过该服务器，用户只通过域名就可以访问对应的服务器。在TCP/IP网络中域名与IP地址一一对应，域名便于记忆，但网络中的服务器间只能通过IP地址相互识别，域名和IP地址之间的转换称为域名解析，域名解析需要通过专门的域名解析服务器来完成，DNS就是进行域名解析的服务器。
源站指用户的业务服务器，即被加速分发数据的来源。
服务是一个开放性的监控平台，即可提供资源的监控、告警、通知等服务。目前可以监控、、、、、、、、、、、、、、的相关指标。用户可以通过这些指标设置告警规则和通知策略，以便及时了解各产品服务的实例资源运行状况和性能。云监控服务主要由如所示三部分组成。
服务目前免费提供，无需付费。
云监控目前支持监控的指标，如所示。
目前云监控支持三种告警状态：告警、正常、数据不足。当告警规则被关闭时，告警状态为无效，界面显示为“已停用”。数据不足指告警规则最近的一个监控周期内没有相应的指标数据，通常是由于相应服务实例被删除或状态异常导致的。
告警通知是告警在某个告警状态触发时所采取的行为，用户可以在创建、修改告警的时候设置通知，也可以关闭通知。通知目前支持两种：触发告警时给用户发送Email、短信通知或发送HTTPPOST消息给服务器。与弹性伸缩联动触发弹性伸缩自动扩容和减容。
用户在“总览”页面，“监控面板”区域，单击。在“添加监控项”界面，根据界面提示选择关注的指标就可以了。
因为云监控服务与弹性云服务器系统内指标检测软件的采样周期不同。云监控服务对弹性云服务器、云硬盘的采样周期是4分钟，而系统内工具的采样周期一般为1秒，远远小于云监控服务的采样周期。采样周期越大，短期内的数据失真越大。所以云监控更适合用于网站长期监测、长期监测运行在弹性云服务器内的应用趋势等。同时，使用云监控服务用户可通过设置阈值对资源进行提前告警，保证资源稳定可靠。
聚合是指云监控服务在一定周期内对原始采样指标数据进行最大、最小、平均、求和或方差值的计算，并把结果持久化的过程。这个计算周期又叫聚合周期。聚合是一个平滑的计算过程，聚合周期越长、平滑处理越多，聚合后的数据对趋势的预测和统计越准确；聚合周期越短，聚合后的数据对告警越准确。云监控服务的聚合周期目前最小是5分钟，同时还有20分钟、1小时、4小时、1天，共5种聚合周期。聚合过程中对不同数据类型的处理是有差异的。如果输入的数据类型是整数，系统会对数据进行取整处理。如果输入的数据类型是小数（浮点数），系统会保留数据的小数点后两位。例如，弹性伸缩中“实例数”的数据类型为整数。因此，如果聚合周期是5分钟，采样指标数据分别是1和4，则聚合后的平均值为[（1+4）/2]=2，而不是2.5。用户可以根据聚合的规律和特点，选择使用云监控服务的方式、以满足自己的业务需求。
指标数据分为原始指标数据和聚合指标数据。原始指标数据是指原始采样指标数据，原始指标数据一般保留2天。聚合指标数据是指将原始指标数据经过聚合处理后的指标数据，聚合指标数据保留时间根据聚合周期不同而不同，具体如下：<ulid="ces_faq_0010__ul4475781817295"><liid="ces_faq_0010__li1406828617295">聚合周期为5分钟的指标数据，指标保留10天。聚合周期为20分钟的指标数据，指标保留20天。聚合周期为1小时的指标数据，指标保留155天。聚合周期为4小时的指标数据，指标保留300天。聚合周期为1天的指标数据，指标保留5年。如果某个资源实例被停用、关闭或者删除，相应的原始指标数据停止上报1小时后，该指标就被删除，指标恢复上报时，能够查看该指标的历史数据。
未安装VMTools，云监控服务无法提供监控弹性云服务器的内存使用率、磁盘使用率、带内网络流入速率和带内网络流出速率四个指标。但可以监控带外网络流入速率和带外网络流出速率指标，这样导致CPU使用率指标的精确性可能会降低。如果弹性云服务器类型是IO优化实例，无论是否安装了vmtools，云监控服务监控弹性云服务器的监控指标不包含磁盘使用率、带内网络流入速率和带内网络流出速率指标。弹性云服务器支持的监控指标，请参见。
用户在云监控页面选择“实例监控”，单击“导出监控数据”，根据界面提示选择“服务”、“维度”、“监控对象”、“指标”，最后单击“导出”。导出监控报告中第一行是指标数据采集时间，以Unix时间戳形式显示；第二行仍是指标数据采集时间，以ISO标准显示；第三行是指标数据值。如需要将Unix时间戳转换成时区时间，请按照如下步骤：<olid="ces_faq_0012__ol64573081205018"><liid="ces_faq_0012__li1576617205018">用Excel打开csv文件。将时间戳利用如下公式进行换算。计算公式为：目标时间=(时间戳/1000+(目标时区)*3600)/86400+70*365+19设置单元格格式为日期。例如，将时间戳1475918112000转化为北京时间，北京时间为+8时区，计算出的北京时间=(1475918112000/1000+(+8)*3600)/86400+70*365+19，将结果格式设置为日期，选择2016/3/1413:30形式显示，转换成时间后为2016/10/817:15。
云监控支持的聚合方法有以下五种：平均值聚合周期内指标数据的平均值。最大值聚合周期内指标数据的最大值。最小值聚合周期内指标数据的最小值。求和值聚合周期内指标数据的求和值。方差聚合周期内指标数据的方差。说明：聚合运算的过程是将一个聚合周期范围内的数据点根据相应的聚合算法聚合到周期起始边界上，以5分钟聚合周期为例：假设当前时间点为10:35，则10:30~10:35之间的原始数据会被聚合到10:30这个时间点。
当某一个告警规则监控的告警指标连续三个小时内未上报监控数据，此时告警规则的状态将变为“数据不足”。如果用户在创建该告警规则时，勾选了数据不足发送通知，则系统会及时通过邮件或短信方式通知用户，以便用户及时查询问题；还可以通过HTTPPOST形式发送消息至服务器地址，供用户使用。特殊情况下，如果指标的上报周期大于三个小时，连续三个周期均未上报监控数据，则告警规则状态变为“数据不足”。
A-E
G<h5>告警</h5><p>即告警规则，指租户为某个指标设置阈值，以及达到阈值时发起的动作。</p>J<h5>聚合</h5><p>聚合是指云监控服务在一定周期内对原始采样指标数据进行最大、最小、平均或方差值的计算，并把结果持久化的过程。</p>
J
Y<h5>云监控</h5><p>云监控服务是一个开放性的监控平台，提供资源的实时监控、告警、通知等服务。用户可以通过设置告警规则和通知策略，及时了解自己的资源运行状况。</p>Z<h5>指标</h5><p>用于描述某个资源的某个维度的状态，比如云服务器的CPU利用率，内存利用率等。</p>
Z
参见
即告警规则，指租户为某个指标设置阈值，以及达到阈值时发起的动作。
聚合是指云监控服务在一定周期内对原始采样指标数据进行最大、最小、平均或方差值的计算，并把结果持久化的过程。
聚合是指云监控服务在一定周期内对原始采样指标数据进行最大、最小、平均或方差值的计算，并把结果持久化的过程。
云监控服务是一个开放性的监控平台，提供资源的实时监控、告警、通知等服务。用户可以通过设置告警规则和通知策略，及时了解自己的资源运行状况。
用于描述某个资源的某个维度的状态，比如云服务器的CPU利用率，内存利用率等。
用于描述某个资源的某个维度的状态，比如云服务器的CPU利用率，内存利用率等。
I<h5>IVR</h5><p>参见</p><h5>IVR</h5><p>交互式语音应答，一种基于电话的语音增值业务。电话用户只要拨打客户服务热线号码，就可收听自助语音菜单，并根据提示进行选择，获取相应的服务。</p>J<h5>监控</h5><p>质检员可以实时查看当前在线的座席状态、当前状态持续时长等信息。</p>
J
K-O<ul><li>每个呼叫能够被分配到最合适的座席。相同需求的呼叫能实现先到先服务。相同能力的座席实现空闲时间最长的，优先分配来话。
每个呼叫能够被分配到最合适的座席。相同需求的呼叫能实现先到先服务。相同能力的座席实现空闲时间最长的，优先分配来话。
U-Z
参见
交互式语音应答，一种基于电话的语音增值业务。电话用户只要拨打客户服务热线号码，就可收听自助语音菜单，并根据提示进行选择，获取相应的服务。
质检员可以实时查看当前在线的座席状态、当前状态持续时长等信息。
质检员可以实时查看当前在线的座席状态、当前状态持续时长等信息。
通过对呼叫的被叫号码进行分析，得出呼叫的目的地，寻求呼叫和座席之间的匹配。提供多种呼叫分配方式，可以做到：
质检分实时质检和事后质检。-实时质检：质检员为实时了解座席的服务质量，对正在通话的座席进行监听、强插和拦截等操作。-事后质检：质检员通过回放客户与座席之间通话录音，对座席的服务质量进行评价。
对座席服务质量进行评价的人。
话务员，接听客户来电，为客户服务的人。
座席工作时使用的客户端软件，用来接收系统分配的呼叫。Demo表示该软件是一个非商用的软件，仅供测试使用。
分机号是座席的电话号码，用来与客户通话。座席需要同时使用工号和分机号登录客户端，缺少其中一个，都无法正常使用。
工号是系统为座席分配的号码。座席用工号登录客户端后，系统获知座席已经上班，可以分配呼叫了。
华为云帐号无法直接登录即时通信客户端，在创建企业时，创建的管理员帐号可以登录客户端。
导入成员后，页面可能无法立即显示导入结果，您可以刷新页面后查看。
为成员开通帐号时，管理员会填写成员的邮箱信息，请确保填写正确，否则成员可能无法收到邮件。成员可以联系管理员重置密码，系统将再次发送邮件给成员。
开通服务后，管理员帐号及系统生成的密码，会通过邮件发送给管理员，如果没有收到该邮件，需要联系即时通信云服务的运维人员重置密码。公有云热线电话4000-955-988。
用户忘记密码时，可以联系管理重置密码，重置后的密码将发送到用户的邮箱。
您需要有座席客户端才能使用联络中心的服务。座席客户端有两种获取方式：获取座席Demo，该Demo不能正式商用，仅用于测试和体验。基于华为接口开发座席客户端。
联络中心服务公测期间，开通服务需要申请公测资格。
注册华为企业云账号。具体方法请查看。选择“产品&gt;企业应用&gt;联络中心”，单击“参与公测”。单击“立即申请”，并根据界面提示信息，填写申请，并提交信息。<ulid="ZH-CN_TOPIC_0063767916__ul98141139124218"><liid="ZH-CN_TOPIC_0063767916__li1681373974218">申请完成后等待系统管理员审核，同时可在“已申请公测”页签查看申请状态。当“已申请公测”页签中服务的申请状态为“审批通过”时，则可以使用联络中心服务。申请公测成功后，会收到邮件通知。
方法一通过华为云会议产品下载页面获取。说明：方法二通过会议用户邮件获取。华为云会议服务开通时，会议用户收到的服务开通邮件中含有客户端下载链接，您可根据需要单击以下名称，获取Windows或Mac版本的PC客户端安装包，以及Android版的移动客户端安装包：<ul><li>PC客户端（Windows系统）：TEDesktopPC客户端（Mac系统）：TEDesktopforMac移动客户端（Android系统）：TEMobileforAndroid方法三移动客户端可直接通过应用市场搜索获取。<ul><li>Android系统用户可通过手机或者Pad登录GooglePlay或者华为智汇云，进入程序搜索页面。在输入框中输入“TEMobile”，点击“搜索”查找软件。根据界面提示下载软件并完成安装。iOS系统用户可通过iPhone或iPad的AppStore，搜索关键字“TEMobile”：<ul><li>iPhone对应的软件名称为“TEMobile”iPad对应的软件名称为“TEMobileHD”
配置PC客户端配置移动客户端
登录会议设备的Web界面，选择“帮助&gt;版本”，在弹出的“版本”页面可以查看会议设备的设备序列号。包装盒或会议设备背面贴有的SN条码纸上也可以查询会议设备的设备序列号。
TE10/20说明：<ul><li>配置前需确认该会议设备已在会议管理控制台上添加完成。激活码有效期为15天，时间自会议设备在会议管理控制台上添加完成之日起计算。如激活码已失效，请登录会议管理控制台，重置该会议设备的激活码。安全起见，如您在五分钟内，激活码连续输入错误次数累计10次以上，系统将锁定该会议设备所在IP地址，请10分钟后再试。TE10安装请参考：TE10配置请参考：TE20安装请参考：TE20配置请参考：TE30/40/50/60说明：<ul><li>配置前需确认该会议设备已在会议管理控制台上添加完成，且添加完成的时间不超过7天。如添加完成的时间已超过7天，需至会议管理控制台上删除该会议设备，重新添加后再进行配置。登录会议设备。在会议设备Web页面，选择“系统配置&gt;网络&gt;TR069”，可以进行TR069相关参数配置，如所示，具体配置参数请参见。TR069参数单击“保存”。
TE10/20会议设备SIP注册失败。<ul><li>登录会议设备Web界面，观察右下角是否有图标。如果没有，则表示SIP注册失败。单击“系统配置&gt;基本信息”，查看“系统时间”是否与当前时间差距较大，将“系统时间”调整为当前时间。如上述方法仍未解决问题，请联系客服人员，检查SIP号码是否被加入黑名单。TE30/40/50/60<ul><li>原因一未进行初始配置或初始配置不正确。原因二未及时进行会议设备初始配置。<ul><li>登录会议设备Web界面，单击“系统配置&gt;网络&gt;H.323/SIP配置”，会发现SIP信息未获取到。会议设备“激活的超时时间”为“168H”。会议设备在会议管理控制台上添加完成后，需要7天内在会议设备侧进行配置激活，超时则会配置失败。在会议管理控制台上删除该会议设备，重新添加并配置可解决此问题。原因三会议设备SIP注册失败。<ul><li>登录会议设备Web界面，观察右下角是否有图标。如果没有，则表示SIP注册失败。单击“系统配置&gt;基本信息”，查看“系统时间”是否与当前时间差距较大，将“系统时间”调整为当前时间。如上述方法仍未解决问题，请联系客服人员，检查SIP号码是否被加入黑名单。
登录。单击“忘记密码”。在“帐号名”中填写“会议用户帐号”，使用“注册邮箱”的方式找回，单击“获取重置链接”，如所示。找回密码打开邮件中的链接，根据提示进行重置密码操作即可。
原因一服务器地址配置错误。原因二客户端登录环境存在网络限制。原因三SIP注册失败。
ServerType=2</samp>修改为<sampclass="codeph">ServerType=1</samp>即可。
直接在提示页面单击“中国华北区1”，切换默认区域为“中国华北区1”，如所示。切换默认区域或在管理控制台页面右上角，单击默认区域右侧，将默认区域切换为“中国华北区1”。
会议管理控制台对浏览器的要求会议管理控制台支持的浏览器类型及版本，如所示。会议管理系统对浏览器的要求会议管理系统支持的浏览器有InternetExplorer、Edge、Firefox、Chrome、Safari（Windows版本和Mac版本）。具体浏览器版本，如所示。会议设备对浏览器的要求不同型号的会议设备支持的浏览器类型及版本有所不同，具体如所示。客户端对操作系统的要求PC客户端及手机客户端目前支持的操作系统版本，如所示。加入会议对操作系统及浏览器的要求为保证能够正常进行非客户端类的入会操作，需满足相应的操作系统及浏览器的要求，如所示。
H<h5>华为云会议</h5><p>部署在华为云上的视频会议服务，让企业用户通过互联网即可实现跨地域多方视频沟通。</p><h5>会议接入号</h5><p>企业间共享会议接入号，预定或召开会议时，会议接入号信息将包含在邮件通知中自动发送给与会者。与会者可通过客户端或会议设备拨号，以“会议接入号+会议ID+会议密码”的方式加入会议。</p>J<h5>激活码</h5><p>添加设备后自动生成，用于型号为TE10/20的会议设备首次上电使用时，激活会议设备。</p>
J
K-O
Q<h5>企业标识</h5><p>企业的唯一标识，开通服务成功后，会议用户在登录会议管理平台或客户端时，将以后缀的形式作为会议用户帐号的一部分。如：企业标识为corp.com，则会议用户帐号可设置为zhanghua@corp.com。</p>S<h5>设备序列号</h5><p>EquipmentSerialNumber（ESN），又叫设备SN码，每个会议设备配有一个设备序列号，用来标识并保证该设备的唯一性。</p>T<h5>TR069</h5><p>TechnicalReport069（TR069），它提供了对会议设备进行管理配置的通用框架。型号为TE30/40/50/60的会议设备在首次使用时，需要进行相关协议配置。</p>
S<h5>设备序列号</h5><p>EquipmentSerialNumber（ESN），又叫设备SN码，每个会议设备配有一个设备序列号，用来标识并保证该设备的唯一性。</p>T<h5>TR069</h5><p>TechnicalReport069（TR069），它提供了对会议设备进行管理配置的通用框架。型号为TE30/40/50/60的会议设备在首次使用时，需要进行相关协议配置。</p>
T
U-Z
部署在华为云上的视频会议服务，让企业用户通过互联网即可实现跨地域多方视频沟通。
企业间共享会议接入号，预定或召开会议时，会议接入号信息将包含在邮件通知中自动发送给与会者。与会者可通过客户端或会议设备拨号，以“会议接入号+会议ID+会议密码”的方式加入会议。
添加设备后自动生成，用于型号为TE10/20的会议设备首次上电使用时，激活会议设备。
添加设备后自动生成，用于型号为TE10/20的会议设备首次上电使用时，激活会议设备。
CustomerPremisesEquipment（CPE），在华为云会议中特指型号为TE30/40/50/60的会议设备。
企业的唯一标识，开通服务成功后，会议用户在登录会议管理平台或客户端时，将以后缀的形式作为会议用户帐号的一部分。如：企业标识为corp.com，则会议用户帐号可设置为zhanghua@corp.com。
EquipmentSerialNumber（ESN），又叫设备SN码，每个会议设备配有一个设备序列号，用来标识并保证该设备的唯一性。
TechnicalReport069（TR069），它提供了对会议设备进行管理配置的通用框架。型号为TE30/40/50/60的会议设备在首次使用时，需要进行相关协议配置。
EquipmentSerialNumber（ESN），又叫设备SN码，每个会议设备配有一个设备序列号，用来标识并保证该设备的唯一性。
TechnicalReport069（TR069），它提供了对会议设备进行管理配置的通用框架。型号为TE30/40/50/60的会议设备在首次使用时，需要进行相关协议配置。
TechnicalReport069（TR069），它提供了对会议设备进行管理配置的通用框架。型号为TE30/40/50/60的会议设备在首次使用时，需要进行相关协议配置。
Auto-ConfigurationServer（ACS），负责自动配置会议设备的高级服务组件。
游戏外挂：外挂的程序、软件和客户端、外挂卡等；私服相关：私服架设服务、私服程序、私服网站、私服源码、私服服务器和空间等；
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《互联网出版管理暂行规定》、《互联网文化管理暂行规定》、《互联网信息服务管理办法》、《互联网站管理工作细则》、《中华人民共和国著作权法》、《中华人民共和国刑法》“私服”违法行为是指未经许可或授权，破坏合法出版、他人享有著作权的互联网游戏作品的技术保护措施、修改作品数据、私自架设服务器，运营或挂接运营合法出版、他人享有著作权的互联网游戏作品，从而谋取利益、侵害他人利益的非法互联网出版活动。“外挂”是指利用电脑技术针对一个或多个网络游戏，通过改变软件的部分程序制作而成的作弊程序。
制作、复制、出版、贩卖、传播淫秽电子信息。发布赌博平台，如六合彩，赌球，老虎机，赌博交易平台等信息。
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《中华人民共和国刑法》、《全国人民代表大会常务委员会关于维护互联网安全的决定》、《最高人民法院、最高人民检察院关于办理利用互联网、移动通讯终端、声讯台制作、复制、出版、贩卖、传播淫秽电子信息刑事案件具体应用法律若干问题的解释》、《关于办理网络赌博犯罪案件适用法律若干问题的意见》“淫秽物品”是指具体描绘性行为或者露骨宣扬色情的诲淫性的书刊、影片、录像带、录音带、图片及其他淫秽物品。“赌博”违法行为是指利用互联网、移动通讯终端等传输赌博视频、数据，组织赌博活动等。
存储、传播涉及国家机密的信息。宣扬邪教迷信，宣扬宗教、种族歧视等信息。发布攻击、映射国家政府、党、领导人的信息。传播有害信息，煽动颠覆国家政权、推翻社会主义制度，或者煽动分裂国家、破坏国家统一。
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《中华人民共和国保守国家秘密法》、《宗教事务条例》、《中华人民共和国刑法》、《全国人民代表大会常务委员会关于维护互联网安全的决定》、《互联网信息服务管理办法》“国家秘密”是关系国家安全和利益，依照法定程序确定，在一定时间内只限一定范围的人员知悉的事项。
发布、使用盗版软件。出售盗版书籍、电影、计算机软件、盗版书籍等。泄露、贩卖个人隐私、捏造事实侮辱、诽谤、公然丑化他人人格的。
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《中华人民共和国刑法》、《中华人民共和国著作权法》、《中华人民共和国侵权责任法》、《中华人民共和国民法通则》、《最高人民法院印发《关于贯彻执行〈中华人民共和国民法通则〉若干问题的意见（试行）》的通知》知识产权的"侵权"行为有：未经著作权人许可，复制发行其文字作品、音乐、电影、电视、录像作品、计算机软件及其他作品的；未经录音录像制作者许可，复制发行其制作的录音录像的。人格权的“侵权”行为有：以书面、口头等形式宣扬他人的隐私，或者捏造事实公然丑化他人人格、以及用侮辱、诽谤等方式损害他人名誉，造成一定影响的，应当认定为侵害公民的名誉权的行为。
使用华为云产品发起的网络攻击，如：DDoS攻击、CC攻击，Web攻击，暴力破解，传播病毒、木马等。未经华为云授权对华为云进行的扫描、渗透等探测行为。使用华为云产品搭建DDoS防御服务。
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《《中华人民共和国刑法》、《全国人民代表大会常务委员会关于维护互联网安全的决定》为了保障互联网的运行安全，对有下列行为之一，构成犯罪的，依照刑法有关规定追究刑事责任：故意制作、传播计算机病毒等破坏性程序，攻击计算机系统及通信网络，致使计算机系统及通信网络遭受损害。
利用华为云服务实施金融诈骗、盗窃等。利用华为云服务非法搭建VPN等。利用华为云服务出售枪支弹药、毒品等违禁物品。
若经发现，华为云有权采取包括但不限于禁止访问、冻结资源、终止合作等措施。对于涉嫌违反国家法律法规的行为，华为云将按要求向有关国家机关报告。对于有关国家机关要求处理的违法违规行为，华为云有义务直接按照有关国家机关的要求和指令处理。
《中华人民共和国刑法》、《全国人民代表大会常务委员会关于维护互联网安全的决定》、《工业和信息化部关于清理规范互联网网络接入服务市场的通知》未经电信主管部门批准，不得自行建立或租用专线（含虚拟专用网络VPN）等其他信道开展跨境经营活动。《中华人民共和国刑法》第二百八十七条　利用计算机实施金融诈骗、盗窃、贪污、挪用公款、窃取国家秘密或者其他犯罪的，依照本法有关规定定罪处罚。
云报表服务（CloudReportService，简称CRS）是一种快速便捷、在线式的数据可视化分析服务。用户可通过云报表服务对原始数据进行实时在线分析，生成丰富多样的可视化报表，从数据中快速获取业务发展趋势。
公测期间免费。
柱状图、折线图、面积图、饼状图、散点图和箱线图。
云报表服务目前支持数据源仅为MySQL数据库。
mysqlinformation_schemaperformance_schema
云报表服务支持的MySQL数据类型如所示。TINYBLOBBLOBMEDIUMBLOBMEDIUMTEXTLONGBLOBLONGTEXT
聚合方式是视图中日期型维度或数值型度量聚合展示的规则。云报表服务所有视图均支持聚合方式展示。使用方法：绘制视图时，用户可以在“数据列参数”区域下，选择维度或度量所在行，单击“聚合方式”，根据需要选择具体的聚合方式，例如计数。
为了避免数据丢失，云报表服务会自动保存工作表内容，用户无需手动保存。
C
D
F
G
J
M
S
W
Y
Z
参见
度量是数值型维度。度量通过数值来描述其相关联维度的属性或特征。例如，利润、成本等可以作为产品的度量。
分析模板是云报表服务预设的多维分析模型。用户选择数据集后，可以根据预设的分析模板对数据集进行分析生成不同类型的图表。
工作表（Worksheet）是指用户对数据集进行分析的工作空间。一个数据集可以对应多个工作表。
过滤器是云报表服务的数据筛选规则。在数据分析时，用户可以使用过滤器对数据进行筛选，将符合条件的数据展现在报表中。
聚合方式是将维度或度量按照一定规则进行聚合展示。
默认数据列是原始数据的数据列。
视图是将数据集图形化展示的分析图表。通过云报表服务，用户仅需要指定符合绘制规则的数据列作为对应维度、度量，即可绘制对应的视图。
数据集是针对指定数据源的数据提取规则。通过云报表服务，用户对数据进行处理操作，例如修改数据列的数据类型、设置过滤条件、创建自定义数据列等，处理后保存的规则为数据集。
数据列是数据中一列相同属性的数据，也是数据编辑和可视化分析中的最小处理单位。数据列包括默认数据列和自定义数据列。
数据列创建函数是用户创建自定义数据列的函数。
数据源是用户的数据来源。用户在使用云报表服务分析数据时，需要指定原始数据所在的数据源。
维度是对象属性或特征。例如，产品名称、生产日期等可以作为产品的维度。
仪表盘是工作表中视图的只读快照集。通过云报表服务，用户可以将不同工作表中的视图统一绘制到一个仪表盘中。
云报表服务（CloudReportService，简称CRS）是一种快速便捷、在线式的数据可视化分析服务。用户可通过云报表服务对原始数据进行实时在线分析，生成丰富多样的可视化报表，从数据中快速获取业务发展趋势。
自定义数据列是用户通过数据列创建函数进行创建的数据列。
目前异常状态主要为云服务器备份状态异常。当处于这些状态时，请参考下面处理建议。
云服务器备份首次为全量备份，后续均为增量备份。因此第一次备份时间较长，后续备份时间较短。例如：备份一个已有数据为100GB的云服务器，首次全量备份需要30分钟左右；假设下次备份前新产生或变化数据量为15GB时，增量备份需要6分钟左右。
云服务器备份服务有配额限制。限定配额仅仅是为了防止资源滥用，如您有更多需求，可以提工单申请扩大配额。
当前只支持区域（Region）内备份和恢复，不支持跨区域（Region）备份和恢复。
恢复数据时系统会关闭云服务器，待数据恢复后系统会自动启动云服务器。如果取消勾选“恢复后立即启动云服务器”，则需要用户手动启动云服务器。
不需要，云服务器备份服务支持对正在使用的云服务器进行备份。在云服务器正常运行的情况下，除了将数据写入云硬盘外，还有一部分最新数据保存在内存中作为缓存数据。在做备份时，内存缓存数据不会自动写入云硬盘，会产生数据一致性问题。因此，为了尽量保证备份数据的完整性，最好选择凌晨且云硬盘没有写入数据的时间进行云服务器备份；或者在进行云服务器备份前，暂停所有数据的写操作，且将应用系统停止，再进行备份。如果对备份数据完整性要求极高，则可以将云服务器停机（实现缓存数据写入云硬盘），进行离线的云服务器备份。
如果您的云服务器做过备份后进行变更，还可以使用原有的备份恢复数据。但因为文件系统的限制，恢复数据后，云硬盘恢复为未变更前的状态，建议您在变更后重新做备份。
云服务器备份服务（CSBS，CloudServerBackupService）可为云服务器创建备份，利用多个云硬盘一致性备份数据恢复云服务器业务数据，最大限度保障用户数据的安全性和正确性，确保业务安全。
备份策略指的是对备份对象执行备份操作时，预先设置的策略，策略包括备份策略的名称，备份任务的调度计划，备份数据的保留策略。其中调度计划包括备份执行的频率，备份执行的时间点，备份数据的保留策略包括备份数据的保存时间或保存数量。通过将云服务器绑定到备份策略，可以为云服务器执行自动备份。
支持。云服务器备份服务可以通过创建备份策略并绑定云服务器，将云服务器中的所有云硬盘作为整体进行备份和恢复，不支持对云服务器中的部分云硬盘进行备份和恢复。
A<h5>AZ</h5><p>参见</p>B<h5>备份</h5><p>在备份介质上创建数据副本的过程。数据副本用于在将来源数据被破坏、损坏或者丢失的情况下恢复数据。</p><h5>备份副本</h5><p>一个备份对象执行一次备份任务产生的备份数据，包括备份对象恢复所需要的全部数据。</p>C<h5>CSBS</h5><p>参见</p>D<h5>地域</h5><p>地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。</p>
B<h5>备份</h5><p>在备份介质上创建数据副本的过程。数据副本用于在将来源数据被破坏、损坏或者丢失的情况下恢复数据。</p><h5>备份副本</h5><p>一个备份对象执行一次备份任务产生的备份数据，包括备份对象恢复所需要的全部数据。</p>C<h5>CSBS</h5><p>参见</p>D<h5>地域</h5><p>地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。</p>
C<h5>CSBS</h5><p>参见</p>D<h5>地域</h5><p>地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。</p>
D
K-O
U-Z
参见
在备份介质上创建数据副本的过程。数据副本用于在将来源数据被破坏、损坏或者丢失的情况下恢复数据。
一个备份对象执行一次备份任务产生的备份数据，包括备份对象恢复所需要的全部数据。
参见
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。
在备份介质上创建数据副本的过程。数据副本用于在将来源数据被破坏、损坏或者丢失的情况下恢复数据。
一个备份对象执行一次备份任务产生的备份数据，包括备份对象恢复所需要的全部数据。
参见
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。
参见
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布的不同选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华南、中国华东、中国华北；针对海外，目前暂无可供选择的地址。同一地域内可用分区间内网互通，不同地域间内网不互通。
可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内下的其它可用分区，可用分区间通过内网访问。
云服务器备份服务可为云服务器创建整机备份，利用多个云硬盘一致性备份数据恢复云服务器业务数据，最大限度保障用户数据的安全性和正确性，确保业务安全。
实时流计算服务（CloudStreamService，简称Stream），是运行在华为云上的实时流式大数据分析服务，全托管的方式用户无需感知集群的存在，只需聚焦于StreamSQL，即时执行作业，完全兼容Flink。CloudStream为用户打造了一个易使用、高安全、高可靠的运行维护平台，是华为公司在IT领域主推的低时延（ms级时延）、高吞吐、高可靠的分布式实时流计算服务。它以Flink为核心，孵化一些Flink上的特性，是一个批处理和流处理结合的分布式计算框架，提供了数据分发以及并行化计算的流数据处理能力，适用于实时性要求高、吞吐大的业务场景。
CloudStream的主要特点和优势在于：丰富的StreamSQL在线分析能力支持window、join等聚合函数，用SQL表达业务逻辑，简便快捷实现业务。分布式实时计算支持大规模集群计算，集群弹性伸缩，最大化节省成本。易用在SQL编辑平台写StreamSQL，StreamSQL定义数据流入、数据处理、数据流出，快速便捷实现业务逻辑，降低流数据分析门槛。全托管用户完全不感知计算集群，对运行的作业可视化查看运行状态。开箱即用不再关心各种大数据框架，写StreamSQL，即时运行作业。按需计费定价单位是SPU(StreamProcessingUnit,1SPU=1核+4G)，用户选定SPU数，按照时长收费，精确到秒。安全隔离租户三重安全机制保障，确保作业安全运行，且租户计算集群完全和其他租户物理隔离，独立的安防设置，确保计算集群的安全性。高吞吐低时延从DIS中读取数据，服务支持自然反压机制，支持高吞吐压力；毫秒级延迟，满足实时计算的业务场景。
CloudStream可以处理来自数据接入服务（DIS）和对象存储服务（OBS）上的数据。
CloudStream支持将作业的结果数据输出到DIS上，因此用户需要到DIS上去查看输出结果，详细操作请参见DIS的“”。CloudStream也支持将作业的结果数据输出到RDS上，因此用户需要到RDS上去查看输出结果，详细操作请参见RDS的“&gt;”。
CloudStream的SQL作业，不支持单个算子的并发，作业并发是指为流作业同时启动多个并发任务。
CloudStream支持将作业的结果数据输出到数据接入服务（DIS）上和关系型数据库（RDS）中。
流处理单元（StreamComputeUnit），简称SPU，是CloudStream计费单位。1个SPU的标准配置为1核的CPU、4G的内存。用户作业可以设置多个SPU。
CloudStream服务的使用，聚焦于互联网和物联网场景，适用于实时性要求高、吞吐量大的业务场景。主要应用在互联网行业中小企业／物联网／车联网／金融反欺诈等多种行业应用场景，如，互联网汽车、日志在线分析、在线机器学习、在线图计算、在线推荐算法应用等。实时流分析场景应用：实时大数据分析。场景特点：面向流数据，支持window、CEP、Join等复杂的流分析操作，毫秒级延迟。适用场景：在线分析，金融风控，交通流量分析，ETL，实时决策。物联网IOT场景应用：物联网在线数据分析。场景特点：物联网IoT直接调用CloudStream服务API，CloudStream可以实时读取传感器信息并执行用户的分析逻辑，分析结果对接到DIS、RDS等服务用于可视化、持久化、告警或报表展示。适用场景：电梯IoT、工业IoT、共享单车、互联网汽车和智能家居。
CloudStream支持从DIS上读取编码格式为csv或json格式的数据。CloudStream只支持从OBS上存放和读取csv格式的数据。
CloudStream只支持使用SQL语句开发作业。
A<h5>按需计费</h5><p>一种常见计费模式，按用户实际使用量计费。</p>D<h5>DIS</h5><p>参见</p>
D
F-J
K-O
P-T
U-Z
一种常见计费模式，按用户实际使用量计费。
参见
参见
一种数据库查询和编程语言，广泛应用于存取，查询，升级，和管理相关的数据库系统。它可以分为数据定义语言（DDL），数据操纵语言（DML）和数据控制语言（DCL）。
SPU为CloudStream计费单位，1核4G的标准配置，用户作业可以设置多个SPU。
参见
数据接入服务，为处理或分析流数据的自定义应用程序构建数据流管道。
作业是指编译后的二进制Jar，运行在分布式系统中的任务。
目前，一个租户系统仅支持开通一个追踪器。
事件列表记录了云账户中对云服务资源新建、配置、删除等操作的详细信息。事件列表不记录查询操作的相关信息。
不可以。OBS中的事件为永久存储。
当用户公有云账户欠费时，云审计服务依旧可以接收所支持服务发送的操作信息，但只能保存近7天的操作记录。因为7天之前的历史操作记录会以事件文件的形式实时保存至OBS桶，而将事件文件存储于OBS桶所产生的流量需要付费。此外，云审计服务的追踪器状态会显示为“欠费”，可以进行“配置”和“删除”操作，但“配置”时无法重新选择“OBS桶”。
具有如下需求的用户可以开通云审计服务：需要执行安全分析。需要排查故障定位问题。需要追踪资源变更情况。
默认情况下，云审计服务管理控制台可存储最近7天内的事件文件，而对于已保存至OBS桶的历史操作记录，您可以无限期存储这些事件文件。
云审计服务会根据既有的OBS存储桶策略来传送事件文件。如果错误地配置OBS存储桶策略，那么云审计服务将无法传送事件文件。被删除或有异常的OBS桶，管理控制台界面会显示相应的错误提示信息。用户可选择重新创建OBS桶或重新配置OBS桶的访问权限，操作详情请参见《对象存储服务用户指南》的“桶管理”章节。
支持。原则上进行关键字验证时必须包含以下字段：time、service_type、resource_type、trace_name、trace_status、trace_type，其他字段由各服务自己定义。
不会。启用云审计服务不会影响其他云服务资源的性能。
IP、code、request、response和message字段并非必选信息：IP：当tracetype为SystemAction时，表示本次操作由服务内部触发，此时缺失IP字段为正常情况。request/response/code：这三个字段是表示本事件所对应的API在调用HTTP请求时发送和接受到的body体和code码，内容由发送事件的云服务决定，缺失为正常情况。message：该字段为预留给各云服务自身记录备注信息所用，内容由发送事件的云服务决定，缺失为正常情况。
目前CTS仅支持部分ECS、EVS、VBS、IMS、AS、CES和VPC的操作通过资源ID跳转到对应云资源的详情页面，该功能正在逐步完善。
对于异步调用事件，会产生两条事件记录，其事件名称、资源类型、资源名称等字段相同。在事件列表中，看起来是重复记录了操作（例如，Workspace的deleteDesktop事件），但实际上，这两条事件是相互关联、但内容不同的两条记录。第一条事件：记录用户发起的请求；第二条事件：记录用户请求的操作结果，通常与第一条时间记录有数分钟的延迟，记录用户请求的实际响应结果。两条事件需要结合在一起，才能反映用户本次操作的真实结果。
当用户发起的某些请求涉及后台一些高权限要求的操作或涉及调用其他服务时，可能存在用户自身的权限不足的问题，因此在确保符合安全要求的前提下，会临时对该请求中的用户身份进行提权，请求完成后提权结束，但会将提权行为记录到该请求发送到CTS的日志当中，此时的操作用户将记录为user_account/op_service。
P-T
U-Z
事件即云审计服务追踪并保存的云服务资源的操作记录。您可以通过“事件”了解到谁在什么时间对系统哪些资源做了什么操作。
事件列表记录了您云账户中对云服务资源新建、修改、删除等操作的详细信息。事件列表最多显示近7天的事件。
事件文件是系统在一个周期内自动生成的事件集，用于实时同步保存至OBS。系统会根据当前负载情况调整每个事件文件包含的事件数。
使用云审计服务前需要开通云审计服务，开通云审计服务系统会自动创建一个追踪器，系统记录的所有操作将关联在该追踪器中。目前，一个云账户系统仅支持创建一个追踪器。
支持。任何兼容Redis协议的客户端都可以访问分布式缓存服务。Redis客户端的下载，请参见。
不需要。您只需要通过相应的Redis客户端即可从弹性云服务器上连接使用缓存实例。
Redis本身支持不设置密码，客户端可以直接连接Redis缓存服务并使用。DCS出于安全考虑，客户端连接缓存实例必须通过密码来鉴权验证。您需要在创建缓存实例时自定义密码。分布式缓存服务处于“运行中”状态的缓存实例支持修改密码，集群实例暂不支持修改密码。
一般情况下，主节点的更新会自动复制到关联的备节点。但由于Redis异步同步的技术，备节点更新可能会落后于主节点。例如，主节点的I/O写入速度超过了备节点的同步速度，或者因异常原因导致的主节点和备节点的网络延迟，使得备节点与主节点存在滞后或者部分数据不一致，若此时进行主备切换，未同步的少量数据可能会丢失。
单机：不支持。主备：支持。
不支持。您必须通过同一虚拟私有云下的弹性云服务器来访问缓存实例。
处于“运行中”状态的缓存实例支持修改配置参数，集群实例暂不支持修改密码。
缓存实例自行删除或者通过Redis客户端发送命令手动删除的数据，不能找回。DCS的默认数据逐出策略为不逐出，但用户可以通过修改实例配置参数，自行调整策略，由实例根据逐出策略回收键值。缓存实例整个被删除后，实例数据也将丢失，不能找回。删除实例应当谨慎。主备缓存实例支持实例数据备份，如果实例有数据备份，则可以通过恢复实例完成数据找回。
逐出指将数据从缓存中删除，以腾出更多的存储空间容纳新的缓存数据。DCS默认策略为不逐出（noeviction）。当前版本支持在配置运行参数中修改逐出策略。在达到内存上限（maxmemory）时Redis支持选择以下6种数据逐出策略：noeviction：在这种策略下，如果缓存达到了配置的上限，实例将不再处理客户端任何增加缓存数据的请求，比如写命令，实例直接返回错误给客户端。缓存达到上限后，实例只处理删除和少数几个例外请求。allkeys-lru：根据LRU（Leastrecentlyused，最近最少使用）算法尝试回收最少使用的键，使得新添加的数据有空间存放。volatile-lru：根据LRU（Leastrecentlyused，最近最少使用）算法尝试回收最少使用的键，但仅限于在过期集合的键，使得新添加的数据有空间存放。allkeys-random：回收随机的键使得新添加的数据有空间存放。volatile-random：回收随机的键使得新添加的数据有空间存放，但仅限于在过期集合的键。volatile-ttl：回收在过期集合的键，并且优先回收存活时间（TTL）较短的键，使得新添加的数据有空间存放。说明：当没有键满足回收前提条件时，数据逐出策略volatile-lru、volatile-random、volatile-ttl与noeviction策略相同，具体见上文noeviction介绍。
建议重新连接缓存实例。超时可能是网络原因，也有可能是服务器端其他因素引起，比如当客户端应用对缓存实例超载或者缓存实例发生了主备切换，会导致Redis客户端出现“Connectiontimedout”或者“Connectionresetbypeer”提示。由于部分客户端不支持与缓存实例的自动重连，因此建议用户在应用程序中增加重新建立连接的功能。
由于系统开销会占用部分资源，主备实例的持久化也需要一部分资源，所以实例创建后，实际可用内存小于申请规格。除了用户存储数据外，Redis-server内部的buffer以及内部数据结构会占用一部分内存。所以缓存实例创建后，实例已使用内存量不为0。
当租户余额小于100人民币时，无法创建实例，如需继续使用分布式缓存服务，请为帐户充值。
A-E
F<h5>分布式缓存服务</h5><p>分布式缓存服务（DistributedCacheService），为您提供兼容开源Redis协议的可即开即用、安全可靠、弹性扩容、便捷管理的在线分布式缓存能力。您可以快速部署缓存环境，高速读写数据。DCS提供完备的监控体系和多重安全防护措施，并提供专业的、多种模式的缓存管理平台。</p>H<h5>缓存实例</h5><p>缓存实例是缓存服务给用户提供服务的最小资源单位，用户可以选择不同内存规格和类型。</p>J<h5>节点</h5><p>节点是指缓存服务的最小逻辑单位。DCS节点运行在弹性云服务器（ElasticCloudServer，简称ECS）ECS上，每个缓存实例由一个或者多个节点组成。节点间不同的组成关系，形成不同类型的缓存类型。</p>
H<h5>缓存实例</h5><p>缓存实例是缓存服务给用户提供服务的最小资源单位，用户可以选择不同内存规格和类型。</p>J<h5>节点</h5><p>节点是指缓存服务的最小逻辑单位。DCS节点运行在弹性云服务器（ElasticCloudServer，简称ECS）ECS上，每个缓存实例由一个或者多个节点组成。节点间不同的组成关系，形成不同类型的缓存类型。</p>
J
U-Z<ul><li>实例包含一个主节点和一个备节点。主备节点的数据通过实时复制保持一致。备节点对Rredis客户端不可见，不支持客户端直接读写数据。当主节点故障后，备节点自动升级为主节点，无需用户操作。
实例包含一个主节点和一个备节点。主备节点的数据通过实时复制保持一致。备节点对Rredis客户端不可见，不支持客户端直接读写数据。当主节点故障后，备节点自动升级为主节点，无需用户操作。
参见
单节点实例只包含单个节点，对实例操作即对节点操作。单机模式成本低廉，开发者可以用来部署对可靠性要求不高的开发环境。
分布式缓存服务（DistributedCacheService），为您提供兼容开源Redis协议的可即开即用、安全可靠、弹性扩容、便捷管理的在线分布式缓存能力。您可以快速部署缓存环境，高速读写数据。DCS提供完备的监控体系和多重安全防护措施，并提供专业的、多种模式的缓存管理平台。
缓存实例是缓存服务给用户提供服务的最小资源单位，用户可以选择不同内存规格和类型。
节点是指缓存服务的最小逻辑单位。DCS节点运行在弹性云服务器（ElasticCloudServer，简称ECS）ECS上，每个缓存实例由一个或者多个节点组成。节点间不同的组成关系，形成不同类型的缓存类型。
缓存实例是缓存服务给用户提供服务的最小资源单位，用户可以选择不同内存规格和类型。
节点是指缓存服务的最小逻辑单位。DCS节点运行在弹性云服务器（ElasticCloudServer，简称ECS）ECS上，每个缓存实例由一个或者多个节点组成。节点间不同的组成关系，形成不同类型的缓存类型。
节点是指缓存服务的最小逻辑单位。DCS节点运行在弹性云服务器（ElasticCloudServer，简称ECS）ECS上，每个缓存实例由一个或者多个节点组成。节点间不同的组成关系，形成不同类型的缓存类型。
主备实例在单机实例基础上增强高可用性。主备实例具有以下特性：
单条专线目前只能访问单个VPC。但是，专线创建完成后，可根据需要联系管理员修改VPC，以达到在不同时间对多个VPC的访问。
支持千兆电口和万兆光口连接。
常规物理云专线支持的最大带宽不超过10Gbit/s。
专线上路由必须是静态路由，当前还不支持动态路由协议。
根据业务需求按模板填写专线申请，联系运营商商务谈判签订合同，运营商安排实施工程师接通两端物理线路，运维工程师配合进行连接配置，验收测试，确认专线连接的两端主机通信正常，专线开通完成。
目前，需要客户自行从运营商的官方服务渠道联系商务沟通。
您可以提交工单获得最新的接入点信息。
要考虑的因素有：云专线带宽速率，云专线条数，以及云专线接入的端口类型等因素。云专线带宽速率以运营商提供的速率规格为准。专线条数根据实际情况参考只需要一条还是两条做高可靠性冗余。端口类型分为光口还是电口。
云专线接入两端的IP地址不能冲突，而且必须是私有地址，如果用户端网络全部是公有地址，则需要客户端自己做NAT映射。
云专线服务是一个建立连接本地数据中心和云平台的专线网络服务。您可以利用云专线建立云与数据中心、办公室或主机托管区域的专线连接，降低网络时延，获得比Internet线路更好的网络体验。目前云专线仅支持MPLSVPN类型专线。
云专线按端口类型分为1GE和10GE。
云专线目前仅支持包周期，分别是包月、包年。
云专线定价，1GE端口1月收费560元人民币，1年收费是560*12=6720元人民币；10GE端口1月收费3720元人民币，1年收费3720*12=44640元人民币。
在管理控制台右上角单击用户名称。单击“我的订单”。单击需要续订的订单所在行操作列下的“详情”进入订单详情页面。单击“续订”。确认续订信息，单击“提交”。如果无续订按钮，请联系技术支持。
请联系客服完成云专线的退订。
云专线订单到期后，宽限期内（一般7天内）仍然可以继续使用资源。用户可以在此时续订云专线。宽限期结束后，会进入冻结状态，冻结状态时资源无法正常使用。用户在冻结期内续订云专线，可以解除冻结，继续使用资源。冻结状态会持续一定时间，如果超过该时限，资源会被删除，用户无法续订。冻结状态的持续时间，由华为云控制，请联系客服了解详情。
在分布式数据库中，可以通过分库分表存储方式，轻松解决大数据量单表容量达到单机数据库存储上线的瓶颈。但是分库存储后，需要尽量避免跨库JOIN操作带来的性能与资源消耗问题。逻辑表分不分片。DDM逻辑表支持全局表、分片表、单表三种类型。用户可以按照数据表的实际使用需求，选择最合适的逻辑表类型创建。<ulid="ZH-CN_TOPIC_0051815073__ul6651254123118"><liid="ZH-CN_TOPIC_0051815073__li141121952163113">单表只在第一个逻辑库中创建表以及存储数据；全局表在每一个分库上创建表并且存储全量数据；分片表在每一个分库上创建表，数据按照拆分规则分散存储在分库中。按什么规则分逻辑表的拆分键选择非常重要。建议按实际业务场景选择拆分键，不同逻辑表，如果具有E-R关系，建议选择相同字段做拆分键，避免跨库JOIN操作。在实际使用中，有以下建议供参考：数据量在1000万以下的表，不建议分片。通过建立合适的索引，采取读写分离策略，单表也可以很好的解决性能问题。数据量在1000万以上的表，建议分片。将数据分片存储后，既能解决单张表容量过大带来的性能瓶颈，同时提高并发支持。注意要选择合适的拆分键，提前做好规划。业务读取尽量少用多表JOIN，同一个事务避免跨分片。查询条件尽量带上拆分键，避免全分片表扫描。
尽量避免使用LEFTJOIN或RIGHTJOIN，建议使用INNER。在使用LEFT或RIGHTJOIN时，ON会优先执行，WHERE条件在最后执行，所以在使用过程中，条件尽可能在ON语句中判断，减少WHERE的执行。尽量少用子查询，改用JOIN，避免大表全表扫描。
DDM支持分布式JOIN。表设计时，增加字段冗余支持跨分片的JOIN，主要实现的方式有三种：全局表，ER分片和ShareJoin。
读写分离指对RDS主实例配置了一个或者多个只读副本后，DDM可以将写操作分发给主实例执行，将读操作分发给只读副本执行。读写分离极大地提高了数据库的并发性能。读写分离特性一般由DDM内部实现，用户无需在应用代码上做设置。DDM的读写分离模式为：默认事务内的SQL都会走主实例，非事务内的SQL会根据DDM内置的策略选择只读副本执行。DDM也支持用户在SQL中自定义读写分离策略，只需要在SQL前加上指定标签：/*balance*/标签表示事务内走只读副本，事务外的SQL会走主实例，SQL举例如下：/*balance*/selecta.company_id,a.namefromcustomerawherea.company_id=1;/*#mycat:db_type=master*/标签表示忽略事务状态，强制走主实例，SQL举例如下：/*#mycat:db_type=master*/selectb.recordid,b.destinationfromtravelrecordb;/*#mycat:db_type=slave*/标签表示忽略事务状态，强制走只读副本，SQL举例如下：/*#mycat:db_type=slave*/selectb.recordid,b.destinationfromtravelrecordb;
A-E
F-J
P<h5>平滑扩容</h5><p>在不中断应用服务的情况下，通过新增RDS实例，扩展数据库存储空间。扩容除了解决数据存储容量瓶颈，还能通过增加并发计算能力间接提升数据库性能。通过DDM管理控制台操作即可完成扩容，应用无需改造，扩容进度支持可视化跟踪。</p>Q<h5>全表扫描</h5><p>对于分片表，如果SQL语句中没有指定拆分键，DDM将在所有分表上执行，然后归并结果返回，这个过程称为全表扫描。用户应尽量优化SQL语句，通过指定拆分键，避免全表扫描。</p><h5>全局表</h5><p>将一些数据量小且更新操作不频繁的数据表，如字典表、配置表等，在所有分片上都存储全量数据，提升JOIN效率，这类表叫全局表。</p><h5>全局序列号</h5><p>在分布式数据库中，数据被存储在各个分片表中，关系型数据库中的主键约束，将无法使用。因此在DDM中引入了全局序列号，保证有唯一约束要求的数据，从各分片表聚合后仍然具有数据唯一性。</p>S<h5>水平拆分</h5><p>将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。</p>T<h5>透明读写分离</h5><p>DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。</p>
Q<h5>全表扫描</h5><p>对于分片表，如果SQL语句中没有指定拆分键，DDM将在所有分表上执行，然后归并结果返回，这个过程称为全表扫描。用户应尽量优化SQL语句，通过指定拆分键，避免全表扫描。</p><h5>全局表</h5><p>将一些数据量小且更新操作不频繁的数据表，如字典表、配置表等，在所有分片上都存储全量数据，提升JOIN效率，这类表叫全局表。</p><h5>全局序列号</h5><p>在分布式数据库中，数据被存储在各个分片表中，关系型数据库中的主键约束，将无法使用。因此在DDM中引入了全局序列号，保证有唯一约束要求的数据，从各分片表聚合后仍然具有数据唯一性。</p>S<h5>水平拆分</h5><p>将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。</p>T<h5>透明读写分离</h5><p>DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。</p>
S<h5>水平拆分</h5><p>将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。</p>T<h5>透明读写分离</h5><p>DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。</p>
T
参见
DDM给用户提供的最小资源单位，实例运行在弹性云服务器上，目前支持4C|4G、8C|8G、16C|16G、32C|32G共4种不同资源规格，用户根据业务需要申请相应规格的服务。
当表数据量不大，且不需要与分片表进行连接查询时，可以只在DDM的默认分片上建表与存储数据，这类表称为单表。
DDM即分布式数据库中间件（DistributedDatabaseMiddleware，简称DDM），专注于解决数据库分布式扩展问题，突破了传统数据库的容量和性能瓶颈，实现海量数据高并发访问。DDM使用华为关系型数据库（RDS）作为存储引擎，具备自动部署、分库分表、弹性伸缩、高可用等全生命周期运维管控能力。
DDM实例在RDS实例上创建多个物理库，每一个物理库称为分片，在分片上建立的表，叫分片表（不包括单表和全局表）。数据按照分片规则被分配到不同的分片上，分片上的数据支持分布式并行计算。
在不中断应用服务的情况下，通过新增RDS实例，扩展数据库存储空间。扩容除了解决数据存储容量瓶颈，还能通过增加并发计算能力间接提升数据库性能。通过DDM管理控制台操作即可完成扩容，应用无需改造，扩容进度支持可视化跟踪。
对于分片表，如果SQL语句中没有指定拆分键，DDM将在所有分表上执行，然后归并结果返回，这个过程称为全表扫描。用户应尽量优化SQL语句，通过指定拆分键，避免全表扫描。
将一些数据量小且更新操作不频繁的数据表，如字典表、配置表等，在所有分片上都存储全量数据，提升JOIN效率，这类表叫全局表。
在分布式数据库中，数据被存储在各个分片表中，关系型数据库中的主键约束，将无法使用。因此在DDM中引入了全局序列号，保证有唯一约束要求的数据，从各分片表聚合后仍然具有数据唯一性。
将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。
DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。
对于分片表，如果SQL语句中没有指定拆分键，DDM将在所有分表上执行，然后归并结果返回，这个过程称为全表扫描。用户应尽量优化SQL语句，通过指定拆分键，避免全表扫描。
将一些数据量小且更新操作不频繁的数据表，如字典表、配置表等，在所有分片上都存储全量数据，提升JOIN效率，这类表叫全局表。
在分布式数据库中，数据被存储在各个分片表中，关系型数据库中的主键约束，将无法使用。因此在DDM中引入了全局序列号，保证有唯一约束要求的数据，从各分片表聚合后仍然具有数据唯一性。
将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。
DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。
将数据表按照拆分规则，拆分为多个分片上的分片表。表拆分后，数据将被按照拆分规则存储到分片表中。水平拆分主要解决单机数据库的单张表容量限制问题，同时提高访问性能。
DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。
DDM将应用服务的读和写请求分别指向不同的RDS实例处理。当系统读压力较大时，通过给RDS主实例增加只读副本，把数据读取操作转移到只读副本上，提升数据库并发性能。DDM的读写分离功能是对应用透明的，不需要应用做代码修改。
故障切换DDS实例采用多路由+多分片+复本集的部署形态，当路由主机出现故障时，可实时动态切换。复本集包含多个副本，当主节点发生故障时，DDS会在30秒之内切换到备节点。实例的弹性云服务器（ElasticCloudServer，以下简称ECS），对用户都不可见，这意味着，只允许用户应用程序访问数据库对应的IP地址和端口。DDS使用的对象存储服务（ObjectStorageService，以下简称OBS）上的备份文件，对用户不可见，它们只对后台管理系统可见。申请DDS后，您还需要做什么：您不需要进行数据库的基础运维（比如高可用、安全补丁等），但是您还需要重点关注以下事情：<oltype="a"id="dds_faq_0001__zh-cn_topic_0045077797_ocadf52852e2642a39d01526ea96efd22"><liid="dds_faq_0001__zh-cn_topic_0045077797_l9b7de5a533d64bda9939d75ba3dcff91">DDS实例的CPU、IOPS、空间是否足够，如果不够需要优化或者扩容。DDS实例是否存在性能问题，是否有大量的慢查询，查询语句是否需要优化，是否有多余的索引或者索引缺失等。
DDS实例可用性的计算公式：实例可用性=（1–故障时间/服务总时间）×100%
在创建DDS实例时，不需要使用模板。用户可选择不同实例规格，相当于提前准备好了很多模板，提供给用户创建实例。
DDS实例不会受其他用户实例影响，因为每个用户的文档DDS与其他用户的DDS实例是独立的，并且有资源隔离，互不影响。
可以通过查看慢查询日志来确定是否存在运行缓慢的查询，以及各个查询的性能特征（如果有的话），从而定位查询运行缓慢的原因。查询DDS日志，请参见。您还可以查看实例的CPU使用率指标，协助定位问题，请参见。
主节点与备节点的复制延迟是无法利用公式来计算的，它会受到以下因素的影响：网络通信状况。主节点的事务压力，即主机每秒执行的事务量。主节点执行的事务大小，即一个事务要执行多久。备节点的机器负载状况。如果主节点在某个时间段压力非常大，每秒执行的事务量非常多，备机通常会出现延迟。对于DDS而言，可以在CES中查看备节点的“主备延时”指标，来观察延迟情况。
DDS不会删除和操作用户的任何数据。出现这种情况，请检查是否为误操作，必要时可利用已有备份恢复文件。目前可采取如下方式：使用DDS的恢复功能，详见。将备份数据从弹性云服务器导入DDS，详见。
一旦删除云帐号，备份数据也随之删除。
可用，DDS的扩容操作是在实例中增加新的分片，原实例中的分片不变，不影响服务的可用性。
DDS支持读写分离，它的写操作仅可以在复本集中的主节点上进行，用户通过配置实现读操作在从节点进行。
外部服务器暂不能访问DDS，您只能通过ECS来访问它。
数据库连接数表示应用程序可以同时连接数据库的数量，一般指客户端同mongos之间的连接数。与您应用程序或者网站能够支持的最大用户数没有关系。
遇到该问题，请参考以下步骤排查解决。先确认ECS实例和DDS实例是否在同一个VPC。<ulid="dds_faq_0013__zh-cn_topic_0045124299_ul66139476103624"><liid="dds_faq_0013__zh-cn_topic_0045124299_li58811851103624">如果在，执行。如果不在，需要重新创建ECS实例，使之和DDS实例在同一个VPC下。查看ECS实例是否添加安全组。<ulid="dds_faq_0013__zh-cn_topic_0045124299_ul3790537110375"><liid="dds_faq_0013__zh-cn_topic_0045124299_li560402310375">如果有，检查安全组的配置规则是否满足要求，详见章节“安全组”的描述，然后执行<emid="dds_faq_0013__zh-cn_topic_0045124299_i6348918120150">。</em>如果没有，从ECS的实例详情页面，进入VPC页面，选择“安全组”，添加安全组。在弹性云服务器ECS上，测试是否可以正常连接到DDS实例地址的端口。mongos的默认端口为8635。telnet&lt;<emid="dds_faq_0013__zh-cn_topic_0045124299_i912146103624">实例地址</em>&gt;{8635}<ulid="dds_faq_0013__zh-cn_topic_0045124299_ul11903995103624"><liid="dds_faq_0013__zh-cn_topic_0045124299_li6774998103624">如果可以通信，说明网络是正常的，请检查数据库用户和密码，详见。如果端口不通，请联系售后技术支持协助排查。
客户端问题导致连接DDS失败，可以从以下几个方面检查。弹性云服务器ECS的安全策略对于Windows平台，可检查Windows的安全策略是否开放DDS端口。对于Linux平台，可使用iptables检查防火墙及端口的放行情况。应用配置错误常见的有IP写错、端口参数配置错误和JDBC等的连接参数配置错误。如问题仍未解决，请联系售后技术支持。
DDS服务端可能出现的问题如下，请依次进行检测。连接数满导致连接失败。解决方法：通过CES的资源监控功能查看连接数、CPU使用率等指标是否正常，如果达到上限，需要重启DDS、断开实例连接或扩容节点解决。实例状态异常，比如实例重启卡住，DDS系统故障等。解决方法：尝试重启功能。如果无法解决，请联系售后技术支持。
您需要确保您的应用程序所在的ECS，与DDS实例在同一个VPC中。如果不在，需要修改VPC中的路由表和网络ACL，以确保应用程序所在的ECS能够访问DDS。
建议您的应用程序支持自动重连数据库，当数据库重启后，无需人工介入，应用会自动恢复，提供更高的可用性。同时建议您的应用程序采用长连接方式连接数据库，以降低资源消耗，提高性能。
MongoDB官网提供了针对不同操作系统的客户端安装包，下载MongoDB3.2.7。MongoDB官网二进制下载页面链接为：。下面将以RedHatLinux7为例介绍如何获取相应安装包及完成安装。
获取安装包。<oltype="a"id="dds_faq_0018__zh-cn_topic_0048939492_ol5149115918032"><liid="dds_faq_0018__zh-cn_topic_0048939492_li501597610266">进入官网下载链接地址：。选择“CommunityServer&gt;Linux”，在“Version”中选择“RHEL7Linux64-bitx64”，单击“AllVersionBinaries”。如所示。MongoDB官网页面在下载页面中，单击客户端安装包名称“linux/mongodb-linux-x86_64-rhel70-3.2.7.tgz”，下载3.2.7版本的二进制安装包。如所示。下载页面打开下载的安装包，选择需要的工具上传到ECS，上传完成后，即可进行相应操作。其中，包含如下：<ulid="dds_faq_0018__zh-cn_topic_0048939492_ul45181659172153"><liid="dds_faq_0018__zh-cn_topic_0048939492_li10936796172157">MongoDB客户端mongo。数据导出工具mongoexport。数据导入工具mongoimport。说明：创建ECS时，要选择操作系统，例如Redhat6.6，并为其绑定EIP（ElasticIP，弹性IP）。然后使用远程连接工具将安装包上传到ECS，再用PuTTY连接到ECS。
用户需要关注的监控指标有：CPU利用率、内存利用率、磁盘空间利用率。可以根据实际应用场景配置告警提示，当收到告警，可采取相应措施消除告警。配置示例：如果在某段时间内（如5min），CPU的利用率出现多次（如3次）不低于某特定值（如90%）的情况，则发出相应CES告警。如果在某段时间内（如5min），内存的利用率出现多次（如4次）不低于某特定值（如90%）的情况，则发出相应CES告警。如果在某段时间内（如5min），磁盘的使用率出现多次（如5次）不低于某特定值（如85%）的情况，则发出相应CES告警。CES告警详细配置方法，详见《云监控服务用户指南》中“告警规则管理”。采取措施：调查磁盘空间消耗，查看是否可以从实例中删除数据或是将数据存档到其他系统以释放空间。通过磁盘空间扩容增大磁盘空间，详见。
详见。
DDS可设置所属VPC，从而确保实例与其它业务实现网络安全隔离。另外，通过统一身份认证服务（IdentityandAccessManagement，以下简称IAM），可以实现对DDS资源的访问权限控制。
VPC允许您在私有、隔离的网络创建虚拟网络环境，从中可以对私有IP地址范围、子网、路由表和网络网关等方面进行全面控制。借助VPC，您可以定义虚拟网络拓扑和网络配置，使其非常类似于您在自己的数据中心所操作的传统IP网络。在下面的情况下您可能想在VPC中使用DDS：您希望运行面向公众的Web应用程序，同时保留公众不可访问的后端服务器。您可以在一个VPC内同时创建一个DDS实例和ECS实例，同时为ECS实例分配公网IP，将Web服务器部署在ECS实例。
VPC安全组可用来帮助确保VPC内DDS实例的安全。此外，通过网络访问控制列表（ACL），可以允许或拒绝进入和退出各个子网的网络流量。内部安全基础设施（包括网络防火墙、入侵检测和防护系统）可以监视通过IPsecVPN连接进入或退出VPC的所有网络流量。
DDS目前只支持WiredTiger存储引擎。
您可以通过mongodump和mongorestore的方式将数据库备份到ECS上。ECS不限制存放哪些数据，只要符合国家法律法规就行。您可以在ECS上存放数据库备份，但不建议将ECS作为数据库备份空间使用。强烈推荐使用DDS实例的备份功能，将备份数据存放到专业的对象存储OBS上，以获得更高的数据可靠性和服务保障。
DDS自动备份可保留天数默认7天。备份空间不占用用户购买的数据库空间。手动备份没有时间限制，且用户可根据需要删除该备份文件。
备份窗口是用户定义的时间段，在该时间段内DDS实例将进行备份。DDS借助这些定期数据备份，让您能够将DDS实例还原到保留期内的备份点。在备份时段期间，业务不受影响，但不能在DDS控制台做重启操作。
DDS存储采用EVS，具体情况请参考《云硬盘用户指南》。DDS的备份数据存储采用OBS，不占用用户购买的数据库空间。关于DDS实例存储的硬件配置，请参见《对象存储服务用户指南》。
如果您的应用程序所需的存储容量超过最大分配量，解决措施如下：扩容存储空间。增加shard分片。
您正常的数据（不包括备份数据），以及DDS实例正常运行所需的数据（比如系统数据库、数据库回滚日志、索引等）。同时，DDS产生的日志输出文件也会占用空间。这些文件会保证DDS实例正常稳定地运行。
您申请的磁盘容量会有必要的文件系统开销，这些开销主要包括inode、reservedblock，以及数据库运行必需的空间。
占用磁盘空间的日志及文件如下表：
用户在连接到DDS后，需要关注以下支持以及限制的命令。
A-E
F-J
K-O
P<h5>配置服务器</h5><p>配置服务器是保存实例中元信息的特殊mongod。配置服务器以副本集的方式运行，配置服务器可用是部署一个实例，或者修改实例元信息的前提。</p>S<h5>数据库参数组</h5><p>数据库参数组就像是引擎配置值“容器”，这些值可应用于一个或多个数据库实例。如果创建的数据库实例未指定数据库参数组，将使用默认的数据库参数组。该默认组包含针对客户运行的数据库实例进行优化的引擎默认值和文档数据库服务系统默认值。如果希望数据库实例以客户自定义的引擎配置值运行，可轻松地创建一个新数据库参数组，修改所需参数并应用到数据库实例，以使用新数据库参数组。建立关联后，使用特定数据库参数组的所有数据库实例，都将获得该数据库参数组的所有参数更新。</p><h5>数据库用户</h5><p>访问文档数据库的用户，目前用户名默认为rwuser。</p><h5>数据库主密码</h5><p>指定一个字符串来定义数据库主用户的密码。数据库主密码最小长度为8位，最大长度为32位，必须是大写字母、小写字母、数字、特殊字符的组合，其中可输入的特殊字符为：~!@#%^*-_=+?</p>
S
U-Z
参见
分片是存储了实例一部分数据的mongod进程，所有分片存储了实例的全部数据。通常来讲，每个分片是一个副本集，副本集为每个分片的数据提供了冗余和高可靠性。
由一组mongod进程组成，并提供了数据冗余与高可靠性的数据节点集合。
文档数据库服务中的一个主要进程，主要负责处理数据请求，管理数据访问。
负责查询与数据写入的路由，是实例访问的统一入口。
配置服务器是保存实例中元信息的特殊mongod。配置服务器以副本集的方式运行，配置服务器可用是部署一个实例，或者修改实例元信息的前提。
数据库参数组就像是引擎配置值“容器”，这些值可应用于一个或多个数据库实例。如果创建的数据库实例未指定数据库参数组，将使用默认的数据库参数组。该默认组包含针对客户运行的数据库实例进行优化的引擎默认值和文档数据库服务系统默认值。如果希望数据库实例以客户自定义的引擎配置值运行，可轻松地创建一个新数据库参数组，修改所需参数并应用到数据库实例，以使用新数据库参数组。建立关联后，使用特定数据库参数组的所有数据库实例，都将获得该数据库参数组的所有参数更新。
访问文档数据库的用户，目前用户名默认为rwuser。
指定一个字符串来定义数据库主用户的密码。数据库主密码最小长度为8位，最大长度为32位，必须是大写字母、小写字母、数字、特殊字符的组合，其中可输入的特殊字符为：~!@#%^*-_=+?
数据库参数组就像是引擎配置值“容器”，这些值可应用于一个或多个数据库实例。如果创建的数据库实例未指定数据库参数组，将使用默认的数据库参数组。该默认组包含针对客户运行的数据库实例进行优化的引擎默认值和文档数据库服务系统默认值。如果希望数据库实例以客户自定义的引擎配置值运行，可轻松地创建一个新数据库参数组，修改所需参数并应用到数据库实例，以使用新数据库参数组。建立关联后，使用特定数据库参数组的所有数据库实例，都将获得该数据库参数组的所有参数更新。
访问文档数据库的用户，目前用户名默认为rwuser。
指定一个字符串来定义数据库主用户的密码。数据库主密码最小长度为8位，最大长度为32位，必须是大写字母、小写字母、数字、特殊字符的组合，其中可输入的特殊字符为：~!@#%^*-_=+?
文档数据库服务是一种可让客户在云中轻松设置、操作和扩展文档型数据库的托管服务。
（DedicatedCloud，以下简称DeC）是在公有云上隔离出来的专属虚拟化资源池。在专属云内，用户可申请独占物理设备，独享计算和网络资源，并使用可靠的分布式存储。专属云在用户申请后才予以开通。用户可在管理控制台统一管理资源，就像自建私有云一样的灵活使用公有云。
服务不同于其他服务，需要开通后才能使用。已经开通专属云服务的用户，可以通过包年的方式购买设备节点资源。专属云内支持按需购买云服务器，计算资源不计费，使用用户已申请的设备节点剩余的计算资源。云服务器内云硬盘及弹性IP按需计费。按需购买云服务器时，云硬盘及弹性IP等的按需费用会比包周期的费用偏高，如果您长期使用云服务器，建议您先在云硬盘及VPC处包周期购买云硬盘及弹性IP，再根据需要将云硬盘及弹性IP绑定在按需创建的云服务器上。
地域是一个地理区域的概念。我国地域面积广大，由于带宽的原因、不可能只建设一个数据中心为全国客户提供服务。因此，我们根据地理区域的不同将全国划分成不同的地域。选择地域时通常根据就近原则进行选择，例如您或者您的客户在北京，那么您可以选择华北服务区，这样可以减少访问服务的网络时延，提高访问速度。
在“专属云”界面，单击“我的资源”区域内的“弹性云服务器”。如所示。系统会跳转到“弹性云服务器”界面，云服务器列表中的云服务器均为该专属云下的云服务器。
您可以根据您的应用软件所占用的计算资源进行整体汇总，并按照每个设备节点可提供的计算资源进行估算，得出对应设备节点的个数。
设备节点是独占的，您享有对设备节点计算资源的完全使用权，与其他用户完全隔离。
仅支持使用设备节点上的计算资源，不能直接使用设备节点上的硬盘。
专属云下购买云服务器仅支持按需购买云服务器，不支持包周期购买云服务器。专属云下购买云服务器时，计算资源不计费，使用用户已购买的设备节点剩余的计算资源。如果计算资源不足，则不能继续购买云服务器。
专属云内支持按需购买云服务器，计算资源不计费，使用用户已申请的设备节点剩余的计算资源。云服务器内云硬盘及弹性IP按需计费。按需购买云服务器时，云硬盘及弹性IP等的按需费用会比包周期的费用偏高，如果您长期使用云服务器，建议您先在云硬盘及VPC处包周期购买云硬盘及弹性IP，再根据需要将云硬盘及弹性IP绑定在按需创建的云服务器上。
A-E
U-Z
参见
（DedicatedCloud，以下简称DeC）是在华为云上隔离出来的专属虚拟化资源池。在专属云内，用户可申请独占物理设备，独享计算和网络资源，并使用可靠的分布式存储。用户可在管理控制台统一管理资源，就像自建私有云一样的灵活使用专属云。
数据快递服务（DES，DataExpressService）是一种海量数据传输解决方案，它使用物理存储介质（例如：外置USB或SATA硬盘驱动器）将大量数据传输到华为云。使用DES可解决海量数据传输的难题（包括高昂网络成本、较长传输时间等），DES传输海量数据的速度可高达Internet传输速度的10倍，并且成本可低至Internet费用的五分之一。借助DES，您无需编写任何代码或购买任何硬件即可传输您的数据。只需在DESConsole中创建一个服务单任务，通过线下邮寄磁盘到数据中心的方式，实现数据的高效传输。数据中心会根据需求将磁盘设备挂载到华为云的存储设备上，磁盘挂载成功后，由用户触发传输磁盘数据到对象存储服务（OBS）的目的桶中，当用户磁盘数据传输完成后数据中心即可返还用户磁盘。用户可以通过短信或直接在DESConsole中跟踪任务状态。
和普通的网络传输相比，DES有很多优势：更高效快速的传输用户直接将磁盘邮寄到数据中心，数据中心将磁盘手动挂载到存储设备上，然后通过内部网络进行高速数据传输，传输速度可达Internet传输速度的10倍，大大提高了数据传输速率，节省时间。数据更安全<ulid="des_faq_0002__ul6390273173747"><liid="des_faq_0002__li48646418173744">支持使用第三方Truecrypt工具进行数据加密后再邮寄，可确保在寄送磁盘途中的数据安全。华为数据中心管理员将磁盘挂载到物理服务器后，由用户上传AK/SK、加密密钥触发数据传输。华为人员全程不接触客户密钥及客户数据，确保数据在传输过程中的安全。数据最终存储在对象存储服务（OBS）中，OBS服务具有强大的安全保障机制，支持SSL加密、ACL、桶策略、数据分片存储等。成本低、经济实惠<ulid="des_faq_0002__ul18465525174244"><liid="des_faq_0002__li63626790174227">按量收费，数据传输成本可低至使用高速Internet费用的五分之一。零维护成本，无需专人维护。
DES主要适用于以下几种场景：大数据原始数据迁移：基因、石油、气象、IOT等原始数据迁移到华为云对象存储服务。接收互换数据：如果您经常通过物理存储介质从业务伙伴那里接收内容，可以让他们将数据直接发送到华为云，以便导入对象存储服务。网站迁移：静态网站信息，图片，脚本，视频等静态资源迁移到对象存储服务中。离线备份数据：将完整备份或增量备份发送至华为云对象存储服务，实现可靠的冗余离站存储，可以和混合云备份方案配合使用。灾难恢复：如果有大量数据需进行容灾准备，初始同步可以采用线下传输服务，将具有更具性价比的传输。
根据可使用的广域网带宽，用户可以自己估算数据通过普通网络传输的传输时间，如果在自己预计的时间范围内数据不能传输完成则可考虑使用DES。数据传输时间计算公式如下：天数=（总容量KB）/（每秒带宽Mbps*125*网络使用率*60秒钟*60分钟*24小时）
使用DES传输的数据最终存储在对象存储服务（OBS）中。OBS服务的容量可无限扩展，用户只需尽情享用云存储带来的无限空间，无需担心传输过多的数据而无处存放。
数据快递服务DES实现按单计费，按照物理存储介质数量，上传时长分为两个计费项：按物理存储介质数量计费<ulid="des_faq_0006__ul4589604817554"><liid="des_faq_0006__li1041125117554">计费因子：物理存储介质（个数）计费公式：费用=物理存储介质（个数）*每个物理存储介质费率单价：530元/块磁盘按上传时长计费上传时长是指结束时间-起始时间。起始时间点为数据中心管理员挂载磁盘更新完工单的时间点。结束时间点为客户上传完数据后，任务自动终止的时间点。<ulid="des_faq_0006__ul25092801175525"><liid="des_faq_0006__li53900415175533">计费因子：时长（小时）计费公式：费用=（时长-免费时长）*时长费率单价：36元/天您还享有3天的免费上传时间，超出免费时间后按天计算，不足一天不收取费用。
您需要将磁盘邮寄至华为数据中心由DES帮您完成数据传输，该邮寄费用需要您来承担。当数据传输完成后，华为数据中心将会采取邮费到付的方式将磁盘回邮给您，该邮费也需要由您来承担。
您可以通过Internet访问页面并登录，进入“数据快递服务”管理控制台。
在华为云网站申请成为华为云正式用户，申请成功后即可进入管理控制台开通使用DES。
使用DES传输的数据会存放在对象存储服务OBS中，OBS服务是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力。关于OBS服务的详细介绍可参见。
DES支持使用第三方加密工具Truecrypt对数据进行加密，邮寄加密后的数据可确保数据在寄送途中的安全。华为数据中心管理员在接收到磁盘并挂载后，需要由用户自己输入AK/SK和加密密钥触发数据自动上传，华为人员全程不接触和密钥和用户数据，确保数据的安全。通过DES传输的数据最终存放在对象存储服务OBS中，OBS服务支持SSL加密、ACL权限控制、桶策略等安全保障机制，且数据分片随机存储在不同硬盘上，保障数据的存储、访问安全。
华为数据中心管理人员在接收到您邮寄的磁盘后会直接挂载至服务器，且需要由您手工填写AK/SK和加密密钥触发数据自动上传，华为人员全程不会接触密钥和数据。
DES支持用户使用第三方工具Truecrypt对数据进行加密后再传输，确保邮寄途中的数据安全。数据上传需要由您手工数据AK/SK和加密密钥自动触发，全程无人接触密钥和数据。通过DES传输的数据最终保存在对象存储服务OBS中，OBS服务将数据分片随机存储在不同硬盘上，即使整块硬盘被盗走也无法恢复成完整数据。
是的。这是由于使用DES服务传输的数据要存储在OBS服务中，所以您必须开通OBS服务。
您在开通DES服务后，即可登录管理控制台创建服务单，将待邮寄数据按要求存放入待邮寄磁盘中后，即可将磁盘寄送至华为数据中心。当华为数据中心收到您邮寄的磁盘后，会将磁盘挂载至服务器并通知您尽快启动上传任务。此时您可再次登录管理控制台填写AK/SK和加密密钥启动数据上传。数据传输完成后您还可以查看数据传输报表，确认无误后华为数据中心将回邮您的磁盘。
登录DESConsole。单击“立即申请”。填写“传输信息”。<ulid="des_faq_0016__ul4292303218406"><liid="des_faq_0016__li5076296918406">“磁盘目录：”填写磁盘根目录下文件夹名称（例如：folder1），不支持填写如下格式：/folder1，/folder1/folder2。若填写文件夹名称，表示将该文件夹中的所有数据传输到指定的目的桶中；若不填写，则默认将磁盘中所有文件传输到目的桶。一个输入框中只能填写一个文件夹名称，若需要传输多个文件夹，可单击“添加”，填写多个不同的磁盘目录。例如：用户磁盘中的根目录下包含“test01”和“test02”两个文件，用户可将这两个文件分别填写到不同的“磁盘目录”的输入框中，且可以选择不同的“目的桶”，实现数据分类。“目的桶：”选择磁盘数据传输的目的桶。若目的桶不存在，需要使用对象存储服务创建可用的桶后，再刷新目的桶并重试。“数据中心：”“目的桶”选择后，“数据中心”值会根据目的桶所在数据中心自动获取。填写“联系信息”。<ulid="des_faq_0016__ul5818571618406"><liid="des_faq_0016__li5390939918406">“联系人”：填写设备回邮联系人姓名。“手机号码”：填写设备回邮联系人手机号码。“磁盘回邮地址”：填写设备回邮地址。单击“立即申请”，进入服务单详情界面。确认“服务单详情”信息无误后，勾选“我已经阅读并同意《华为数据传输服务协议》”。单击“提交申请”，提交服务单。若“服务单详情”信息有误，可单击“上一步”，修改服务单信息后再提交服务单。服务单创建成功后，进入如下图所示界面。可选:单击“磁盘加密工具下载”，下载加密工具，并加密磁盘数据。
DES服务单具有如下几种状态：待寄送磁盘待上传AK/SK正在传输待回寄磁盘传输失败已完成已取消已过期几种状态的转换关系如下图所示：
您可以登录DESConsole，单击服务单号前的箭头图标查看该服务单详情。另外，当服务单申请成功、磁盘挂载成功、数据传输成功和订单关闭时，DES还会短信通知您，让您掌握DES服务单关键进展。
可以，DES支持使用第三方加密工具Truecrypt对数据进行加密。对磁盘加密后，请务必自行保管好加密密钥，并在启动数据上传时正确输入。如果密钥丢失，则无法解密您的数据。
一个服务单只能包含一块磁盘，且一块磁盘只包含一个分区。当前支持的磁盘规格：SATA2.5英寸、SATA3.5英寸和SAS3.5英寸。当前支持的磁盘接口类型：USB2.0、UDS3.0、SATA、SAS。当前支持的文件系统类型有：EXT2、EXT3、EXT4、FAT32、EXFAT。
磁盘加密工具TrueCrypt可从华为云开发者中心下载获取，网址为：TrueCrypt工具有适用于Windows和Linux操作系统的不同版本，请按实际需求下载使用。
当DES服务单已完成创建后，服务单状态将变为“待寄送磁盘”。此时您需要准备待传输的数据存放入磁盘中并将磁盘寄出。若您已经寄出磁盘，请耐心等待，当华为数据中心接收到磁盘，管理员将磁盘挂载完成后，服务单状态将发生改变。
当从创建DES服务单开始，如果数据中心管理员在30天内都未接收到磁盘，服务单状态会自动由“待寄送磁盘”转换为“已过期”。
当DES服务单创建后，在服务单状态为“待寄送磁盘”时可以取消服务单，此时服务单状态将变为“已取消”。
当数据中心接收到您邮寄的磁盘，且管理员将磁盘挂载成功后，服务单状态将变为“待上传AK/SK”。此时需要您登录DESConsole填写AK/SK和加密密钥启动数据上传。
当您填写AK/SK和加密密钥后，系统将启动数据上传，此时服务单状态将为“正在传输”，并保持至数据传输完成。
当数据完成传输后，服务单状态将变为“待回寄磁盘”，此时数据中心管理员将安排回寄您的磁盘。
当您填写AK/SK和加密密钥启动数据上传后，若校验失败将会导致服务单状态变为“传输失败”。以下几种情况会出现“传输失败”情况，请根据实际情况排查解决后，重新填写AK/SK启动上传。AK/SK或加密密钥填写错误，请重新尝试填写正确的AK/SK和加密密钥。服务单中填写的“磁盘目录”与邮寄的磁盘中的目录不一致。此时请修改服务单中的“磁盘目录”，使之与邮寄的磁盘中的目录保持一致。磁盘签名文件未按照要求存放在磁盘根目录。此时数据中心管理员将会联系您，并将磁盘寄回，您需要重新按要求存放磁盘签名文件后再寄出。
用户提交数据快递服务申请后，系统会生成磁盘签名文件，磁盘签名文件是服务单中磁盘的唯一标识，需要将其存放入磁盘根目录且不对其加密，然后将磁盘寄送到华为数据中心。华为数据中心管理员收到磁盘后直接将磁盘挂载到物理服务器上，系统会自动判断用户申请单中的信息与磁盘信息是否准确对应，磁盘信息匹配成功后，用户需填写AK/SK和加密密钥触发数据开始自动上传，数据上传过程中均无任何人工干预，以此来避免人为误操作。
用户数据上传完成后，会生成数据传输报告，以报表形式供用户确认数据传输完整性。数据传输报告中包含如下表所示内容：
您需要开通对象存储服务（OBS），在OBS服务中创建桶用于存放使用DES服务传输的数据。登录OBSConsole。在主页面单击“创建桶”。系统弹出下方所示的对话框。说明：由于通过URL访问桶时，桶名会作为URL的一部分，根据DNS标准，URL不支持大写字母，无法区分带大写字母的桶。因此，“桶名称”仅支持小写字母、数字、“-”、“.”作为桶的命名规则。例如：若想通过URL访问名为“MyBucket”的桶，该URL将解析成名为“mybucket”的桶，导致访问出错。选择“区域”，并输入“桶名称”。单击“保存”。
不可以，每个DES服务单只可以包含一块磁盘。若您想要邮寄多块磁盘，请为每块磁盘创建一个服务单。
磁盘签名文件是服务单中磁盘的唯一标识，需要将其存放入磁盘根目录且不对其加密，然后将磁盘寄送到华为数据中心。华为数据中心管理员收到磁盘后直接将磁盘挂载到物理服务器上，系统会根据磁盘签名文件自动匹配磁盘与服务单，避免人工干预带来的误操作。
磁盘签名文件中包含的内容如下表所示：
是的。创建服务单后，请下载磁盘签名文件放入待邮寄磁盘的根目录，且不要对磁盘签名文件进行加密。
请登录DESConsole，单击“待寄送磁盘”的服务单后的“下载磁盘签名文件”，将磁盘签名文件下载到本地。
当您收到磁盘已挂载的短信后，请尽快登录DESConsole，单击“待上传AK/SK”服务单后的“上传AK/SK”，根据界面提示，将后台往OBS的桶中上传数据时需要使用的密钥对（AK/SK）信息和磁盘解密密码填写到弹出的对话框中。若您没有AK/SK，请通过“我的认证”页面创建。若没有对磁盘数据加密，可不用填写磁盘解密密码。
可以。当服务单的状态为“待寄送磁盘”时可取消服务单。
您需要先从华为云开发者中心获取与您操作系统相匹配的工具版本，然后安装TrueCrypt并对数据进行加密。具体的工具安装和加密数据方法可参见《数据快递服务用户指南》。
当服务单申请成功、磁盘挂载成功、数据传输成功和订单关闭时，DES会给您发送短信，让您掌握DES服务单关键进展。
A<h5>AK</h5><p>后台往对象存储服务的桶中上传数据时所需要的接入证书。</p>C<h5>磁盘签名文件</h5><p>提交数据快递服务申请后，系统会生成磁盘签名文件。磁盘签名文件是服务单中磁盘的唯一标识。</p><h5>传输报告</h5><p>用户数据上传完成后，会生成数据传输报告，以报表形式供用户确认数据传输完整性。</p>D<h5>DES</h5><p>参见</p>
C<h5>磁盘签名文件</h5><p>提交数据快递服务申请后，系统会生成磁盘签名文件。磁盘签名文件是服务单中磁盘的唯一标识。</p><h5>传输报告</h5><p>用户数据上传完成后，会生成数据传输报告，以报表形式供用户确认数据传输完整性。</p>D<h5>DES</h5><p>参见</p>
D
F
S<h5>SK</h5><p>后台往对象存储服务的桶中上传数据时所需要的密钥。</p><h5>数据快递服务</h5><p>数据快递服务是一种海量数据传输解决方案，它使用物理存储介质（例如：外置USB或SATA硬盘驱动器）将大量数据传输到华为云。</p>T<h5>桶</h5><p>存放用户数据的容器。</p>
T
后台往对象存储服务的桶中上传数据时所需要的接入证书。
提交数据快递服务申请后，系统会生成磁盘签名文件。磁盘签名文件是服务单中磁盘的唯一标识。
用户数据上传完成后，会生成数据传输报告，以报表形式供用户确认数据传输完整性。
参见
提交数据快递服务申请后，系统会生成磁盘签名文件。磁盘签名文件是服务单中磁盘的唯一标识。
用户数据上传完成后，会生成数据传输报告，以报表形式供用户确认数据传输完整性。
参见
参见
申请数据快递服务后将会生成服务单，由服务单跟踪进度和状态。
后台往对象存储服务的桶中上传数据时所需要的密钥。
数据快递服务是一种海量数据传输解决方案，它使用物理存储介质（例如：外置USB或SATA硬盘驱动器）将大量数据传输到华为云。
存放用户数据的容器。
存放用户数据的容器。
>>
>
>
>>
>
流程说明
软件开发云各服务收费详情包括免费使用额度、计费因子、计费公式、单价等，如所示。
基础套餐包含的服务为：项目管理、配置管理、编译构建、代码检查、测试管理、发布管理、流水线和部署管理。基础套餐包的计费因子为用户数，即按照项目管理用户数阶梯分档计费，计费详情如所示。如果超出了存储空间、代码检查行数和编译构建时间的套餐额度，则按超出额度单价另外计费；超出套餐额度的费用说明如所示。
企业管理员登录。（可选）单击软件开发云首页“企业成员管理”对企业成员设置项目创建者权限。企业成员为企业管理员在统一身份认证服务中已创建的用户。将企业成员添加为项目成员。<li>添加“本企业用户”：勾选待添加的成员，单击“确定”。说明：</li>设置项目成员的角色类型。<li>成员列表中的用户为已经添加的项目成员。</li><li>项目的角色类型分为：“项目经理”、“开发人员”、“测试经理”、“测试人员”和“浏览者”，项目管理员（项目经理和测试经理）可以根据实际情况设置成员所属角色，项目角色不同，各服务对应的操作权限也不同。</li><li>项目创建者、项目管理员（项目经理和测试经理）可以添加项目成员。</li><li>了解更多添加成员详情，请参见项目管理中。</li>
两种套餐购买方式分别如下：
单击首页右上方“管理控制台”，在进入的华为云管理控制台页面选择“软件开发云”下任一服务。
全部文档<ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel2"><ul><liclass="nav-itemlevel3"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel4"><ul><liclass="nav-itemlevel3">
>>>
>>
>>
>
>>
>
>
AgentGateway提供基于REST风格的WebService接口，供业务封装使用，提供给二次开发人员对座席业务功能进行开发。本文档描述的是基于REST（RepresentationalStateTransfer，表象状态转换）风格提供的Web服务，所有接口承载于HTTP协议。您也可以通过修改Tomcat配置，使所有的接口调用承载于HTTPS之上。文档中所提供的接口，能够使您开发提供给座席话务员使用的语音电话处理、文字类呼叫处理等业务能力。同时您也可以通过申请其它各类开发包（例如HPS：华为外呼管理系统），提供各类呼叫中心业务的集成能力。
更简易方便的电话和文字类呼叫处理，能够使您降低研发成本。多种开发语言支持，RESTfulWeb服务能够使您通过各类开发语言直接调用，C#、JavaScript、Java都能够方便调用。支持座席业务软件直接访问，您可以直接在座席话务员的电脑上直接访问接口。
本开发指南主要描述AgentGateway二次开发的常用功能，以及指导您如何调用AgentGateway标准化接口使用这些功能。主要内容如下：：二次开发过程中可能涉及到的软件、文档资源链接、技术支持。：如果你仅仅是尝试把Demo运行起来，您应该首先看这部分内容，它会详细说明如何开发AgentDemo以及如何配置您的开发环境。：在开发业务功能之前需要完成的初始化配置，这些配置动作仅需执行一次。：介绍AgentGateway接口的典型功能场景，包括开发流程、样例代码以及注意事项等。：介绍开发过程中常见问题的定位方法。
这里建议您使用Eclipse4.5及以上版本编译执行SampleCodes。如果需要下载及运行Demo，请参考。
本开发指南配套的接口参考文档为《联络中心V200R001C80接口参考》接口参考主要包含：概述：明确配套版本、使用背景、场景、前提条件等内容；并指出可以获取哪些信息，完成什么样的功能。接口详细描述：接口描述：详细描述该接口功能、应用场景和使用方法。使用说明：描述该接口函数使用时需要注意的事项、使用的限制；功能相似的接口或者需要配合使用的接口；前提条件等。方法定义：接口函数的完整声明。参数描述：详细描述参数的含义、取值范围、使用限制、参数之间的依赖等。返回值：说明该接口函数的返回值。使用示例：举例说明该接口函数的使用，关键代码需要注释。错误码：完整的错误码列表，包含开发过程中所有可能出现的错误码及描述。
开发过程中，您有任何问题都可以在中提单跟踪。Devcenter平台登录方式如下：网址：账号：您的邮箱密码：系统会将初始密码发送到您的邮箱，如未收到邮件，可以直接在登录界面点击“忘记密码”进行找回。
本示例以Java语言进行AgentGateway的二次集成开发，实现一个简单的登录功能。它会详细说明如何实现接口，以及如何配置你的开发环境。开发过程中的故障处理请参考。快速入门流程如下：
在进行二次开发之前，应该准备好以下环境和资源，如所示。
打开Eclipse，选择“File&gt;New&gt;Other&gt;Web&gt;DynamicWebProject”。系统显示“NewDynamicWebProject”界面，如所示。新建Web工程在“Projectname”处输入“AgentDemo”，单击“Finish”。系统显示工程主界面，如所示。工程主界面
右键单击“AgentDemo”工程（以下简称Demo工程），选择“Properties”，系统打开如所示窗口。PropertiesforAgentDemo选择“Resource”标签页，在“Textfileencoding”框中选择“Other”，并在下拉框中将编码格式设置为“UTF-8”，单击“OK”，完成设置。
右键单击“src”文件夹，选择“New&gt;Package”，弹出”NewJavaPackage”窗口，如所示。NewJavaPackage在“Name”处输入“com.huawei.agentdemo.util”，单击“Finish”，完成包的新建，如所示。工程主界面同理，新建“com.huawei.agentdemo.bean”、“com.huawei.agentdemo.common”、“com,huawei.agentdemo.filter”、“com.huawei.agentdemo.service”、“com.huawei.agentdemo.servlet”、“com.huawei.sdk.exception”、“com.huawei.sdk.request”、“com.huawei.sdk.util”包，最终效果如所示。工程主界面
右键“com.huawei.agentdemo.util”包，选择“New&gt;Class”，弹出“NewJavaClass”窗口，如所示。NewJavaClass在“Name”处输入“ConfigProperties”，单击“Finish”，完成新建，如所示。工程主界面重复以上步骤，分别在com.huawei.agentdemo.util中创建“ConfigList”类，在com.huawei.agentdemo.bean中创建“ProcessMessageQueue”类，在com.huawei.agentdemo.common中创建“GlobalConstant”、“GlobalObjects”类，在com.huawei.agentdemo.filter中创建“AgentRequestFilter”类，在com.huawei.agentdemo.service中创建“AgentService”、“GetAgentEventThread”类，在com.huawei.agentdemo.servlet中创建“EventHandleServlet”、“InitServletListener”、“OnlineAgentServlet”、“TextChatServlet”、“VoiceCallServlet”类，在com.huawei.sdk.exception中创建“RestClientException”类，在com.huawei.sdk.request中创建“MyHttpDelete”、“Request”类，在com.huawei.sdk.util中创建“LogUtils”、“StringUtils”类。结构如所示。工程主界面
选择“WebContent&gt;Web-INF&gt;lib”，将第三方jar包拷贝到该目录下，工程会自动在“JavaResources&gt;Libraries&gt;WebAppLibraries”中引入lib目录下的jar包。如所示。引入第三方jar包
右键单击“src”，选择“New&gt;Other...”，在系统显示的窗口中选择“XML&gt;XMLFile”，如所示。New单击“Next”，在“Filename”处填写“logback.xml”，如所示。NewXMLFile单击“Finish”，完成文件的新建。
右键单击“WebContent”，选择“New&gt;Other...”，在系统显示的窗口中选择“General&gt;Folder”，如所示。New单击“Next”，在“Foldername”处填写“page”，如所示。NewFolder参考上述步骤，创建文件夹/page/js/dataInfo，/page/js/eventHandle，/page/js/operation，/page/openjs。参考上述步骤，创建文件。如所示。
如上述步骤，先创建文件名/WebContent/WEB-INF/config，再创建文件basic.properties
如上述步骤，创建文件/WebContent/agentapp.html
如上述步骤，创建文件/WebContent/WEB-INF/web.xml
以上流程操作完成后，工程总体结构如下所示：DeploymentDescriptor:AgentDemoJAX-WSWebServicesJavaResources<ulid="ZH-CN_TOPIC_0064611400__ul4980338916142"><liid="ZH-CN_TOPIC_0064611400__li1014865316140">src<ulid="ZH-CN_TOPIC_0064611400__ul554868791624"><liid="ZH-CN_TOPIC_0064611400__li229152631622">com.huawei.agentdemo.bean<ulid="ZH-CN_TOPIC_0064611400__ul4546328416331"><liid="ZH-CN_TOPIC_0064611400__li3956395616217">com.huawei.agentdemo.common<ulid="ZH-CN_TOPIC_0064611400__ul5138241710739"><liid="ZH-CN_TOPIC_0064611400__li4270103810736">com.huawei.agentdemo.filter<ulid="ZH-CN_TOPIC_0064611400__ul612288610912"><liid="ZH-CN_TOPIC_0064611400__li351613601099">com.huawei.agentdemo.service<ulid="ZH-CN_TOPIC_0064611400__ul5507426810953"><liid="ZH-CN_TOPIC_0064611400__li1212047210950">com.huawei.agentdemo.servlet<ulid="ZH-CN_TOPIC_0064611400__ul3362722010118"><liid="ZH-CN_TOPIC_0064611400__li3491490010114">com.huawei.agentdemo.util<ulid="ZH-CN_TOPIC_0064611400__ul52458689101418"><liid="ZH-CN_TOPIC_0064611400__li57142462101415">com.huawei.sdk.exception<ulid="ZH-CN_TOPIC_0064611400__ul6333958310157"><liid="ZH-CN_TOPIC_0064611400__li5295635910154">com.huawei.sdk.request<ulid="ZH-CN_TOPIC_0064611400__ul40731839101556"><liid="ZH-CN_TOPIC_0064611400__li16518432101554">com.huawei.sdk.util<ulid="ZH-CN_TOPIC_0064611400__ul59826508101652"><liid="ZH-CN_TOPIC_0064611400__li61727402101648">LibrariesJavaScriptResourcesbuildWebContent<ulid="ZH-CN_TOPIC_0064611400__ul4713731102039"><liid="ZH-CN_TOPIC_0064611400__li13956141102033">META-INFpage<ulid="ZH-CN_TOPIC_0064611400__ul18662007102118"><liid="ZH-CN_TOPIC_0064611400__li35027211102116">js/dataInfo<ulid="ZH-CN_TOPIC_0064611400__ul545682102136"><liid="ZH-CN_TOPIC_0064611400__li4299460102132">js/eventHandle<ulid="ZH-CN_TOPIC_0064611400__ul27454189102251"><liid="ZH-CN_TOPIC_0064611400__li5817919102249">js/operation<ulid="ZH-CN_TOPIC_0064611400__ul14925674102411"><liid="ZH-CN_TOPIC_0064611400__li3155022310246">openjs<ulid="ZH-CN_TOPIC_0064611400__ul186476310255"><liid="ZH-CN_TOPIC_0064611400__li643649810250">WEB-INF<ulid="ZH-CN_TOPIC_0064611400__ul4734465410260"><liid="ZH-CN_TOPIC_0064611400__li30238666102549">config<ulid="ZH-CN_TOPIC_0064611400__ul23947663102739"><liid="ZH-CN_TOPIC_0064611400__li43734694102736">lib
右键AgentDemo工程，选择“RunAs&gt;Runonserver”，控制台显示如所示。console使用IE浏览器访问http://ip:port/AgentDemo/，如所示。AgentDemo界面
座席事件获取模式在agentgateway/WEB-INF/config/basic.properties中修改配置：EVENT_METHOD=AGENT_POLLGET_EVENT_MODE=1//1表示只获取自己的事件座席接口鉴权模式在agentgateway/WEB-INF/config/basic.properties中修改配置：AUTHMODE=1座席调用登录接口登录成功后，可以从HTTP请求的响应头中获取到名称为Set-GUID的header，值例如为“JSESSIONID=279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0”，其中279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0为guid，这个guid就是这个座席的鉴权信息。座席调用其他接口时需要将该guid设置到http请的header中，header的名称必须为guid。AgentGateway会从请求的header中获取guid进行比较，判断是否合法用户，如果不是合法用户，则返回结果码为100-006或000-003。座席连接超时检测在agentgateway/WEB-INF/config/basic.properties中修改配置：TIMEOUT_FLAG=ON//是否启用检测座席连接超时MAXTIME=300000//超时时间座席超过5分钟没有发送请求到服务端，则座席会被强制签出。
每个接口调用后，无论调用成功还是失败，都会有一个返回值returnCode。如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。
在接口参考文档《联络中心V200R001C80接口参考》里，列出了所有错误码信息，如下截图。根据接口返回的错误码，查询相对应的错误描述。
此步骤根据需要选择，如果不需要修改JRE版本，可以跳过此步骤，本节主要以从JRE1.6换到新安装的JRE1.8为例。正确安装完成jdk1.8.0_92后，右键单击demo工程名，选择“BuildPath&gt;ConfigureBuildPath”，显示工程属性窗口，如所示。Libraries选中“JRESystemLibrary[JavaSE-1.6]”，单击“Edit”按钮，显示编辑库窗口，如所示。EditLibrary选择“AlternateJRE”，图中出现的jre7是已导入的JRE1.7版本，可忽略内容显示，如所示。AlternateJRE单击“InstalledJREs”，如所示。Preferences单击“Add”按钮，显示添加JRE界面，如所示。AddJRE单击“Next”，如所示。JREDefinition1单击“Directory”，添加已安装的JRE路径，如所示。JREDefinition2单击“Finish”，完成JRE添加，如所示。Preferences1勾选中“jre1.8.0_92”，单击“Apply”应用设置，然后单击“OK”完成添加。完成后，在EditLibrary窗口的AlternateJRE下拉框中显示刚才添加的JRE，如所示。AlternateJRE1选中“AlternateJRE”下拉框“jre1.8.0_92”，单击“Finish”，完成demo工程切换jre版本，如所示。Libraries1上图单击“Apply”后，在左边选中“JavaCompiler”标签页，如所示。JavaCompiler在“Compilercompliancelevel”下拉菜单中选择jre相应“1.8”版本，如所示。JavaCompiler1单击“Apply”应用设置，单击“OK”，弹出如确认框。单击“Yes”，完成全部设置。CompilerSettingsChanged
第三方开源JS文件。
第三方开源JS文件。
AgentGateway_IP=xxx.xxx.xxx.xxxAgentGateway_PORT=8043Local_IP=xxx.xxx.xxx.xxx
此步骤根据需要选择，如果不需要修改Tomcat版本，可以跳过此步骤，本节主要以从Tomcat7.0换到新安装的Tomcat8.5为例。正确安装完成Tomcat7.0.76后，在Eclipse界面上选择“Window&gt;Preferences”，显示属性窗口，如所示。Preferences选择“Server&gt;RuntimeEnvironments&gt;Add...”，显示创建服务运行时环境窗口，如所示。新建服务运行环境单击“Next”，选择“Browse...”，选择Tomcat的安装路径。如所示。确定安装路径单击“Finish”，如所示。Tomcat8.5选择“AgentDemo&gt;JavaResources&gt;Libraries&gt;ApacheTomcatv7.0[ApacheTomcatv7.0]”，右击“ApacheTomcatv7.0[ApacheTomcatv7.0]”，选择“BuildPath&gt;RemovefromBuildPath”。右击工程“AgentDemo”，选择“BuildPath&gt;ConfigureBuildPath...”,如所示。ConfigureBuildPath选择“AddLibrary...”，如所示。AddLibrary选择“ServerRuntime”，单击“Next”，选择“ApacheTomcatv8.5”，单击“Finish”，如所示。添加ApacheTomcatv8.5返回“BuildPath”窗口，“Libraries”选项卡显示“ApacheTomcatv8.5[ApacheTomcatv8.5]”,单击“OK”，完成配置。如所示。显示ApacheTomcatv8.5
在对各类组件业务接口集成开发时，基本流程步骤如所示：
初始化组件：实现对业务组件进行资源初始化，设置第三方应用程序的全局业务配置参数。登录或注册用户账号：先完成本地地址、端口和服务器地址、端口等登录或注册相关参数设置，再调用相应接口完成向服务器的注册。业务实现调用：根据实际业务开发需要，调用相应的业务接口实现相关业务，具体可参考后继典型业务场景描述的相关章节。登出或注销用户账号：实现用户退出登录或注册，确保业务接口使用的安全性。去初始化组件：实现对业务组件占用的资源释放。
座席必须签入，并且签入至少一个技能队列后，才能给用户提供业务服务。
网络已正确连接。当前座席未签入。
调用签入接口，流程如所示。
init.js监听页面登录按钮点击事件并发起签入请求：$("#TellerLogin").click(function(){varworkNo=$("#tellerId").val();varpassword=$("#password").val();varphonenum=$("#phonenumber").val();varisAutoanswer;if($("TellerAutoAnswerCheckbox").attr('checked')){isAutoanswer=true;}else{isAutoanswer=false;}if(workNo==""||phonenum==""){return;}login(workNo,password,phonenum,isAutoanswer);});/**座席签入*/functionlogin(workNo,password,phonenum,isAutoanswer){$.post("/"+WEB_NAME+"/online.do",{workNo:workNo,password:password,phonenum:phonenum,isAutoanswer:isAutoanswer,type:LOGIN},function(data){varretcode=(JSON.parse(data)).retcode;switch(retcode){caseglobal_resultCode_SUCCESSCODE:global_workNo=$("#workNo").val();setTimeout('getEventLisnter()',500);//启动前端事件获取线程resetSkill(global_workNo);//签入技能if($("#voicePhone").attr("checked")){voiceLogin();//签入话机}break;default:writeLog(data);break;}});}OnlineAgentServlet对请求类型做分发：protectedvoiddoPost(HttpServletRequestrequest,HttpServletResponseresponse)throwsServletException,IOException{request.setCharacterEncoding("utf-8");response.setCharacterEncoding("utf-8");response.setContentType("text/html");StringworkNo=request.getParameter("workNo");Stringtype=request.getParameter("type");Stringpassword=request.getParameter("password");Stringphonenum=request.getParameter("phonenum");StringisAuto=request.getParameter("isAutoanswer");Stringresult="";booleanisAutoanswer=true;if("false".equals(isAuto)){isAutoanswer=false;}if(StringUtils.isNullOrBlank(workNo)){return;}if(StringUtils.isNullOrBlank(type)){return;}switch(type){caseGlobalConstant.LOGIN:if(StringUtils.isNullOrBlank(phonenum)){return;}result=AgentService.login(workNo,password,phonenum,isAutoanswer);break;caseGlobalConstant.LOGOUT:result=AgentService.logout(workNo);break;caseGlobalConstant.READY:result=AgentService.ready(workNo);break;caseGlobalConstant.BUSY:result=AgentService.busy(workNo);break;caseGlobalConstant.WORK:result=AgentService.work(workNo);break;caseGlobalConstant.OUTWORK:result=AgentService.outwork(workNo);break;caseGlobalConstant.RESETSKILL:result=AgentService.resetSkills(workNo);break;caseGlobalConstant.REMOVEWORKNO:GlobalObjects.loginedMap.remove(workNo);default:break;}PrintWriterout=response.getWriter();out.println(result);out.flush();out.close();}AgentService处理签入请求，调用AgentGateway的签入接口：/***座席签入的方法*请求方法：PUT**请求URL：http(s)://ip:port/agentgateway/resource/onlineagent/{agentid}ds*其中，ip为agentgateway服务器地址，port为agentgateway服务器的HTTP（或HTTPS）端口号，{agentid}为座席工号。**该接口的请求消息体举例如下：*{"password":"","phonenum":"40038","status":"4","releasephone":"false","agenttype":"4"}*/publicstaticStringlogin(StringworkNo,Stringpassword,Stringphonenum,booleanisAutoanswer){log.info(workNo+":sendLoginMessagebegin.");Stringurl=prefix+"onlineagent/"+workNo+"/forcelogin";//请求路径GlobalObjects.loginedMap.put(workNo,newProcessMessageQueue());//为每个签入的座席创建一个消息队列用于存放该座席的事件Stringresp="";Map&lt;String,Object&gt;loginParam=newHashMap&lt;String,Object&gt;();//座席登陆参数loginParam.put("password",password);//座席密码loginParam.put("phonenum",phonenum);//座席电话loginParam.put("autoanswer",isAutoanswer);//设置是否自动应答loginParam.put("autoenteridle",true);//通话释放后是否自动进入空闲态，默认为true。loginParam.put("status",4);//签入后的状态，默认为空闲态。4：空闲，5：整理态loginParam.put("ip",localIP);//座席ip/**该接口的响应消息体举例如下：*{"message":"","retcode":"0","result":{"vdnid":1,"workno":"291","mediatype":"TTF","loginTime":"1471585949806",*"isForceChange":"false"}}*/Map&lt;String,Object&gt;result=Request.put(url,loginParam);//调用签入接口并接受响应消息体try{resp=StringUtils.beanToJson(result);}catch(IOExceptione){log.warn("resultisnotvariable"+e.getMessage());}if("0".equals(result.get("retcode"))){log.info(workNo+"loginsuccess");}else{log.info(workNo+"loginfailed---"+resp);GlobalObjects.loginedMap.remove(workNo);}log.info(workNo+":sendLoginMessageend.");returnresp;}
除了签入之外的其他的业务请求，需要在请求时加入两个鉴权信息：用于负载均衡器对请求路由座席调用登录接口登录成功后，可以从HTTP请求的响应头中获取到名称为Set-Cookie的header，值例如为“huaweielbsession=abe5358acc98db0b7f1e480de0f8ea3e”，这个cookie就是这个座席的鉴权信息。座席调用其他接口时需要将该cookie设置到http请的header中，header的名称为Cookie。若不带该cookie，则返回结果码有可能为100-006。用于AgentGateway接口鉴权座席调用登录接口登录成功后，可以从HTTP请求的响应头中获取到名称为Set-GUID的header，值例如为“JSESSIONID=279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0”，其中279fe21d-2caa-4437-84c3-ab9e9dae20f5.AgentGateway0为guid，这个guid就是这个座席的鉴权信息。座席调用其他接口时需要将该guid设置到http请的header中，header的名称必须为guid。AgentGateway会从请求的header中获取guid进行比较，判断是否合法用户，如果不是合法用户，则返回结果码为100-006或000-003。该部分代码实现示例如下：
座席签出，停止提供业务服务。
座席已经签入，并且座席没有在呼叫或者通话中。
调用签出接口，流程如所示。
无。
座席在接听来话前，必须签入至少一个技能。
座席已签入。
调用重置技能队列接口，流程如所示。座席在签入后，必须签入至少一个技能，才可以接听来话。座席在签入技能队列时可以选择自动签入座席所配置的技能，也可以选择手工签入技能。当选择手工签入技能时，需要在路径中传入skillid的字符串组，可以通过调用在线座席查询配置技能队列接口，查询该座席自己的配置的技能队列信息，该接口响应消息的"result"为技能队列数组。
无。
当座席需要处理其他事务（如内部讨论）时，执行示忙操作，进入示忙状态。当座席处理其他事务（如内部讨论）结束，执行示闲操作，进入空闲态，可以继续接听客户呼叫。
座席已签入。
座席在“闲态”时调用示忙接口，触发示忙成功事件(AgentState_SetNotReady_Success)。座席在“忙态”时调用取消示忙或示闲接口，触发取消示忙成功事件(AgentState_CancelNotReady_Success)。
需要注意的时座席在“工作态”时示忙，不会触发示忙成功事件(AgentState_SetNotReady_Success)，当调用退出工作态接口时，才会触发示忙成功事件(AgentState_SetNotReady_Success)。示忙原因码范围为200-250，华为联络中心不作设置，需要集成商维护。
整理态，也称为事后整理态或工作态，指座席接听完一个呼叫后对该呼叫涉及的业务进行整理，记录一些信息的时间。座席进入整理态后不分配来话，处于整理态时可以接收内部呼叫或呼出。进入整理态场景：座席签入，如果设置了签入时进入整理态，则会自动进入整理态。通话结束，如果设置了通话结束后进入整理态，则自动进入整理态。退出整理态场景：座席手动退出整理态，进入空闲态或整理态前的状态。座席通话结束，系统设置了进入整理态，座席会在系统配置的“最大整理时长”后，自动退出整理态，进入空闲态（如果已经预示忙/休息，则会进入示忙/休息态）。
座席已签入。
座席调用进入工作态接口，接口调用成功则会触发进入工作态事件(AgentState_SetWork_Success)。座席调用退出工作态接口，接口调用成功则会触发退出工作态事件(AgentState_CancelWork_Success)。
无。
座席收到语音呼叫请求进行应答处理。
座席已经签入。座席收到AgentEvent_Ringing事件。
调用呼叫应答接口，流程如所示。当有通话分配给坐席时，该坐席会收到AgentEvent_Auto_Answer事件或AgentEvent_Ringing事件。如果收到AgentEvent_Auto_Answer事件，则坐席自动应答，成功建立通话后收到AgentEvent_Talking事件。如果收到AgentEvent_Ringing事件，则坐席需要手工应答，如果坐席没有应答或者拒接，则会触发AgentEvent_No_Answer事件；如果坐席成功应答，则会触发AgentEvent_Talking事件。
无。
座席对正在通话中的语音呼叫进行挂断操作。
座席已签入。座席有正在通话中的语音呼叫。
当座席需要挂断当前正在通话中的呼叫时，调用语音通话挂断呼叫接口，接口调用成功后会依次触发座席退出呼叫事件(AgentEvent_Call_Release)和客户退出呼叫事件(AgentEvent_Customer_Release)。
无。
座席需要回访客户，或进行主动营销时，可以指定客户号码，进行手工呼出。
座席已签入。座席当前无正在接听的语音呼叫（不包括保持后的语音呼叫）。
调用外呼接口，流程如所示。座席发起外呼后，依次收到物理话机振铃(AgentOther_PhoneAlerting)、物理话机摘机(AgentOther_PhoneOffhook)和对方振铃(AgentEvent_Customer_Alerting)事件。如果没有收到对方振铃事件，检查被叫号码是否正确。如果被叫接听了来电，则会触发座席进入Talking事件(AgentEvent_Talking)。如果被叫没有应答或者拒接，则会触发外呼失败事件(AgentEvent_Call_Out_Fail)。
无。
座席把正在进行的通话转移给第三方，转移目的方可以是座席、技能队列、IVR或外部专家。
用户与座席A正在两方通话中，而且通话没有被静音或保持。用户与座席A当前没有在进行桌面共享或远程控制。如果转移到指定的业务队列，则该业务队列下需要有座席登录。如果转移到指定的座席，则该座席必须处于“空闲态”。
调用呼叫转移接口，流程如所示。呼叫转移可以选择将通话转移到技能队列、业务代表、IVR设备、系统接入码和外呼号码，以转技能队列和转坐席为例，在转移之前先要查询节能队列或在线坐席，查询的目的是获取转移的地址。转移成功触发坐席退出呼叫事件(AgentEvent_Call_Release)，转移失败触发连接失败事件(AgentEvent_Connect_Fail)
无。
内部呼叫是指座席之间（包括质检员）需要内部沟通时，座席可以向对方发起语音呼叫，实现内部通话。
座席已签入，而且当前状态为空闲态、示忙态或者工作态。或者座席与用户正在通话中，并且通话已被座席保持。被叫座席已经登录并且处于工作态或者空闲态。
座席调用内部呼叫接口，接口调用成功后依次触发物理话机振铃(AgentOther_PhoneAlerting)、物理话机摘机(AgentOther_PhoneOffhook)和对方振铃(AgentEvent_Customer_Alerting)事件。若对端座席应答，则会触发座席进入Talking事件(AgentEvent_Talking)。若对端座席没有应答或拒接（调挂断呼叫接口），则会触发内部呼叫失败事件(AgentEvent_Inside_Call_Fail)。
无。
座席在收到文字交谈呼叫请求后，进行应答处理。
座席已经签入，且已签入文字交谈的技能。收到文字交谈会话振铃事件。
调用文字交谈应答接口，流程如所示。当有通话分配到座席时，该座席收到文字交谈会话振铃事件(AgentChat_Ring)。若座席成功应答该通话，则会触发文字交谈会话连接建立事件(AgentChat_Connected)。若座席拒接该来话，则会触发文字交谈会话结束事件(AgentChat_Disconnected)和示闲事件(AgentState_Ready)。若座席长时间没有应答该来话，则会触发文字交谈会话结束事件(AgentChat_Disconnected)、平台通知座席久不应答事件(AgentEvent_No_Answer_From_Cti)和示忙成功事件(AgentState_SetNotReady_Success)。此时若还有其他处空闲态的座席具有文字交谈的技能，则平台将该通话转移给其他座席，触发文字交谈会话转移开始事件(AgentChat_TransferStart)，否则触发所有座席全忙事件(AgentOther_All_Agent_Busy)。
座席签入时是否自动应答的参数只对语音通话生效。文字交谈若要实现自动应答，集成商可在业务逻辑中自己实现，例如在收到文字交谈会话振铃事件(AgentChat_Ring)后即调用文字交谈应答接口。
座席关闭某一个正在进行的文字交谈会话。
座席已签入。座席有正在进行的文字交谈且会话有效。
座席调用文本消息关闭文字交谈接口，若调用成功则会触发文字交谈会话结束事件（AgentChat_Disconnected）和示闲事件（AgentState_Ready）。
无。
座席发送和接收文字消息。
座席已签入且文字交谈会话已经建立。
调用文本消息发送文字消息接口，若调用成功，则对端座席会触发文字交谈消息获取事件(AgentChat_DataRecved)；若对端为用户，则用户会收到接收到座席消息事件(WECC_CHAT_RECEIVEDATA)（见ICSGateway开发指南）。座席收到文字交谈消息获取事件(AgentChat_DataRecved)后，解析事件信息，参数"chatContent"的值为文字消息的内容。
无。
座席向另一个座席发起内部文字交谈。
座席已签入，且具有文字交谈的能力。
调用文本消息内部文字交谈接口，若接口调用成功则会触发座席忙事件(AgentState_Busy)。对端座席若成功应答，则触发文字交谈内部呼叫会话创建事件(AgentChat_CallOutCreated)和文字交谈会话连接建立事件（AgentChat_Connnected）。若对端座席拒接或久不应答，则触发文字交谈发起内部会话失败事件（AgentChat_CalloutFailed）。
无。
座席把与某一个用户的文字交谈会话转移给其他座席。
座席已签入，且具有文字交谈的技能。座席与某一用户在通话中。
调用文本消息转移文字交谈接口，若接口调用成功则触发文字交谈会话结束事件（AgentChat_Disconnected）、示闲事件（AgentState_Ready）和文字交谈会话转移开始事件（AgentChat_TransferStart）。若对端座席拒接、久不应答或应答失败，则触发文字交谈会话转移失败事件（AgentChat_TransferFailed）。
无。
https://github.com/Huawei/eSDK_CloudEC_Overall_Demo_Windows
华为企业云通信CloudEC解决方案基于公有云提供了会议、即时通信、总机、联络中心四个SaaS服务。其中会议业务支持会议管理和控制、音视频和数据协作等能力的开放，配套提供了开发指南、接口手册和样例代码帮助开发者快速集成，还可连接华为的远程开放实验室进行在线测试。开发过程中如有疑问，参考章节，开发者可通过的Devcenter、论坛和热线等多种途径进行交流和咨询，我们有对应的技术和业务专家，为您提供从学习、开发和测试全流程提供端到端的服务和支撑。
两种开放方式北向开放REST接口：通过能力开放网关提供网络侧REST接口，支持与第三方WEB服务器基于HTTP/HTTPs进行交互。南向开放客户端SDK：提供Windows/Android/iOS平台的客户端SDK，第三方客户端应用通过简单的接口调用来集成相关通信能力。架构说明
二次开发总体流程基于企业云通信平台进行二次开发总体上由以下五个骤组成：<oltype="a"id="ZH-CN_TOPIC_0069069793__ol66744020152724"><liid="ZH-CN_TOPIC_0069069793__li4405967992339">注册华为云登录华为云：后，单击“注册”，按照界面提示完成华为云的注册。成功注册后请尽快完成实名认证。订购华为云会议服务登录华为云：后，在首页选择“产品&gt;企业应用&gt;会议”，进入会议首页。在首页查看会议介绍，需要订购会议服务请拨打售前咨询电话：4000-955-988转1。下载二次开发资源<ustyle="color:#0000FF;"id="ZH-CN_TOPIC_0069069793__u4591815693149">二次开发指南</u>：面向开发者提供二次开发端到端指导，通过快速入门和典型应用开发场景，循序渐进地指导开发人员完成基于平台/产品提供的开放API或SDK进行二次开发，以最终实现某个特性或功能。<ustyle="color:#0000FF;"id="ZH-CN_TOPIC_0069069793__u2111919794534">接口参考</u>：包含接口分类说明、方法定义、参数描述、返回值、错误码等，通过多种方式对API信息进行组织，根据平台的形态，提供较好的信息索引方式，便于开发者查询具体接口的详细信息。<ustyle="color:#0000FF;"id="ZH-CN_TOPIC_0069069793__u3803392695420">SDK开发包</u>：将企业云通信的实时音视频、数据协作等电信能力按不同的平台进行封装，通过API接口的形式对外开放，支持Windows、Android、iOS等平台。第三方应用开发商/开发者获得相应的许可后，可以对开放能力进行调用，丰富现有应用的业务体验。<ustyle="color:#0000FF;"id="ZH-CN_TOPIC_0069069793__u4174744795556">样例代码</u>：提供统一鉴权与登录、音视频呼叫、音视频会议、桌面协同与共享等功能的全量示例代码，开发人员通过看示例代码可快速掌握相关功能的集成方法。集成开发和测试二次开发主要涉及服务器REST集成和客户端SDK集成，根据需求场景选择集成方式。开发者准备好相应平台的开发环境，参考开发指南和示例代码，根据业务场景在应用中集成需要的通信能力。此阶段可申请连接进行应用调试和功能测试。商用发布开发者完成应用开发和调测后可以接入到企业云通信的生成环境，并将应用发布给最终用户使用。服务器REST集成<oltype="a"id="ZH-CN_TOPIC_0069069793__ol67043133111243"><liid="ZH-CN_TOPIC_0069069793__li66517291111243">服务器地址订购SaaS业务后，可获取企业云通信RESTAPI的服务接入地址。订购前可免费连接华为远程实验室环境，参考传输安全支持通过HTTP或HTTPS通道进行请求通信。为了获得更高的安全性，推荐您使用HTTPS通道发送请求。HTTP编码请求及返回结果都使用UTF-8字符集进行编码。帐号模型企业云通信支持SP、企业、员工多级管理模型；开发者订购企业云通信业务后就拥有了企业的创建和管理权限，可通过Console或业务发放接口创建企业和员工账号(EC账号)，例如创建帐号：w00255686@huawei.com密码：1qaz@WSX开发者的第三方应用集成企业云通信的能力时需要为第三方应用的用户帐号绑定EC帐号，第三方应用的用户账号和EC帐号是一对一映射的。第三方应用和企业云通信的业务模型对应关系如下图所示：登录鉴权第三方WEB服务器使用业务接口之前需要先调登录鉴权接口，并成功获取认证Token。企业云通信采用HTTPDiget鉴权机制，通过MD5算法对用户名和密码进行加密。登录鉴权Token获取步骤如下图所示：发送登录请求开发者发送一个登录请求给服务器，具体格式如下：获取401挑战响应发送登录请求后，开发者会获取一个401挑战响应。收到响应后，首先获取响应头WWW-Authenticate中的realm和nonce，然后按照以下方法计算response的值，其中MD5采用32位小写加密算法。发送鉴权认证开发者根据401挑战响应计算出response值后，发送鉴权认证请求给服务器，具体格式如下：获取鉴权成功响应开发者发送鉴权认证请求后会获取鉴权成功的响应，解析消息后获取&lt;AccessToken&gt;标签内的值即为token。客户端SDK集成<oltype="a"id="ZH-CN_TOPIC_0069069793__ol58373667172724"><liid="ZH-CN_TOPIC_0069069793__li33306837145432">CloudECSDK是什么？CloudECSDK，是一个基于企业云通信业务场景的客户端LIB库，集成了对媒体（音视频转发和转码、丢包补偿、回音消除等）和信令(注册、路由、呼叫控制等)的处理能力,对外提供简单的API，开发者不需要关注底层的技术实现细节。第三方应用开发商/开发者获得相应的许可后，可以对相关开放能力进行调用，丰富和增强您现有应用的业务体验。CloudECSDK支持Android、iOS、Windows平台，配套提供了开发指南、接口参考和客户端Demo。其中客户端Demo提供一系列SampleCodes演示如何调用接口，帮助您完成集成企业云通信实时音视频能力的相关业务开发。CloudECSDK架构CloudECSDK的使用第三方客户端应用，通过集成CloudECSDK对接企业云通信，如何获取SDK请参见。开发者快速上手，可通过参考中的HelloWorld，导入SDK，完成相应环境的准备。进一步深入了解某个能力如何集成，需要学习开发指南和接口参考的具体章节，另外Demo中的代码样例是您二次开发过程中的得力助手。CloudECSDK是基于企业的员工账号（EC帐号）鉴权，使用SDK能力前先要完成鉴权登录。开发者订购企业云通信业务后就拥有了企业的创建和管理权限，可通过Console或业务发放接口创建企业和员工账号，例如创建帐号：w00255686@huawei.com密码：1qaz@WSX。
访问“”，在“软件下载&gt;行业解决方案”显示的页面选择“eSDK解决方案&gt;eSDKEC”。
访问“”下载开发指导文档。《会议接口参考(REST)》《会议开发指南(REST)》《会议接口参考(Windows)》《会议开发指南(Windows)》《会议接口参考(Android)》《会议开发指南(Android)》《会议接口参考(iOS)》《会议开发指南(iOS)》
提供音视频呼叫、音视频会议、桌面共享与协同(数据会议)的样例代码。
这里建议您使用VisualStudio2012及以上版本编译执行SampleCodes。
这里建议您使用AndroidStudio1.5及以上版本编译执行SampleCodes。
这里建议您使用Xcode8.0及以上版本编译执行SampleCodes。
在使用CloudECSDK提供的各类组件业务接口集成开发时，基本的流程步骤包含：初始化业务组件；登录或注册用户帐号；业务实现调用；登出或注销用户帐号；去初始化业务组件。
初始化组件：实现对业务组件进行资源初始化，设置第三方应用程序的全局业务配置参数。登录或注册用户帐号：先完成本地地址、端口和服务器地址、端口等登录或注册相关参数设置，再调用相应接口完成向服务器的注册。业务实现调用：根据实际业务开发需要，调用相应的业务接口实现相关业务，具体可参考后继典型业务场景描述的相关章节。登出或注销用户帐号：实现用户退出登录或注册，确保业务接口使用的安全性。去初始化组件：实现对业务组件占用的资源释放。
本示例以C语言调用SDK接口，完成简单的登录鉴权功能为例，向您展示如何使用Windows平台下的CloudECSDK快速进行二次集成开发。开发过程中的故障处理请参考<uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_zh-cn_topic_0063035808_u3978613017139"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u944089203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u52300681203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u35637348203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u56155488203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u36065660203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u4007295203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u30271416203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u10820031203453"><uid="ZH-CN_TOPIC_0069398254__zh-cn_topic_0069035583_zh-cn_topic_0063525281_u1202225203453"></u></u></u></u></u></u></u></u></u></u>。快速入门流程如下：
在进行二次开发之前，应该准备好以下环境和资源，如所示。
访问“华为开发者社区”的“”页面，点击“融合通信”下载区域，在“客户端”区域选择对应版本的软件包。软件包中包括如下内容：demo：常用场景参考样例代码。doc：二次开发接口参考文档和开发指南。software：二次开发接口软件包。
SDK软件包名称：CloudPBXandEC.zip。SDK下载路径：参见。
双击“资源视图&gt;eSDK_EC.rc&gt;Dialog&gt;IDD_ESDK_EC_DIALOG”，打开工程对应的Dialog页面，如所示。打开对话框删除原有控件：CTRL+A组合键选中页面上原有全部控件，按Delete键删除；如所示。删除控件添加服务器地址控件和服务器地址注释控件<oltype="a"id="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_ol2022415395231"><liid="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_li3508065895225">添加服务器地址控件：打开“工具箱”页面，直接选中“IPAddressControl”控件，拖至右边页面上；如所示。添加服务器地址为服务器地址控件绑定变量：选中服务器地址控件，右击选择“添加变量”，打开“添加成员变量向导-eSDK_EC”页面，如所示。服务器地址添加变量“变量名”填写“m_ipCtrlServerIP”，其它默认设置保持不变，点击完成，如所示。服务器地址绑定变量添加服务器地址注释控件：打开“工具箱”页面，直接选中“StaticText”控件，拖至右边页面上，如所示。添加服务器地址注释修改服务器地址注释控件：选中服务器地址注释控件，右击选择“属性”，如所示。打开服务器地址注释在对应的属性页上，找到“Caption”项，将值修改为“服务器地址”，按下回车键，如所示。设置服务器地址注释添加服务器端口控件和服务器端口注释控件添加服务器端口控件：<oltype="a"id="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_ol1898819410227"><liid="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_li14463294">打开“工具箱”页面，直接选中“EditControl”控件，拖至右边页面上，如所示。添加服务器端口为服务器端口控件绑定变量：选中服务器端口控件，右击选择“添加变量”，打开“添加成员变量向导-eSDK_EC”页面；如所示。服务器端口添加变量“变量名”填写“m_edtServerPort”，其它默认值保持不变，点击“完成”，如所示。服务器端口绑定变量添加服务器端口注释控件：打开“工具箱”页面，直接选中“StaticText”控件，拖至右边页面上,如所示。添加服务器端口注释修改服务器端口注释控件：选中服务器端口注释控件，右击选择“属性”，如所示。打开服务器端口注释在对应的属性页上，找到“Caption”项，将值修改为“服务器端口”，按下回车键，如所示。服务器端口注释添加登录帐号控件和登录帐号注释控件。同，添加登录帐号控件和登录帐号注释控件，并把登录帐号控件绑定变量m_edtLoginAccount。添加登录密码控件和登录密码注释控件。同，添加登录密码控件和登录密码注释控件，并把登录密码控件绑定变量m_edtPWD。添加登录按钮控件：<oltype="a"id="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_ol4382789102057"><liid="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_li19349519102014">添加登录按钮控件：打开“工具箱”页面，选中“Button”控件，拖至右边页面上，如所示。添加登录按钮修改登录按钮上面的注释：选中登录密码注释控件，右击选择“属性”，如所示。打开登录按钮属性在对应的属性页上，找到“Caption”项，将值修改为“Login”，按下回车键，如所示。设置登录按钮属性页面完成效果如所示：最终页面效果为登录按钮添加事件：双击“Login”控件，如所示。登录按钮位置系统会自动在eSDK_ECDlg.cpp中添加登录按钮事件方法OnBnClickedButton1()。CTRL+S键保存现有工程，如所示。登录按钮事件填充代码，见HelloWorld源码文件，如所示：填充代码<oltype="a"id="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_ol14271221102649"><liid="ZH-CN_TOPIC_0069398259__zh-cn_topic_0069035459_zh-cn_topic_0063525286_zh-cn_topic_0063035664_li48933927102637">用eSDK_ECDlg.cpp文件源码内容替换工程中原eSDK_ECDlg.cpp文件内容；用eSDK_EC.cpp文件源码内容替换工程中原eSDK_EC.cpp文件内容；用eSDK_ECDlg.h文件源码内容替换工程中原eSDK_ECDlg.h文件内容；用eSDK_EC.h文件源码内容替换工程中原eSDK_EC.h文件内容；保存现有工程：点击菜单栏“全部保存”快捷图标。
选中工程，右键选择“重新生成”，进行编译，如所示。编译工程观察“输出”窗口，出现信息“全部重新生成，成功1个，失败0个，跳过0个”，代表编译成功，如所示。编译结果编译成功后，工程文件夹中会生成一个debug文件夹，debug文件夹中就是刚编译生成的可执行程序eSDK_EC.exe，如图所示。说明：此处.exe可执行程序所在路径为${path}\eSDK_EC\debug，而非${path}\eSDK_EC\eSDK_EC\debug。可执行程序路径将“${path}\eSDK_EC\eSDK_EC\TUP_V600R006C00\dll”文件夹下的所有文件及文件夹全部拷贝至中的可执行程序文件夹里，用于可执行程序eSDK_EC.exe的调用，如所示。源DLL位置拷贝至如所示。目的DLL位置进入到eSDK_EC&gt;debug文件夹中，双击eSDK_EC.exe运行工程，在页面上输入如下信息：<ulid="ZH-CN_TOPIC_0069398260__zh-cn_topic_0069035593_zh-cn_topic_0063525287_zh-cn_topic_0063035750_ul65737344103642"><liid="ZH-CN_TOPIC_0069398260__zh-cn_topic_0069035593_zh-cn_topic_0063525287_zh-cn_topic_0063035750_li63315137103642">服务器地址：eSDKEC服务地址服务器端口号：eSDKEC服务端口号登录帐号：eSDKEC登录帐号登录密码：eSDKEC登录密码点击“Login”按钮，如果弹出以下对话框，表示登录成功，如所示。效果图
在使用eSDKCloudEC系列业务组件，配套CloudEC解决方案实现各类业务前，需要先完成SDK的基础组件初始化。
无。
初始化应用程序在初始化业务组件前，调用tup_service_startup()接口完成SDK基础组件初始化。说明：此接口对应的入参结构信息中，相应的字段均应取值为0。代码示例：//ccodeTUP_RESULTresult;TUP_S_INIT_PARAMparam={0};result=tup_service_startup(&amp;param);if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("tup_service_startupfailed.result=%#x",result);returnSERVICE_E_AUTH_LOGIN_STARTUP_FAILED;}去初始化应用程序关闭时，UI调用tup_service_shutdown()去初始化基础组件，释放相应资源。代码示例：//ccode(void)tup_service_shutdown()
无。
“统一鉴权与登录”组件基于CloudEC解决方案，向第三方开发者开放统一的鉴权和登录能力。对于多个业务应用，用户只需登录一次，不需要多次输入用户名和密码，简化客户操作，提升业务访问速度。在CloudEC解决方案下，使用业务模块前，必须初始化“统一鉴权与登录”并进行鉴权登录。
在使用“统一鉴权与登录”组件进行鉴权和登录处理前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用tup_login_log_start()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小（单位：KB，建议取值1*1024）、日志文件最大个数（建议取值1）和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为LOGIN_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为LOGIN_E_LOG_INFO。一般情况下，无需停止日志，即接口tup_login_log_stop()一般无需调用。代码示例：//ccodeTUP_RESULTresult;TUP_INT32log_level=LOGIN_E_LOG_DEBUG;//DebuglevelTUP_INT32log_max_size_kb=SDK_AUTH_LOGIN_LOG_FILE_MAX_SIZE;//MaximumvalueforeachlogfileTUP_INT32log_file_count=SDK_AUTH_LOGIN_LOG_FILE_MAX_NUM;//LogfilenumberTUP_CHAR*log_path=(TUP_CHAR*)SDK_ADAPT_LOG_PATH;//Logstoragepath/*Step1:[Must]Setcomponentlogparameterandstartthelog.*/result=tup_login_log_start(log_level,log_max_size_kb,log_file_count,log_path);if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("Authenticationandlogincomponentstartlogfailed.result=%#x",result);returnSERVICE_E_AUTH_LOGIN_INIT_FAILED;}UI调用tup_login_init()初始化鉴权登录组件，初始化资源。说明：传入的参数为认证模式取值参考LOGIN_E_VERIFY_MODE，其中：<ulid="ZH-CN_TOPIC_0069398263__zh-cn_topic_0069035557_zh-cn_topic_0063022967_u83a54208a4e14664a80d347829077897"><liid="ZH-CN_TOPIC_0069398263__zh-cn_topic_0069035557_zh-cn_topic_0063022967_lfd8c27a09da24d7cabd60786b4b08c69">如果本地有证书才需要传入LOGIN_E_VERIFY_MODE_SERVER表示认证服务端，取值为1；如果没有证书，则设置LOGIN_E_VERIFY_MODE_NONE为不认证，取值为0，一般建议设置为不认证。UI调用tup_login_register_process_notifiy()注册鉴权和登录业务处理通知回调函数。说明：<oltype="a"id="ZH-CN_TOPIC_0069398263__zh-cn_topic_0069035557_zh-cn_topic_0063022967_o5f10a1a6c2c44b00af730717fe1747bf"><liid="ZH-CN_TOPIC_0069398263__zh-cn_topic_0069035557_zh-cn_topic_0063022967_l080f6a1d59474a05834d116cd4db1fcf">开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。应用程序关注的业务事件：代码示例：去初始化应用程序关闭时，UI调用tup_login_uninit()去初始化鉴权和登录组件，释放相应资源。代码示例：//ccodeTUP_RESULTresult;/*[Must]Uninstallingtheunderlyingserviceofthecomponent.*/result=tup_login_uninit();if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("Authenticationandlogincomponentuninitfailed.result=%#x",result);returnSERVICE_E_AUTH_LOGIN_UNINIT_FAILED;}
无。
在使用CloudEC解决方案下的各类业务之前，需要向服务器完成鉴权和登录，获取用户的鉴权凭证（Token）信息、业务配置权限信息和相应的业务帐号与服务器配置信息。鉴权和登录成功后，SDK自动按保活周期定时刷新鉴权凭证信息。
已完成鉴权和登录组件初始化。
初始鉴权和登录UI根据实际网络配置策略，调用tup_login_set_proxy()设置HTTP代理信息。说明：1、此步骤可选，根据用户网络接入情况选择是否需要设置；2、HTTP代理信息包含代理服务器地址和认证信息。代码示例：//ccodeLOGIN_S_PROXY_PARAMparam={0};TUP_RESULTresult=TUP_FALL;//完成param赋值操作result=tup_login_set_proxy(&amp;param);if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("tup_login_set_proxyfailed.result=%#x",result);returnSERVICE_E_AUTH_LOGIN_REGISTER_FAILED;}UI调用tup_login_authorize()鉴权登录。说明：<oltype="a"id="ZH-CN_TOPIC_0069398264__zh-cn_topic_0069035495_zh-cn_topic_0063022840_o62432375fa7e47c9b57cc3b59cad292e"><liid="ZH-CN_TOPIC_0069398264__zh-cn_topic_0069035495_zh-cn_topic_0063022840_la2082b90ccd645bdb40afbbd5bb5b88a">支持"普通用户名+密码"鉴权和"第三方tiket"鉴权，在LOGIN_E_AUTH_NORMAL模式下，鉴权信息字段为auth_info，在LOGIN_E_AUTH_TIKET模式下，鉴权信息字段为user_tiket，默认为LOGIN_E_AUTH_NORMAL模式；用户代理user_agent为应用程序类型名，如：“SoftClientonDesktop”；鉴权服务器auth_server根据实际的组网填写：在CludPBX下，server_type应取值为LOGIN_E_SERVER_TYPE_PORTAL，server_url和server_port填写相应的服务器地址和端口，server_version版本当前为"V600R006C00"；用户标识user_id由应用程序生成和管理，用于应用程序关联认证结果上报事件。SDK收到服务器的鉴权登录响应后，向UI上报鉴权结果事件LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT，对应的数据信息结构为LOGIN_S_UPORTAL_AUTHORIZE_RESULT，携带用户的鉴权凭证信息、业务配置权限信息和相应的业务帐号和服务器配置信息。说明：<oltype="a"id="ZH-CN_TOPIC_0069398264__zh-cn_topic_0069035495_zh-cn_topic_0063022840_o677663fa96224dceab134c2363a2cb07"><liid="ZH-CN_TOPIC_0069398264__zh-cn_topic_0069035495_zh-cn_topic_0063022840_lbaa610e5c9a2467cb050b5713edeeabb">deploy_mode：部署模式，标识当前服务器的组网部署方式，应用程序需要根据此字段确定当前组网下的业务能力；auth_token：鉴权凭证（Token值），用于即时消息或会议等业务的登录，应用程序UI需要保存此字符串；sip_account、sip_impi、password_type、sip_password、sip_domain：SIP业务的相关登录信息，用于音视频呼叫和IPT业务的登录；num_of_site、site_info：站点数和站点信息，站点信息中包含一到多个各类业务（即时消息，会议和企业通讯录等）服务器地址信息集合，应用程序应该根据站点信息中的优先级字段选择业务服务器集；expire：鉴权过期时间，应用程序一般无需关注，由SDK处理。UI调用tup_login_firewall_detect()进行组网下的防火墙探测，以判断此当前是否需要使用STG。说明：在“”中获取的site_info-&gt;access_server.svn_uri，用于防火墙探测，其中svn_url可能存在多个地址信息，以“;”分割，需要UI进行解析后填写至被探测的服务器列表，并将端口填写为0；若svn_url内容为空，则无需进行后继步骤。代码示例：//ccodeTUP_RESULTresult;LOGIN_S_DETECT_SERVERdetect_server={0};/*完成detect_server参数赋值*/result=tup_login_firewall_detect(&amp;detect_server)；if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("firewalldetectfailed.result=%#x",result);return;}SDK完成防火墙探测处理，向UI上报探测结果事件LOGIN_E_EVT_FIREWALL_DETECT_RESULT，携带当前的防火墙模式信息。说明：防火墙探测成功：1、若防火墙模式为LOGIN_E_FIREWALL_MODE_NULL，则无需后继步骤；2、若防火墙模式为LOGIN_E_FIREWALL_MODE_ONLY_HTTP或OGIN_E_FIREWALL_MODE_HTTP_AND_SVN，则需对应设置其他各业务模块的防火墙模式，并完成后继STG隧道的创建过程。代码示例：//ccodecaseLOGIN_E_EVT_FIREWALL_DETECT_RESULT:{/*firewalldetectresultevent.*//*NotifyUI*/break;}UI调用tup_login_build_stg_tunnel()创建STG隧道。说明：在“”中获取的site_info-&gt;access_server.stg_info，用于STG隧道创建，其中stg_uri可能存在多个地址信息，以“;”分割。代码示例：//ccodeTUP_RESULTresult;LOGIN_S_STG_PARAMserver={0};/*根据LOGIN_E_EVT_FIREWALL_DETECT_RESULT结果决定是否调用该接口*//*server参数赋值，具体参见说明*/result=tup_login_build_stg_tunnel(&amp;server)；if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("buildstgfailed.result=%#x",result);return;}SDK完成STG创建处理，向UI上报结果事件LOGIN_E_EVT_STG_TUNNEL_BUILD_RESULT，携带当前的防火墙模式信息。代码示例：//ccodecaseLOGIN_E_EVT_STG_TUNNEL_BUILD_RESULT:{/*buildSTGresultevent.*//*NotifyUI*/break;}更新鉴权凭证（Token）SDK在鉴权登录成功后，在鉴权登录有效时间的一半时，自动发起更新鉴权凭证（Token）处理，向UI上报更新结果事件LOGIN_E_EVT_REFRESH_TOKEN_RESULT，若结果为成功，UI则更新记录的鉴权凭证。说明：鉴权登录有效时间在鉴权登录请求的响应中返回，无需应用程序配置。代码示例：//ccodecaseLOGIN_E_EVT_REFRESH_TOKEN_RESULT:{/*Refreshtokenresultevent.*//*NotifyUI*/break;}若自动刷新失败，UI调用tup_login_refresh_token()强制刷新鉴权凭证Token。说明：在业务处理过程中，若SDK返回鉴权凭证Token失效（不同业务下错误码或原因值定义不同），UI也需要调用此接口进行强制更新，并使用更新后的鉴权凭证Token进行业务处理。代码示例：//ccodeTUP_RESULTresult;/*[Must]Refreshtokenvalue.*/result=tup_login_refresh_token();if(TUP_SUCCESS!=result){LOG_D_AUTH_LOGIN_ERROR("Refreshtokenvaluefailed.result=%#x",result);returnSERVICE_E_AUTH_LOGIN_REFRESH_TOKEN_FAILED;}SDK完成强制刷新鉴权凭证Token处理，向UI上报刷新鉴权凭证Token结果事件LOGIN_E_EVT_REFRESH_TOKEN_RESULT，若结果为成功，UI则更新记录的鉴权凭证。若强制刷新失败，SDK会自动发起鉴权登录，向UI上报鉴权结果事件LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT。说明：若鉴权失败，应用程序界面应提示用户，建议用户进行重登录处理。
无。
“音视频呼叫业务”组件基于CloudEC解决方案，向第三方开发者开放音视频呼叫能力。
音视频通话基本业务流程：
主被叫应用程序完成向ECServer注册，并按周期自动发送注册保活消息。
建立通话用户A通过拨号盘、联系人或通话记录等入口拨号呼出，主叫应用程序UI调用SDK接口发起呼叫请求。主叫侧SDK向ECServer发送呼叫请求消息成功后，向UI上报呼出事件；被叫侧SDK收到ECServer呼叫请求消息后，向UI上报来电事件。被叫侧UI收到来电事件，播放来电提示音呈现来电通知界面，同时调用SDK接口发送消息通知主叫，本地正在振铃。主叫侧SDK收到被叫振铃通知消息，向UI上报回铃音事件，UI播放回铃音。被叫用户B选择接听来电，主叫应用程序UI调用SDK接口发送接听呼叫响应消息接听呼叫。主叫侧SDK收到被叫侧的呼叫响应消息后，与被叫侧SDK完成音视频通话协商，建立音视频通话，主、被叫侧SDK向UI上报呼叫接通事件，UI刷新界面通知用户通话接通。说明：通话过程中，主叫用户A和B都可以对通话进行操作，如保持\恢复通话、静音麦克风和调整通话音量等。挂断通话通话过程中，主叫或被叫用户均可以挂断通话，当前以主叫用户A发起挂断为例。用户A在通话界面挂断通话，应用程序UI调用SDK接口挂断呼叫，SDK发送挂断呼叫消息。主、被叫侧SDK完成结束呼叫处理，向UI上报呼叫结束事件，UI刷新界面通知用户通话结束。
在使用“音视频呼叫”业务组件实现音视频呼叫业务前，需要完成组件初始化和应用程序的全局业务配置参数。应用程序的业务配置参数均支持在业务处理前进行动态设置，对于最终应用程序用户无需感知的参数和一般无需要动态设置的参数，放在初始化阶段进行默认设置。
已完成SDK基础组件初始化。
初始化UI调用tup_call_log_start()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小（单位：KB，建议取值10*1024）、日志文件最大个数（建议取值为4）和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为CALL_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为CALL_E_LOG_INFO。代码示例：//ccodestaticconstTUP_INT32SDK_CALL_LOG_FILE_MAX_SIZE=10240;staticconstTUP_INT32SDK_CALL_LOG_FILE_MAX_NUM=4;staticconstchar*SDK_ADAPT_LOG_PATH=".\\tuplog\\";/*Settinglogparametersandstartlog.*/TUP_INT32log_level=CALL_E_LOG_DEBUG;//loglevelTUP_INT32log_max_size_kb=SDK_CALL_LOG_FILE_MAX_SIZE;//MaximumvalueforeachlogfileTUP_INT32log_file_count=SDK_CALL_LOG_FILE_MAX_NUM;//LogfilenumberTUP_CHAR*log_path=(TUP_CHAR*)SDK_ADAPT_LOG_PATH;//Logstoragepath/*Step2:[Must]Setthecallcomponentlogparameterandstartthelog.*/(void)tup_call_log_start(log_level,log_max_size_kb,log_file_count,log_path);UI调用tup_call_init()初始化音视频呼叫业务组件，初始化资源。代码示例：//ccodeTUP_RESULTresult;/*Step3:[Must]Initializingtheunderlyingserviceforcallcomponent.*/result=tup_call_init();if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("Callcomponentinitfailed.result=%#x",result);returnSERVICE_E_CALL_INIT_FAILED;}UI调用tup_call_register_process_notifiy()注册呼叫业务处理通知回调函数。说明：1、开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。2、应用程序关注的业务事件：代码示例：//ccodeTUP_RESULTresult;/*Step4:[Must]Registerthehandlefunctionofanotification.*/result=tup_call_register_process_notifiy((CALL_FN_CALLBACK_PTR)service_call_on_event_notify);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("Registercalleventprocesscallbackfailed.result=%#x",result);(void)tup_call_uninit();returnSERVICE_E_CALL_INIT_FAILED;}UI调用tup_call_set_cfg()设置应用程序的必选参数和可选参数。说明：必选参数：产品类型，对应的cfgid为CALL_D_CFG_ENV_PRODUCT_TYPE，val取值参见CALL_E_PRODUCT_TYPE，不同的类型产品对应的不同值。可选参数:<oltype="a"id="ZH-CN_TOPIC_0069398267__zh-cn_topic_0069035466_zh-cn_topic_0063023112_o2b48b797a0144dadaf8b609c20468112"><liid="ZH-CN_TOPIC_0069398267__zh-cn_topic_0069035466_zh-cn_topic_0063023112_le79dbf4633614fa1855a54937999d4d7">用户代理，对应的cfgid为CALL_D_CFG_ENV_USEAGENT，val取值为字符串，如:"SoftClientonDesktop"，具体可根据应用程序名设置相应的名称。信令传输模式，对应的cfgid为CALL_D_CFG_SIP_TRANS_MODE，val取值参见CALL_E_TRANSPORTMODE，默认为CALL_E_TRANSPORTMODE_UDP，具体可根据组网需要设置为不同的值。若在鉴权登录模块中建立了STG隧道，对应的cfgid为CALL_D_CFG_FIREWALL_MODE，val取值为CALL_E_FIREWALL_MODE_STG。其他可选参数，根据实际的业务需要进行设置。去初始化UI调用tup_call_uninit()去初始化音视频呼叫业务组件，释放相应资源。代码示例：//ccodeTUP_RESULTresult;/*Step1:[Must]Uninstallingtheunderlyingserviceforcallcomponent.*/result=tup_call_uninit();if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("Callcomponentuninitfailed.result=%#x",result);returnSERVICE_E_CALL_UNINIT_FAILED;}
无。
用户在视频通话中暂停或恢复视频发送。设置和取消暂停视频采集针对指定通话，不是针对设备，停止时画面凝固。
视频通话已建立，主被叫正在通话中。
设置和取消暂停视频采集操作本地媒体。UI调用tup_call_video_control()接口暂停或继续视频。代码示例：
无。
管理音视频设备，包括麦克风、扬声器和摄像头。
详见各子场景说明。
获取音、视频设备列表应用程序在任何阶段均可以获取当前可用的音视频设备信息，为更方便地进行后继具体设备管理，建议应用程序在初始化阶段和系统检测到设备变化时，获取设备信息并保存维护。UI调用tup_call_media_get_devices()获取音频视频设备列表。说明：<ulid="ZH-CN_TOPIC_0069398279__zh-cn_topic_0069035595_zh-cn_topic_0063022769_u73e7781e06224c62ab50679d00c21152"><liid="ZH-CN_TOPIC_0069398279__zh-cn_topic_0069035595_zh-cn_topic_0063022769_l828bf6c50f0544089976513717371205">获取麦克风列表时，device_type值为CALL_E_CALL_DEVICE_MIC。获取扬声器列表时，device_type值为CALL_E_CALL_DEVICE_SPEAK。获取摄像头列表时，device_type值为CALL_E_CALL_DEVICE_VIDEO。代码示例：管理麦克风一般用于用户对麦克风进行设置和切换。UI调用tup_call_media_get_mic_index()获取当前使用的麦克风设备序号。说明：设备序号与设备名称的对应关系在“”过程中获取，若应用程序已保存维护设备列表，可查询此列表。代码示例：//ccodeintindex=0;TUP_RESULTresult;/*micdevice*/result=tup_call_media_get_mic_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("getmicdevicefailed.result=%#x",result);returnSERVICE_E_CALL_GET_MIC_INDEX_FAILED;}UI调用tup_call_media_set_mic_index()设置当前使用的麦克风设备序号。代码示例：//ccodeintindex=0;TUP_RESULTresult;/*GetindexvaluefromeUI*//*micdevice*/result=tup_call_media_set_mic_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("setmicdeviceindexfailed.result=%#x",result);returnSERVICE_E_CALL_SET_MIC_INDEX_FAILED;}管理扬声器一般用于用户对扬声器进行设置和切换。UI调用tup_call_media_get_speak_index()获取当前使用的扬声器设备序号。说明：设备序号与设备名称的对应关系在“”过程中获取，若应用程序已保存维护设备列表，可查询此列表。代码示例：//ccodeintindex=0;TUP_RESULTresult;/*speakdevice*/result=tup_call_media_get_speak_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("getspeakdevicefailed.result=%#x",result);returnSERVICE_E_CALL_GET_SPEAK_INDEX_FAILED;}UI调用tup_call_media_set_speak_index()设置当前使用的扬声器设备序号。代码示例：//ccodeintindex=0;TUP_RESULTresult;/*GetindexfromeUI*//*videodevice*/result=tup_call_media_set_speak_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("setspeakdeviceindexfailed.result=%#x",result);returnSERVICE_E_CALL_SET_VIDEO_INDEX_FAILED;}管理摄像头一般用于用户对摄像头进行设置和切换。UI调用tup_call_media_get_video_index()获取当前使用的摄像头设备序号。说明：设备序号与设备名称的对应关系在“”过程中获取，若应用程序已保存维护设备列表，可查询此列表。代码示例：//ccode/*videodevice*/intindex=0;TUP_RESULTresult;result=tup_call_media_get_video_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("getvideodevicefailed.result=%#x",result);returnSERVICE_E_CALL_GET_VIDEO_INDEX_FAILED;}UI调用tup_call_media_set_video_index()设置当前使用的摄像头设备序号。代码示例：//ccode/*videodevice*/intindex=0;TUP_RESULTresult;/*theindexvaluefromeUI*/result=tup_call_media_set_video_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("setvideodeviceindexfailed.result=%#x",result);returnSERVICE_E_CALL_SET_VIDEO_INDEX_FAILED;}管理输出音量获取和设置输出音量。UI调用tup_call_media_get_speak_volume()获取输出音量大小，取值范围为[0，100]。代码示例：//ccode/*videodevice*/intindex=0;TUP_RESULTresult;/*theindexvaluefromeUI*/result=tup_call_media_set_video_index(index);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("setvideodeviceindexfailed.result=%#x",result);returnSERVICE_E_CALL_SET_VIDEO_INDEX_FAILED;}UI调用tup_call_media_set_speak_volume()设置输出音量大小，取值范围为[0，100]，设备类型填写CALL_E_AO_DEV_SPEAKER。代码示例：//ccodeintvolume=0;TUP_RESULTresult;/*GetvoluefromUI*//*Step2:[Must]Setspeakvolume*/result=tup_call_media_set_speak_volume(ao_dev_type,volume);if(TUP_SUCCESS!=result){LOG_D_CALL_ERROR("setspeakvolumefailed.result=%#x",result);returnSERVICE_E_CALL_SET_SPEAK_VOLUME_FAILED;}预览本地视频一般用于设备设置时，检测本地摄像头工作状态是否正常。UI先创建本地预览窗口，再调用tup_call_open_preview()打开本地视频预览窗口，其中摄像头索引填写“”过程中获取到的摄像头索引。代码示例：//ccodeTUP_RESULTresult;unsignedintlocal_preview_wnd;unsignedintindex;/*GetthehandleandtheindexfromeUI*//*[Must]Openthelocalvideopreview*/result=tup_call_open_preview(local_preview_wnd,index);if(TUP_FAIL==result){LOG_D_CALL_ERROR("Openthelocalvideopreviewfailed.result=%#x",result);returnSERVICE_E_COMMON_GENERAL_ERROR;}UI调用tup_call_close_preview()关闭本地视频预览窗口，同时销毁本地预览窗口。代码示例：//ccodeTUP_RESULTresult;/*[Must]Closethelocalvideopreview*/result=tup_call_close_preview();if(TUP_FAIL==result){LOG_D_CALL_ERROR("Closethelocalvideopreviewfailed.result=%#x",result);returnSERVICE_E_COMMON_GENERAL_ERROR;}
无。
“音视频会议”业务组件基于CloudEC解决方案，向第三方开发者开放音视频会议能力。
在使用“音视频会议”业务组件实现音视频会议业务前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用tup_confctrl_set_init_param()设置音视频会议业务初始化参数。说明：初始化参数结构CONFCTRL_S_INIT_PARAM中，<ulid="ZH-CN_TOPIC_0069398282__zh-cn_topic_0069035625_zh-cn_topic_0063022985_ul2855895515549"><liid="ZH-CN_TOPIC_0069398282__zh-cn_topic_0069035625_zh-cn_topic_0063022985_li5076378815549">bWaiMsgpThread，表示是否要等待消息队列线程，应取值为TUP_TRUE(只有话机是不等待)；bBatchUpdate，表示是否启动批量更新会议参数，应取值为TUP_FALSE；bConnectCall，表示是否与音视频呼叫业务同时使用，应用程序应该根据实际情况填写取值，除仅使用“CTC”会议外（Windows平台一般不使用），一般建议取值为TUP_TRUE；bSaveParticipantList，表示是否要保存与会者列表，应取值为TUP_TRUE；ulParaticipantMaxNum，一次上报与会者最大个数,0表示不设置,使用默认值400；ulConfListMaxNum，一次上报会议列表最大个数,0表示不设置,使用默认值100。代码示例：UI调用tup_confctrl_log_config()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小（单位：KB，建议取值10*1024）、日志文件最大个数（建议取值为4）和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为CONFCTRL_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为CONFCTRL_E_LOG_INFO。代码示例：//ccodestaticconstTUP_INT32SDK_VOICE_CONF_LOG_FILE_MAX_SIZE=10240;staticconstTUP_INT32SDK_VOICE_CONF_LOG_FILE_MAX_NUM=4;TUP_INT32log_level=CONFCTRL_E_LOG_DEBUG;//DebuglevelTUP_INT32log_max_size_kb=SDK_VOICE_CONF_LOG_FILE_MAX_SIZE;//MaximumvalueforeachlogfileTUP_INT32log_file_count=SDK_VOICE_CONF_LOG_FILE_MAX_NUM;//MaximumvalueforlogfileTUP_CHAR*log_path=(TUP_CHAR*)SDK_ADAPT_LOG_PATH;//Logstoragepath/*Step2:[Must]Setthevoiceconferencecomponentlogparameterandstartthelog.*/(void)tup_confctrl_log_config(log_level,log_max_size_kb,log_file_count,log_path);UI调用tup_confctrl_init()始化音视频会议业务组件，初始化资源。代码示例：//ccodeTUP_RESULTresult;/*Step3:[Must]Initializingtheunderlyingserviceforvoiceconferencecomponent.*/result=tup_confctrl_init();if(TUP_SUCCESS!=result){LOG_D_VOICE_CONF_ERROR("Voiceconfcomponentinitfailed.result=%#x",result);returnSERVICE_E_VOICE_CONF_INIT_FAILED;}UI调用tup_confctrl_register_process_notifiy()注册呼叫业务处理通知回调函数。说明：<oltype="a"id="ZH-CN_TOPIC_0069398282__zh-cn_topic_0069035625_zh-cn_topic_0063022985_ol49715073155915"><liid="ZH-CN_TOPIC_0069398282__zh-cn_topic_0069035625_zh-cn_topic_0063022985_li9022795155915">开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。应用程序关注的业务事件：代码示例：去初始化UI调用tup_confctrl_uninit()去初始化音视频会议业务组件，释放相应资源。代码示例：//ccodeTUP_RESULTresult=TUP_FAIL;result=tup_confctrl_uninit();if(TUP_SUCCESS!=result){LOG_D_VOICE_CONF_ERROR("Voiceconfcomponentuninitfailed.result=%#x",result);returnSERVICE_E_VOICE_CONF_INIT_FAILED;}
无。
视频会议中（包含点对点会议和多点会议），若未选择“启用数据会议”功能，则主席和与会者可通过“辅流”方式进行桌面共享或程序共享。
主席和与会者均已在会议中。
会议中，在已有与会者在共享时，允许其他与会者发起共享，前一共享者自动结束共享。主席或与会者侧选择“共享屏幕”或“共享程序”，UI调用tup_call_start_data()启动辅流发送。说明：“共享屏幕”和“共享程序”对于SDK层业务逻辑没有区别，应用程序实现不同类型的共享，就是实现截取“辅流”数据时，截取不同类型的窗口。代码示例：//ccodeTUP_RESULTresult=TUP_FAIL;//函数参数说明如下：//callid为呼叫ID，类型为TUP_UINT32类型result=tup_call_start_data(callid);if(TUP_SUCCESS!=result){LOG_D_VOICE_CONF_ERROR("callstartdatafailed.result=%#x",result);}共享发起侧SDK向UI上报辅流开始发送事件CALL_E_EVT_DATA_SENDING，其他与会者收到辅流接收事件CALL_E_EVT_DATA_RECVING代码示例：//ccode//该部分代码应添加在tup_confctrl_register_process_notifiy注册的回调函数的switch内caseCALL_E_EVT_DATA_SENDING:{//此处可添加共享发起者收到CALL_E_EVT_DATA_SENDING事件后的响应动作break;}caseCALL_E_EVT_DATA_RECVING:{//此处可添加其他与会者收到CALL_E_EVT_DATA_RECVING事件后的响应动作break;}主席或与会者侧选择停止共享，UI调用tup_call_stop_data()停止辅流发送。代码示例：//ccodeTUP_RESULTresult=TUP_FAIL;//函数参数说明如下：//callid为呼叫ID，类型为TUP_UINT32类型result=tup_call_stop_data(callid);if(TUP_SUCCESS!=result){LOG_D_VOICE_CONF_ERROR("callstopdatafailed.result=%#x",result);}所有与会者侧SDK向UI上报辅流停止发送事件CALL_E_EVT_DATA_STOPPED。代码示例：//ccode//该部分代码应添加在tup_confctrl_register_process_notifiy注册的回调函数的switch内caseCALL_E_EVT_DATA_STOPPED:{//此处可添加共享发起者收到辅流停止发送事件后的响应动作break;}
无。
“桌面协同”组件基于CloudEC解决方案，向第三方开发者开放桌面协同与共享能力。
在使用“数据会议”组件实现桌面协同与共享业务前，需要完成组件初始化。
无。
初始化UI调用tup_conf_init()初始化组件，设置线程模型、系统设备类型和操作系统类型等。说明：<oltype="a"id="ZH-CN_TOPIC_0069398315__zh-cn_topic_0069035511_zh-cn_topic_0063023008_oc7b5ae1e32734d6984afe981534ec289"><liid="ZH-CN_TOPIC_0069398315__zh-cn_topic_0069035511_zh-cn_topic_0063023008_l9db793d94a4848c983639b17b873e6aa">调用该函数的线程为业务消息回调处理线程，建议在主线程调用；线程模型，标识“桌面协同与共享”业务是否在独立线程（与UI主线程处于不同线程）运行，建议为false；系统设备类型和操作系统类型等，按实际设备类型填写；日志级别信息，在开发调试阶段，为更方便地定位问题，建议日志级别设置为LOG_LEVEL_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为LOG_LEVEL_INFO；日志目录路径可选指定，若缺省，则日志生成在应用程序所在目录的“.\trace”，否则在指定的路径下。在需要进行问题分析定位时，开发人员应在相应的目录下获取日志；临时目录路径为业务过程中存放临时文件的路径，可选指定；会议模式，支持PaaS模式和产品模式，当前应该设置为产品模式，取值为0。代码示例：去初始化UI调用tup_conf_uninit()去初始化组件，释放相应资源。代码示例：//ccode/*Step2:[Must]UnInitdataconference.*/(void)tup_conf_uninit();
无。
会议过程中，某一与会者可以发送即时消息给其他所有与会者。
入会成功。加载即时消息模块成功。
UI调用接口tup_conf_chat_sendmsg_ex()接口在会议中发送公共即时消息。说明：ntype消息类型，当前仅支持公共消息，取值CHAT_TYPE_PUBILC；userid用户ID，公共消息时无需填写。代码示例：TUP_RESULTresult=FALSE;CONF_HANDLEhandle;//会议句柄TUP_INT32nType;//nType:消息类型，取值：//CHAT_TYPE_PUBLIC公共即时消息//CHAT_TYPE_GROUP一对一即时消息//CHAT_TYPE_PRIVATE群组即时消息result=tup_conf_chat_sendmsg(handle,nType,userid,lpdata,nLen);if(TC_OK==result){LOG_D_DATA_CONF_ERROR("ConferenceChatSendMessagefailed.result=%#x",result);}会议中所有用户(包括消息发送者)侧SDK均收到消息通知，向UI上报COMPT_MSG_CHAT_ON_RECV_MSG事件，UI显示公共即时消息。代码示例：caseCOMPT_MSG_CHAT_ON_RECV_MSG:{//此处UI处理收到的公共即时消息}
当前仅提供公共消息的开放能力。
接口调用返回每个接口调用后，无论调用成功还是失败，都会有一个返回值。返回值类型为INT32/UINT32/LONG的接口，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。返回值类型为BOOL/bool的接口，如果返回值为TRUE/true/YES，表示成功，否则表示失败。返回值类型为对象或指针的，如果返回值非空，表示成功，否则表示失败。说明：在SDK中，大量接口实际上是一个异步调用接口，接口返回成功，只是表明接口的调用成功，并不表示业务执行成功。回调通知返回SDK的业务执行结果类回调通知，返回实际的业务执行结果，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。日志获取日志文件里记录了业务接口调用的时间、接口入参(非用户敏感信息关键参数)以及调用结果。
在接口参考文档里，列出了所有错误码信息，开发者可根据接口返回的错误码，查询相对应的错误描述。部分模块的错误码或原因值并不是从0开始，在获取相应模块错误码后，需要转换后，再可映射到正确的描述。
日志路径是应用程序在SDK各组件的初始化阶段自定义路径。因部分组件暂不支持设置路径，默认应用程序的运行目录下，为方便一次性获取日志，建议在初始化时，将SDK各组件的日志指定为相同路径。SDK的日志命名一般以"tup_"或"hme_"为前缀。
SDK一般格式为：[YYYY-MM-DDHH:MM:SS.MS][P:xxxx/T:xxxx][level][filename:linefunction]loginfostring其中：[YYYY-MM-DDHH:MM:SS.MS]表示日志打印时间，精确到ms；[P:xxxx/T:xxxx]表示日志所在的进程ID和线程ID；[level]表示日志级别，包括错误(Err)、警告(War)、信息(Inf)和调试(Dbg)级别；[filename:linefunction]表示日志所在的文件名，行号和函数；loginfostring为日志信息描述。建议开发者根据时间顺序进行相应的业务调用分析。对于业务的关键逻辑位置，会打印一条相应的关键信息日志。[2017-05-0516:29:35.077][P:7920/T:8776][Inf][call][call_msg.c:881CALLMPROC_MSG_AsynSend]ulMsgID=0x00000008[CALL_E_EVT_CALL_DESTROY],ulParam123=[0x7bdfb600,1,0],from[P7920]to[P7920][2017-05-0516:29:35.077][P:7920/T:8776][Dbg][call][call_basic.c:969callbasicDestroyBasicCall]MEDIA_SetAudioPlayDelay(0)0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:15740CallBasicSetVideoMute]callID:0x7bdfb600,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Inf][call][call_basic.c:15762CallBasicSetVideoMute]3.ulCallID=2078258688,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_conf.c:5110CallConfOnEndConfCall]CallConfOnEndConfCallulConfID=0x0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:11348CallBasicGetConfID]CallBasicGetConfID(0x7bdfb600)[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_basic.c:11354CallBasicGetConfID]GetCallID(0x7bdfb600)Error=0x8002113[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_conf.c:5123CallConfOnEndConfCall]con'tfindServerConfbyID=0xffffffff![2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_main.c:2128callmainMsgProcModTsp]callprocessmsgleave,msgId:0x2904[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:292SipStackTptDToTptMsgProc]startprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:394SipStackTptDToTptMsgProc]endprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC
SDK除“错误码”和“日志”外，还提供问题“在线分析”机制，以协助开发者在使用SDK开发过程中更方便直观的分析定位并解决问题。1、业务SDK向TUPException抛出“异常”，由TUPException向TUPService推送“异常”信息，并将“异常”信息写入tup_exception.log日志。2、在线模式下，"在线分析"呈现页面接受TUPService推送的“异常”信息，离线模式下，“在线分析”呈现页面读取日志路径下的“tup_exception.log”中记录的“异常”信息，结合“SDKServiceexception”各种类型异常的详细描述文件，进行实时的“异常分析”，给开发者呈现关心的、可理解的问题原因分析和方案建议。
前提条件：应用程序已开启并运行“TUPService”。浏览器中打开tupException.html，"在线分析"呈现页面连接“TUPService”，并显示连接状态正常。说明：若“TUPService”未启动或其他原因，则显示连接状态异常。当TUP运行过程中产生“异常”时，页面将实时显示关心的、可理解的问题原因分析和方案建议。
在移动端或其他应用程序无法运行“TUPService”的情况下，开发者可以通过导入日志的方式进行“异常”分析。浏览器中打开tupException.html，"在线分析"呈现页面显示连接状态异常。开发者在"在线分析"呈现页面中，点击“选取异常日志文件”按钮，选取异常日志“tup_exception.log”。点击“解析异常日志”按钮后，页面即可显示关心的、可理解的问题原因分析和方案建议。
本示例以java语言调用SDK接口，简单完成登录鉴权功能的开发，向您展示CloudECAndroidSDK的二次集成开发流程。开发过程中的故障处理请参考章节。快速入门流程如下：
操作系统：Windows7专业版。AndroidStudio：AndroidStudio1.5及以上版本。
SDK软件包名称：CloudPBXandEC.zip。SDK下载路径：参见。
点击菜单栏“Run&gt;Run&gt;app”文件，选择真机调试或者运行虚拟机。在界面中依次输入如下表信息：说明：以上信息需要在成功预约华为远程实验室后，从远程实验室获取。服务器地址、端口号、用户名、密码输入完成后，单击“登录”按钮，界面显示“正在登录，请稍后”，等待接口返回操作结果。等待至页面底部弹出Toast“LoginSuccess”，表示登录成功。
在使用eSDKCloudEC系列业务组件，配套CloudEC解决方案实现各类业务前，需要先完成SDK的基础组件初始化。
无。
初始化应用程序在初始化业务组件前，调用TUPInterfaceService对象startUpService()方法完成SDK基础组件初始化。说明：此接口对应的入参结构信息中，相应的字段均应取值为0。代码示例：TUPInterfaceServicetupInterfaceService=newTUPInterfaceService();//starttupservicetupInterfaceService.StartUpService();应用程序在初始化业务组件前，调用TUPInterfaceService对象SetAppPath()方法动态加载库文件。说明：此接口对应的入参为Android应用的绝对路径。代码示例：interfaceService.SetAppPath(appContext.getApplicationInfo().dataDir+"/lib");去初始化应用程序关闭时，调用TUPInterfaceService对象shutDownService()去初始化基础组件，释放相应资源。代码示例：/***Stoptupservice.*/if(null!=tupInterfaceService){tupInterfaceService.ShutDownService();}
无。
“统一鉴权与登录”组件基于CloudEC解决方案，向第三方开发者开放统一的鉴权和登录能力。对于多个业务应用，用户只需登录一次，不需要多次输入用户名和密码，简化客户操作，提升业务访问速度。在CloudEC解决方案下，统一鉴权与登录是一个必选基础组件。
在使用“统一鉴权与登录”组件进行鉴权和登录处理前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用TupLoginManager类的静态方法getIns()获取鉴权登录管理实例对象并记录。其中参数包括鉴权登录事件处理对象TupLoginNotify和应用程序上下文context。说明：1、建议应用程序实现接口TupLoginNotify时，通过继承TupLoginNotifyBase类，重写应用程序关注的鉴权登录事件处理方法，而不是直接实现接口TupLoginNotify，以减少不相关方法的干扰。代码示例：//inittupLoginManagertupLoginManager=TupLoginManager.getIns(this,TupRegisterService.getTupContext());UI调用TupLoginManager对象的setLogParam()方法设置日志参数，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值2*1024)、日志文件最大个数(建议4)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为LOGIN_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为LOGIN_E_LOG_INFO。代码示例：//inituportalloginlogStringpath=Environment.getExternalStorageDirectory()+File.separator+TUP+File.separator+UPORTAL;intfileCount=4;LoginLogLevellogLevel=LoginLogLevel.LOGIN_E_LOG_DEBUG;intmaxLogSize=10*1024;tupLoginManager.setLogParam(logLevel,maxLogSize,fileCount,path);UI调用TupLoginManager对象的setVerifyMode()方法设置认证模式。说明：认证模式取值参考LoginVerifyMode，其中：如果本地有证书才需要传入LOGIN_E_VERIFY_MODE_SERVER表示认证服务端，取值为1；如果没有证书，则设置LOGIN_E_VERIFY_MODE_NONE为不认证，取值为0，一般建议设置为不认证。代码示例：//setVerifyModetupLoginManager.setVerifyMode(LoginVerifyMode.LOGIN_E_VERIFY_MODE_NONE);UI调用TupLoginManager对象的loginInit()方法初始化鉴权登录组件，初始化资源。代码示例：//logininittupLoginManager.loginInit(tupService);去初始化应用程序关闭时，UI调用TupLoginManager对象的loginUninit()去初始化鉴权登录组件，释放相应资源。代码示例：/***Loginuninitint.**@returntheint*/publicintloginUnInit(){intresult=tupLoginManager.loginUninit();returnresult;}
无。
在使用CloudEC的各类业务之前，需要向服务器完成鉴权和登录，获取用户的鉴权凭证(Token)信息、业务配置权限信息和相应的业务帐号与服务器配置信息。鉴权和登录成功后，SDK自动按保活周期定时刷新鉴权凭证信息。
已完成鉴权和登录组件初始化。
初始鉴权和登录UI根据实际网络配置策略，调用TupLoginManager对象中的setProxy()设置HTTP代理信息。说明：1、此步骤可选，根据用户网络接入情况选择是否需要设置；2、HTTP代理信息包含代理服务器地址和认证信息。代码示例：/***Setsproxy.**@paramloginProxyParamtheloginproxyparam*@returntheproxy*/publicbooleansetProxy(LoginProxyParamloginProxyParam){intresult=tupLoginManager.setProxy(loginProxyParam);returnresult==0;}UI调用TupLoginManager对象的authorize()方法鉴权登录，其中参数类型为LoginAuthorizeParam类的对象。说明：在创建LoginAuthorizeParam对象后，需要从该对象调用方法来设置参数。1、支持"普通用户名+密码"鉴权和"第三方tiket"鉴权，使用setAuthType()方法设置鉴权类型。在LOGIN_E_AUTH_NORMAL模式下，使用setAuthInfo()方法来设置鉴权信息变量，其中鉴权信息包括用户名、用户号码等。在LOGIN_E_AUTH_TIKET模式下，使用setUserTiket()方法来设置鉴权信息变量，默认为LOGIN_E_AUTH_NORMAL模式；2、用户代理，值为应用程序类型名，使用setUserAgent()方法来设置用户代理。如：“SoftClientonMobile”。3、鉴权服务器，值根据实际的组网填写，使用setAuthServer()方法来设置鉴权服务器。4、用户标识，值由应用程序生成和管理，使用setUserId()方法来设置用户标识。代码示例：/***Uportalloginboolean.**@paramloginParamtheloginparam*@returntheboolean*/publicbooleanauthorizeLogin(LoginParamloginParam){StringregServerUrl=loginParam.getRegisterServerIp();StringproxyServerUrl=loginParam.getProxyServerIp();intserverPort=Integer.parseInt(loginParam.getServerPort());StringuserName=loginParam.getSipName();Stringpassword=loginParam.getSipPassword();StringipAddress=loginParam.getLocalIpAddress();LoginAuthInfoauthInfo=newLoginAuthInfo();authInfo.setUserName(userName);authInfo.setPassword(password);this.userName=userName;this.localIpAddress=ipAddress;uportalServerAddress=regServerUrl;uportalServerPort=serverPort;LoginAuthServerInfoserverInfo=newLoginAuthServerInfo();serverInfo.setServerType(LoginServerType.LOGIN_E_SERVER_TYPE_PORTAL);serverInfo.setServerUrl(regServerUrl);serverInfo.setServerPort(serverPort);serverInfo.setServerVersion("");serverInfo.setProxyUrl(proxyServerUrl);serverInfo.setProxyPort(serverPort);LoginAuthorizeParamauthorizeParam=newLoginAuthorizeParam();authorizeParam.setAuthType(LoginAuthType.LOGIN_E_AUTH_NORMAL);authorizeParam.setAuthInfo(authInfo);authorizeParam.setAuthServer(serverInfo);authorizeParam.setUserAgent("SoftClientonMobile");authorizeParam.setUserTiket("");intuportalLoginResult=tupLoginManager.authorize(authorizeParam);TUPLogUtil.i(TAG,"uportalLoginResult-&gt;"+uportalLoginResult);returnuportalLoginResult==0;}SDK收到鉴权登录响应后，通过TupLoginNotify对象中的onAuthorizeResult()方法向UI上报鉴权结果，参数包含用户ID和鉴权结果。具体鉴权结果类为LoginUportalAuthorizeResult，携带用户的鉴权凭证信息、业务配置权限信息和相应的业务帐号和服务器配置信息。说明：在创建LoginUportalAuthorizeResult对象后，需要从该对象调用方法来设置参数。1、部署模式，标识当前服务器的组网部署方式，使用setDeployMode()方法获取，参数参考LoginDeployMode的枚举值。应用程序需要根据此变量确定当前组网下的业务能力；2、鉴权凭证(Token值)，用于即时消息或会议等业务的登录，使用getAuthToken()方法获取。应用程序UI需要保存此字符串；3、SIP帐号、SIPIP多媒体私有标识、SIP密码、SIP域名，用于音视频呼叫和IPT业务的登录，分别使用getSipAccount()、getSipImpi()、getSipPassword()、getSipDomain()方法获取；4、密码类型，用于音视频呼叫和IPT业务的登录，使用getPasswordType()方法获取，获取的密码类型参考LoginAuthPasswordType的枚举值。5、站点数，使用getNumOfSite()方法获取；6、站点信息，站点信息中包含一到多个各类业务(即时消息，会议和企业通讯录等)服务器地址信息集合，使用getSiteInfo()方法获取,返回的站点信息为LoginAuthorizeSiteInfo类的对象。包括服务器数量、优先级、站点名等。应用程序应该根据站点信息中的优先级字段选择业务服务器集；7、expire：鉴权过期时间，应用程序一般无需关注，由SDK处理。代码示例：publicvoidonAuthorizeResult(intuesrID,TupLoginOptResulttupLoginOptResult,LoginUportalAuthorizeResultloginUportalAuthorizeResult){StringerrorText=UPORTAL_LOGIN_FAILED;intresult;LoginParamloginParam;if(null==loginUportalAuthorizeResult||null==tupLoginOptResult){TUPLogUtil.e(TAG,"loginUportalAuthorizeResultisnull");if(null==tupLoginOptResult){TUPLogUtil.e(TAG,"tupLoginOptResultisnull");errorText=UPORTAL_LOGIN_FAILED;}else{result=tupLoginOptResult.getOptResult();errorText=getUportalAuthorizeErrorText(result);}TupRegisterEventManager.onUportalLoginNotify(TupCallParam.CALL_TUP_RESULT.TUP_FAIL,errorText);}elseif(tupLoginOptResult.getOptResult()!=TupLoginErrorID.LOGIN_E_ERR_SUCCESS){result=tupLoginOptResult.getOptResult();errorText=getUportalAuthorizeErrorText(result);TupRegisterEventManager.onUportalLoginNotify(TupCallParam.CALL_TUP_RESULT.TUP_FAIL,errorText);}else{result=tupLoginOptResult.getOptResult();errorText=getUportalAuthorizeErrorText(result);loginParam=getLoginParams(loginUportalAuthorizeResult);this.loginParam=loginParam;TupCallService.getInstance().register(loginParam);TupRegisterEventManager.onUportalLoginNotify(TupCallParam.CALL_TUP_RESULT.TUP_SUCCESS,errorText);TupCallService.getInstance().setCtdServerParam(uportalServerAddress,uportalServerPort);TupCallService.getInstance().cancelIptService();}}UI调用TupLoginManager对象中的firewallDetect()方法进行组网下的防火墙探测，以判断当前是否需要使用STG。说明：在“步骤3”中获取的getSiteInfo()-&gt;getAccessServer()-&gt;getSvnUri()，用于防火墙探测，其中svn_url可能存在多个地址信息，以“;”分割，需要UI进行解析后填写至被探测的服务器列表，并将端口填写为0；若svn_url内容为空，则无需进行后继步骤。代码示例：/***Firewalldetectboolean.**@paramloginDetectServerthelogindetectserver*@returntheboolean*/publicbooleanfirewallDetect(LoginDetectServerloginDetectServer){intresult=tupLoginManager.firewallDetect(loginDetectServer);returnresult==0;}SDK完成防火墙探测处理，通过TupLoginNotify对象中的onFirewallDetectResult()方法向UI上报探测结果事件，携带当前的防火墙模式信息。说明：防火墙探测成功：1、若防火墙模式为LOGIN_E_FIREWALL_MODE_NULL，则无需后继步骤；2、若防火墙模式为LOGIN_E_FIREWALL_MODE_ONLY_HTTP或OGIN_E_FIREWALL_MODE_HTTP_AND_SVN，则需对应设置其他各业务模块的防火墙模式，并完成后继STG隧道的创建过程。代码示例：@OverridepublicvoidonFirewallDetectResult(TupLoginOptResultvar1,intvar2){TupLogUtil.i(TAG,"onFirewallDetectResult-&gt;"+var1.getOptResult());}UI调用TupLoginManager对象中的buildStgTunnel()方法创建STG隧道。说明：在“步骤3”中获取的getSiteInfo()-&gt;getAccessServer()-&gt;getSvnUri()，用于STG隧道创建，其中svn_url可能存在多个地址信息，以“;”分割。代码示例：/***Buildstgtunnelboolean.**@paramloginStgParamtheloginstgparam*@returntheboolean*/publicbooleanbuildStgTunnel(LoginStgParamloginStgParam){intresult=tupLoginManager.buildStgTunnel(loginStgParam);returnresult==0;}SDK完成STG创建处理，通过TupLoginNotify对象中的onStgTunnelBuildResult()方法向UI上报结果事件，携带当前的防火墙模式信息。代码示例：publicvoidonStgDestoryTunnelResult(TupLoginOptResultvar1){TupLogUtil.i(TAG,"onStgDestoryTunnelResult-&gt;"+var1.getOptResult());}更新鉴权凭证(Token)SDK在鉴权登录成功后，在鉴权登录有效时间的一半时，自动发起更新鉴权凭证(Token)处理，通过TupLoginNotify对象中的onRefreshTokenResult()方法向UI上报更新结果，若结果为成功，UI则更新记录的鉴权凭证。说明：鉴权登录有效时间在鉴权登录请求的响应中返回，无需应用程序配置。代码示例：publicvoidonRefreshTokenResult(TupLoginOptResulttupLoginOptResult,Stringtoken){TUPLogUtil.i(TAG,"onRefreshTokenResult");intresult=tupLoginOptResult.getOptResult();TUPLogUtil.i(TAG,"result-&gt;"+result);TUPLogUtil.i(TAG,"token-&gt;"+token);if(TupCallParam.CALL_TUP_RESULT.TUP_SUCCESS!=result||StringUtil.isStringEmpty(token)){loginRefreshToken();}else{loginParam.setAuthorizeToken(token);}}若自动刷新失败，UI应该调用TupLoginManager对象中的refreshToken()方法强制刷新鉴权凭证Token。说明：在业务处理过程中，若SDK返回鉴权凭证Token失效(不同业务下错误码或原因值定义不同)，UI也需要调用此接口进行强制更新，并使用更新后的鉴权凭证Token进行业务处理。代码示例：/***Loginrefreshtokenboolean.**@returntheboolean*/publicbooleanloginRefreshToken(){intrefreshTokenResult=tupLoginManager.refreshToken();returnrefreshTokenResult==0;}SDK完成强制刷新鉴权凭证Token处理后，通过TupLoginNotify对象中的onRefreshTokenResult()方法向UI上报刷新鉴权凭证Token结果，若结果为成功，UI则更新记录的鉴权凭证。若强制刷新失败，SDK会自动发起鉴权登录，通过TupLoginNotify对象中的onAuthorizeResult()方法向UI上报鉴权结果事件。说明：若鉴权失败，应用程序界面应提示用户，建议用户进行重登录处理。
无。
“音视频呼叫”业务组件基于CloudEC解决方案，向第三方开发者开放音视频呼叫能力。
在使用“音视频呼叫”业务组件实现音视频呼叫业务前，需要完成组件初始化和应用程序的全局业务配置参数。应用程序的业务配置参数均支持在业务处理前进行动态设置，对于最终应用程序用户无需感知的参数和一般无需要动态设置的参数，放在初始化阶段进行默认设置。
无。
在音频调用服务初始化之前，基本的UI框架应该完全构建，并实现呼叫业务事件接口类TupCallNotify。初始化UI调用TupCallManager类的构造方法创建呼叫业务事件的对象。其中参数包括呼叫业务事件处理对象和应用程序上下文。说明：1、建议应用程序实现接口TupCallNotify时，通过继承TupCallNotifyBase类，重写应用程序关注的呼叫业务事件的处理方法，而不是直接实现接口TupCallNotify，以减少不相关方法的干扰。代码示例：//newTupCallManagerobjecttupCallManager=newTupCallManager(TupNotifyDistribution.getInstance(),TupRegisterService.getTupContext());UI调用TupCallManager对象中的loadLibForUC()方法来加载组件库的依赖关系代码示例：//loadsotupCallManager.loadLibForUC();UI调用TupCallManager对象中的setAndroidObjects()方法来设置android环境。代码示例：//setandroidenvironmenttupCallManager.setAndroidObjects();UI调用TupCallManager对象中的logStart()方法设置日志参数，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值10*1024)、日志文件最大个数(建议4)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为调试级别取值为3；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为日志级别取值为2。代码示例：tupCallManager.logStart(3,10*1024,4,logFilePath);UI调用TupCallManager对象中的callInit()方法来初始化音频组件和资源。代码示例：//callinittupCallManager.callInit();去初始化UI调用TupCallManager对象中的callUninit()方法去初始化音视频呼叫业务组件，释放相应资源。代码示例：//calluninittupCallManager.callUninit();
无。
用户视频通话中开始或停止视频发送。设置和取消暂停视频采集针对指定通话，不是针对设备，停止时画面凝固。
视频通话已建立，主被叫正在通话中。
设置和取消暂停视频采集操作本地媒体。UI调用vedioControl()接口暂停或继续视频。说明：1.callId：当前呼叫ID2.operation：操作类型，设置或取消暂停视频3.module：模式，当前为摄像头，取值4代码示例：/***Vediocontrolint.**@paramcallIdthecallid*@paramoperationtheoperation*@parammodulethemodule*@returntheint*/publicintvedioControl(intcallId,intoperation,intmodule){returntupCallManager.vedioControl(callId,operation,module);}
无。
管理音视频设备，包括麦克风、扬声器和摄像头。
详见各子场景说明。
获取音、视频设备列表应用程序在任何阶段均可以获取当前可用的音视频设备信息，为更方便地进行后继具体设备管理，建议应用程序在初始化阶段和系统检测到设备变化时，获取设备信息并保存维护。UI调用TupCallManager对象中的tupGetDevices()获取音频视频设备列表。说明：1.获取音频设备列表，请将device_type设置为TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_MIC。2.获取扬声器列表，请将device_type设置为TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_SPEAK。3.获取视频设备列表，请将device_type设置为TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_VIDEO。代码示例：/***Getsdeviceinfos.*/publicvoidgetDeviceInfos(){videoDevices=getDeviceInfo(TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_VIDEO);micDevices=getDeviceInfo(TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_MIC);speakDevices=getDeviceInfo(TupCallParam.CALL_E_DEVICE_TYPE.CALL_E_CALL_DEVICE_SPEAK);}/***Getsdeviceinfo.**@paramdeviceTypethedevicetype*@returnthedeviceinfo*/publicList&lt;TupDevice&gt;getDeviceInfo(intdeviceType){Stringtype=String.valueOf(deviceType);if(StringUtil.isStringEmpty(type)){TUPLogUtil.e(TAG,"deviceTypeisnull");}returntupCallManager.tupGetDevices(deviceType);}管理音频设备一般用于用户对音频设备(麦克风和扬声器)进行设置和切换。UI调用TupCallManager对象中的getMobileAudioRoute()获取当前使用的音频设备。说明：移动端的音频设备包括：蓝牙、扬声器、听筒和耳机。代码示例：/***Getsaudioroute.**@returntheaudioroute*/publicintgetAudioRoute(){introte=this.tupCallManager.getMobileAudioRoute();returnrote;}UI调用TupCallManager对象中的setMobileAudioRoute()设置当前使用的音频设备。代码示例：/***Setsaudioroute.**@paramaudioSwitchtheaudioswitch*@returntheaudioroute*/publicbooleansetAudioRoute(intaudioSwitch){returntupCallManager.setMobileAudioRoute(audioSwitch)==0;}管理视频设备一般用于用户对视频设备进行设置和切换。UI调用TupCallManager对象中的setMboileVideoOrient()设置当前使用的视频设备。代码示例：/*Setsvideoorient.*/publicbooleansetVideoOrient(intcallID,finalintcameraIndex){intresult=0;intchoice=0;finalTupCalltupCall=newTupCall();tupCall.setCallId(callID);Configurationconfiguration=TupRegisterEventManager.getTupContext().getResources().getConfiguration();booleanisPortrait=configuration.orientation==Configuration.ORIENTATION_PORTRAIT;if(isPortrait){choice=1;}else{choice=2;}if(cameraIndex==VideoDevice.FRONT_CAMERA){result=tupCallManager.setMboileVideoOrient(callID,cameraIndex,choice,3,0,2);if(isPortrait){tupCall.setCaptureRotation(cameraIndex,3);}}if(cameraIndex==VideoDevice.BACK_CAMERA){result=tupCallManager.setMboileVideoOrient(callID,cameraIndex,choice,1,0,2);if(isPortrait){tupCall.setCaptureRotation(cameraIndex,1);}}return(result==0);}预览本地视频一般用于设备设置时，检测本地摄像头工作状态是否正常。UI先创建本地预览窗口，再调用TupCallManager对象中的openPreview()方法打开本地视频预览窗口。代码示例：/***Openpreviewint.**@paramhandlethehandle*@paramindextheindex*@returntheint*/publicintopenPreview(inthandle,intindex){returntupCallManager.openPreview(handle,index);}UI调用TupCallManager对象中的closePreview()方法关闭本地视频预览窗口，同时销毁本地预览窗口。代码示例：/***Closepreview.*/publicvoidclosePreview(){tupCallManager.closePreview();}
无。
“音视频会议”业务组件基于CloudEC解决方案，向第三方开发者开放音视频会议能力。
在使用音视频会议业务组件实现音视频会议业务前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用TupConfManager类的静态方法getIns()获取音视频会议管理实例对象并记录。其中参数包括音视频会议事件处理对象和应用程序上下文context。说明：1、建议应用程序实现接口TupConfNotify时，通过继承TupConfNotifyBase类，重写应用程序关注的音视频会议事件处理方法，而不是直接实现接口TupLoginNotify，以减少不相关方法的干扰。代码示例：//initTupConfManagertupConfManager=TupConfManager.getIns(this,TupRegisterEventManager.getTupContext());UI调用TupConfManager对象的setLogParam()方法设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值10*1024)、日志文件最大个数(建议4)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为ConfctrlLogLevel.CONFCTRL_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为ConfctrlLogLevel.CONFCTRL_E_LOG_INFO。代码示例：//initconflogStringlogPath=Environment.getExternalStorageDirectory()+File.separator+TUP+File.separator+CONF;intfileCount=4;intlogLevel=3;intmaxLogSize=10*1024;tupConfManager.setLogParam(logLevel,maxLogSize,fileCount,logPath);UI调用TupConfManager对象的setInitParam()方法设置音视频会议业务初始化参数。说明：音视频会议初始化参数包括：<oltype="a"id="ZH-CN_TOPIC_0069399623__zh-cn_topic_0068990539_zh-cn_topic_0063020653_ol51886245195112"><liid="ZH-CN_TOPIC_0069399623__zh-cn_topic_0068990539_zh-cn_topic_0063020653_li62656639195112">batchUpdate批量更新，表示是否启动批量更新会议参数，取值false（融合使用true）；saveParticipantList保存参与者列表，表示是否需要保存与会者列表，建议为true（内置会议为false）；connectCall连接通话，表示是否与音视频呼叫业务同时使用，应用程序应该根据实际情况填写取值，在移动设备上，使用“CTC”会议(此时会议控制与呼叫分离)，移动用falsewaitMsgpThread等待消息线程，表示是否要等待消息队列线程，设为等待只有话机为不等待。代码示例：UI调用TupConfManager对象的confInit()方法初始化音视频会议业务组件，初始化资源。代码示例：//confinitintconfInitResult=tupConfManager.confInit(tupService);UI调用TupConfManager对象的confUinit()方法去初始化音视频会议业务组件，释放资源。代码示例：/***Confuninit.*/publicvoidconfUninit(){tupConfManager.confUinit();}
无。
视频会议中(包含点对点会议和多点会议)，若未选择“启用数据会议”功能，则主席和与会者可通过“辅流”方式进行桌面共享或程序共享。
主席和与会者均已在会议中。
会议中，在已有与会者在共享，允许其他与会者发起共享，前一共享者自动结束共享。主席或与会者侧选择“共享屏幕”或“共享程序”，UI调用TupCall对象中的startAssistData()启动辅流发送。说明：“共享屏幕”和“共享程序”对于SDK层业务逻辑没有区别，应用程序实现不同类型的共享，就是实现截取“辅流”数据时，截取不同类型的窗口。移动端只能接收辅流共享发起侧SDK通过TupCallNotify对象中的onDataSending()方法向UI上报辅流开始发送事件，其他与会者SDK通过TupCallNotify对象中的onDataReceiving()方法向UI上报收到辅流接收事件代码示例//javacode//创建辅流视图，开启辅流的接收参考demoVideoDeviceManager.getIns().openBFCPReceive(callId,localVideoView,remoteVideoView);主席或与会者侧选择停止共享，UI调用TupCall对象中的stopAssistData()停止辅流发送。所有与会者侧SDK通过TupCallNotify对象中的onDataStopped()方法向UI上报辅流停止发送事件。代码示例//javacode//撤掉辅流视图，加载原始页面localVideoLayout.setVisibility(View.VISIBLE);remoteVideoView.setVisibility(View.VISIBLE);
无。
“桌面协同”组件基于CloudEC解决方案，向第三方开发者开放桌面协同与共享能力。
在使用“桌面协同”组件实现桌面协同与共享业务前，需要完成组件初始化。
无。
初始化UI调用Conference类的静态方法getInstance()获取会议实例对象并记录。代码示例：//initconferenceobjectconference=Conference.getInstance();UI调用Conference对象的setPath()方法设置日志目录和临时目录。说明：临时目录路径为业务过程中存放临时文件的路径。代码示例：//setlogpathStringlogPath=Environment.getExternalStorageDirectory()+File.separator+TUP+File.separator+DATA_CONF;StringtempPath=logPath;conference.setPath(logPath,tempPath);UI调用Conference对象的setDpi()方法设置设备的Dpi。说明：参数为屏幕x轴的xdpi和屏幕y轴的ydpi。在android平台需要设置，其他平台可设置为0。代码示例：//setfloatxdpi,ydpiDisplayMetricsdm=newDisplayMetrics();dm=TupRegisterService.getTupContext().getResources().getDisplayMetrics();floatxdpi=dm.xdpi;floatydpi=dm.ydpi;conference.setDpi(xdpi,ydpi);UI调用Conference对象的setLogLevel()方法设置日志级别。说明：1、日志级别信息，在开发调试阶段，为更方便地定位问题，建议日志级别设置为调试级别；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为一般日志级别；日志目录路径可选指定，若缺省，则日志生成在应用程序所在目录的“.\trace”，否则在指定的路径下。在需要进行问题分析定位时，开发人员应在相应的目录下获取日志。代码示例：//setsdkloglevelintmediaLogLevel=3;intsdkLogLevel=3;conference.setLogLevel(mediaLogLevel,sdkLogLevel);UI调用Conference对象的initSDK()方法初始化SDK。说明：1、线程模型，标识“桌面协同与共享”业务是否在独立线程(与UI主线程处于不同线程)运行，建议为false；2、设备类型包括：系统设备类型和操作系统类型等，终端设备类型为手机和平板电脑。代码示例：//initconfsdkbooleanbSelfThread=false;intdevType=4;conference.initSDK(bSelfThread,devType);UI调用Conference对象的confereceHeartBeat()方法发送循环心跳消息，参数填写0。说明：建议应用程序循环调用此方法的间隔为10ms。代码示例：/***heartBeat*/publicvoidheartBeat(){if(isMainThread()){Messagemsg=newMessage();msg.what=CONF_HEARTBEAT;mconfHandler.sendMessage(msg);return;}conf.confHeartBeat();}UI通过newconfInstance()来创建并保存ConfInstance对象，后继通过该对象来调用该类中的功能方法。代码示例：//newConfInstanceobjectconf=newConfInstance();UI通过ConfInstance类的对象调用setConfUI()方法，注册事件处理函数。说明：应用程序应实现IConferencer接口，重写confMsgNotify方法，在此方法包括ConfMsg对象和ConfExtendMsg对象两个参数，其中ConfExtendMsg在ConfMsg中的消息类型(通过getMsgType()方法获取)不同时，对应的真实子类不同：代码示例：//setconfcallbackconf.setConfUI(this);UI调用ConfGLView()方法创建ConfGLView的对象。代码示例：//newConfGLViewobjectdesktopSurfaceView=newConfGLView(context);去初始化UI调用Conference对象的exitSDK()方法退出SDK。代码示例：
无。
接口调用返回每个接口调用后，无论调用成功还是失败，都会有一个返回值。返回值类型为INT32/UINT32/LONG的接口，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。返回值类型为BOOL/bool的接口，如果返回值为TRUE/true/YES，表示成功，否则表示失败。返回值类型为对象或指针的，如果返回值非空，表示成功，否则表示失败。说明：在SDK中，大量接口实际上是一个异步调用接口，接口返回成功，只是表明接口的调用成功，并不表示业务执行成功。回调通知返回SDK的业务执行结果类回调通知，返回实际的业务执行结果，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。日志获取日志文件里记录了业务接口调用的时间、接口入参(非用户敏感信息关键参数)以及调用结果。
在接口参考文档里，列出了所有错误码信息，开发者可根据接口返回的错误码，查询相对应的错误描述。部分模块的错误码或原因值并不是从0开始，在获取相应模块错误码后，需要转换后，再可映射到正确的描述。
日志路径是应用程序在SDK各组件的初始化阶段自定义路径。1、因部分组件暂不支持设置路径，默认应用程序的运行目录下，为方便一次性获取日志，建议在初始化时，将SDK各组件的日志指定为相同路径。2、SDK的日志命名一般以"tup_"或"hme_"为前缀。
SDK一般格式为：[YYYY-MM-DDHH:MM:SS.MS][P:xxxx/T:xxxx][level][filename:linefunction]loginfostring其中：[YYYY-MM-DDHH:MM:SS.MS]表示日志打印时间，精确到ms；[P:xxxx/T:xxxx]表示日志所在的进程ID和线程ID；[level]表示日志级别，包括错误(Err)、警告(War)、信息(Inf)和调试(Dbg)级别；[filename:linefunction]表示日志所在的文件名，行号和函数；loginfostring为日志信息描述。建议开发者根据时间顺序进行相应的业务调用分析。对于业务的关键逻辑位置，会打印一条相应的关键信息日志。[2017-05-0516:29:35.077][P:7920/T:8776][Inf][call][call_msg.c:881CALLMPROC_MSG_AsynSend]ulMsgID=0x00000008[CALL_E_EVT_CALL_DESTROY],ulParam123=[0x7bdfb600,1,0],from[P7920]to[P7920][2017-05-0516:29:35.077][P:7920/T:8776][Dbg][call][call_basic.c:969callbasicDestroyBasicCall]MEDIA_SetAudioPlayDelay(0)0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:15740CallBasicSetVideoMute]callID:0x7bdfb600,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Inf][call][call_basic.c:15762CallBasicSetVideoMute]3.ulCallID=2078258688,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_conf.c:5110CallConfOnEndConfCall]CallConfOnEndConfCallulConfID=0x0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:11348CallBasicGetConfID]CallBasicGetConfID(0x7bdfb600)[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_basic.c:11354CallBasicGetConfID]GetCallID(0x7bdfb600)Error=0x8002113[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_conf.c:5123CallConfOnEndConfCall]con'tfindServerConfbyID=0xffffffff![2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_main.c:2128callmainMsgProcModTsp]callprocessmsgleave,msgId:0x2904[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:292SipStackTptDToTptMsgProc]startprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:394SipStackTptDToTptMsgProc]endprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC
SDK除“错误码”和“日志”外，还提供问题“在线分析”机制，以协助开发者在使用SDK开发过程中更方便直观的分析定位并解决问题。1、业务SDK向TUPException抛出“异常”，由TUPException向TUPService推送“异常”信息，并将“异常”信息写入tup_exception.log日志。2、在线模式下，"在线分析"呈现页面接受TUPService推送的“异常”信息，离线模式下，“在线分析”呈现页面读取日志路径下的“tup_exception.log”中记录的“异常”信息，结合“SDKServiceexception”各种类型异常的详细描述文件，进行实时的“异常分析”，给开发者呈现关心的、可理解的问题原因分析和方案建议。
前提条件：应用程序已开启并运行“TUPService”。浏览器中打开tupException.html，"在线分析"呈现页面连接“TUPService”，并显示连接状态正常。说明：若“TUPService”未启动或其他原因，则显示连接状态异常。当TUP运行过程中产生“异常”时，页面将实时显示关心的、可理解的问题原因分析和方案建议。
在移动端或其他应用程序无法运行“TUPService”的情况下，开发者可以通过导入日志的方式进行“异常”分析。浏览器中打开tupException.html，"在线分析"呈现页面显示连接状态异常。开发者在"在线分析"呈现页面中，点击“选取异常日志文件”按钮，选取异常日志“tup_exception.log”。点击“解析异常日志”按钮后，页面即可显示关心的、可理解的问题原因分析和方案建议。
本示例以Object-C语言调用SDK接口，完成登录鉴权功能的开发，向您展示eSDKCloudEC的二次集成开发流程。开发过程中的故障处理请参考章节。快速入门流程如下：
操作系统：iOS8.0及以上版本。Xcode：Xcode8及以上。
SDK软件包名称：CloudPBXandEC.zip。SDK下载路径：参见。
总体结构源码链接：.
点击上述结构中的文件名获取文件源码，并向各文件填充代码。部分代码片段参考如下：选择ViewController.mm，完成TUP库Call组件以及Login组件初始化，请确保先初始化Call组件。-(BOOL)initCallServices{NSLog(@"startinittupcall");//openlogswitchNSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/call"];tup_call_log_start(CALL_E_LOG_DEBUG,10*1024,4,(TUP_CHAR*)[pathUTF8String]);tup_call_hme_log_info(CALL_E_LOG_DEBUG,10,CALL_E_LOG_DEBUG,50);TUP_RESULTret_call=tup_call_init();TUP_RESULTret_registerTupNotifications=tup_call_register_process_notifiy((CALL_FN_CALLBACK_PTR)onTupNotifications);NSLog(@"tup_call_initresult:%d",ret_call);returnret_call&amp;ret_registerTupNotifications==TUP_SUCCESS?YES:NO;}TUP_VOIDonTupNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,void*data){NSLog(@"onTupNotifications:%d",msgid);}-(BOOL)initUportalLoginService{NSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/login"];TUP_RESULTstartLogResult=tup_login_log_start(LOGIN_E_LOG_DEBUG,1*1024,1,[pathUTF8String]);NSLog(@"Login_Log:tup_login_log_startresult=%#x",startLogResult);TUP_CHAR*cerPathURF8=(TUP_CHAR*)[@""UTF8String];LOGIN_E_VERIFY_MODEverifyMode=LOGIN_E_VERIFY_MODE_NONE;TUP_RESULTresult=tup_login_init(cerPathURF8,verifyMode);NSLog(@"Login_Log:tup_login_initresult=%#x",result);TUP_RESULTregProcessResult=tup_login_register_process_notifiy((LOGIN_FN_CALLBACK_PTR)onTUPLoginNotifications);NSLog(@"Login_Log:tup_login_register_process_notifiyresult=%#x",result);returnresult&amp;regProcessResult==TUP_SUCCESS?YES:NO;}TUP_VOIDonTUPLoginNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,TUP_VOID*data){NSLog(@"onTUPLoginNotifications:%#x",msgid);dispatch_async(dispatch_get_main_queue(),^{[ViewControllerhandleLoginEventResult:msgidparam1:param1param2:param2data:data];});}发送登录请求NSString*account=@”Account”;NSString*password=@”123456”;NSString*serverAddress=@"222.22.10.75";intport=8443;LOGIN_S_AUTHORIZE_PARAMauthorizeParams;memset(&amp;authorizeParams,0,sizeof(LOGIN_S_AUTHORIZE_PARAM));authorizeParams.auth_type=LOGIN_E_AUTH_NORMAL;strcpy(authorizeParams.user_agent,"eSpaceMobile");//account+pwdLOGIN_S_AUTH_INFOauthInfo;strcpy(authInfo.user_name,[accountUTF8String]);strcpy(authInfo.password,[passwordUTF8String]);authorizeParams.auth_info=authInfo;//serverLOGIN_S_AUTH_SERVER_INFOloginAuthServer;memset(&amp;loginAuthServer,0,sizeof(LOGIN_S_AUTH_SERVER_INFO));loginAuthServer.server_type=LOGIN_E_SERVER_TYPE_PORTAL;loginAuthServer.server_port=port;strcpy(loginAuthServer.server_url,[serverAddressUTF8String]);loginAuthServer.proxy_port=port;strcpy(loginAuthServer.proxy_url,[serverAddressUTF8String]);authorizeParams.auth_server=loginAuthServer;TUP_RESULTresult=tup_login_authorize(&amp;authorizeParams);NSLog(@"Login_Log:tup_login_authorizeresult=%#x",result);returnresult==TUP_SUCCESS?YES:NO;处理回调函数登录事件。TUP_VOIDonTUPLoginNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,TUP_VOID*data){NSLog(@"onTUPLoginNotifications:%#x",msgid);dispatch_async(dispatch_get_main_queue(),^{[ViewControllerhandleLoginEventResult:msgidparam1:param1param2:param2data:data];});}+(void)handleLoginEventResult:(TUP_UINT32)msgidparam1:(TUP_UINT32)param1param2:(TUP_UINT32)param2data:(TUP_VOID*)data{LOGIN_E_EVENTloginEvent=(LOGIN_E_EVENT)msgid;switch(loginEvent){caseLOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT:{NSLog(@"LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULTresultis%d",param1);LOGIN_S_UPORTAL_AUTHORIZE_RESULT*uportalInfo=(LOGIN_S_UPORTAL_AUTHORIZE_RESULT*)data;BOOLresult=param1==TUP_SUCCESS?YES:NO;if(result){NSLog(@"Uportalloginsuccess!");[ViewControllershowMessages:@"Uportalloginsuccess"];}else{NSLog(@"Uportalloginfail!");[ViewControllershowMessages:@"Uportalloginfail"];}break;}caseLOGIN_E_EVT_REFRESH_TOKEN_RESULT:{NSLog(@"LOGIN_E_EVT_REFRESH_TOKEN_RESULTresult:%#x",param1);if(param1!=TUP_SUCCESS){NSLog(@"autorefreshtokenfail,callrefershtokenmethod");tup_login_refresh_token();}LOGIN_S_REFRESH_TOKEN_RESULT*tokenInfo=(LOGIN_S_REFRESH_TOKEN_RESULT*)data;break;}default:break;}}
点击“Product&gt;Run”，运行后如下所示。在界面中依次输入如下表信息：说明：以上信息需要在成功预约华为远程实验室后，从远程实验室获取。信息输入完成后，单击“”按钮。等待至页面弹出提示框，显示“LoginSuccess！”，表示调用服务成功。
在使用eSDKCloudEC系列业务组件，配套CloudEC解决方案实现各类业务前，需要先完成SDK的基础组件初始化。
无。
初始化应用程序在初始化业务组件前，调用tup_service_startup()接口完成SDK基础组件初始化。说明：此接口对应的入参结构信息中，相应的字段均应取值为0。代码示例：-(BOOL)serviceStartUp{TUP_S_INIT_PARAMparam;param.with_ws_service=TUP_TRUE;param.reserved=TUP_TRUE;TUP_RESULTresult=tup_service_startup(&amp;param);TUPLOG(@"tup_service_startupresult:%d",result);returnresult==TUP_SUCCESS?YES:NO;}去初始化应用程序关闭时，UI调用tup_service_shutdown()去初始化基础组件，释放相应资源。代码示例：-(BOOL)serviceShutdown{TUP_RESULTresult=tup_service_shutdown();TUPLOG(@"tup_service_shutdownresult:%d",result);returnresult==TUP_SUCCESS?YES:NO;}
无。
“统一鉴权与登录”组件基于CloudEC解决方案，向第三方开发者开放统一的鉴权和登录能力。对于多个业务应用，用户只需登录一次，不需要多次输入用户名和密码，简化客户操作，提升业务访问速度。在CloudEC解决方案下，使用业务模块前，必须初始化“统一鉴权与登录”组件并进行鉴权登录。
在使用“统一鉴权与登录”组件进行鉴权和登录处理前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用tup_login_log_start()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值1*1024)、日志文件最大个数(建议取值1)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为LOGIN_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为LOGIN_E_LOG_INFO。一般情况下，无需停止日志，即接口tup_login_log_stop()一般无需调用。代码示例：NSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/login"];TUP_RESULTstartLogResult=tup_login_log_start(LOGIN_E_LOG_DEBUG,1*1024,1,[pathUTF8String]);UI调用tup_login_init初始化鉴权登录组件，初始化资源。代码示例：TUP_RESULTresult=tup_login_init("",LOGIN_E_VERIFY_MODE_NONE);UI调用tup_login_register_process_notifiy()注册鉴权和登录业务处理通知回调函数。说明：1、开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。2、应用程序关注的业务事件：代码示例：TUP_VOIDonTUPLoginNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,TUP_VOID*data);TUP_RESULTresult=tup_login_register_process_notifiy((LOGIN_FN_CALLBACK_PTR)onTUPLoginNotifications);去初始化应用程序关闭时，UI调用tup_login_uninit()去初始化鉴权和登录组件，释放相应资源。代码示例：TUP_RESULTresult=tup_login_uninit();
无。
在使用CloudEC解决方案下的各类业务之前，需要向服务器完成鉴权和登录，获取用户的鉴权凭证(Token)信息、业务配置权限信息和相应的业务帐号与服务器配置信息。鉴权和登录成功后，SDK自动按保活周期定时刷新鉴权凭证信息。
已完成鉴权和登录组件初始化。
初始鉴权和登录UI根据实际网络配置策略，调用tup_login_set_proxy()设置HTTP代理信息。说明：1、此步骤可选，根据用户网络接入情况选择是否需要设置；2、HTTP代理信息包含代理服务器地址和认证信息。代码示例：LOGIN_S_PROXY_PARAMproxy_param;memset(&amp;proxy_param,0,sizeof(LOGIN_S_PROXY_PARAM));//单个服务器信息LOGIN_S_SERVER_ADDR_INFOproxy_server;memset(proxy_server,0,sizeof(LOGIN_S_SERVER_ADDR_INFO));proxy_server.server_port=5060;strcpy(proxy_server.server_uri,[@”172.22.11.228”UTF8String]);//鉴权信息LOGIN_S_AUTH_INFOproxy_auth;memset(&amp;proxy_auth,0,sizeof(LOGIN_S_AUTH_INFO));strcpy(proxy_auth.user_name,[@”01051261”UTF8String]);strcpy(proxy_auth.user_name,[@”Huawei@123”UTF8String]);proxy_param.proxy_auth=proxy_auth;proxy_param.proxy_server=proxy_server;TUP_RESULTresult=tup_login_set_proxy(&amp;proxy_param);UI调用tup_login_authorize()鉴权登录。说明：1、支持"普通用户名+密码"鉴权和"第三方tiket"鉴权，在LOGIN_E_AUTH_NORMAL模式下，鉴权信息字段为auth_info，在LOGIN_E_AUTH_TIKET模式下，鉴权信息字段为user_tiket，默认为LOGIN_E_AUTH_NORMAL模式；2、用户代理user_agent为应用程序类型名，如：“eSpaceMobile”；3、鉴权服务器auth_server根据实际的组网填写：在CludPBX下，server_type应取值为LOGIN_E_SERVER_TYPE_PORTAL，server_url和server_port填写相应的服务器地址和端口，server_version版本当前为"V600R006C00"；4、用户标识user_id由应用程序生成和管理，用于应用程序关联认证结果上报事件。代码示例：-(BOOL)loginAuthorizeWithAuthServerAddress:(NSString*)authServerAddressport:(int)port{LOGIN_S_AUTHORIZE_PARAMauthorizeParams;memset(&amp;authorizeParams,0,sizeof(LOGIN_S_AUTHORIZE_PARAM));authorizeParams.auth_type=LOGIN_E_AUTH_NORMAL;strcpy(authorizeParams.user_agent,"eSpaceMobile");//account+pwdLOGIN_S_AUTH_INFOauthInfo;strcpy(authInfo.user_name,[self.loginInfo.accountUTF8String]);strcpy(authInfo.password,[self.loginInfo.passwordUTF8String]);strcpy(authInfo.user_number,[@""UTF8String]);authorizeParams.auth_info=authInfo;//serverLOGIN_S_AUTH_SERVER_INFOloginAuthServer;memset(&amp;loginAuthServer,0,sizeof(LOGIN_S_AUTH_SERVER_INFO));loginAuthServer.server_type=LOGIN_E_SERVER_TYPE_PORTAL;loginAuthServer.server_port=port;strcpy(loginAuthServer.server_url,[_loginInfo.regServerAddressUTF8String]);loginAuthServer.proxy_port=port;strcpy(loginAuthServer.proxy_url,[_loginInfo.proxyServerAddressUTF8String]);authorizeParams.auth_server=loginAuthServer;TUPLOG(@"startloginauthorize,user_name:%@password:%@server_port:%dserver_url:%@",_loginInfo.account,_loginInfo.password,[_loginInfo.regServerPortintValue],_loginInfo.regServerAddress);TUP_RESULTresult=tup_login_authorize(&amp;authorizeParams);TUPLOG(@"Login_Log:tup_login_authorizeresult=%#x",result);if(result!=TUP_SUCCESS){NSDictionary*resultDic=@{LOGIN_IS_SUCCESS_KEY:[NSNumbernumberWithInt:result]};[selfrespondsLoginDelegateWithType:UPORTAL_LOGIN_RESULT_EVENTresult:resultDic];}returnresult==TUP_SUCCESS?YES:NO;}SDK收到服务器的鉴权登录响应后，向UI上报鉴权结果事件LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT，对应的数据信息结构为LOGIN_S_UPORTAL_AUTHORIZE_RESULT，携带用户的鉴权凭证信息、业务配置权限信息和相应的业务帐号和服务器配置信息。说明：1、deploy_mode：部署模式，标识当前服务器的组网部署方式，应用程序需要根据此字段确定当前组网下的业务能力；2、auth_token：鉴权凭证(Token值)，用于即时消息或会议等业务的登录，应用程序UI需要保存此字符串；3、sip_account、sip_impi、password_type、sip_password、sip_domain：SIP业务的相关登录信息，用于音视频呼叫和IPT业务的登录；4、num_of_site、site_info：站点数和站点信息，站点信息中包含一到多个各类业务(即时消息，会议和企业通讯录等)服务器地址信息集合，应用程序应该根据站点信息中的优先级字段选择业务服务器集；5、expire：鉴权过期时间，应用程序一般无需关注，由SDK处理。代码示例：caseLOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT:{TUPLOG(@"LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULTresultis%d,userid:%d",notify.param1,notify.param2);LOGIN_S_UPORTAL_AUTHORIZE_RESULT*uportalInfo=(LOGIN_S_UPORTAL_AUTHORIZE_RESULT*)notify.data;BOOLresult=notify.param1==TUP_SUCCESS?YES:NO;if(result){LOGIN_S_SINGLE_SERVER_INFOserverInfo=uportalInfo-&gt;auth_serinfo;LOGIN_S_AUTHORIZE_SITE_INFO*siteInfo=uportalInfo-&gt;site_info;LOGIN_S_ACCESS_SERVER*accessServer=siteInfo-&gt;access_server;//getsipaddressandportNSString*sipURI=[NSStringstringWithUTF8String:accessServer-&gt;sip_uri];NSArray*tempArray=[sipURIcomponentsSeparatedByString:@":"];_token=[NSStringstringWithUTF8String:uportalInfo-&gt;auth_token];TUPLoginAccessServerInfo*tupLoginAccessServer=[[TUPLoginAccessServerInfoalloc]initWithAccessServer:accessServer];self.accessServerInfo=tupLoginAccessServer;}else{_loginInfo=nil;}break;}UI调用tup_login_firewall_detect()进行组网下的防火墙探测，以判断此当前是否需要使用STG。说明：在“步骤3”中获取的site_info-&gt;access_server.svn_uri，用于防火墙探测，其中svn_url可能存在多个地址信息，以“;”分割，需要UI进行解析后填写至被探测的服务器列表，并将端口填写为0；若svn_url内容为空，则无需进行后继步骤。代码示例：-(BOOL)loginFirewallDetect:(int)serverNumberserverPort:(int)serverPortserverUrl:(NSString*)serverUrl{LOGIN_S_DETECT_SERVERdetect_server;memset(&amp;detect_server,0,sizeof(LOGIN_S_DETECT_SERVER));detect_server.server_num=serverNumber;LOGIN_S_SERVER_ADDR_INFOservers;memset(&amp;servers,0,sizeof(LOGIN_S_SERVER_ADDR_INFO));strcpy(servers.server_uri,[serverUrlUTF8String]);servers.server_port=serverPort;detect_server.servers=&amp;servers;TUP_RESULTresult=tup_login_firewall_detect(&amp;detect_server);returnresult==TUP_SUCCESS?YES:NO;}SDK完成防火墙探测处理，向UI上报探测结果事件LOGIN_E_EVT_FIREWALL_DETECT_RESULT，携带当前的防火墙模式信息。说明：防火墙探测成功：1、若防火墙模式为LOGIN_E_FIREWALL_MODE_NULL，则无需后继步骤；2、若防火墙模式为LOGIN_E_FIREWALL_MODE_ONLY_HTTP或OGIN_E_FIREWALL_MODE_HTTP_AND_SVN，则需对应设置其他各业务模块的防火墙模式，并完成后继STG隧道的创建过程。代码示例：-(void)onRecvRegisterNotification:(TupCallNotifications*)notify{switch(notify.msgId){caseLOGIN_E_EVT_FIREWALL_DETECT_RESULT:{TUPLOG(@"LOGIN_E_EVT_FIREWALL_DETECT_RESULT");}break;default:break;}}UI调用tup_login_build_stg_tunnel()创建STG隧道。说明：在“步骤3”中获取的site_info-&gt;access_server.stg_info，用于STG隧道创建，其中stg_uri可能存在多个地址信息，以“;”分割。代码示例：-(BOOL)loginBuildSTGTunnel:(int)serverNumberserverPort:(int)serverPortserverUrl:(NSString*)serverUrluserName:(NSString*)userNamepassword:(NSString*)passwordcaPath:(NSString*)caPath{LOGIN_S_STG_PARAMserver;memset(&amp;server,0,sizeof(LOGIN_S_STG_PARAM));server.stg_num=serverNumber;//STG服务器LOGIN_S_SERVER_ADDR_INFOstg_servers;memset(&amp;stg_servers,0,sizeof(LOGIN_S_SERVER_ADDR_INFO));stg_servers.server_port=serverPort;strcpy(stg_servers.server_uri,[serverUrlUTF8String]);server.stg_servers=&amp;stg_servers;//userName、pwd、caPthstrcpy(server.user_name,[userNameUTF8String]);strcpy(server.password,[passwordUTF8String]);strcpy(server.ca_path,[caPathUTF8String]);TUP_RESULTresult=tup_login_build_stg_tunnel(&amp;server);returnresult==TUP_SUCCESS?YES:NO;}SDK完成STG创建处理，向UI上报结果事件LOGIN_E_EVT_STG_TUNNEL_BUILD_RESULT，携带当前的防火墙模式信息。代码示例：-(void)onRecvRegisterNotification:(TupCallNotifications*)notify{switch(notify.msgId){caseLOGIN_E_EVT_STG_TUNNEL_BUILD_RESULT:{TUPLOG(@"LOGIN_E_EVT_STG_TUNNEL_BUILD_RESULT");}break;default:break;}}更新鉴权凭证(Token)SDK在鉴权登录成功后，在鉴权登录有效时间的一半时，自动发起更新鉴权凭证(Token)处理，向UI上报更新结果事件LOGIN_E_EVT_REFRESH_TOKEN_RESULT，若结果为成功，UI则更新记录的鉴权凭证。说明：鉴权登录有效时间在鉴权登录请求的响应中返回，无需应用程序配置。代码示例：caseLOGIN_E_EVT_REFRESH_TOKEN_RESULT:{LOGIN_S_REFRESH_TOKEN_RESULT*tokenInfo=(LOGIN_S_REFRESH_TOKEN_RESULT*)notify.data;_token=[NSStringstringWithUTF8String:tokenInfo-&gt;auth_token];break;}若自动刷新失败，UI调用tup_login_refresh_token()强制刷新鉴权凭证Token。说明：在业务处理过程中，若SDK返回鉴权凭证Token失效(不同业务下错误码或原因值定义不同)，UI也需要调用此接口进行强制更新，并使用更新后的鉴权凭证Token进行业务处理。代码示例：caseLOGIN_E_EVT_REFRESH_TOKEN_RESULT:{TUPLOG(@"LOGIN_E_EVT_REFRESH_TOKEN_RESULTresult:%#x",notify.param1);if(notify.param1!=TUP_SUCCESS){TUPLOG(@"autorefreshtokenfail,callrefershtokenmethod");tup_login_refresh_token();}LOGIN_S_REFRESH_TOKEN_RESULT*tokenInfo=(LOGIN_S_REFRESH_TOKEN_RESULT*)notify.data;_token=[NSStringstringWithUTF8String:tokenInfo-&gt;auth_token];break;}SDK完成强制刷新鉴权凭证Token处理，向UI上报刷新鉴权凭证Token结果事件LOGIN_E_EVT_REFRESH_TOKEN_RESULT，若结果为成功，UI则更新记录的鉴权凭证。若强制刷新失败，SDK会自动发起鉴权登录，向UI上报鉴权结果事件LOGIN_E_EVT_UPORTAL_AUTHORIZE_RESULT。说明：若鉴权失败，应用程序界面应提示用户，建议用户进行重登录处理。
无。
“音视频呼叫”业务组件基于CloudEC解决方案，向第三方开发者开放音视频呼叫能力。
主被叫应用程序完成向ECServer注册，并按周期自动发送注册保活消息。
建立通话用户A通过拨号盘、联系人或通话记录等入口拨号呼出，主叫应用程序UI调用SDK接口发起呼叫请求。主叫侧SDK向ECServer发送呼叫请求消息成功后，向UI上报呼出事件；被叫侧SDK收到ECServer呼叫请求消息后，向UI上报来电事件。被叫侧UI收到来电事件，播放来电提示音呈现来电通知界面，同时调用SDK接口发送消息通知主叫，本地正在振铃。主叫侧SDK收到被叫振铃通知消息，向UI上报回铃音事件，UI播放回铃音。被叫用户B选择接听来电，主叫应用程序UI调用SDK接口发送接听呼叫响应消息接听呼叫。主叫侧SDK收到被叫侧的呼叫响应消息后，与被叫侧SDK完成音视频通话协商，建立音视频通话，主、被叫侧SDK向UI上报呼叫接通事件，UI刷新界面通知用户通话接通。说明：通话过程中，主叫用户A和B都可以对通话进行操作，如保持\恢复通话、静音麦克风和调整通话音量等。挂断通话通话过程中，主叫或被叫用户均可以挂断通话，当前以主叫用户A发起挂断为例。用户A在通话界面挂断通话，应用程序UI调用SDK接口挂断呼叫，SDK发送挂断呼叫消息。主、被叫侧SDK完成结束呼叫处理，向UI上报呼叫结束事件，UI刷新界面通知用户通话结束。
在使用“音视频呼叫”业务组件实现音视频呼叫业务前，需要完成组件初始化和应用程序的全局业务配置参数。应用程序的业务配置参数均支持在业务处理前进行动态设置，对于最终应用程序用户无需感知的参数和一般无需要动态设置的参数，放在初始化阶段进行默认设置。
已完成SDK基础组件初始化。
初始化UI调用tup_call_log_start()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值10*1024)、日志文件最大个数(建议4)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为CALL_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为CALL_E_LOG_INFO。代码示例：NSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/call"];tup_call_log_start(CALL_E_LOG_DEBUG,10*1024,4,(TUP_CHAR*)[pathUTF8String]);tup_call_hme_log_info(CALL_E_LOG_DEBUG,10,CALL_E_LOG_DEBUG,50);UI调用tup_call_init()初始化音视频呼叫业务组件，初始化资源。代码示例：TUP_RESULTret_call=tup_call_init();UI调用tup_call_register_process_notifiy()注册呼叫业务处理通知回调函数。说明：1、开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。2、应用程序关注的业务事件：代码示例：TUP_VOIDonTupCallNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,void*data)TUP_RESULTret_registerTupNotifications=tup_call_register_process_notifiy((CALL_FN_CALLBACK_PTR)onTupCallNotifications);UI调用tup_call_set_cfg()设置应用程序的必选参数和可选参数。说明：必选参数：产品类型，对应的cfgid为CALL_D_CFG_ENV_PRODUCT_TYPE，val取值CALL_E_PRODUCT_TYPE_MOBILE。可选参数:<oltype="a"id="ZH-CN_TOPIC_0069399695__zh-cn_topic_0069026854_zh-cn_topic_0063354548_zh-cn_topic_0063039661_ol27126635165555"><liid="ZH-CN_TOPIC_0069399695__zh-cn_topic_0069026854_zh-cn_topic_0063354548_zh-cn_topic_0063039661_li6511810113914">用户代理，对应的cfgid为CALL_D_CFG_ENV_USEAGENT，val取值为字符串，如:"SoftClientonMobile"，具体可根据应用程序名设置相应的名称。信令传输模式，对应的cfgid为CALL_D_CFG_SIP_TRANS_MODE，val取值参见CALL_E_TRANSPORTMODE，默认为CALL_E_TRANSPORTMODE_UDP，具体可根据组网需要设置为不同的值。其他可选参数，根据实际的业务需要进行设置。去初始化UI调用tup_call_uninit()去初始化音视频呼叫业务组件，释放相应资源。代码示例：TUP_RESULTresult=tup_call_uninit();
无。
用户在视频通话中暂停或恢复视频发送。设置和取消暂停视频采集针对指定通话，不是针对设备，停止时画面凝固。
视频通话已建立，主被叫正在通话中。
设置和取消暂停视频采集操作本地媒体。UI调用tup_call_video_control()接口暂停或继续视频。说明：1.bIsSync：是否使用同步执行，iOS平台建议为否2.ulCallID：当前呼叫ID3.ulOperation：操作类型，设置或取消暂停视频4.ulModule：模式，当前为摄像头，取值4代码示例：-(BOOL)muteMic:(BOOL)mutecallId:(unsignedint)callId{TUP_RESULTresult=tup_call_media_mute_mic(callId,mute);TUPLOG(@"Call_Log:tup_call_media_mute_micresult=%@",(TUP_SUCCESS==result)?@"YES":@"NO");returnresult==TUP_SUCCESS?YES:NO;}
无。
管理音视频设备，包括麦克风、扬声器和摄像头。
详见各子场景说明。
获取音、视频设备列表应用程序在任何阶段均可以获取当前可用的音视频设备信息，为更方便地进行后继具体设备管理，建议应用程序在初始化阶段和系统检测到设备变化时，获取设备信息并保存维护。UI调用tup_call_media_get_devices()获取音频视频设备列表。说明：1、获取麦克风列表，device_type值为CALL_E_CALL_DEVICE_MIC；2、获取扬声器列表，device_type值为CALL_E_CALL_DEVICE_SPEAK；3、获取摄像头列表，device_type值为CALL_E_CALL_DEVICE_VIDEO；。代码示例：-(BOOL)obtainDeviceListWityType:(CALL_E_DEVICE_TYPE)deviceType{TUPLOG(@"currentdevicetype:%d",deviceType);TUP_UINT32deviceNum=0;CALL_S_DEVICEINFO*deviceInfo;TUP_RESULTret=tup_call_media_get_devices(&amp;deviceNum,deviceInfo,deviceType);TUPLOG(@"Call_Log:tup_call_media_get_devices=%#x,count:%d",ret,deviceNum);if(deviceNum&gt;0){TUPLOG(@"again");deviceInfo=newCALL_S_DEVICEINFO[deviceNum];TUP_RESULTrets=tup_call_media_get_devices(&amp;deviceNum,deviceInfo,deviceType);TUPLOG(@"Call_Log:tup_call_media_get_devices=%#x,count:%d",rets,deviceNum);for(inti=0;i&lt;deviceNum;i++){TUPLOG(@"Call_Log:ulIndex:%d,strName:%s,string:%@",deviceInfo[i].ulIndex,deviceInfo[i].strName,[NSStringstringWithUTF8String:deviceInfo[i].strName]);}}delete[]deviceInfo;returnret==TUP_SUCCESS?YES:NO;管理音频设备一般用于用户对音频设备(麦克风和扬声器)进行设置和切换。UI调用tup_call_get_mobile_audio_route()获取当前使用的音频设备。说明：移动的音频设备包括：蓝牙、听筒和耳机。代码示例：-(ROUTE_TYPE)obtainMobileAudioRoute{CALL_E_MOBILE_AUIDO_ROUTEroute;TUP_RESULTresult=tup_call_get_mobile_audio_route(&amp;route);TUPLOG(@"tup_call_get_mobile_audio_routeresultis%d,audioRouteis:%d",result,route);return(ROUTE_TYPE)route;}UI调用tup_call_set_mobile_audio_route()设置当前使用的音频设备。代码示例：-(BOOL)configAudioRoute:(ROUTE_TYPE)route{CALL_E_MOBILE_AUIDO_ROUTEaudioRoute=(CALL_E_MOBILE_AUIDO_ROUTE)route;TUP_RESULTresult=tup_call_set_mobile_audio_route(audioRoute);TUPLOG(@"tup_call_set_mobile_audio_routeresultis%@,audioRouteis:%d",result==TUP_SUCCESS?@"YES":@"NO",audioRoute);returnresult==TUP_SUCCESS?YES:NO;}管理视频设备一般用于用户对摄像头进行设置和切换。UI调用tup_call_set_video_orient设置当前使用的摄像头设备。代码示例：-(void)resetUCVideoOrientAndIndexWithCallId:(unsignedint)callid{CALL_S_VIDEO_ORIENTorient;if([[UIDevicecurrentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone){orient.ulChoice=1;}if([[UIDevicecurrentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPad){orient.ulChoice=2;}orient.ulPortrait=0;orient.ulLandscape=0;orient.ulSeascape=1;tup_call_set_video_orient(callid,CameraIndexFront,&amp;orient);}预览本地视频一般用于设备设置时，检测本地摄像头工作状态是否正常。UI先创建本地预览窗口，再调用tup_call_open_preview()打开本地视频预览窗口，其中摄像头索引填写“获取音、视频设备列表”过程中获取到的摄像头索引。代码示例：TUP_RESULTret=tup_call_open_preview((TUP_UPTR)viewHandler,(TUP_UINT32)1);UI调用tup_call_close_preview()关闭本地视频预览窗口，同时销毁本地预览窗口。代码示例：tup_call_close_preview();
无。
“音视频会议”业务组件基于CloudEC解决方案，向第三方开发者开放音视频会议能力。
在使用“音视频会议”业务组件实现音视频会议业务前，需要完成组件初始化。
已完成SDK基础组件初始化。
初始化UI调用tup_confctrl_set_init_param()设置音视频会议业务初始化参数。说明：初始化参数结构CONFCTRL_S_INIT_PARAM中，<ulid="ZH-CN_TOPIC_0069399710__zh-cn_topic_0069026811_zh-cn_topic_0063021453_ul605614153335"><liid="ZH-CN_TOPIC_0069399710__zh-cn_topic_0069026811_zh-cn_topic_0063021453_li25456453153335">bWaiMsgpThread，表示是否要等待消息队列线程，应取值为TUP_TRUE；bBatchUpdate，表示是否启动批量更新会议参数，应取值为TUP_FALSE；bConnectCall，表示是否与音视频呼叫业务同时使用，应用程序应该根据实际情况填写取值，在移动设备上，使用“CTC”会议(此时会议控制与呼叫分离)，取值为TUP_FALSE；同时，若应用程序包含“音视频呼叫”组件，则需要在初始化“音视频呼叫”业务时，通过调用tup_call_set_cfg设置当前会控模式为“移动会控模式”，cfgid为CALL_D_CFG_CONF_USE_MAA_CONFCTRL，value取值为TUP_TRUE。bSaveParticipantList，表示是否要保存与会者列表，应取值为TUP_TRUE；ulParaticipantMaxNum，一次上报与会者最大个数,0表示不设置,使用默认值400ulConfListMaxNum，一次上报会议列表最大个数,0表示不设置,使用默认值100代码示例：UI调用tup_confctrl_log_config()设置日志参数，并启动日志，其中日志参数包括：日志级别、单个日志文件大小(单位：KB，建议取值10*1024)、日志文件最大个数(建议4)和日志存放路径。说明：启动日志必须在组件初始化之前调用，在开发调试阶段，为更方便地定位问题，建议日志级别设置为CONFCTRL_E_LOG_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为CONFCTRL_E_LOG_INFO。代码示例：NSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/confCtrl"];tup_confctrl_log_config(3,10*1024,4,(TUP_CHAR*)[pathUTF8String]);UI调用tup_confctrl_init()始化音视频会议业务组件，初始化资源。说明：传入的参数为认证模式取值参考LOGIN_E_VERIFY_MODE，其中：如果本地有证书才需要传入LOGIN_E_VERIFY_MODE_SERVER表示认证服务端，取值为1；如果没有证书，则设置LOGIN_E_VERIFY_MODE_NONE为不认证，取值为0，一般建议设置为不认证。代码示例：intret_meeting=tup_confctrl_init();UI调用tup_confctrl_register_process_notifiy()注册呼叫业务处理通知回调函数。说明：1、开发者需要实现应业务处理通知回调函数，若回调消息存在指针参数，则需深拷贝后使用，否则组件可能会释放，导致程序崩溃。2、应用程序关注的业务事件：代码示例：TUP_VOIDonTupConferenceNotifications(TUP_UINT32msgid,TUP_UINT32param1,TUP_UINT32param2,TUP_VOID*data)TUP_RESULTret_registerMeetingNotify=tup_confctrl_register_process_notifiy((CONFCTRL_FN_CALLBACK_PTR)onTupConferenceNotifications);去初始化UI调用tup_confctrl_uninit()去初始化音视频会议业务组件，释放相应资源。代码示例：-(void)uninitConfCtrl{tup_conf_uninit();}
无。
视频会议中(包含点对点会议和多点会议)，若未选择“启用数据会议”功能，则主席和与会者可通过“辅流”方式进行桌面共享或程序共享。
主席和与会者均已在会议中。
会议中，在已有与会者在共享，允许其他与会者发起共享，前一共享者自动结束共享。主席或与会者侧选择“共享屏幕”或“共享程序”，UI调用tup_call_start_data()启动辅流发送。说明：“共享屏幕”和“共享程序”对于SDK层业务逻辑没有区别，应用程序实现不同类型的共享，就是实现截取“辅流”数据时，截取不同类型的窗口。共享发起侧SDK向UI上报辅流开始发送事件CALL_E_EVT_DATA_SENDING，其他与会者收到辅流接收事件CALL_E_EVT_DATA_RECVING主席或与会者侧选择停止共享，UI调用tup_call_stop_data()停止辅流发送。所有与会者侧SDK向UI上报辅流停止发送事件CALL_E_EVT_DATA_STOPPED。
无。
“桌面协同”组件基于CloudEC解决方案，向第三方开发者开放桌面协同与共享能力。
在使用“数据会议组件”实现桌面协同与共享业务前，需要完成组件初始化。
无。
初始化UI调用tup_conf_init()初始化组件，设置线程模型、系统设备类型和操作系统类型等。说明：1、调用该函数的线程为业务消息回调处理线程，建议在主线程调用；2、线程模型，标识“桌面协同与共享”业务是否在独立线程(与UI主线程处于不同线程)运行，建议为false；3、系统设备类型和操作系统类型等，按实际设备类型填写；4、日志级别信息，在开发调试阶段，为更方便地定位问题，建议日志级别设置为LOG_LEVEL_DEBUG；在发布阶段，为更长时间地记录日志，可将日志级别默认设置为LOG_LEVEL_INFO；日志目录路径可选指定，若缺省，则日志生成在应用程序所在目录的“.\trace”，否则在指定的路径下。在需要进行问题分析定位时，开发人员应在相应的目录下获取日志；5、临时目录路径为业务过程中存放临时文件的路径，可选指定；6、会议模式，支持PaaS模式和产品模式，当前应该设置为产品模式，取值为0。代码示例：-(void)initDataConferenceServices{Init_paraminitParam;initParam.os_type=CONF_OS_IOS;if([[UIDevicecurrentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone){initParam.dev_type=CONF_DEV_PHONE;}else{initParam.dev_type=CONF_DEV_PAD;}initParam.dev_dpi_x=0;initParam.dev_dpi_y=0;initParam.media_log_level=LOG_DEBUG;initParam.sdk_log_level=LOG_DEBUG;initParam.conf_mode=0;NSString*path=[[NSHomeDirectory()stringByAppendingPathComponent:@"Documents"]stringByAppendingString:@"/TUPC60log/dataConf"];strncpy(initParam.log_path,[pathUTF8String],TC_MAX_PATH);strncpy(initParam.temp_path,[pathUTF8String],TC_MAX_PATH);tup_conf_init(false,&amp;initParam);}UI调用tup_conf_heart()接口循环发送心跳消息，参数填写0。说明：建议应用程序循环调用此接口的间隔为10ms。代码示例：-(void)heartBeat{tup_conf_heart(_dataConfHandle);}去初始化UI调用tup_conf_uninit()去初始化组件，释放相应资源。代码示例：-(void)unInitDataConfService{tup_conf_uninit();}
无。
会议过程中，某一与会者可以发送即时消息给其他所有与会者。
1、入会成功；2、加载即时消息模块成功。
UI调用接口tup_conf_chat_sendmsg_ex()接口在会议中发送公共即时消息。说明：ntype消息类型，当前仅支持公共消息，取值CHAT_TYPE_PUBILC；userid用户ID，公共消息时无需填写。代码示例：-(BOOL)sendIMMessageToAll:(NSString*)message{intlen=[messagelength];TUP_CHAR*msgChar=(TUP_CHAR*)[messageUTF8String];intresult=tup_conf_chat_sendmsg(_dataConfHandle,CHAT_TYPE_PUBLIC,0,msgChar,strlen(msgChar));TUPLOG(@"tup_conf_chat_sendmsgresult:%d,msgCharis:%s",result,msgChar);returnresult==TC_OK?YES:NO;}会议中所有用户(包括消息发送者)侧SDK均收到消息通知，向UI上报COMPT_MSG_CHAT_ON_RECV_MSG事件，UI显示公共即时消息。代码示例：caseCOMPT_MSG_CHAT_ON_RECV_MSG:{TUPLOG(@"COMPT_MSG_CHAT_ON_RECV_MSGresult:%ld",nValue2);[selfhandleChatMSG:nValue1value2:nValue2data:pdatadataLength:nSize];break;}-(void)handleChatMSG:(int)nValue1value2:(long)nValue2data:(void*)pDatadataLength:(int)nSize{if(nValue2!=TC_OK){TUPLOG(@"Sendmsgfailorrevicemsgfail!");return;}TC_CHAT_MSG*chatMsg=(TC_CHAT_MSG*)pData;TUP_CHARcharMsgC[chatMsg-&gt;nMsgLen];memcpy(charMsgC,chatMsg-&gt;lpMsg,chatMsg-&gt;nMsgLen);TUPLOG(@"charMsgC:%s",charMsgC);NSString*msgStr=[NSStringstringWithUTF8String:charMsgC];TUPLOG(@"msgStr:%@,chatMsg-&gt;lpMsg:%s,chatMsg-&gt;fromUserName:%s，chatMsg-&gt;nMsgLen:%d",msgStr,chatMsg-&gt;lpMsg,chatMsg-&gt;fromUserName,chatMsg-&gt;nMsgLen);TUPChatMsg*tupMsg=[[TUPChatMsgalloc]init];tupMsg.nMsgLen=chatMsg-&gt;nMsgLen;tupMsg.nFromUserid=chatMsg-&gt;nFromUserid;tupMsg.nSequenceNmuber=chatMsg-&gt;nSequenceNmuber;tupMsg.nFromGroupID=chatMsg-&gt;nFromGroupID;tupMsg.time=chatMsg-&gt;time;tupMsg.lpMsg=msgStr;tupMsg.fromUserName=[NSStringstringWithUTF8String:chatMsg-&gt;fromUserName];;NSDictionary*shareDataInfo=@{DATACONF_CHAT_MSG_KEY:tupMsg};[selfrespondsDataConferenceDelegateWithType:DATACONF_CHAT_MSGresult:shareDataInfo];}
当前仅提供公共消息的开放能力。
接口调用返回每个接口调用后，无论调用成功还是失败，都会有一个返回值。返回值类型为INT32/UINT32/LONG的接口，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。返回值类型为BOOL/bool的接口，如果返回值为TRUE/true/YES，表示成功，否则表示失败。返回值类型为对象或指针的，如果返回值非空，表示成功，否则表示失败。说明：在SDK中，大量接口实际上是一个异步调用接口，接口返回成功，只是表明接口的调用成功，并不表示业务执行成功。回调通知返回SDK的业务执行结果类回调通知，返回实际的业务执行结果，如果返回值为0，表示成功；否则表示失败，该返回值即为错误码。日志获取日志文件里记录了业务接口调用的时间、接口入参(非用户敏感信息关键参数)以及调用结果。
在接口参考文档里，列出了所有错误码信息，开发者可根据接口返回的错误码，查询相对应的错误描述。部分模块的错误码或原因值并不是从0开始，在获取相应模块错误码后，需要转换后，再可映射到正确的描述。
日志路径是应用程序在SDK各组件的初始化阶段自定义路径。1、因部分组件暂不支持设置路径，默认应用程序的运行目录下，为方便一次性获取日志，建议在初始化时，将SDK各组件的日志指定为相同路径。2、SDK的日志命名一般以"tup_"或"hme_"为前缀。
SDK一般格式为：[YYYY-MM-DDHH:MM:SS.MS][P:xxxx/T:xxxx][level][filename:linefunction]loginfostring其中：[YYYY-MM-DDHH:MM:SS.MS]表示日志打印时间，精确到ms；[P:xxxx/T:xxxx]表示日志所在的进程ID和线程ID；[level]表示日志级别，包括错误(Err)、警告(War)、信息(Inf)和调试(Dbg)级别；[filename:linefunction]表示日志所在的文件名，行号和函数；loginfostring为日志信息描述。建议开发者根据时间顺序进行相应的业务调用分析。对于业务的关键逻辑位置，会打印一条相应的关键信息日志。[2017-05-0516:29:35.077][P:7920/T:8776][Inf][call][call_msg.c:881CALLMPROC_MSG_AsynSend]ulMsgID=0x00000008[CALL_E_EVT_CALL_DESTROY],ulParam123=[0x7bdfb600,1,0],from[P7920]to[P7920][2017-05-0516:29:35.077][P:7920/T:8776][Dbg][call][call_basic.c:969callbasicDestroyBasicCall]MEDIA_SetAudioPlayDelay(0)0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:15740CallBasicSetVideoMute]callID:0x7bdfb600,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Inf][call][call_basic.c:15762CallBasicSetVideoMute]3.ulCallID=2078258688,bIsMute=0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_conf.c:5110CallConfOnEndConfCall]CallConfOnEndConfCallulConfID=0x0[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_basic.c:11348CallBasicGetConfID]CallBasicGetConfID(0x7bdfb600)[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_basic.c:11354CallBasicGetConfID]GetCallID(0x7bdfb600)Error=0x8002113[2017-05-0516:29:35.079][P:7920/T:8776][Err][call][call_conf.c:5123CallConfOnEndConfCall]con'tfindServerConfbyID=0xffffffff![2017-05-0516:29:35.079][P:7920/T:8776][Dbg][call][call_main.c:2128callmainMsgProcModTsp]callprocessmsgleave,msgId:0x2904[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:292SipStackTptDToTptMsgProc]startprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC[2017-05-0516:29:35.079][P:7920/T:8776][Dbg][SipTptd][sstpthiglue.c:394SipStackTptDToTptMsgProc]endprocesstpttotptdmsg:TPTD_SENDRESULT_SUCC
SDK除“错误码”和“日志”外，还提供问题“在线分析”机制，以协助开发者在使用SDK开发过程中更方便直观的分析定位并解决问题。1、业务SDK向TUPException抛出“异常”，由TUPException向TUPService推送“异常”信息，并将“异常”信息写入tup_exception.log日志。2、在线模式下，"在线分析"呈现页面接受TUPService推送的“异常”信息，离线模式下，“在线分析”呈现页面读取日志路径下的“tup_exception.log”中记录的“异常”信息，结合“SDKServiceexception”各种类型异常的详细描述文件，进行实时的“异常分析”，给开发者呈现关心的、可理解的问题原因分析和方案建议。
前提条件：应用程序已开启并运行“TUPService”。浏览器中打开tupException.html，"在线分析"呈现页面连接“TUPService”，并显示连接状态正常。说明：若“TUPService”未启动或其他原因，则显示连接状态异常。当TUP运行过程中产生“异常”时，页面将实时显示关心的、可理解的问题原因分析和方案建议。
在移动端或其他应用程序无法运行“TUPService”的情况下，开发者可以通过导入日志的方式进行“异常”分析。浏览器中打开tupException.html，"在线分析"呈现页面显示连接状态异常。开发者在"在线分析"呈现页面中，点击“选取异常日志文件”按钮，选取异常日志“tup_exception.log”。点击“解析异常日志”按钮后，页面即可显示关心的、可理解的问题原因分析和方案建议。
会议过程中，某一与会者可以发送即时消息给其他所有与会者。
1、入会成功；2、加载即时消息模块成功。
调用ConfInstance对象中的chatSendMsg()方法在会议中发送公共即时消息。说明：ntype消息类型，当前仅支持公共消息，取值CHAT_TYPE_PUBILC；userid用户ID，公共消息时无需填写。代码示例：/***Sendmsgboolean.**@paramchatTypethechattype*@paramuserIdtheuserid*@paramcontentthecontent*@returntheboolean*/publicbooleansendMsg(intchatType,intuserId,Stringcontent){if(isMainThread()){Messagemsg=newMessage();msg.what=MESSAGE_SEND;msg.arg1=chatType;msg.arg2=userId;msg.obj=content;mconfHandler.sendMessage(msg);returntrue;}intnRet=conf.chatSendMsg(chatType,userId,content);TupLogUtil.i(TAG,"nRet:"+nRet);return(nRet==0);}会议中所有用户(包括消息发送者)侧SDK均收到消息通知，通过confMsgNotify()接口向UI上报通知消息，对应的消息类型为COMPT_MSG_CHAT_ON_RECV_MSG，UI显示公共即时消息。代码示例：caseConfMsg.COMPT_MSG_CHAT_ON_RECV_MSG:handleReceiveMessage((ConfExtendChatMsg)extendMsg);break;privatevoidhandleReceiveMessage(ConfExtendChatMsgextendMsg){ConfExtendChatMsgmsg1=extendMsg;StringuserID=String.valueOf(msg1.getUserId());TupLogUtil.i(TAG,"userID-&gt;"+userID);byte[]msgInfo=msg1.getMsgInfo();StringreceiveString=null;try{receiveString=newString(msgInfo,TupLogUtil.CHARSET_UTF_8);}catch(UnsupportedEncodingExceptione){}TupLogUtil.i(TAG,"receivereceiveString:"+receiveString);Map&lt;String,String&gt;messageMap=newHashMap&lt;&gt;();messageMap.put(ConferenceParams.USER_ID,userID);messageMap.put(ConferenceParams.RECEIVE_MESSAGE,receiveString);sendDataConfCallBack(ConfMsg.COMPT_MSG_CHAT_ON_RECV_MSG,messageMap);}
当前仅提供公共消息的开放能力。
本示例以Java语言进行CloudEC的二次集成开发，实现一个简单的会议管理功能。它会详细说明如何下载及安装SDK，以及如何配置你的开发环境。开发过程中每个接口调用后，无论调用成功还是失败，都会有一个返回值。如果返回值为0，表示成功；否则表示失败，该返回值即为。快速入门流程如下：
在进行二次开发之前，应该准备好以下环境和资源，如所示。<emid="ZH-CN_TOPIC_0069672634__zh-cn_topic_0069392088_ac39153ad8b114b23b7721eb15fbc97eb">当您在下载文档或者软件的过程中如遇异常，请联系华为公司客服热线4008828000或客服邮箱esdk@huawei.com</em><emid="ZH-CN_TOPIC_0069672634__zh-cn_topic_0069392088_zh-cn_topic_0062702879_i34759260">获得帮助。</em>
打开Eclipse，选择“File&gt;New&gt;Project&gt;Java&gt;JavaProject”。系统显示“NewJavaProject”界面，如所示。新建Java工程在“Projectname”处输入“eSDK_EC6.0_Conference_Demo_CS_Java”，单击“Finish”。系统显示工程主界面，如所示。工程主界面
右键单击“eSDK_EC6.0_Conference_Demo_CS_Java”工程（以下简称Demo工程），选择“Properties”，系统打开如所示窗口。PropertiesforeSDK_EC6.0_Conference_Demo_CS_Java选择“Resource”标签页，在“Textfileencoding”框中选择“Other”，并在下拉框中将编码格式设置为“UTF-8”，单击“OK”，完成设置。
右键单击“src”文件夹，选择“New&gt;Package”，弹出”NewJavaPackage”窗口，如所示。NewJavaPackage在“Name”处输入“com.huawei.esdk.ec.conference”，单击“Finish”，完成包的新建，如所示。工程主界面同理，新建“com.huawei.esdk.ec.conference.bean”、“com.huawei.esdk.ec.conference.constant”、“com.huawei.esdk.ec.conference.model”、“com.huawei.esdk.ec.conference.utils”、“com.huawei.esdk.ec.conference.view”包，最终效果如所示。工程主界面
右键“com.huawei.esdk.ec.conference.utils”包，选择“New&gt;Class”，弹出“NewJavaClass”窗口，如所示。NewJavaClass在“Name”处输入“PropertiesUtils”，单击“Finish”，完成新建，如所示。工程主界面重复以上步骤，按照如下结构添加类。<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_ue63234e634e44371a0c894b1a5aafe6f"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_l96ca8b881a3a48febadb45483271722e">com.huawei.esdk.ec.conference包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_u7c77099bb5b44f4d99362609ff7b4ccd"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_lb357ff8c340b4990824d6ef7e1f085b0">Runme.javacom.huawei.esdk.ec.conference.bean包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_ud05670be5a18476c865b079cca90a251"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_l7175c8a6fb4b4e039a3c59a85fdba8b9">AddAttendeeResponse.javaAttendee.javaConferenceInfo.javaCycleParams.javaDeleteMeetingParam.javaDeleteMeetingResponse.javaMeetingInfo.javaPageConferenceInfo.javaQueryMeetingResponse.javaReminder.javaScheduledMeetingRequest.javaScheduledMeetingResponse.javaWeekDayParam.javacom.huawei.esdk.ec.conference.constant包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_ul17841829142340"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_li29379020142336">UCConstant.javacom.huawei.esdk.ec.conference.model包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_ul6527679142425"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_li35483835142424">RestRequestMessage.javaRestResponse.javacom.huawei.esdk.ec.conference.utils包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_u71f0758df05c4312995b3d5f4094d699"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_l0bce737ae01a4c3a90ad9611124bb7b2">Base64Utils.javaPropertiesUtils.javaRestUtils.javaStringUtils.javaTokenUtils.javacom.huawei.esdk.ec.conference.view包<ulid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_u5942f757c3274d409741da5c6e889bd4"><liid="ZH-CN_TOPIC_0069672637__zh-cn_topic_0069392091_ld519b71f4cf74a46ab595a46189ac0e0">AddAttendeePanel.javaDeleteMeetingPanel.javaMeetingPanel.javaMyButton.javaQueryMeetingPanel.javaTokenPanel.java
右键单击“eSDK_EC6.0_Conference_Demo_CS_Java”工程，选择“New&gt;Folder”，弹出”Newfolder”窗口，如所示。NewFolder单击“Finish”，完成“lib”文件夹的添加，如所示。工程主界面下载工程所需的jar文件包，解压缩后将.jar文件复制到“lib”包中，如下图所示：工程主界面右键单击Demo工程，选择“Properties”，系统打开“PropertiesforeSDK_EC6.0_Conference_Demo_CS_Java”窗口。单击左侧“JavaBuildPath”，选择“Libraries”页签，如所示。Libraries单击“AddJARs...”，系统打开“JARSelection”窗口，选择“eSDK_EC6.0_Demo_CS_Java&gt;lib”，选中该路径下的所有文件，单击“OK”，如所示。JARSelection完成jar文件的添加，如所示。Libraries单击“OK”，完成jar包的引入。
右键单击“src”，选择“New&gt;Other...”，在系统显示的窗口中选择“General&gt;File”，如所示。New单击“Next”，在“Filename”处填写“rest_config.properties”，如所示。NewFile单击“Finish”，完成文件的新建。
以上流程操作完成后，工程总体结构如下所示：eSDK_EC6.0_Conference_Demo_CS_Java<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_ucd68e7100e62464e8eb55b58fc8a2ac4"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_l54a7268c10544e90b3788f9b93e1b5c6">src<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_u24491d22fde9490a8ca8b656284bee4b"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_lc940d1c81b0d419d8eaaf9d43c9288e0">com.huawei.esdk.ec.conference<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_u9fc965416d7047ce9c4918cd6d586f4b"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_l1d15a8c9397644ec93741ec784bd7d81">com.huawei.esdk.ec.ctd.conference.bean<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_ul9768720145048"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_li10453993145047">com.huawei.esdk.ec.ctd.conference.constant<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_ul1849771145056"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_li49878834145029">com.huawei.esdk.ec.ctd.conference.model<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_ude9e8aef9ab04dc58a252155d12a8de0"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_li5903745915259">com.huawei.esdk.ec.ctd.conference.utils<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_u9c43c95391de4c0ea91fe8931bb2d96a"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_lbe0a40450cd94d588ce044a80ae366f7">com.huawei.esdk.ec.ctd.conference.view<ulid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_ufef103529de6472db55860e4d42f7883"><liid="ZH-CN_TOPIC_0069672640__zh-cn_topic_0069392094_l0903df0af7974d09b7b3a57e68f9a99e">lib
单击上述结构中的文件名获取文件源码，并向各文件填充代码。代码片段参考如下：主面板//javacode//主面板，布局选用GridBagLayout，用户可以根据自己习惯使用相应的布局，详细代码参考附录GridBagLayoutgridbag=newGridBagLayout();GridBagConstraintsc=newGridBagConstraints();JPanelpanel=newJPanel(gridbag);拼装请求参数，发送请求//javacode//拼装请求参数，发送请求Stringconferenceid=conferenceidField.getText();ScheduledMeetingRequestpayload=newScheduledMeetingRequest();payload.setAttendees(getAttendees());RestResponsereponse=newRestResponse();RestRequestMessagerestRequestMessage=newRestRequestMessage();restRequestMessage.setPayload(payload);restRequestMessage.setHttpMethod(UCConstant.HTTP_METHOD_POST);try{//获取发送Rest消息工具类实例，并传入请求参数、邀请与会者资源路径StringresponsePayload=RestUtils.getInstance(PropertiesUtils.getValue("rest.url"),PropertiesUtils.getValue("username"),PropertiesUtils.getValue("password")).sendMessage(restRequestMessage,"/conferences/"+conferenceid+"/participants");finish();发送HTTP请求//javacode//设置编码格式HttpPostrequest=newHttpPost(resourcePath);request.setEntity(newStringEntity(GSON.toJson(parameters),ContentType.APPLICATION_JSON));request.addHeader("content-type","application/json;charset=UTF-8");if(PropertiesUtils.getValue("isSP").equals("true")){request.addHeader("Authorization",TokenUtils.getToken());}elseif(!StringUtils.isEmpty(userName)&amp;&amp;!StringUtils.isEmpty(password)){httpClient.getCredentialsProvider().setCredentials(newAuthScope(target.getHostName(),target.getPort()),newUsernamePasswordCredentials(userName,password));}try{//发送HTTP请求HttpResponseresponse=httpClient.execute(target,request,localContext);
右键“Runme.java”文件，选择“RunAs&gt;JavaApplication”，显示如界面与界面。token获取会议管理在“token获取”界面，单击“获取token”，刷新token值。单击“会议管理”页签，在界面中依次输入如下表信息：信息输入完成后，单击“预约会议”按钮，界面显示“正在请求”，等待接口返回操作结果。等待至页面“返回码”显示值为“0”，表示调用服务成功，如所示。预约会议：调用服务成功
此步骤根据需要选择，如果不需要修改JRE版本，可以跳过此步骤，本节主要以从JRE1.6换到新安装的JRE1.8为例。正确安装完成jdk1.8.0_92后，右键单击demo工程名，选择“BuildPath&gt;ConfigureBuildPath”，显示工程属性窗口，如所示。Libraries选中“JRESystemLibrary[JavaSE-1.6]”，单击“Edit”按钮，显示编辑库窗口，如所示。EditLibrary选择“AlternateJRE”，图中出现的jre7是已导入的JRE1.7版本，可忽略内容显示，如所示。AlternateJRE单击“InstalledJREs”，如所示。Preferences单击“Add”按钮，显示添加JRE界面，如所示。AddJRE单击“Next”，如所示。JREDefinition1单击“Directory”，添加已安装的JRE路径，如所示。JREDefinition2单击“Finish”，完成JRE添加，如所示。Preferences1勾选中“jre1.8.0_92”，单击“Apply”应用设置，然后单击“OK”完成添加。完成后，在EditLibrary窗口的AlternateJRE下拉框中显示刚才添加的JRE，如所示。AlternateJRE1选中“AlternateJRE”下拉框“jre1.8.0_92”，单击“Finish”，完成demo工程切换jre版本，如所示。Libraries1上图单击“Apply”后，在左边选中“JavaCompiler”标签页，如所示。JavaCompiler在“Compilercompliancelevel”下拉菜单中选择jre相应“1.8”版本，如所示。JavaCompiler1单击“Apply”应用设置，单击“OK”，弹出如确认框。单击“Yes”，完成全部设置。CompilerSettingsChanged
开发过程中，您有任何问题可以在中提单跟踪。如果您在远程实验室使用过程中有任何疑问，都可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0069873888__oc546799aa10c46d8b4ca95da701480c3"><liid="ZH-CN_TOPIC_0069873888__l3f5e2f416fd940a8965b5a90934c93ca">华为技术支持热线电话：400-8828-000。华为技术支持邮箱：。
华为远程实验室为开发者提供了7×24小时的免费的云化实验室环境，借助远程实验室自助管理平台，开发者不需要购置华为产品便可基于远程实验室针对相关产品进行二次开发，并实现远程对接测试认证。远程实验室API网关的访问地址为https://218.4.33.69:8543UPortal地址为：https://218.4.33.69:8443
通过申请开发、调测所需账号。根据下载示例代码，并编译。在release文件夹下搜索到service.ini文件，打开修改服务器地址，即upportalAddr节点的值为218.4.33.69，端口号，即upportPort的值为8443，nettype的值设置为6，UserAccountConfig节点下的user的值设置为登录账号，如下图：双击release文件夹下的tup_sdk_demo.exe，打开Demo的登录界面，输入登录账号的密码，如下图：登录成功后的界面为下图
使用REST接口开发前，请注意如下事项：每个接口的描述由6部分组成：接口功能、预置条件、调用说明、输入参数、返回参数和调用示例。调用接口时HTTP/HTTPS请求必须设置UTF-8编码。所有涉及到时间的接口，必须使用服务器所在时区时间。所有接口支持管理员或EC账号进行调用。
对REST接口参数的约束进行了约定，具体的约束含义如下所示：0..1：可选项，可以没有，也可以有1项。0..n：可选项，可以没有，也可以有多项。1..n：必选项，至少有1项，也可以有多项。1：必选项，且只能填1项。
访问路径例如：{ip}为企业云通信RESTAPI的服务接入的IP地址。{port}为企业云通信RESTAPI的服务接入的端口号。
REST的含义含状态传输（英文：RepresentationalStateTransfer，简称REST）是一种软件架构风格。目前在三种主流的Web服务实现方案中，因为REST模式与复杂的SOAP和XML-RPC相比更加简洁，越来越多的Web服务开始采用REST风格设计和实现。HTTPS协议请求方式简介GET获取指定的资源的详细信息，格式可以自选一个合适的网络媒体类型（比如：XML、JSON等）。PUT替换/创建指定的资源。并将其追加到相应的资源组中。POST把指定的资源当做一个资源组，并在其下创建/追加一个新的元素，使其隶属于当前资源。DELETE删除指定的元素。
该接口提供鉴权信息查询。服务器收到请求，验证请求中用户身份（账号、别名），如果验证通过，返回鉴权方式及鉴权信息。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供鉴权信息查询。服务器收到请求，验证请求中用户身份（账号、别名），如果验证通过，返回鉴权方式及鉴权信息。
无。
接口访问路径：HTTP协议请求方式：参数格式：
通过该接口可以注销用户登录。将请求消息中的token对应的资源清除。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供刷新token功能，根据传入的token，刷新token失效时间并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
管理员或EC帐号可以通过该接口创建会议。
无。
接口访问路径：参数格式：
管理员可以通过该接口取消预约会议。
无。CloudVC解决方案不支持取消预约周期性会议的单个子会议。
接口访问路径：参数格式：
管理员可以通过该接口修改预约会议。
CloudVC解决方案不支持修改周期性会议的单个子会议。
接口访问路径：参数格式：
管理员或EC帐号可以通过该接口查询会议。管理员可以查询管理权限域内所有的会议，EC帐号仅能查询当前帐号管理的会议和参加的会议。
不带查询参数时，默认查询权限范围内正在召开或还未召开的会议。待召开和召开中的会议按照时间从早到晚的顺序返回，已结束的会议按照时间从晚到早的顺序返回。暂时不支持子会议查询。
接口访问路径：参数格式：
管理员或EC帐号可以通过该接口查询指定会议详情。管理员可以查询管理权限域内所有的会议，EC帐号仅能查询当前帐号管理的会议。
暂时不支持子会议查询。
接口访问路径：参数格式：
在使用会控接口前需要先调用这个接口获取会控token
无。
接口访问路径：参数格式：
管理员或EC帐号可以通过该接口邀请与会者加入会议，主席可通过主席权限邀请与会者，非主席可通过会控邀请会议接入码允许权限的与会者（目前仅软终端开放了该能力）。在会议开始前，用户预定者可以通过调用该接口增加预约与会人，会议预定者或主席可以在会议开始过程中通过调用该接口新增与会者。如果与会者已存在，且会议已开始，可直接邀请。
无。
接口访问路径：参数格式：
管理员或EC帐号可以通过该接口挂断正在通话中或正在振铃中的与会者。
无。
接口访问路径：参数格式：
管理员或EC帐号可以通过调用该接口取消正在振铃中的与会者，或者挂断正在通话中的与会者，或者删除已经挂断的与会者。
无。
接口访问路径：参数格式：
管理员或EC帐号可以通过该接口申请/释放主席；EC帐号主席可释放主席，非主席可申请主席，预约者可以同时进行释放主席和申请主席操作。
每个会议仅有一个主席，当已有主席时，所有申请主席操作都会失败。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口闭音/取消闭音某与会者（关闭麦克风）。与会者可闭音/取消闭音自己。
无。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口静音/取消静音某与会者（关闭扬声器）。
在MediaX会议下，同时关闭扬声器和麦克风。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口闭音/取消闭音整个会议所有与会者。
无。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口锁定/解锁会议。
无。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口结束会议。开始会议用于在可提前开始会议范围内提前开始会议,便于邀请号码入会，仅内置会议支持，主席和非主席都可以开始。
无。
接口访问路径：参数格式：
管理员或EC帐号主席可以通过该接口延长会议。
无。
接口访问路径：参数格式：
主席通过该接口提供切换视频显示策略功能，适用的切换功能有：固定广播与会者、自由讨论、声控切换，切换模式只对主画面有效，自由讨论暂不支持。
无。
接口访问路径：参数格式：
该接口提供订阅会议信息的功能，服务器收到请求，保存订阅信息并返回结果。
无。
接口访问路径：参数格式：
会场中会议服务实时给订阅者发送会议状态通知。
无。
无。
返回参数：无
会场中会议服务实时给订阅者发送会议当前发言人通知。
无。
无。
返回参数：无。
该接口提供分页查询企业号码信息的功能，服务器收到请求，分页查询企业号码信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供查询企业号码信息的功能，服务器收到请求，查询企业号码信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供分页查询企业信息的功能，服务器收到请求，分页查询企业信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供增加企业信息的功能，服务器收到请求，增加企业信息并返回结果。
无。
接口访问路径：参数格式：
该接口提供修改企业信息的功能，服务器收到请求，修改企业信息并返回结果
无。
接口访问路径：参数格式：
该接口提供删除企业的功能，服务器收到请求，删除企业并返回结果。
无。
接口访问路径：参数格式：
该接口提供查询企业信息的功能，服务器收到请求，查询企业信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供分页查询企业管理员信息的功能，服务器收到请求，分页查询企业管理员信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供增加企业管理员的功能，服务器收到请求，增加企业管理员并返回结果。
当adminType为COMMON_ADMIN（普通管理员）时，该接口将原有的普通成员提升为普通管理员。此时pwd字段留空，管理员的密码为该成员原有的密码。当adminType为DEFAULT_ADMIN时，pwd必填。
接口访问路径：参数格式：
该接口提供修改企业管理员的功能，服务器收到请求，增加企业管理员并返回结果。
无。
接口访问路径：参数格式：
该接口提供删除企业管理员的功能，服务器收到请求，删除企业管理员并返回结果。
无。
接口访问路径：参数格式：
该接口提供删除企业管理员的功能，服务器收到请求，删除企业管理员并返回结果。
无。
接口访问路径：参数格式：
该接口提供查询服务提供商信息的功能，服务器收到请求，查询服务提供商信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供分页查询服务提供商号段信息的功能，服务器收到请求，分页查询服务提供商号段信息并返回结果。
无。
接口访问路径：参数格式：
该接口提供查询服务提供商号段的功能，服务器收到请求，查询服务提供商号段并返回结果。
无。
接口访问路径：参数格式：
该接口提供分配服务提供商号段给企业的功能，服务器收到请求，分配服务提供商号段给企业并返回结果。
无。
接口访问路径：参数格式：
该接口提供从企业回收号码合入到服务提供商号段中的功能，服务器收到请求，从企业回收号码并返回结果。
无。
接口访问路径：参数格式：
该接口提供按条件从企业回收号码的功能，服务器收到请求，从企业回收服务提供商号段并返回结果。
无。
接口访问路径：参数格式：
该接口提供管理员增加设备的功能，服务器收到请求，增加设备并返回结果。
无。
接口访问路径：参数格式：
该接口提供修改设备的功能，服务器收到请求，修改设备并返回结果。
无。
接口访问路径：参数格式：
该接口提供管理员删除/强制删除设备的功能，服务器收到请求，删除设备并返回结果。
无。
接口访问路径：参数格式：
该接口提供查询设备的功能，服务器收到请求，查询设备并返回结果。
无。
接口访问路径：参数格式：
该接口提供分页查询设备的功能，服务器收到请求，查询设备并返回结果。
无。
接口访问路径：参数格式：
该接口提供分页查询业务包信息的功能，服务器收到请求，分页查询业务包信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供增加业务包信息的功能，服务器收到请求，增加业务包信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供修改业务包（只支持修改个人包，资源包不支持）信息的功能，服务器收到请求，增加业务包信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供删除业务包信息的功能，服务器收到请求，删除业务包信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
该接口提供查询业务包信息的功能，服务器收到请求，查询业务包信息并返回结果。
无。
接口访问路径：HTTP协议请求方式：参数格式：
FunctionStageRuntime支持多种运行语言：Java、Python、Node.js，以下将从函数开发规范、Node.js函数开发指南、Python函数开发指南、Java函数开发指南等几个方面介绍FunctionStage开发。
FunctionStageRuntime基础镜像：runtime-base，tag:latest。基础镜像在制作各种编程语言的Runtime时需要配置依赖。基础镜像导出部分Runtime所依赖的环境变量以及生成Runtime运行依赖目录。processrouter单独编译，在制作Runtime镜像时，需要添加processrouter二进制、配置文件。当前FunctionStageRuntime支持Java、Python、Node.js，其他语言Runtime开发制作镜像，可以参考JavaRuntime。
Runtime代码目录如所示。bin：保存runtime启动脚本。build：镜像制作脚本。rtsp：相关语言运行时支撑包，例如python保存SDK，java为JRE。runtime：业务代码。
Runtime容器目录规范如所示。图中黑色字体所示目录，由基础镜像或者processrouter创建。蓝色字体目录由Runtime镜像提供，目录权限和属主在制作镜像时指定。
在Runtime启动时，由基础镜像导出以下环境变量，Runtime访问获取。函数调用请求，HTTP请求头中Runtime相关变量如所示。HTTP请求头Runtime访问字段如所示。
FunctionStageRuntime函数由用户提供，执行环境由Runtime提供。函数有明确的接口定义，如下。<emid="ZH-CN_TOPIC_0067920016__i30786514144234">返回参数</em><emid="ZH-CN_TOPIC_0067920016__i8643172144234">函数名(Context</em><emid="ZH-CN_TOPIC_0067920016__i10679688144234">参数，函数参数)</em>返回参数：用户定义，runtime负责转换为字符串，作为HTTPResponse返回。函数名：用户定义函数名称。Context：runtime提供函数执行上下文。函数参数：用户定义参数，当前FunctionStage函数只支持一个用户参数。Java函数示例如下。
Context实现runtime提供给用户获取相关上下文接口，用户函数使用Conext记录日志，获取AK/SK，获取当前请求ID。ContextJava接口示例，如下。JavaContext仅提供Context接口语义，供其他语言参考，具体实现各语言根据实际情况而定。例如，Go语言接口导出函数需要大写字母开头。
Runtime支持日志标准输出：分为有格式标准输出和无格式标准输出。无格式标准输出function使用标准输出库函数实现。指定格式输出Runtime提供日志接口供function调用。日志输出格式：时间戳、优先级、请求ID、日志内容、换行符，说明如所示。Runtime实现的日志接口，每输出一条日志，刷新标准输出缓存，保证日志及时刷屏。
Runtime调用函数，执行错误时。返回HTTP状态码500，HTTP应答Body返回JSON串，供前台解析错误码、获取后台返回错误原因。JSON格式统一定义，如下。{"ErrCode":xxx,"ErrMsg":"xxx"}键ErrCode对应值由Runtime定义键ErrMsg对应值由Runtime定义
Runtime和processrouter为分别独立进程，函数由runtime调用执行。三者部署结构如所示。函数调用流程如下。RDispatcher发送函数调用请求到RouterProxy，RouterProxy在每个部署有Runtime节点存在，对外暴露IP和端口。RouterProxy接收到Http请求，解析请求头中RDispatcher填写Runtime所在PodIP和端口，转发请求到processrouter。processrouter通过domainsockert发送请求到Runtime。Runtime解析请求参数，调用用户函数。
Runtime由processrouter启动，runtime和processrouter运行在相同pod容器，processrouter执行runtime启动脚本完成拉起runtime进程，并检测runtime运行状态，根据runtime状态判断是否进一步发送函数调用请求。如所示。
以下从processrouter和函数角度描述Runtime实现。processrouter是一个go实现的webserver，接受用户调用函数请求运行函数为用户提供可运行代码Runtime接受processrouter的函数调用请求，运行用户函数代码用户执行函数调用，processrouter、Runtime相关流程，如所示。
processrouter在指定时间内，没有收到任何函数调用请求，主动退出进程，释放所有资源。
Runtime实现两个接口：/healthcheck接口和/invoke接口。
healthcheck接口如所示。
函数调用接口如下所示。
Runtime与processrouter部署在相同容器，通过domainsocket协议通讯。Socket文件路径由processrouter通过环境变量${RUNTIME_SOCKET_ADDRESS}传入，默认路径为/var/share/CFF/runtime/runtime.sock。
FunctionStageRuntime和processrouter部署在相同容器，Runtime实现接口健康检查接口，供processrouter查询状态，提供函数调用接口，执行用户定义函数。Runtime支持多种语言实现，本节介绍FunctionStageRuntime镜像目录结构、实现接口、通讯协议、函数定义的规范。
函数有明确的接口定义，如下。<emid="ZH-CN_TOPIC_0072325123__i1311403711753">作用域</em><emid="ZH-CN_TOPIC_0072325123__i4804810311756">返回参数</em><emid="ZH-CN_TOPIC_0072325123__i56696771175">函数名(</em><emid="ZH-CN_TOPIC_0072325123__i18105748194117">函数参数,Context</em><emid="ZH-CN_TOPIC_0072325123__i565906791175">参数)</em>作用域：提供给FunctionStage调用的用户函数必须定义为public。返回参数：用户定义，FunctionStage负责转换为字符串，作为HTTPResponse返回。对于返回参数对象类型，HTTPResponse该类型的JSON字符串。函数名：用户定义函数名称用户定义参数，当前FunctionStage函数只支持一个用户参数。对于复制参数，建议定义为对象类型，以JSON字符串提供数据。FunctionStage调用函数时，解析JSON为对象。Context：runtime提供函数执行上下文，其接口定义在SDK接口说明在FunctionStage使用Java创建函数时，函数入口参数需要提供函数完整的名字空间，参数格式为：包名.类名.函数名。
FunctionStage中JavaSDK提供了Context和日志记录接口，SDK下载地址如下。Context接口提供函数获取函数执行上下文，例如，租户AK/SK、当前请求ID、函数执行分配的内存空间、CPU数等。
Context接口说明如下。
FunctionStage中JavaSDK包括日志接口定义如下。
本章介绍本地开发Java程序，在FunctionStage上创建函数，上传JAR程序包的过程。在开始之前，请确保已经阅读《FunctionStage用户指南》，并对FunctionStage的基本操作有所了解。
在Eclipse创建mvn工程TestJavaFunction，如所示。创建mvn工程配置依赖修改mvn工程TestJavaFunction的pom文件，配置SDK的依赖，如所示。配置依赖编写函数创建用户类MyTest，定义需要在FunctionStage运行的函数myHandler，如所示。编写函数编译JAR包执行maveninstall，制作jar包，如所示。编译打包创建函数登录华为云进入FunctionStage，创建函数，如所示。函数创建过程请参考《FunctionStage用户指南》的创建函数章节。创建函数说明：com.huawei.cff.TestJavaFunction.MyTest.myHandler填写到函数执行入口。创建该示例函数时，可以执行上传上面流程编译出来的jar包。但是，如果函数中引入其他三方件，则直接制作包含所有依赖三方件和函数jar的zip包(windows环境选中所有jar包，然后右键创建zip包)。
函数有明确的接口定义，如下所示。export.handler=function(event,context,callback)入口函数名（handler）：入口函数名称，需和函数执行入口处用户自定义的入口函数名称一致。执行事件（event）：函数执行界面由用户输入的执行事件参数，格式为JSON对象。上下文环境（Context）：Runtime提供的函数执行上下文，其接口定义在SDK接口说明。回调函数（Callback）：callback方法完整声明为callback(err,message)，用户通过此方法可以返回err和message至前台结果显示页面。具体的err或message内容需要用户自己定义，如json信息或字符串。
Context类中提供了许多上下文方法供用户使用，其声明和功能如所示：
本章介绍在FunctionStage上创建、开发、测试Node.js函数，在开始之前，请确保已经阅读《FunctionStage用户指南》，并对FunctionStage的基本操作有所了解。
创建函数登录华为云进入FunctionStage，创建Node.js函数，详细步骤请参考《FunctionStage用户指南》，如所示。创建函数说明：定义函数的执行入口为index.handler。调用context中的方法获取请求ID和用户自定义参数，并通过nodejs内建函数获取当前时间，最后将结果存入到执行事件中，解析event数据并通过callback返回结果。其中，自定义参数设置为{"a":"123"}，该参数可在函数界面通过键值对的方式添加，如所示。自定义参数执行事件(event)函数创建完成之后，函数执行界面输入的执行事件参数并点击执行测试，如所示。执行事件函数执行函数执行结果分为两部分，分别为测试结果(由callback返回)和日志输出(由console.log或getLogger()方法获取的日志方法输出)，如、所示：测试结果日志输出
函数有明确的接口定义，如下所示。defhandler(event,context)入口函数名（handler）：入口函数名称，需和函数执行入口处用户自定义的入口函数名称一致。执行事件（event）：函数执行界面由用户输入的执行事件参数，格式为JSON对象。上下文环境（Context）：Runtime提供的函数执行上下文，其接口定义在SDK接口说明。
Context类中提供了许多上下文方法供用户使用，其声明和功能如所示：
本章介绍在FunctionStage上创建、开发、测试Python函数，在开始之前，请确保已经阅读《FunctionStage用户指南》，并对FunctionStage的基本操作有所了解。
创建函数登录华为云进入FunctionStage，创建Python函数，详细步骤请参考《FunctionStage用户指南》，如所示。创建函数说明：定义函数的执行入口为index.handler。同时，调用context中的方法获取请求ID和用户自定义参数，最后将结果存入到执行事件中，解析event数据并通过return返回结果。其中，自定义参数设置为{"a":"123"}，该参数可在函数界面通过键值对的方式添加，如所示。自定义参数执行事件(event)函数创建完成之后，函数执行界面输入的执行事件参数并点击执行测试，如所示。执行事件函数执行执行结果分为两部分，分别为测试结果(由return返回)和日志输出(如print等标准输入输出实现)，如、所示。执行结果日志
主要介绍OBSAndroidSDK的接口调用流程及如何运用AndroidSDK开发使用各种资源，内容主要包括使用场景、开发指引和简单的示例。
OBS支持域名访问，不同的数据中心分配对应的域名，在使用API或SDK方式使用OBS时，可通过域名方便定位OBS中的资源。当用户创建桶时，需要指定该桶所在的区域（即云服务区）。华为云HWS已在中国华北、华南、华东三个区域建立了数据中心，当前中国华北区已开通OBS服务，其他数据中心也将陆续开通，用户可根据自身对价格、响应时延、请求来源等不同要求，指定该桶所在的区域。访问OBS时，接入域名分配如下：obs.myhwclouds.com访问OBS的全局域名。访问该域名时，OBS将根据请求消息，解析定位至对应的数据中心。obs.cn-north-1.myhwclouds.com访问OBS中国华北区的接入域名。obs-website.cn-north-1.myhwclouds.comOBS中国华北区静态网站托管的域名。例如当用户在中国华北区创建了一个名为“newbucket”的桶时，对该桶进行操作访问的域名则是newbucket.obs.cn-north-1.myhwclouds.com。
多段上传任务已经存在，并且未被合并或取消。用户是任务的发起者。消息体中如果段信息未按照段序号升序排列，OBS返回400BadRequest，错误码为InvalidPartOrder。如果用户不是该任务的发起者（initiator），OBS返回403Forbidden，错误码为AccessDenied。
第三方应用调用OBSSDK的CompleteMultipartUpload接口合并段。
示例代码如下：编写CompleteMultipartUpload回调函数，代码如下：S3StatusCompleteMultipartUploadCallback(constchar*location,constchar*bucket,constchar*key,constchar*eTag,void*callbackData){(void)callbackData;printf("location=%s\nbucket=%s\nkey=%s\neTag=%s\n",location,bucket,key,eTag);returnS3StatusOK;}调用CompleteMultipartUpload接口，合并已上传的段，代码如下：S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3CompleteMultipartUploadHandlerresponseHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;CompleteMultipartUploadCallback};do{CompleteMultipartUpload(&amp;bucketContext,key,"40079008567166DDCE454EAC08297120",info,2,&amp;putProperties,0,&amp;responseHandler,0);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){printError();}S3_deinitialize();
用户是桶的所有者，或者对桶有完全访问权限。
第三应用调用OBSSDK的SetBucketAcl接口设置桶的ACL。
对桶拥有读权限的用户可以执行获取桶内对象列表的操作。
第三方应用调用OBSSDK的ListObjects接口获得指定桶的对象列表。
编写回调函数，代码如下：staticS3StatuslistBucketCallback(intisTruncated,constchar*nextMarker,intcontentsCount,constS3ListBucketContent*contents,intcommonPrefixesCount,constchar**commonPrefixes,void*callbackData){list_bucket_callback_data*data=(list_bucket_callback_data*)callbackData;data-&gt;isTruncated=isTruncated;if((!nextMarker||!nextMarker[0])&amp;&amp;contentsCount){nextMarker=contents[contentsCount-1].key;}if(nextMarker){snprintf(data-&gt;nextMarker,sizeof(data-&gt;nextMarker),"%s",nextMarker);}else{data-&gt;nextMarker[0]=0;}if(contentsCount&amp;&amp;!data-&gt;keyCount){printListBucketHeader(data-&gt;allDetails);}inti;for(i=0;i&lt;contentsCount;i++){constS3ListBucketContent*content=&amp;(contents[i]);chartimebuf[256];time_tt=(time_t)content-&gt;lastModified;strftime(timebuf,sizeof(timebuf),"%Y-%m-%dT%H:%M:%SZ",gmtime(&amp;t));charsizebuf[16];if(content-&gt;size&lt;100000){sprintf(sizebuf,"%5llu",(unsignedlonglong)content-&gt;size);}elseif(content-&gt;size&lt;(1024*1024)){sprintf(sizebuf,"%4lluK",((unsignedlonglong)content-&gt;size)/1024ULL);}elseif(content-&gt;size&lt;(10*1024*1024)){floatf=content-&gt;size;f/=(1024*1024);sprintf(sizebuf,"%1.2fM",f);}elseif(content-&gt;size&lt;(1024*1024*1024)){sprintf(sizebuf,"%4lluM",((unsignedlonglong)content-&gt;size)/(1024ULL*1024ULL));}else{floatf=(content-&gt;size/1024);f/=(1024*1024);sprintf(sizebuf,"%1.2fG",f);}printf("%-50s%s%s",content-&gt;key,timebuf,sizebuf);if(data-&gt;allDetails){printf("%-34s%-64s%-12s",content-&gt;eTag,content-&gt;ownerId?content-&gt;ownerId:"",content-&gt;ownerDisplayName?content-&gt;ownerDisplayName:"");}printf("\n");}data-&gt;keyCount+=contentsCount;for(i=0;i&lt;commonPrefixesCount;i++){printf("\nCommonPrefix:%s\n",commonPrefixes[i]);}returnS3StatusOK;}调用ListBuckets接口，代码如下：S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3ListBucketHandlerlistBucketHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;listBucketCallback};list_bucket_callback_datadata;snprintf(data.nextMarker,sizeof(data.nextMarker),"%s",marker);data.keyCount=0;data.allDetails=allDetails;do{data.isTruncated=0;do{ListObjects(&amp;bucketContext,prefix,marker,delimiter,maxkeys,0,&amp;listBucketHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){break;}}while(data.isTruncated&amp;&amp;(!maxkeys||(data.keyCount&lt;maxkeys)));if(statusG==S3StatusOK){if(!data.keyCount){printListBucketHeader(allDetails);}}else{printError();}S3_deinitialize();
已经初始化多段上传任务。并且没有合并段或者取消段。
第三方应用调用OBSSDK的ListParts接口列出上传任务中已经上传的段。
示例代码如下：编写ListParts的回调函数，代码如下：staticS3StatuslistPartsCallback(intisTruncated,constchar*nextPartNumberMarker,constchar*initiatorId,constchar*initiatorDisplayName,constchar*ownerId,constchar*ownerDisplayName,intpartsCount,constS3ListParts*parts,void*callbackData){list_parts_callback_data*data=(list_parts_callback_data*)callbackData;data-&gt;isTruncated=isTruncated;if((!nextPartNumberMarker||!nextPartNumberMarker[0])&amp;&amp;partsCount){nextPartNumberMarker=parts[partsCount-1].partNumber;}if(nextPartNumberMarker){snprintf(data-&gt;nextPartNumberMarker,sizeof(data-&gt;nextPartNumberMarker),"%s",nextPartNumberMarker);}else{data-&gt;nextPartNumberMarker[0]=0;}printf("initializeId:%s\n",initiatorId);printf("initiatorDisplayName:%s\n",initiatorDisplayName);printf("ownerId:%s\n",ownerId);printf("ownerDisplayName:%s\n",ownerDisplayName);printf("IsTruncated:%d\n",isTruncated);printf("NextPartNumberMarker:%s\n",nextPartNumberMarker);inti;for(i=0;i&lt;partsCount;i++){constS3ListParts*part=&amp;(parts[i]);chartimebuf[256];time_tt=(time_t)part-&gt;lastModified;strftime(timebuf,sizeof(timebuf),"%Y-%m-%dT%H:%M:%SZ",gmtime(&amp;t));charsizebuf[16];if(part-&gt;size&lt;100000){sprintf(sizebuf,"%5llu",(unsignedlonglong)part-&gt;size);}elseif(part-&gt;size&lt;(1024*1024)){sprintf(sizebuf,"%4lluK",((unsignedlonglong)part-&gt;size)/1024ULL);}elseif(part-&gt;size&lt;(10*1024*1024)){floatf=part-&gt;size;f/=(1024*1024);sprintf(sizebuf,"%1.2fM",f);}elseif(part-&gt;size&lt;(1024*1024*1024)){sprintf(sizebuf,"%4lluM",((unsignedlonglong)part-&gt;size)/(1024ULL*1024ULL));}else{floatf=(part-&gt;size/1024);f/=(1024*1024);sprintf(sizebuf,"%1.2fG",f);}printf("-----------------------------------RESULTBEG------------------------------\n");printf("PartNumber:%s\n",part-&gt;partNumber);printf("LastModified:%s\n",timebuf);printf("ETag:%s\n",part-&gt;eTag);printf("Size:%s\n",sizebuf);printf("-----------------------------------RESULTEND------------------------------\n");printf("\n");}data-&gt;keyCount+=partsCount;returnS3StatusOK;}调用ListParts接口，列出上传任务已经上传的段，代码如下：S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3ListPartsHandlerlistPartsHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;listPartsCallback};list_parts_callback_datadata;data.keyCount=0;data.allDetails=1;do{data.isTruncated=0;do{ListParts(&amp;bucketContext,key,uploadId,max_parts,part_number_marker,0,&amp;listPartsHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){break;}}while(data.isTruncated&amp;&amp;(!max_parts||(data.keyCount&lt;atoi(max_parts))));if(statusG==S3StatusOK){printf("ListPartsOK\n");}else{printError();}S3_deinitialize();
用户对对象有读权限。
第三方应用调用OBSSDK的GetObjectMetadata接口返回对象元数据信息。
示例代码如下：
指定的桶（要将对象上传到的桶）必须已经存在，且当前用户对该桶有写的权限。
第三方应用调用OBSSDK的PutObject接口上传对象。
示例代码如下：调用PutObject接口，代码如下：typedefstructput_object_callback_data{FILE*infile;growbuffer*gb;uint64_tcontentLength,originalContentLength;intnoStatus;}put_object_callback_data;staticintputObjectDataCallback(intbufferSize,char*buffer,void*callbackData){put_object_callback_data*data=(put_object_callback_data*)callbackData;intret=0;if(data-&gt;contentLength){inttoRead=((data-&gt;contentLength&gt;(unsigned)bufferSize)?(unsigned)bufferSize:data-&gt;contentLength);if(data-&gt;gb){growbuffer_read(&amp;(data-&gt;gb),toRead,&amp;ret,buffer);}elseif(data-&gt;infile){ret=fread(buffer,1,toRead,data-&gt;infile);}}data-&gt;contentLength-=ret;if(data-&gt;contentLength&amp;&amp;!data-&gt;noStatus){//AvoidaweirdbuginMingW,whichwon'tprintthesecondinteger//valueproperlywhenit'sinthesamecall,soprintseparatelyprintf("%llubytesremaining",(unsignedlonglong)data-&gt;contentLength);printf("(%d%%complete)...\n",(int)(((data-&gt;originalContentLength-data-&gt;contentLength)*100)/data-&gt;originalContentLength));}returnret;}put_object_callback_datadata;data.infile=0;data.gb=0;data.noStatus=noStatus;if(filename){if(!contentLength){structstatstatbuf;//Statthefiletogetitslengthif(stat(filename,&amp;statbuf)==-1){fprintf(stderr,"\nERROR:Failedtostatfile%s:",filename);perror(0);exit(-1);}contentLength=statbuf.st_size;}//Openthefileif(!(data.infile=fopen(filename,"r"FOPEN_EXTRA_FLAGS))){fprintf(stderr,"\nERROR:Failedtoopeninputfile%s:",filename);perror(0);exit(-1);}}else{//Readfromstdin.IfcontentLengthisnotprovided,wehave//toreaditallintogetcontentLength.if(!contentLength){//Readallifstdintogetthedatacharbuffer[64*1024];while(1){intamtRead=fread(buffer,1,sizeof(buffer),stdin);if(amtRead==0){break;}if(!growbuffer_append(&amp;(data.gb),buffer,amtRead)){fprintf(stderr,"\nERROR:Outofmemorywhilereading""stdin\n");exit(-1);}contentLength+=amtRead;if(amtRead&lt;(int)sizeof(buffer)){break;}}}else{data.infile=stdin;}}data.contentLength=data.originalContentLength=contentLength;S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3PutPropertiesputProperties={contentType,md5,cacheControl,contentDispositionFilename,contentEncoding,expires,cannedAcl,metaPropertiesCount,metaProperties,useServerSideEncryption};S3PutObjectHandlerputObjectHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;putObjectDataCallback};do{PutObject(&amp;bucketContext,key,contentLength,&amp;putProperties,0,&amp;putObjectHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(data.infile){fclose(data.infile);}elseif(data.gb){growbuffer_destroy(data.gb);}if(statusG!=S3StatusOK){printError();}elseif(data.contentLength){fprintf(stderr,"\nERROR:Failedtoreadremaining%llubytesfrom""input\n",(unsignedlonglong)data.contentLength);}S3_deinitialize();
使用OBSCSDK操作公有云资源，需要使用公有云服务提供的访问密钥AK(AccessKeyID)和SK(SecretAccessKey)进行签名。默认情况下，当您创建访问密钥时，其状态为Active，您可以直接使用该访问密钥执行调用。登录公有云服务网站（），单击首页右上角的“管理控制台”。选择控制台版本，建议您使用“新版”。单击页面右上角的用户名，选择“我的认证”。进入“我的认证”页面，单击“管理访问密钥”页签下方的“新增访问密钥”，创建密钥。每个用户最多可以创建两个有效的访问密钥。在弹出的对话框中，输入登录密码并采用短信验证码进行确认，然后单击“确定”。在弹出的“下载确认”提示框中，单击“确定”后，密钥会直接保存到浏览器默认的下载文件夹中。打开credentials.csv文件既可获取密钥AK(AccessKeyID)和SK(SecretAccessKey)。说明：为防止访问密钥泄露，建议您将其保存到安全的位置。如果用户在此提示框中单击“取消”，则不会下载密钥，后续也将无法继续下载，用户必须将此密钥删除后再创建新的访问密钥。
用户拥有对桶的写权限。
第三方应用调用OBSSDK的InitiateMultipartUpload接口初始化多段上传任务。
示例代码如下：
用户对对象有读权限。
第三方应用调用OBSSDK的GetObjectAcl的接口获取对象ACL信息。
示例代码如下：
输入OBS服务器的管理口IP，登录存储设备管理界面。存储设备管理登录页面登陆后，单击页面右侧的“设置”图标。存储设备管理首页在设置页面单击“存储设置”。设置页面在存储设置页面，单击“安全证书”。存储设置页面进入安全证书页面，单击对象存储服务HTTPS证书栏目下的“导入”按钮。安全证书页面在上传证书页面，单击“选择”按钮，选择之前制作完成的jks证书。上传证书页面选择好证书，单击“上传”按钮上传证书。选择证书上传证书成功，单击“确定”按钮。上传证书成功单击“下一步”按钮。导入证书页面输入制作jks证书时设置的证书密码。密钥保护密码单击“完成”按钮，导入安全证书成功。导入安全证书成功
使用证书（章节中生成的client.crt）校验时，需要将证书内容读出，然后将证书内容作为入参调用接口即可。读取证书内容的代码如下所示：具体使用证书校验时，请参考对应的接口文档。
打开公有云服务网址，单击页面右上方的“注册”，注册新账号。按照页面要求填写用户信息。通过邮件激活账号。使用～注册的用户，登录公有云服务。说明：如果您需要使用付费服务，请单击首页右上角的用户名，选择“用户中心”，单击“充值”按钮，充值成功后，即可访问付费服务。
用户已经拥有OBS系统提供的AK（AccessKeyID）和SK（SecretAccessKey）。
第三方应用调用OBSSDK的CreateBucket方法，创建桶。
所有代码样例中默认使用https请求。若用http请求，端口号是80；若用https请求，端口号是443。
已经初始化多段上传任务。
第三方应用调用OBSSDK的UploadPart接口上传段。
示例代码如下：编写UploadPart回调函数，代码如下：typedefstructupload_callback_data{FILE*infile;growbuffer*gb;uint64_tcontentLength,originalContentLength;intnoStatus;}upload_callback_data;staticintuploadDataCallback(intbufferSize,char*buffer,void*callbackData){upload_callback_data*data=(upload_callback_data*)callbackData;intret=0;if(data-&gt;contentLength){inttoRead=((data-&gt;contentLength&gt;(unsigned)bufferSize)?(unsigned)bufferSize:data-&gt;contentLength);if(data-&gt;gb){growbuffer_read(&amp;(data-&gt;gb),toRead,&amp;ret,buffer);}elseif(data-&gt;infile){ret=fread(buffer,1,toRead,data-&gt;infile);}}data-&gt;contentLength-=ret;if(data-&gt;contentLength&amp;&amp;!data-&gt;noStatus){//AvoidaweirdbuginMingW,whichwon'tprintthesecondinteger//valueproperlywhenit'sinthesamecall,soprintseparatelyprintf("%llubytesremaining",(unsignedlonglong)data-&gt;contentLength);printf("(%d%%complete)...\n",(int)(((data-&gt;originalContentLength-data-&gt;contentLength)*100)/data-&gt;originalContentLength));}returnret;}调用uploadPart接口上传段，代码如下：S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3PutPropertiesputProperties={contentType,md5,cacheControl,contentDispositionFilename,contentEncoding,0,0,0,0,0,expires,cannedAcl,metaPropertiesCount,metaProperties,useServerSideEncryption};S3UploadHandlerresponseHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;uploadDataCallback};do{UploadPart(&amp;bucketContext,key,"1","40079008567166DDCE454EAC08297120",contentLength,&amp;putProperties,0,&amp;responseHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){printError();}S3_deinitialize();
客户端如需验证服务器的可靠性，可以通过证书来。当调用含有HTTPS协议的接口时，如果使用证书验证服务器，SDK则会去验证证书；如果不使用证书验证服务器，SDK则不去验证证书。
用户是对象的创建者。
第三方应用调用OBSSDK的SetObjectAcl接口设置对象ACL信息。
示例代码如下：
本章节介绍如何通过华为公有云服务获取OBS服务域名以及访问密钥AK/SK。
对象存在。
第三方应用调用OBSSDK的DeleteObject接口删除对象。
示例代码如下：
用户拥有对象的读权限。
第三方应用调用OBSSDK的GetObject接口获取对象内容。
示例代码如下：编写获取对象回调函数，处理返回结果，这里通过回调函数将获取的对象以文件形式保存到本地，代码如下：//获得对象内容，并保存到本地staticS3StatusgetObjectDataCallback(intbufferSize,constchar*buffer,void*callbackData){FILE*outfile=(FILE*)callbackData;size_twrote=fwrite(buffer,1,bufferSize,outfile);return((wrote&lt;(size_t)bufferSize)?S3StatusAbortedByCallback:S3StatusOK);}调用GetObject接口获得对象内容，代码如下：FILE*outfile=0;if(filename){//Statthefile,andifitdoesn'texist,openitinwmodestructstatbuf;if(stat(filename,&amp;buf)==-1){outfile=fopen(filename,"w"FOPEN_EXTRA_FLAGS);}else{//Openinr+sothatwedon'ttruncatethefile,justincase//thereisanerrorandwewritenobytes,weleavethefile//unmodifiedoutfile=fopen(filename,"r+"FOPEN_EXTRA_FLAGS);}if(!outfile){fprintf(stderr,"\nERROR:Failedtoopenoutputfile%s:",filename);perror(0);exit(-1);}}elseif(showResponsePropertiesG){fprintf(stderr,"\nERROR:get-srequiresafilenameparameter\n");usageExit(stderr);}else{outfile=stdout;}S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3GetConditionsgetConditions={ifModifiedSince,ifNotModifiedSince,ifMatch,ifNotMatch};S3GetObjectHandlergetObjectHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;getObjectDataCallback};do{GetObject(&amp;bucketContext,key,&amp;getConditions,startByte,byteCount,0,&amp;getObjectHandler,outfile);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){printError();}fclose(outfile);S3_deinitialize();
收集域名以全球域名obs.hy.com，region域名region1.hy.com为例，则website域名为region1-website.hy.com。同时兼容虚拟主机的三个域名，则共有如下六个域名：<ulid="ZH-CN_TOPIC_0040689508__ul40166178113632"><liid="ZH-CN_TOPIC_0040689508__li25951283113632">obs.hy.comregion1.hy.comregion1-website.hy.com*.obs.hy.com*.region1.hy.com*.region1-website.hy.com实际域名请参考来获取。下载安装javajdk。配置JDK的环境变量。
下载XCA工具，安装XCA证书生成工具。打开XCA工具，第一次使用要新建本地存放生成证书信息的数据库。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol65684278113632"><liid="ZH-CN_TOPIC_0040689508__li54287597113632">选择“File-&gt;NewDataBase”。新建数据库指定存放数据库的文件路径和设置文件名称设置路径和文件名设置数据库的访问密码，单击“OK”按钮。设置密码制作CA证书。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol23950139113632"><liid="ZH-CN_TOPIC_0040689508__li14224664113632">在XCA工具上选择“Certificates”页签，单击“NewCertificate”，进入创建证书界面，在其中“Signaturealgorithm”选择“SHA256”，单击“OK”按钮。创建证书单击“Editname”。消息提示框单击“Subject”页签并输入证书信息，可参考下图所示的内容。设置证书信息单击“Generateanewkey”按钮，新建一个CA的私钥。其中，算法类型选择RSA，长度选择2048。单击“Create”按钮。新建密钥单击“OK”。消息提示框单击“Extensions”页签，type下拉列表框选择“CertificationAuthority”。证书页签单击“OK”按钮，弹出一个对话框提示成功制作证书“ca”。消息提示框单击“OK”按钮，名为“ca”的CA证书制作完成。证书制作完成制作服务端证书。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol26444436113632"><liid="ZH-CN_TOPIC_0040689508__li36673336113632">在“Certificates”页签，单击“NewCertificate”按钮，再新建一个证书。其中“Signing”选项框中选择“usethiscertificateforsigning”，在下拉框中选择刚刚制作的名为“ca”的证书。签名算法选择“SHA256”。创建证书单击“OK”，在“Subject”页签中输入证书信息，下图中所示的内容仅供参考。设置证书信息单击“Generateanewkey”按钮，新建一个私钥。其中，算法类型选择RSA，长度选择2048。单击“Create”按钮。新建私钥弹出一个对话框提示密钥生成成功，单击“OK”按钮。消息提示框然后单击“Extensions”页签拓展页签单击“X509v3SubjectAlternativeName”行右侧的“Edit”。管理证书和密钥单击“Add”，Type选择DNS，“Content”文本框中填入之前规划的6个域名。添加所有域名单击“Apply”按钮。拓展页签单击“OK”按钮，提示创建证书成功。消息提示框单击“OK”，完成服务端证书的制作。证书页签导出服务端证书。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol5740796113632"><liid="ZH-CN_TOPIC_0040689508__li51667165113632">在服务端证书上面，单击右键，选择“Export-&gt;File”。服务端证书弹出导出框，文件类型选择p12证书链，选择导出路径。证书导出单击“OK”，弹出密码设置框。注意：之后在章节需要输入当前设置的密码，请一定要牢记。设置密码单击“OK”，导出完成后，在指定路径下会生成一个p12后缀的文件。obs.p12文件路径导出CA证书。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol25520801113632"><liid="ZH-CN_TOPIC_0040689508__li28360624113632">在“ca”证书栏单击右键，选择“Export-&gt;File”。证书页签在弹出框中，选择导出文件格式为“PEM*.crt”。注意：导出的文件名字必须为“ca.crt”。证书导出单击“OK”，导出完成后，在指定路径下会生成一个crt后缀的文件。ca.crt的文件路径生成jks证书库。<oltype="a"id="ZH-CN_TOPIC_0040689508__ol3259568113632"><liid="ZH-CN_TOPIC_0040689508__li29336113113632">新建一个文件夹，将证书文件ca.crt，obs.p12放在这个文件夹下。将下载的XCA工具里的imtojsk.bat批处理文件也放到该文件夹下，形成如下图所示的目录结构。将obs.p12拖拽到imtojsk.bat文件上面执行。注意：脚本在执行过程中会删除当前目录下已有的keystore_test.jks文件，如果当前目录已有该文件，请先更名备份。执行界面如下图所示，按照提示，输入“Y”。说明：<ulid="ZH-CN_TOPIC_0040689508__ul18061005163917"><liid="ZH-CN_TOPIC_0040689508__li50042617163917">执行后未报任何错误，则说明执行成功。否则证书制作失败，需要重新制作。最终在当前文件夹下生成jks格式证书keystore_test.jks。将证书文件ca.crt命名为client.crt，keystore_test.jks命名为server.jks。
登录。在企业云服务首页最上面单击“管理控制台”进入管理控制台页面。选择控制台版本。第一次使用，需要给账户进行充值，单击“充值”。根据界面提示信息，对账户进行充值。充值成功后，单击页面左上角的，返回管理控制台首页。单击“对象存储服务”，开通并进入OBS服务管理控制台。单击“创建桶”。设置桶区域、桶名称，单击“保存”。说明：OBS服务是通过域名来访问，这里域名为obs-2a3d.obs.cn-north-1.myhwclouds.com。
主要介绍OBSCSDK的接口调用流程及如何运用CSDK开发使用各种资源，内容主要包括使用场景、开发指引和简单的示例。
OBS用户可以通过请求查询自己创建的桶列表。
第三方应用调用OBSSDK的ListBuckets接口返回当前用户自己创建的桶列表。
示例代码如下：编写获取桶列表回调函数，处理返回结果，代码如下：staticS3StatuslistServiceCallback(constchar*ownerId,constchar*ownerDisplayName,constchar*bucketName,int64_tcreationDate,void*callbackData){list_service_data*data=(list_service_data*)callbackData;if(!data-&gt;headerPrinted){data-&gt;headerPrinted=1;printListServiceHeader(data-&gt;allDetails);}chartimebuf[256];if(creationDate&gt;=0){time_tt=(time_t)creationDate;strftime(timebuf,sizeof(timebuf),"%Y-%m-%dT%H:%M:%SZ",gmtime(&amp;t));}else{timebuf[0]=0;}printf("%-56s%-20s",bucketName,timebuf);if(data-&gt;allDetails){printf("%-64s%-12s",ownerId?ownerId:"",ownerDisplayName?ownerDisplayName:"");}printf("\n");returnS3StatusOK;}调用ListBuckets接口，代码如下：list_service_datadata;data.headerPrinted=0;data.allDetails=allDetails;S3_init();S3ListServiceHandlerlistServiceHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;listServiceCallback};do{ListBuckets(protocolG,accessKeyIdG,secretAccessKeyG,0,0,&amp;listServiceHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG==S3StatusOK){if(!data.headerPrinted){printListServiceHeader(allDetails);}}else{printError();}S3_deinitialize();
当前用户对任务所属桶拥有读权限。
第三方应用调用OBSSDK的ListMultipartUploads接口列出多段上传任务。
示例代码如下：编写ListMultipartUploads回调函数，代码如下：staticS3StatuslistMultipartUploadsCallback(intisTruncated,constchar*nextMarker,constchar*nextUploadIdMarker,intuploadsCount,constS3ListMultipartUpload*uploads,void*callbackData){list_multipart_uploads_callback_data*data=(list_multipart_uploads_callback_data*)callbackData;data-&gt;isTruncated=isTruncated;//Thisistricky.S3doesn'treturntheNextMarkerifthereisno//delimiter.Why,Idon'tknow,sinceit'sstillusefulforpaging//throughresults.WewantNextMarkertobethelastcontentinthe//list,sosetittothatifnecessary.if((!nextMarker||!nextMarker[0])&amp;&amp;uploadsCount){nextMarker=uploads[uploadsCount-1].key;}if(nextMarker){snprintf(data-&gt;nextMarker,sizeof(data-&gt;nextMarker),"%s",nextMarker);snprintf(data-&gt;nextUploadIdMarker,sizeof(data-&gt;nextUploadIdMarker),"%s",nextUploadIdMarker);}else{data-&gt;nextMarker[0]=0;}if(uploadsCount&amp;&amp;!data-&gt;keyCount){printListMultipartUploadsHeader(data-&gt;allDetails);}inti;for(i=0;i&lt;uploadsCount;i++){constS3ListMultipartUpload*upload=&amp;(uploads[i]);chartimebuf[256];time_tt=(time_t)upload-&gt;initiated;strftime(timebuf,sizeof(timebuf),"%Y-%m-%dT%H:%M:%SZ",gmtime(&amp;t));printf("%-20s%s%s",upload-&gt;key,timebuf,upload-&gt;storageClass);if(data-&gt;allDetails){printf("%-34s%-34s%-12s",upload-&gt;uploadId,upload-&gt;ownerId?upload-&gt;ownerId:"",upload-&gt;ownerDisplayName?upload-&gt;ownerDisplayName:"");}printf("\n");}data-&gt;keyCount+=uploadsCount;returnS3StatusOK;}调用ListMultipartUploads接口上传段，代码如下：S3_init();S3BucketContextbucketContext={0,bucketName,protocolG,uriStyleG,accessKeyIdG,secretAccessKeyG,pCAInfo};S3ListMultipartUploadsHandlerlistUploadsHandler={{&amp;responsePropertiesCallback,&amp;responseCompleteCallback},&amp;listMultipartUploadsCallback};list_multipart_uploads_callback_datadata;snprintf(data.nextMarker,sizeof(data.nextMarker),"%s",marker);snprintf(data.nextUploadIdMarker,sizeof(data.nextUploadIdMarker),"%s",uploadidmarke);data.keyCount=0;data.allDetails=allDetails;do{data.isTruncated=0;do{ListMultipartUploads(&amp;bucketContext,prefix,marker,delimiter,uploadidmarke,maxkeys,0,&amp;listUploadsHandler,&amp;data);}while(S3_status_is_retryable(statusG)&amp;&amp;should_retry());if(statusG!=S3StatusOK){break;}}while(data.isTruncated&amp;&amp;(!maxkeys||(data.keyCount&lt;maxkeys)));if(statusG==S3StatusOK){if(!data.keyCount){printListMultipartUploadsHeader(allDetails);}}else{printError();}S3_deinitialize();
OBSSDK支持OceanStor存储系统和对象存储服务OBS的业务能力开放。第三方应用程序直接调用OBSSDK中的接口即可实现获取OBS系统的业务能力。OBS提供如下功能接口供第三方应用调用，针对不同的功能对存储设备进行相应操作。具体功能对应的接口请参见对应的接口参考。OBS接口功能如所示。
OBS（ObjectStorageService）是华为推出的一项对象存储服务。它是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力。客户可以通过RESTAPI接口或者基于web浏览器的云管理平台界面和安装到PC的客户端对数据进行管理和使用。同时，OBS还提供了多种语言（Java、.NET、Android、Python、C、Ruby、PHP等）的SDK来简化编程。想要了解更多，请访问华为云的。
本开发指南指导您如何安装和配置开发环境、如何通过调用eSDKOBS接口进行第三方应用的开发。主要内容如下：<uid="ZH-CN_TOPIC_0040692762__u4376426110225"></u>：二次开发过程中可能涉及到的软件、文档资源链接、技术支持。包括如何通过社区网站获取资料，介绍如何申请远程实验室等。<uid="ZH-CN_TOPIC_0040692762__u24778633102239"></u>：如果您仅仅是要把SDK运行起来，您应该首先看这部分，它会详细说明如何下载及安装SDK，以及如何配置您的开发环境。<uid="ZH-CN_TOPIC_0040692762__u30956934102259"></u>：在开发业务功能之前需要完成的初始化配置，这些配置动作仅需执行一次。<uid="ZH-CN_TOPIC_0040692762__u40463188135848"></u>：介绍如何通过华为公有云OBS服务搭建OBS环境。<uid="ZH-CN_TOPIC_0040692762__u47173843102314"></u>：介绍eSDKOBS的典型功能场景，包括开发流程、样例代码以及注意事项等。<uid="ZH-CN_TOPIC_0040692762__u16267667102338"></u>：开发过程中常见问题的定位方法。
如果只是想快速入门，可仅参考<uid="ZH-CN_TOPIC_0040692762__u644704163921"></u>章节如果想深入了解OBS核心业务的二次开发，建议您参考<uid="ZH-CN_TOPIC_0040692762__u22041502163926"></u>章节使用SDK过程中遇到问题可以参考<uid="ZH-CN_TOPIC_0040692762__u52240296163932"></u>章节。与本文档相配套的产品版本如下所示：
目前需要到页面下载SDK。
接口参考主要包含：概述：明确配套版本、使用背景、场景、前提条件等内容；并指出可以获取哪些信息，完成什么样的功能。数据类型：详细说明eSDK对外提供的自定义的数据类型（包括数据结构、枚举、类等），例如：数据类型名。对有继承/嵌套关系的数据结构进行说明，如结构体嵌套关系，要提供总的嵌套关系表（要包括基本数据类型）。包括的数据成员以及数据成员的含义。接口详细描述：接口描述：详细描述该接口功能、应用场景和使用方法。使用说明：描述该接口函数使用时需要注意的事项、使用的限制；功能相似的接口或者需要配合使用的接口；前提条件等。方法定义：接口函数的完整声明。参数描述：详细描述参数的含义、取值范围、使用限制、参数之间的依赖等。返回值：说明该接口函数的返回值。使用示例：举例说明该接口函数的使用，关键代码需要注释。错误码完整的错误码列表，包含开发过程中所有可能出现的错误码及描述。
远程实验室为开发者提供了7×24小时的免费的云化实验室环境，提供真实的设备供开发者远程在线开发调试。借助远程实验室自助管理平台，开发者不需要购置产品便可基于远程实验室针对相关产品进行二次开发，并实现远程对接测试认证。目前远程实验室已发布云计算、SDN、大数据、统一通信与协作、BYOD、eLTE、敏捷网络等不同生态圈的多个实验室环境。相关信息请查询。
低门槛：官网注册用户即可申请使用，环境与预约时长、预约次数受限；分级支持：环境按域划分，重点开发者、合作伙伴可访问特定环境并享受额外的预约环境；全球资源高速互联：建设以苏州远程实验室为中心的全球实验室分布格局，依托IT全球100ms高性能骨干网络和IT全球端到端应用保障能力。
免费使用远程实验室的步骤如下：请参见，申请OBS的实验室环境.
开发者社区提供的技术支持渠道如下：开发过程中，您有任何问题可以在<uid="ZH-CN_TOPIC_0040692916__u18211396101610"></u>系统中提单跟踪。如果您在使用过程中有任何疑问，都可以通过以下方式联系我们。<olid="ZH-CN_TOPIC_0040692916__ol572057101535"><liid="ZH-CN_TOPIC_0040692916__li5148515101535">技术支持热线电话：400-8828-000技术支持邮箱：
本示例以C语言进行eSDKOBS的二次集成开发。开发过程中的故障处理请参考。HelloWorld实现流程如下：
当前提供Linux版本OBSCSDK，您必须安装下面开发环境。gcc4.3.4或更高版本
在进行开发之前首先要有华为OBS环境。如果你已经有了华为OBS环境，请跳过此步骤。如果你现在没有该环境，可以通过预约申请OBS临时环境，快速体验HelloWorld。如果你想要实时的拥有该环境，通过获得长期的OBS环境。如果你方已经购买了华为的存储设备，联系设备管理员获取OBS环境。
如果您当前还没有下载SDK，请访问章节获取网址下载SDK。解压缩获取到的SDK包，可以看到如下文件lib：包含libeSDKOBSS3.so及其所需要的库文件demo：使用OBSCSDK开发的一个demo的工程include：包含使用OBSCSDK所需头文件readme：发布说明文件
以创建桶为例，介绍如何使用动态库进行接口调用。将SDK包传到linux编程环境并解压缩。如图所示可以在该目录下新建一个test目录，然后在test目录下新建main.c文件。
运行代码查看测试结果，执行成功则输出如下类似的结果：
在调用其他接口之前，需要对SDK进行初始化，调用S3_initialize接口进行初始化。该接口调用成功后，也会将日志功能启动，关于日志请参见章节。方法定义：示例代码：说明：OBS支持两个版本的鉴权方式，V2鉴权和V4鉴权，相对于V2鉴权，V4鉴权是一种更加安全的鉴权方式。OBS支持https单向证书验证功能，建议用户在使用时启用证书认证。在初始化函数S3_initialize中，参数auth为AuthorizationV2时采用v2鉴权，为AuthorizationV4时采用v4鉴权。如果使用v4鉴权，defaultRegion这个参数需要传入账户所在的region。该接口的其它参数描述，请见接口参考文档。
在所有接口都调用完成后，需要调用S3_deinitialize进行去初始化操作。调用该接口后，日志功能也会停止。
在调用接口前，可以先进行一下日志文件的配置。日志分为接口日志，操作日志和运行日志三种。日志配置文件OBS.ini的存储路径为解压缩后SDK包的lib文件夹下。说明：LogSize为单个日志文件大小，分别对应三种日志。当日志记录达到文件大小上限时，日志会进行备份。LogNum为备份日志文件的数量，分别对应三种日志。当设置为0时，不生成备份文件，记录满的日志会被清空。LogLevel为日志等级，分别对应三种日志。低于设置级别的日志不会打印到文件中。如设置了WARN级别（值为2），那么debug和info级别的日志就不会记录到日志文件中。LogFilePermission为日志文件的权限，生成日志文件时的权限。sdkname为日志文件的名称，如图上所示，那么生成的日志文件分别是eSDK-OBS-API-Linux-C.interface.log、eSDK-OBS-API-Linux-C.operation.log和eSDK-OBS-API-Linux-C.run.log。LogPath为日志生成路径。可以使用相对路径和绝对路径，相对路径的起始地址为lib文件夹。
调用每个接口后，在接口的S3ResponseCompleteCallback回调函数中，会返回调用结果的枚举值，然后再调用S3_get_status_name接口，会返回错误码。
日志路径：日志文件存储路径在日志配置文件中可以设置，默认为lib文件夹同目录下的logs文件夹下。例如：获取方法：运行日志文件中记录了调用的每个接口的一些运行情况。以列举桶ListObject接口为例：搜索接口关键字“Code”可以看到错误码NoSuchBucket。
在接口参考文档里，列出了所有错误码信息。根据接口返回的错误码，查询相对应的错误描述。
接口日志格式为：日志时间|级别|接口所属业务|接口类型|接口协议|接口名称|源端设备|宿端设备|事务标识|请求时间|应答时间|请求参数|结果码|应答参数。
运行日志格式为：日期时间|级别|内部模块名|关键描述信息。
当系统出现问题需要定位且当前的日志无法满足要求时，可以通过修改日志的级别来获取更多的信息。其中DEBUG日志信息最丰富，ERROR日志信息最少。具体说明如下：DEBUG：调试级别INFO：信息级别WARN：告警级别ERROR：错误级别
根据初始化日志模块传入参数找到日志路径，根据信息的重要性，每条记录都有相应的级别。定位问题或查看运行状态时，根据日期查找到相应的日志文件，再通过日志文件的日志记录，分析问题或运行状态。举例：当调用接口出现错误码-1时，一般属于sdk的内部错误，比如网络连接异常等问题。1．如果已有案例已经搜集此问题，可以根据已有案例中的解决方法解决该问题。2．如果没有相关案例参考，可执行下面的步骤进行问题定位。查找日志信息。根据错误发生时间及操作的相关信息，日志文件目录下查找相关的运行日志，日志示例如下。2016-10-2411:33:43103|CRIT|[140072196339456]==============logstart============2016-10-2411:33:43165|WARN|[140072196339456]|Content-Type:2016-10-2411:33:43165|WARN|[140072196339456]|x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b8552016-10-2411:33:43165|WARN|[140072196339456]|host:172.22.4.1042016-10-2411:33:43165|WARN|[140072196339456]|x-amz-date:20161024T033343Z2016-10-2411:33:43165|WARN|[140072196339456]|request_finishrequest_finishstatus=0,httpResponseCode=4042016-10-2411:33:43165|WARN|[140072196339456]|Message:Thespecifiedbucketdoesnotexist2016-10-2411:33:43165|WARN|[140072196339456]|RequestId:00000157F4B7A409098F2DCE4A2110422016-10-2411:33:43166|WARN|[140072196339456]|Code:NoSuchBucket2016-10-2411:33:43166|WARN|[140072196339456]|listObjectscontentsCount=0!2016-10-2411:33:43166|CRIT|[140072196339456]==============logend==============根据错误日志信息分析错误原因。基于日志信息Code:NoSuchBucket分析，可以确定是查询的桶不存在。
用户不仅可以使用普通方式上传、下载对象，也可以使用服务端加密的方式上传、下载对象。用户可以根据自身的需求，通过不同的密钥管理方式来使用服务端加密功能。当前支持两种服务端加密方式：SSE-C方式（客户提供加密密钥的方式）由用户提供密钥、密钥的MD5值、加密算法AES256。OBS不存储加密密钥，如果丢失加密密钥，则会无法获取该对象。SSE-C方式提供6个新增加头域来支持SSE-C加密，新增头域使用方式请查看相关接口。SSE-C方式必须使用HTTPS发请求。SSE-KMS方式（KMS托管密钥的方式）由KMS（KeyManagementService）服务提供密钥。用户首次向区域中的桶上传SSE-KMS加密的对象时，OBS将自动为您创建一个默认客户主密钥，客户主密钥用于加密和解密KMS提供的密钥。SSE-KMS方式不支持用户自建密钥。BucketACL/Policy不支持SSE-KMS加密对象进行跨租户授权访问。SSE-KMS方式提供3个新增加头域来支持SSE-KMS加密，头域使用方式请查看相关接口。使用服务端加密，返回的ETag值不是对象的MD5值。使用服务端加密上传对象，服务端不会校验传入的Content-MD5。服务端加密对使用HTTPS和签名有具体要求，如下表所示。
上传对象的加密示例代码如下：
主要介绍OBSPHPSDK的接口调用流程及如何运用PHPSDK开发使用各种资源，内容主要包括使用场景、开发指引和简单的示例。
主要介绍OBSPythonSDK的接口调用流程及如何运用PythonSDK开发使用各种资源，内容主要包括使用场景、开发指引和简单的示例。
OBS系统中的数据采用平层结构，系统数据一共分为两层，顶层数据结构被称为桶。桶在全局是唯一的，不能重名。下层是对象，对象存放数据的实体。对象一定属于某个桶，同一个桶中对象不能重名，不同桶中对象可以重名。
对象在OBS中是最基本的实体，一个对象实际是一个文件的数据与其相关属性信息（元数据）的集合体。上传至OBS的数据（文件）都以对象的形式保存在OBS的桶中。对象包括了对象（Key），元数据（Metadata），用户数据（Data）三部分：对象名（Key）：通过Key唯一标示一个对象。元数据（Metadata）：存储对象的描述信息，包括系统元数据和用户元数据，这些元数据以键值对（Key-Value）的形式被上传到OBS中。<ulid="zh-cn_topic_0031052191__ul14807911164559"><liid="zh-cn_topic_0031052191__li66162341164559">系统元数据由OBS自动产生，在处理对象数据时使用，包括Date，Content-length，Last-modify，Content-MD5等。用户元数据由用户在上传对象时指定，是用户自定义的对象描述信息。通过多段上传最大支持5TB的对象大小，其他上传方式最大支持5GB，可根据情况选择不同的上传模型。
桶在OBS中是顶层数据结构，是用于保存对象的存储空间，可以通过配置桶策略来控制访问权限、生命周期、事件通知、静态网站托管等，从而可以通过创建不同的桶来实现不同的存储策略。OBS的数据结构是扁平化的，并没有文件系统的目录等概念。桶的名称在OBS范围内必须是全局唯一的，一旦创建之后无法修改名称。每个租户可以创建高达100个桶。桶中的对象名称必须唯一，同门对象会覆盖老对象，只有在开启多版本的情况下允许相同名称的对象多份保存。桶可以设置默认的对象存储级别，分别为：标准存储、低频访问存储、归档存储，在上传对象不指定存储类别时，对象集成桶的默认属性。
Region是指OBS服务所在的数据中心区域，其意味着不同的物理位置以及网络接入点。用户可以根据自身对价格、响应时延、请求来源等不同要求选择数据存储的Region。一般来说，距离用户更近的Region访问速度更快。Region是在创建Bucket的时候指定的，一旦指定之后就不允许更改，该Bucket下所有的Object都存储在对应的数据中心，目前不支持Object级别的Region设置。详细请查看&nbsp;章节。
Endpoint是指OBS对外服务的访问域名，OBS提供全局域名，无论访问任何Region均可以使用全局域名访问，OBS的全局Endpoint是：obs.myhwclouds.com。而同时也提供区域域名，如华南RegionEndpoint是obs.cn-north-1.myhwclouds.com，使用全局域名能够简化域名管理工作，而使用本地域名能够简化域名定位的步骤，降低访问时延，用户可根据自身情况妥善选择。详细请查看章节。
AK和SK是指AK（接入键标识，AccessKeyID）和SK（安全接入键，SecretAccessKey），用于鉴别身份。您通过客户端向OBS发送请求时，客户端发送的头域需要包含签名信息，该签名信息由SK、请求时间、请求类型等计算生成。AK与SK是用户访问OBS时需要使用的密钥对。当通过对象存储服务API（ApplicationProgrammingInterface）访问存储数据时，AK/SK用于生成鉴权信息进行安全认证。在用户注册开通OBS服务后，可以登录“我的凭证”，根据需要创建AK和SK，系统通过AK识别访问系统的用户，而SK用于密钥鉴权。详情请参见创建访问密钥（AK和SK）。一个AK唯一对应一个用户，而一个用户可以拥有多个AK。SK与AK一一对应，形成访问OBS时的密钥对，确保访问安全。
OBS以HTTPRESTfulAPI的形式对外提供服务，在RESTful架构中，每个URI（UniformResourceIdentifier）代表一种具体存在的资源，这个资源可以是一段文本、一张图片、一首歌曲、一种服务。OBS根据桶和对象及带的资源参数来确定具体的URL，当需要进行资源操作时，可以使用这个URL地址。URL的一般格式为（方括号内为可选项）：protocol://hostname[:port][/bucket][/object][?param]。详细请查看《对象存储服务接口参考》章节。
用户向OBS系统提交请求，必须符合REST接口规范，消息头中包含必要的请求参数。OBS处理成功后会返回成功响应，处理失败会返回错误响应，并在响应消息体中给出错误的原因。桶作为OBS数据存放的容器，提供了操作接口。如所示为OBS提供的部分桶操作接口：作为数据存放实体，OBS提供的部分对象操作接口如所示：更多详细的REST接口请查看《对象存储服务接口参考》章节。
单桶性能优化建议当并发向桶内PUT对象或DELETE对象时，需要更新同一份元数据，会造成并发冲突导致性能受限，并发GET对象则无性能限制。OBS系统提供的单桶并发PUT/DELETE对象性能规格为70TPS(TPS为每秒钟请求或事务的数量)，建议并发量不超过70，超过此值时会导致业务操作失败，返回503。此规格约束了小对象的PUT性能，对于大对象的PUT操作而言性能上受到的约束很小，因为PUT大对象主要耗费在对象数据的处理上，更新元数据的频率很低。总的来说PUT操作的对象大小与性能影响成反比关系。根据测试结果，当并发上传的对象平均大小大于10MB时，因元数据更新冲突造成的性能影响可以忽略。对于DELETE操作而言，无论删除大对象还是小对象，都会有性能约束。上述说明并发PUT/DELETE/GET针对不同对象，如果是并发操作同一个对象必然受限于某个盘或某几个盘的处理能力，此处不做详述。PUT/DELETE密集型负载场景推荐调优手段对于OBS系统典型的应用如归档、备份场景，存在大量的并发PUT请求。基于前述性能瓶颈说明，推荐采取下述调优手段，尤其是小对象操作。1.使用多个桶进行负载均衡OBS系统推荐用户备份数据分散上传到不同桶中，从而减少单桶并发的热点问题。不同的桶在OBS系统中是不同的逻辑实体，各自维护不同的元数据，彼此之间没有并发冲突等性能影响因素。另外，多桶可以支持用户将数据做逻辑隔离和区分，对列举和查找性能也有极大提升。2.控制单桶并发数单桶操作盲目提高并发数并不能带来明显的性能提升，相反并发数过大甚至导致OBS系统忙于处理并发冲突造成性能不升反降。OBS系统推荐单桶并发数控制在70以下，此结果是并发上传小对象实测得出的经验值。大对象的情况下并发数应该适当提高，可通过逐步提升并发数观察TPS性能寻找最优配置。3.将小对象进行打包后上传对于小对象密集型场景，推荐客户端将小对象进行打包后上传。可大幅提高性能，同时也可以提高存储空间利用率。4.使用随机对象名使用随机对象名是为了降低对单节点的并发冲突。比如典型的日志归档场景，可能上传的对象名都是如下形式：yourbucket/obslog/20140610-01.log.tar.gzyourbucket/obslog/20140610-02.log.tar.gzyourbucket/obslog/20140610-03.log.tar.gzyourbucket/obslog/20140610-04.log.tar.gz...yourbucket/obslog/20140611-01.log.tar.gzyourbucket/obslog/20140611-02.log.tar.gzyourbucket/obslog/20140611-03.log.tar.gzyourbucket/obslog/20140611-04.log.tar.gz这种带相同前缀的对象名很容易导致并发上传对象时路由到同一个节点。如果对象名前缀足够乱序，使不同的对象路由到不同节点，就可以解决热点问题，从而提高性能。比如对象名添加6位16进制字符前缀：yourbucket/6ac3e2-obslog/20140610-01.log.tar.gzyourbucket/b425da-obslog/20140610-02.log.tar.gzyourbucket/17fe36-obslog/20140610-03.log.tar.gzyourbucket/ac96b4-obslog/20140610-04.log.tar.gz...yourbucket/95d36e-obslog/20140611-01.log.tar.gzyourbucket/4a5ca2-obslog/20140611-02.log.tar.gzyourbucket/ea2cfe-obslog/20140611-03.log.tar.gzyourbucket/ba36c2-obslog/20140611-04.log.tar.gz此方法仅在桶中对象数足够多时有效。
对象存储服务设置有如下存储类型，分别为：标准存储、低频访问存储、归档存储，从而满足客户业务对存储性能、成本的不同诉求。OBS标准存储拥有低访问时延和较高的吞吐量，因而适用于有大量热点文件（平均一个月多次）或小文件（&lt;1MB），且需要频繁访问数据的业务场景，例如：大数据、移动应用、热点视频、社交图片等场景。OBS低频访问存储适用于不频繁访问（平均一年少于12次）但在需要时也要求快速访问数据的业务场景，例如：文件同步/共享、企业备份等场景。与标准存储相比，低频访问存储有相同的数据持久性、吞吐量以及访问时延，且成本较低，但是可用性略低于标准存储。OBS归档存储适用于很少访问（平均一年访问一次）数据的业务场景，例如：数据归档、长期备份等场景。归档存储安全、持久且成本极低，可以用来替代磁带库。为了保持成本低廉，数据取回时间可能长达数分钟到数小时不等。
允许用户创建不同默认存储类型的桶。发送创桶请求时携带头域“x-default-storageclass”来指定桶的默认存储类型。桶内对象的存储类型与桶默认存储类型保持一致。存储类型有3种：STANDARD（标准存储）、STANDARD_IA（低频访问存储）、GLACIER（归档存储）。如果没有携带此头域，则创建的桶为标准存储类型。
华为企业云，用户采用统一管理方式。需在IAM用户界面注册用户，注册时返回密钥，提供账户用的华为企业云资源的完全访问权限。以下是访问密钥示例：访问密钥ID。例如：AKIAIOSFODNN7EXAMPLE私有访问密钥。例如：wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY访问密钥ID可唯一标识华为企业云账户。可以使用这些访问密钥向S3发送经身份验证的请求。
本章节介绍区域与域名访问。将以表“规划的区域与区域域名”中的区域与域名为例进行举例说明。
华为企业云向用户提供的帐户包括了AK（AccessKeyID）和SK（SecretAccessKey），用于鉴别用户身份。在向S3发送请求时，客户端发送的消息头需要包含由AK、请求时间、请求类型等信息生成的鉴权信息。特别的，在进行鉴权之前，需要对桶名，对象名单独进行URLEncode编码，再生成鉴权信息。S3支持两个版本的鉴权方式，V2鉴权和V4鉴权。相对于V2鉴权，V4鉴权是一种更加安全的鉴权方式。与V2鉴权方式的区别主要有三点：V4鉴权计算签名时使用更加安全的HMAC-SHA256算法。V4Chunked鉴权会将用户数据纳入签名计算。V4鉴权计算签名时要纳入签名计算的头域可以由用户指定。
V2普通请求鉴权是指将通过HTTP/HTTPS消息头Authorization进行鉴权，V2普通请求鉴权消息的格式为：Authorization:AWSAccessKeyID:signature鉴权消息（signature）生成过程如下：1.构造Request字符串。2.根据Request和SK生成signature，生成过程使用HMAC(hash-basedauthenticationcode)算法。详细请查看《对象存储服务接口参考》章节。
与V2普通鉴权方式不同，V4普通请求鉴权的消息格式为：Authorization:AWS4-HMAC-SHA256Credential=AKIAIOSFODNN7EXAMPLE/20150524/region-1/s3/aws4_request,SignedHeaders=host;range;x-amzdate,Signature=fe5f80f77d5fa3beca038a248ff027d0445342fe2855ddc963176630326f1024具体来说，计算签名分为以下几个步骤：1.生成StringToSign2.生成SigningKey3.使用StringToSign和SigningKey计算签名详细请查看《对象存储服务接口参考》章节。
BucketPolicy允许桶的所有者执行PutBucketPolicy操作，给Bucket设置访问控制策略，如果Bucket已有Policy，则新的Policy会覆盖老的Policy。BucketOwner也可以执行GetBucketPolicy或DeleteBucketPolicy操作，获取或删除已设置的BucketPolicy。设置Policy后，后续对此Bucket的访问请求都会受到Policy的限制，表现为拒绝或接受请求。对拒绝或接受的判断，取决于Policy的描述。Policy权限判断逻辑Policy在做权限判断时，每条Statement会有3种结果，explicitdeny、allow和defaultdeny。BucketPolicy对于Policy中的多条Statement采用以下规则进行判定：BucketPolicy对Policy中包含的每条Statement都要进行ExplicitDeny、Allow和DefaultDeny的判断，最终的判决结果遵循explicitdeny&gt;allow&gt;defaultdeny的规则；1.如果没有显式的Deny和Allow，则请求权限判别为DefaultDeny。2.显式的Deny覆盖Allow。3.Allow覆盖默认的DefaultDeny。4.Statement的顺序没有影响。详细请查看《对象存储服务接口参考》章节。
OBS系统提供的默认配置为根域名跨域访问允许所有域访问，会使客户端存在被攻击的风险。客户端可通过在自己的桶内创建配有自己规则的crossdomain.xml，并在其flash代码中添加Security.loadPolicyFile("http://obs.myhwclouds.com/bucket/crossdomain.xml")，从而避免被攻击的风险。详细请查看《对象存储服务接口参考》章节。
桶访问日志主要用于桶所有者获取自己桶的访问数据。例如：用户将自己的桶开放为公共权限，在其中存放网络资源供所有获得链接地址的人下载，此时资源所有者希望知道文件的下载趋势和请求来源等信息。桶访问日志通过记录请求者的信息和请求参数，并把这些记录的信息作为对象保存在目标桶中，提供给桶的所有者统计信息的能力。桶访问日志由对象存储服务在后台生成日志对象，为了获得在目标桶写日志的权限，在设置桶访问日志时，需要同时授予日志投递用户组对该桶的WRITE和READ_ACP权限。桶的所有者本身自带对所有生成桶访问日志的FULL_CONTROL权限。所有者可以通过访问控制参数授予其他人相应的访问桶日志的权限。被授予访问权限的用户能够访问在该用户权限生效之后，权限回收之前产生的桶日志。详细请查看《对象存储服务接口参考》章节。
您可以使用服务端加密方式进行上传、下载对象。OBS支持服务端加密功能，使加密的行为在服务端进行。用户可以根据自身的需求，使用不同的密钥管理方式来使用服务端加密功能。当前支持两种服务端加密方式：KMS托管密钥的服务端加密(SSE-KMS)和客户提供加密密钥的服务端加密(SSE-C)。SSE-KMS方式，OBS使用KMS（KeyManagementService）服务提供的密钥进行服务端加密。SSE-C方式，OBS使用用户提供的密钥和密钥的MD5值进行服务端加密。使用服务端加密，返回的ETag值不是对象的MD5值。使用服务端加密上传对象，服务端不会校验传入的Content-MD5。
SSE-KMS方式，OBS使用KMS（KeyManagementService）服务提供的密钥进行服务端加密。用户首次向区域中的桶上传SSE-KMS加密的对象时，OBS将自动为您创建一个默认客户主密钥，客户主密钥用于加密和解密KMS提供的密钥。SSE-KMS方式不支持用户自建密钥。BucketACL/Policy不支持SSE-KMS加密对象进行跨租户授权访问。详细请查看《对象存储服务接口参考》章节。
SSE-C方式，OBS使用用户提供的密钥和密钥的MD5值进行服务端加密。OBS不存储您提供的加密密钥，如果您丢失加密密钥，则会无法获取该对象。SSE-C方式新增加六个头域来支持SSE-C加密。详细请查看《对象存储服务接口参考》章节。
详细请查看《对象存储服务接口参考》章节。
OBS注册用户可以创建桶。桶名是全局唯一的，同一个桶名在一个OBS系统内只能存在一个，每个用户可以创建桶的总数量不超过100个。桶名在创建时需要满足一定的命名规范，OBS系统会对请求传入的桶名进行严格的桶名检查，符合要求的才会继续处理请求。
只能包含英文小写字母、数字、"-"、"."。只能以数字或字母开头。长度要求不少于3个字符，并且不能超过63个字符。不能是IP地址。不能以"-"、"."结尾。不可以包括有两个相邻的"."。"."和"-"不能相邻，如"my-.bucket"和"my.-bucket"都是非法的。详细请查看《对象存储服务接口参考》章节。
桶ACL可以控制在桶上执行列举桶内对象、上传/删除对象、修改桶ACL、获取桶ACL操作、获取桶元数据的权限。桶策略可以控制在桶上的所有操作权限。详细请参考章节。
用户创建的桶默认是没有配额的，用户创建的桶和对象按照使用量计费。同时OBS服务提供了桶配额的功能，可以控制桶内可以上传的对象容量，超过设置的对象容量后，上传对象会失败。桶配额使用XML描述如下：桶配额只对设置生效后的对象上传操作有限制，如果设置的桶配额数值小于已经上传的对象容量，不会删除已经存在的对象，但后续不能再上传对象。如果当前配额值小于已经上传的对象容量，则只有删除已经存在的对象，才能上传新对象。
桶的多版本控制提供了一种桶内对象的安全性保证，防止用户误删除对象、覆盖对象操作造成不可预料的损失。下图所示为在多版本功能的保护下，用户上传的photo.gif对象虽然被覆盖了多次，但每次被覆盖的对象都作为一个特定的版本对象仍然存在，并且仍然可以指定版本号下载老版本的对象。当用户设置桶的多版本状态为Enabled，开启桶的多版本功能后，功能如下：上传对象时，系统为每一个对象创建一个版本号，上传同名的对象将不再覆盖旧的对象，而是创建新的不同版本号的同名对象；可以指定版本号下载对象，不指定版本号默认下载最新对象；删除对象将增加一个删除标识，不真正删除对象，指定版本号删除时可以真正删除相应版本号的对象；列出桶内对象列表时默认列出最新对象列表，可以指定列出桶内所有版本对象列表。设置桶的多版本状态为Suspended，暂停桶的多版本功能后，功能如下：旧的版本数据继续保留；上传对象时创建对象的版本号为null，上传同名的对象将覆盖原有同名的版本号为null的对象；可以指定版本号下载对象，不指定版本号默认下载最新对象；删除对象时可以指定版本号删除，不带版本号删除最新的对象，同时产生版本号为null的删除标识。默认情况下，桶不开启多版本控制。
当桶为空时，用户可以执行删除桶操作，如果桶非空，执行删除桶操作时会返回409错误，错误码为BucketNotEmpty。桶为空包含两方面的含义，一个是桶内没有对象，一个是桶内没有未完成的多段上传任务。执行桶操作之前，可以执行列举桶内对象和列举桶内多段任务确定桶是否为空。如果删除桶时，服务端返回5XX错误或超时，系统需要10分钟左右的时间进行桶信息一致性处理，在此期间桶的信息会不准确。
同一个桶中存储的对象名必须是唯一的。如果在指定的桶内已经有相同的对象名的对象，用户上传的新对象会覆盖原来的对象；为了确保数据在传输过程中没有遭到破坏，用户可以在请求消息头中加入Content-MD5参数。在这种情况下，OBS收到上传的对象后，会对对象进行MD5校验，如果不一致则返回出错信息。用户还可以在上传对象时指定x-amz-acl参数，设置对象的权限控制策略。用户在OBS系统中创建了桶之后，可以采用PUT操作的方式将对象上传到桶中。如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号，并且会在响应报头x-amz-version-id返回该版本号。如果桶的多版本状态是暂停的，则对象的版本号为null。PUT上传对象的请求消息样式如下：
用户除了可以用PUT直接上传对象外，还可以使用POST上传对象。如果桶的多版本状态是开启的，系统会自动为对象生成一个唯一的版本号；如果桶的多版本状态是暂停的，则系统生成的对象版本号为null，并由响应报头x-amz-version-id返回该版本号。POST上传对象的请求消息样式：
即将单个对象作为一组分段分别上传。每个分段都是对象数据的连续部分。您可以独立上传或者按任意顺序上传这些对象分段。如果任意分段传输失败，可以重新传输该分段且不会影响其他分段。当对象的所有段都上传后，OBS将这些分段合并起来，然后创建对象。一般而言，如果您的对象大小达到了100MB，您应该考虑使用多段上传，而不是在单个操作中上传对象。多段上传有三个步骤：开始上传（初始化上传段任务）、上传对象分段（上传段），以及在上传所有分段后，完成多段上传（合并段）。收到合并段请求后，OBS将构建由上传的分段组成的对象，然后您可以像在您的桶中访问任何其他对象一样访问该对象。使用适用于多段上传的RESTAPI《对象存储服务接口参考》中的以下章节介绍适用于多段上传的RESTAPI。您可以使用这些API生成您自己的REST请求，或者您可以使用我们提供的开发工具包。
授权给第三方上传主要是通过临时授权(QueryString签名)请求：OBS服务支持已经注册且激活的用户用自己的账户，构造一个特定操作的URL，这个URL中会包含鉴权信息，任何拿到这个URL的用户均可执行这个操作。例如临时授权方式下载对象，拿到相应URL的用户都能下载这个对象，但该URL只在Expires指定的失效时间内有效。详细请查看《对象存储服务接口参考》章节。
V4临时授权请求鉴权与V2临时授权请求鉴权类似，请求中的鉴权信息通过查询参数传递，区别在于V4临时鉴权URL中有6个必选的查询参数。V4临时鉴权请求示例如下：详细请查看《对象存储服务接口参考》章节。
拥有对象读权限的用户（包括OBS注册用户和匿名用户）可以执行下载对象的操作，返回信息会包含对象内容和对象的元数据信息。下载对象时会下载整个对象，即单次GET操作即可为您返回OBS中存储的整个对象。当您下载对象时，其元数据将在响应标头中返回。有时，您希望覆盖GET响应中返回的特定响应标头值。例如，您可能覆盖GET请求中的Content-Disposition响应标头值。RESTGETObjectAPI（参见GETObject）允许您指定GET请求中的查询字符串参数以覆盖这些值。当从开启多版本控制的桶中下载对象时，如果要获取特定版本的对象，需要在请求中携带versionId参数。详细请查看《对象存储服务接口参考》章节。
下载对象时，您可以使用多段上传下载来下载对象的分段，即通过在GET请求中使用RangeHTTP标头，您可以下载存储在OBS中的对象的特定字节范围。您可以通过OBS提供的功能从对象指定的位置开始下载，可以实现一个很大的对象的多次下载。如果下载过程中发生中断，重新下载时也可以从上次最后完成的地点开始继续下载。和简单上传类似，一旦您的应用程序准备就绪，就会恢复提取对象的其他分段的操作。当您仅需要部分对象数据时，这种可恢复的下载十分有用。当网络连接不佳，并且您需要对失败做出反应时，它也十分有用。当从开启多版本控制的桶中下载对象时，如果要获取特定版本的对象，需要在请求中携带versionId参数。详细请查看《对象存储服务接口参考》章节。
当您希望将私有Bucket内部的Object授权给第三方下载的时候，不应该直接将AccessKey提供给下载者，而应该使用临时鉴权方法。您可以选择使用V2临时授权请求鉴权或者V4临时授权请求鉴权。详细请查看章节。
每个OBS对象都有数据、键和元数据。对象键（或键名称）在桶中唯一地标识对象，创建对象时，要指定键名称，它在桶中唯一地标识该对象。键的名称是一序列的Unicode字符，它的UTF-8编码长度最大为1024个字节。对象元数据是一组名称值对。您可以在上传对象元数据时对其进行设置。上传对象后，您将无法修改对象元数据。修改对象元数据的唯一方式是创建对象的副本并设置元数据。
虽然您可以在对象键名称中使用任何UTF-8字符，但是以下键命名最佳做法有助于确保与其他应用程序的最大兼容性。每个应用程序对特殊字符的分析方式可能不同。以下指导原则有助于最大程度符合DNS、Web安全字符、XML分析器和其他API的要求。以下字符集通常可安全地用于键名称：请注意，OBS数据模型是一种扁平结构：您创建桶，桶存储对象。不存在子桶或子文件夹层次结构；但您可以使用键名称前缀和分隔符推断逻辑层次结构（如同OBS控制台一样）OBS控制台支持文件夹的概念。
有两种元数据：系统元数据和用户定义的元数据。系统元数据：对于存储桶中存储的每个对象，OBS均保留一组系统元数据。OBS根据需要处理这些系统元数据。例如，OBS将保留对象创建日期和大小元数据，并将这些信息用作对象管理的一部分。用户定义的元数据：上传数据元时，您也可以将元数据指定给该对象。发送PUT或POST请求创建对象时，您将以名称-值对的形式提供此可选信息。使用RESTAPI上传对象时，可选的用户定义的元数据名称必须以“x-amz-meta-”开头，以与其他HTTP标头区分开来。使用RESTAPI检索数据元时，将返回此前缀。通过RESTAPI检索元数据时，OBS会将同名（忽略大小写）标头合并为逗号分隔的列表。如果某些元数据包含不可打印的字符，则不会返回它。但是，“x-amz-missing-meta”标头将与不可打印的元数据条目的数量值一起返回。OBS使用小写存储用户定义的元数据。使用REST和UTF-8时或通过POST基于浏览器的上传时，每个名称、值对都必须符合US-ASCII。PUT请求标头的大小限制为8KB。在PUT请求标头中，用户定义的元数据的大小限制为2KB。用户定义的元数据是一组键值对。通过计算每个键和值的UTF-8编码中的字节总数来测量用户定义的元数据的大小。
对桶拥有读权限的用户可以执行获取桶内对象列表的操作。如果用户在请求的URI里只指定了桶名，即GET/BucketName，则返回信息中会包含桶内部分或所有对象的描述信息(一次最多返回1000个对象信息)；如果用户还指定了prefix、marker、max-keys、delimiter参数中的一个或多个，则返回的对象列表将按照规定的语义返回指定的对象。详细请查看《对象存储服务接口参考》7.2列举桶内对象章节。
复制对象操作将创建已存储在OBS中的对象的副本。在单个原子操作中，您可以创建最大5GB的对象副本。但是，对于复制大于5GB的对象副本，您必须使用多段上传API。通过使用copy操作，您可以：创建对象的其他副本通过复制对象并删除原始对象来重命名它们。更改对象元数据——您可以在上传对象元数据时对其进行设置。上传对象后，您将无法修改对象元数据。修改对象元数据的唯一方式是创建对象的副本并设置元数据。在复制操作中，设置与源和目标相同的对象。详细请查看《对象存储服务接口参考》章节。
您可以直接从OBS删除一个或多个对象。删除对象时，您可以使用以下选项：删除单个对象–OBS提供了删除API，使您能够在单个HTTP请求中删除一个对象。删除多个对象–OBS还提供了批量删除对象API，使您能够在单个HTTP请求中删除最多100个对象。详细请查看《对象存储服务接口参考》章节。
批量删除对象操作允许用户将一个桶内的部分对象一次性删除，并将每个对象的删除结果返回给请求用户，对象删除后不可恢复。批量删除对象的响应方式支持以下两种选项：Verbose–即在返回响应时，不管对象是否删除成功都将删除结果包含在XML响应里。Quiet–即在返回响应时，只返回删除失败的对象结果，没有返回的认为删除成功。详细请查看《对象存储服务接口参考》章节。
通过版本控制，您可以在一个桶中保留多个对象版本。您必须在您的桶上显式启用版本控制。默认情况下，版本控制处于禁用状态。无论您是否已启用版本控制，您的存储桶中的每个对象都具有版本ID。如果未启用版本控制，则OBS将版本ID值设置为空。如果已启用版本控制，则OBS为对象指定唯一版本ID值。在存储桶上启用版本控制时，该桶中的现有对象（如果有）不会发生更改：版本ID（空）、内容和权限保持为相同。当您在启用版本控制的桶中通过PUT放入对象时，不会覆盖非当前版本。下图显示了当将新版本的photo.gifPUT在已包含具有相同名称的对象的桶中时，原始对象(ID=111111)将保留在该桶中，OBS将生成新版本ID(121212)，并将较新版本添加到该桶中。此功能将防止您意外覆盖或删除对象，并向您提供检索早期版本的对象的机会。详细请查看《对象存储服务接口参考》章节。
您可以使用生命周期配置管理对象的生命周期，该配置定义OBS如何在对象的生存期（从创建/初始存储直到删除或覆盖对象）内管理对象。您可以为明确定义了生命周期的对象定义生命周期配置规则。存储在OBS桶中的许多对象可能都有明确定义的生命周期，例如：如果您将定期日志上传至您的桶中，您的应用程序可能会在日志创建后的一周或一个月后需要这些日志，并且在那之后您可能希望将它们删除。在限定的时间段内可能需要经常访问某些文档。在那之后，您可能不再需要对这些对象进行实时访问，但是您的组织可能要求您将它们存档更长一段时间，然后在以后有选择性地删除它们。您可能主要为了存档目的而向OBS上传的某些类型的数据，包括数字媒体存档、金融和医疗记录、原始基因组序列数据、长期数据库备份以及为符合监管要求而必须保留的数据。您可以使用OBS管理控制台或者RESTAPI来管理对象的生命周期。详细请查看《对象存储服务接口参考》章节。
OBS支持通过ACL对对象的操作进行权限控制。默认情况下，只有对象的创建者才有该对象的读写权限。用户也可以设置其他的访问策略，比如对一个对象可以设置公共访问策略，允许所有人对其都有读权限。OBS用户在上传对象时可以设置权限控制策略，也可以通过ACL操作API接口对已存在的对象更改或者获取ACL(accesscontrollist)。详细请查看《对象存储服务接口参考》章节。
OBS服务允许在桶内保存静态的网页资源，支持索引页、错误页展示和页面跳转。在设置了静态网站托管后，有以下两种方式访问OBS服务。资源管理方式：资源管理方式通过普通的域名访问。静态域名方式：静态域名方式通过特定的静态域名访问。详细请查看《对象存储服务接口参考》章节。
假设您在OBS中拥有存储资源，而且希望使用自己拥有的域名访问资源或托管静态网站,那么您就可以使用自定义域名。使用自定义域名有3个前提条件：用户在第三方域名注册商处注册了域名。用户在OBS中拥有与该域名同名的桶。用户在第三方DNS中为该域名配置了CNAME记录。
第一步：用户需要在域名注册商处注册域名，例如：www.example-bucket1.com。第二步：用户在OBS中创建与该域名同名的桶，例如：www.example-bucket1.com。并且向桶中上传对象index.html，作为桶内资源，可供后续静态网站托管使用。第三步：在第三方DNS中配置自定义域名与区域域名的CNAME记录，假如：桶www.example-bucket1.com所在区域为region1.example.com，对应的CNAME记录类似：“<emid="ZH-CN_TOPIC_0071992488__i34685543173551">www.example-bucket1.com.CNAMEregion1.example.com.</em>”不同的DNS提供商所提供的配置CNAME的方式有所不同，具体详情请咨询DNS提供商。第四步：在浏览器中输入自定义域名www.example-bucket1.com，将列举桶www.example-bucket1.com中对象。第五步：如果用户希望使用静态网站托管，用户需要开启桶的静态网站托管功能。第六步：在浏览器中输入自定义域名www.example-bucket1.com，返回index.html页面。
如果HTTP请求头域中没有HOST字段（HTTP1.0可以没有HOST字段），OBS将不支持自定义域名。如果用户的桶开启静态网站托管，不论在第三方DNS配置的CNAME记录的endpoint是不是静态网站托管的endpoint，当访问自定义域名时，OBS都按照静态网站托管方式响应，如用户桶名为www.example-bucket.com，开启了website，在DNS配置自定义域名与OBS域名的cname记录，用户发送“GET/homepage.txtHTTP/1.1Host:www.example-bucket.com”时，OBS仍按照静态网站托管方式响应。用户需要自己在第三方DNS服务器上配置域名映射关系。当使用用户自己的域名访问时，如果HTTP请求头域中的HOST字段值为IP时，按照标准S3请求处理，不会按照自定义域名处理。当使用用户自己的域名访问时，如果HTTP请求头域中的HOST字段值为localhost时，按照标准S3请求处理，不会按照自定义域名处理。如果桶名是OBS内部域名(包括静态网站托管域名等)，请求不会按照自定义域名请求处理。自定义域名不支持HTTPS方式访问。
同域策略SOP（SameOriginPolicy），也称为单域策略（SingleOriginPolicy），它是一种用于Web浏览器编程语言（如JavaScript和Ajax）的安全措施，以保证信息的保密性和完整性。同域策略能阻止网站脚本访问其他站点使用的脚本，确保来自一个站点和域的脚本和其他内容不会与另一个位置的内容发生交互，同时也阻止它与其他站点脚本交互，以避免产生不可预期的危险行为。但在某些情况下，一个域的开发人员也许有很合理的原因，访问其他位置的资源。S3的CORS就是提供了这种机制，让开发人员告诉浏览器，允许这样的行为。CORS是W3C标准化组织提出的一种规范机制，允许客户端的跨域请求检查。API可以使用规范中定义的接口，请求跨域的资源。开发人员构建的web程序，就可以请求提供主要内容的域之外其他域的内容。比如HTML5新标准中提到关于AJAX跨域访问的情况，默认情况下是不允许跨域访问的，只有目标站点（假如是http://www.foo.com）明确返回HTTP响应头：<emid="ZH-CN_TOPIC_0071992489__i48351583173751">Access-Control-Allow-Origin:http://www.origin.com</em>那么www.origin.com站点上的客户端脚本就有权通过AJAX技术对www.foo.com上的数据进行读写操作。这个响应头“Access-Control-Allow-Origin”就是CORS规范定义的头域。详细请查看《对象存储服务接口参考》章节。
OBS访问控制列表(ACL)使您可以管理对桶和对象的访问权限。每个桶和对象都有一个作为子资源而附加的ACL。它定义了哪些OBS账户被授予的访问权限以及访问权限的类型。收到针对某个资源的请求后，OBS将检查相应的ACL以验证请求者是否拥有所需的访问权限。创建桶或对象时，OBS将创建一个默认ACL，以授予资源拥有者对资源的完全控制权限，如下面的示例桶ACL中所示（默认的对象ACL拥有相同的结构）。示例ACL包含一个可通过OBS账户的规范用户ID识别所有者的Owner元素。Grant元素可以识别被授权者（OBS支持的被授权用户）和所授予的许可。此默认的ACL拥有一个适用于所有者的Grant元素。您可以通过添加Grant元素授予许可，每个授权都可以识别被授权者和许可。ACL的每项包含了对被授权用户授予什么样的权限，对存在的桶或对象也可以调用更改ACL接口生成新的ACL。详细请查看《对象存储服务接口参考》章节。
主要介绍OBSRubySDK的接口调用流程及如何运用RubySDK开发使用各种资源，内容主要包括使用场景、开发指引和简单的示例。
maven工程中"src/main/resources"是自动创建的，并且是添加到Builderpath的，如果该目录被删除了，则需要手动创建，并手动添加到Builderpath中。
maven工程中"src/main/resources"目录已经创建，并且添加到Builderpath。
在"src/main/resources"下创建microservices文件夹或者applications文件夹，用于存放本地微服务和将要调用的微服务契约。将中定下的契约放置在"resources/microservices"或者“resources/applications”目录下，目录结构如下所示。-resources-microservices-serviceName#微服务名-schemaId.yaml#schema接口的契约-applications-appId#appId-serviceName#微服务名-schemaId.yaml#schema接口的契约说明：microservices目录下面的每一个文件夹表示一个微服务，每个微服务文件夹下的每个yaml文件表示一个schema的契约，文件名对应schema-id的值。applications目录下面可用于存放需要指明appId的服务契约，比如跨app调用场景。契约中info下面的x-java-interface字段需要标明具体的interface路径，根据项目实际情况而定。
本节主要介绍服务中心所需配置项。
服务中心客户端配置说明如下。
直接写实现类，不必预先定义契约，不必预先定义接口。启动时，会根据实现类自动生成契约，并注册到服务中心。支持下面几种规则。透明RPC开发模式@RpcSchema(schemaId="codeFirst")publicclassCodeFirstPojo{publicintreduce(inta,intb){returna-b;}publicPersonsayHello(Personuser){user.setName("hello"+user.getName());returnuser;}publicStringsaySomething(Stringprefix,Personuser){returnprefix+""+user.getName();}......说明：因为纯粹从代码上，完全无法分辨微服务开发人员期望如何定义契约，所以生成的契约全是POST方法，所有method的入参被包装为一个class，作为body参数传递。Jaxrs开发模式@RestSchema(schemaId="codeFirst")@Path("/codeFirstJaxrs")@Produces(MediaType.APPLICATION_JSON)publicclassCodeFirstJaxrs{@Path("/add")@POSTpublicintadd(@FormParam("a")inta,@FormParam("b")intb){returna+b;}@Path("/sayhello")@POSTpublicPersonsayHello(Personuser){user.setName("hello"+user.getName());returnuser;}@Path("/saysomething")@POSTpublicStringsaySomething(@HeaderParam("prefix")Stringprefix,Personuser){returnprefix+""+user.getName();}......Springmvc开发模式@RestSchema(schemaId="codeFirst")@RequestMapping(path="/codeFirstSpringmvc",produces=MediaType.APPLICATION_JSON_VALUE)publicclassCodeFirstSpringmvc{@RequestMapping(path="/sayhello",method=RequestMethod.POST)publicPersonsayHello(@RequestBodyPersonuser){user.setName("hello"+user.getName());returnuser;}@RequestMapping(path="/saysomething",method=RequestMethod.POST)publicStringsaySomething(@RequestHeader(name="prefix")Stringprefix,@RequestBodyPersonuser){returnprefix+""+user.getName();}
当应用访问一个集群部署的服务时，会涉及到路由负载均衡。当前CSE2.1提供的基于Ribbon的方案，可以通过配置文件配置负载均衡策略，当前支持随机，顺序，基于响应时间的权值等多种负载均衡路由策略。这些策略可以根据用户的场景进行修改配置。
本节主要介绍配置中心所需配置项。
SDK中配置中心配置项如所示。
配置中心环境变量配置项如所示。
配置文件路径：src\main\resources\microservice.yaml。
实施负载均衡的步骤如下。在处理链配置项当中增加负载均衡一项，代码如下。cse:......handler:chain:Consumer:default:loadbalance......增加路由策略，代码如下。cse：......loadbalance:NFLoadBalancerRuleClassName:com.netflix.loadbalancer.RoundRobinRule......说明：路由策略默认配置为com.netflix.loadbalancer.RoundRobinRule。其中NFLoadBalancerRuleClassName为具体的路由策略，通过配置不同的实现类的路径来实现不同的路由策略，通常的路由策略配置如下：轮询：com.netflix.loadbalancer.RoundRobinRule随机：com.netflix.loadbalancer.RandomRule权值：com.netflix.loadbalancer.WeightedResponseTimeRule会话保持：com.huawei.paas.cse.loadbalance.SessionStickinessRule如果需要自定义路由策略，请参考6.7路由策略说明内容。
参考。
本章主要是相关的说明。本节介绍JAX-RS开发模式微服务当前版本支持的注解。本节介绍SpringMVC开发模式当前支持org.springframework.web.bind.annotation包下的注解。本节主要介绍HttpServletRequest参数使用说明。
在一个长事务中，一个由两台服务器一起参与的事务，服务器A发起事务，服务器B参与事务，B的事务需要人工参与，所以处理时间可能很长。如果按照ACID的原则，要保持事务的隔离性、一致性，服务器A中发起的事务中使用到的事务资源将会被锁定，不允许其他应用访问到事务过程中的中间结果，直到整个事务被提交或者回滚。这就造成事务A中的资源被长时间锁定，系统的可用性将不可接受。为了解决在事务运行过程中大颗粒度资源锁定的问题，业界提出一种新的事务模型，它是基于业务层面的事务定义。锁粒度完全由业务自己控制。它本质是一种补偿的思想。它把事务运行过程分成Try、Confirm/Cancel两个阶段。在每个阶段的逻辑由业务代码控制。这样就事务的锁粒度可以完全自由控制。业务可以在牺牲强隔离性的情况下，获取更高的性能。
TCC事务对应的依赖包如下所示。然后将tcc-server添加进处理链中，如下：定义服务实现类，如下所示。在支持TCC事务的方法上打上@TccTransaction标注，并注明confirmMethod和cancelMethod方法。confirmMethod和cancelMethod的参数和返回值必须和服务提供函数相同。如果Try正常执行，confirm方法也会被执行。如果Try抛出异常，则cancel会被执行。如果不使用标注的方式发布服务，那么需要在实现类上面打上@Component标注。TCC事务对业务逻辑定义需要有一定要求，TCC操作应该支持幂等性原则，否则容易产生过度补偿等问题。TCC支持运行在微服务多实例中，其原理是将事务数据统一存储到数据库中，TCC组件提供统一的事务存储接口，以便开发对接不同的数据库，只需要继承实现com.huawei.paas.cse.tcc.repository.CachableTransactionRepository类即可完成多实例TCC支持；也可参考com.huawei.paas.cse.tcc.repository包中简单的数据库存储类实现，已简单实现了Jdbc/redis/ZooKeeper的对接。
配置项说明如下。
本节从微服务服务端和消费端说明CodeFirst开发模式进行业务开发。
如果需要将该微服务加载到web容器中启动运行时，需要新建一个servlet工程包装一下。
web.xml文件配置如下。RestServletContextListener用于初始化微服务环境，包括日志、spring等。需要指定spring配置文件加载路径，通过context-param来配置。上例中，classpath*:META-INF/spring/*.bean.xml是微服务的内置规则，如果配置中未包含这个路径，则RestServletContextListener内部会将它追加在最后。另外可以配置servlet-mapping中的url-pattern规则将满足指定规则的URL路由到该servlet中来。
当前只有Rest网络通道支持此种运行模式，使用web容器模式时需要将pom文件中的transport改为依赖cse-transport-rest-servlet包。设置finalName，是方便部署，有这一项后，maven打出来的war包，部署到web容器中，webroot即是这个finalName。RESTful调用应该与web容器中其他静态资源调用（比如html、js等等）隔离开来，所以webroot后一段应该还有一层关键字，比如上面web.xml中举的例子（/test/rest）中的rest。以tomcat为例，默认每个war包都有不同的webroot，这个webroot需要是basePath的前缀，比如webroot为test，则该微服务所有的契约都必须以/test打头。当微服务加载在web容器中，并直接使用web容器开的http、https端口时，因为是使用的web容器的通信通道，所以需要满足web容器的规则。
通过简单的配置，开发者可以启用TLS通信，保障数据的传输安全。
SDK和外部服务的交互如下所示。
目前支持给微服务的各个交互方统一指定证书，也可以单独为他们指定证书，加上tag的配置会覆盖默认配置。ssl.[tag].[property]，示例如下。SDK的证书配置项说明如下所示。默认的协议算法是高强度加密算法，JDK需要安装对应的策略文件，参考：http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html。您可以在配置文件配置使用非高强度算法。微服务消费者，可以针对不同的提供者指定证书（当前证书是按照HOST签发的，不同的提供者都使用一份证书存储介质，这份介质同时给微服务访问服务中心和配置中心使用）。
微服务上公有云主要解决服务中心、配置中心和IAM认证服务的认证关系，系统已经提供了默认实现，只需要在microservices.yaml中增加如下几个配置项。
目前支持使用环境变量来配置的TLS认证方式，默认开启TLS通信，双向认证模式，认证对端时同时校验对端是否匹配证书（CommonName）字段。服务管理中心的证书配置项说明如下所示。服务管理中心配置文件$APP_ROOT/conf/app.conf配置说明如下所示，暂不支持环境变量方式设置。由于服务中心支持HTTP/2协议，所以ssl_ciphers必须配置有TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256算法。TLS_RSA_WITH_AES_128_GCM_SHA256、TLS_RSA_WITH_AES_128_CBC_SHA被列为HTTP/2协议的不安全算法黑名单，但为了客户端算法兼容性，存在时必须配置到最后一位。密钥物料及证书存放路径说明如下：
调用跟踪模块主要实现与“服务监控”的对接，按照服务监控的要求，产生span和SLA数据。
调用跟踪模块对应的pom依赖包如下：
调用跟踪配置项如下所示。
开发者可以在log4j配置文件中定制监控日志输出的格式，必须按照下面的要求对SLA和调用链数据进行覆盖，代码如下。开发者不需要覆盖所有的配置项，只需要根据需要覆盖必要的配置项。配置项的默认值我们会根据实际情况进行调整，这样系统可以使用到最新的配置功能。比如，多数情况开发者只需要覆盖文件路径：log4j.appender.sla.File=/var/log/metrics.dat开发者可以通过在日志配置文件中配置log4j.appender.sla.File=m.dat和log4j.appender.talc.File=t.dat两个配置项来修改SLA和调用链数据文件的生成路径，日志配置文件命名格式为log4j.*.properties。
本节从微服务的服务端和消费端说明如何使用JAX-RS开发模式进行业务开发。。本节主要介绍JAXRS的服务端的开发。本节主要介绍JAX-RS的服务消费端开发。
本节分别从微服务的服务端和消费端说明如何使用透明RPC开发模式进行业务开发。本节主要介绍透明RPC的服务端开发。本节主要介绍透明RPC的服务消费端开发。
微服务框架提供了standalone部署运行模式，可直接在本地通过Main函数拉起。编写Main函数，初始化日志和加载服务配置，内容如下。如果使用的是rest网络通道，需要将pom中的transport改为使用cse-transport-rest-vertx包。运行MainServer即可启动该微服务进程，向外暴露服务。
本章主要介绍微服务开发框架和组件。
微服务开发框架包括编程模型、运行模型、通信模型和服务契约。编程模型支持透明RPC（POJO）、SpringMVC和JAX-RS三种编程模型。运行模型包括服务发现、熔断、负载均衡、配置及跟踪。通信模型支持序列化传输，包括Rest和Highway两个通道。通过服务契约的定义实现编程模型、运行模型、通信模型的灵活组合。如所示。微服务开发框架具有如下特点。编程模型和通信模型分离，不同的编程模型可以灵活组合不同的通信模型。应用开发者在开发阶段只关注接口开发，部署阶段灵活切换通信方式；支持legacy系统的切换，legacy系统只需要修改服务发布的配置文件（或者annotation），而不需要修改代码。通过定义契约实现模块分离，实现跨语言的通信，并支持配套的软件工具链（契约生成代码、代码生成契约等）开发，构建完整的开发生态。
微服务开发框架组件组成如所示。编程模型、通信模型必须包含一种，运行模型全部是可选的。如果客户端没有配置负载均衡策略，将使用最简单的轮询策略进行路由。
发布组件说明如所示。
按照类型(type)：配置项能够针对Provider,Consumer进行配置。按照范围(scope)：配置项能够针对MicroService进行配置,也可以针对【x-schema-id+operationId】进行配置。1、type指Provider或者Consumser。2、对于全局配置，不需要指定MicroServiceName。针对特定的微服务的配置，需要增加MicroServiceName。3、对于适用于接口配置的，需要指定接口名称，接口名称由【x-schema-id+operationId】组成。隔离示例如下。
配置项列表如下所示。在表格里，全部省略type和MicroServiceName。未特殊说明，配置项都支持Provider和Consumer。例如：对于服务消费者，需要配置为：cse.isolation.Consumer.enabled，对于服务提供者，需要配置为：cse.isolation.Provider.enabled。谨慎使用cse.isolation.timeout.enabled=true。因为系统处理链都是异步执行，中间处理链的返回，会导致后面处理链的逻辑处理效果丢失。尽可能将cse.isolation.timeout.enabled保持默认值false，并且正确设置网络层超时时间cse.request.timeout=30000。
如果在开发阶段不能确定appId和微服务名，那么就不能采用静态注册契约的方式了。框架提供了在运行阶段动态注册契约的方式，服务端和调用端使用方式如下。服务端将契约文件置于src/main/resources目录下的任意文件夹下，如schemas文件夹。然后创建BootListener接口的实现类，在该类的onBootEvent方法中监听EventType.BEFORE_PRODUCER_PROVIDER事件，并注册契约，保证在进行服务注册时能够拥有契约并上传到服务中心，代码如下。importcom.huawei.paas.cse.core.BootListener;importcom.huawei.paas.cse.core.definition.loader.DynamicSchemaLoader;@ComponentpublicclassSchemaRegisterListenerimplementsBootListener{privatestaticfinalLoggerLOGGER=LoggerFactory.getLogger(SchemaRegisterListener.class);@OverridepublicvoidonBootEvent(BootEventevent){if(event.getEventType()==EventType.BEFORE_PRODUCER_PROVIDER){try{//动态注册schemas目录下面的契约到当前服务DynamicSchemaLoader.INSTANCE.registerSchemas("classpath*:schemas/*.yaml");}catch(Exceptione){LOGGER.error("registerschemafailed,exception:{}",e);}}}}另外需要将该类初始化为Springbean，可通过在类上面打上@Component的方式实现，并将该类置于配置的base-package路径下，也可直接通过springxml文件的方式初始化为bean。框架在运行阶段会自动调用该类的onBootEvent方法注册契约。调用端调用端需要在进行服务调用之前的任意时刻注册契约，代码如下。//动态注册契约到appService服务中DynamicSchemaLoader.INSTANCE.registerSchemas("appService","classpath*:schemas/*.yaml");说明：如果要调用的服务是需要跨app的，那么在注册契约时需要指定全名“appId:appService”进行注册。
Rest网络通道将服务以标准RESTful的形式向外发布，调用端兼容直接使用httpclient使用标准RESTful形式进行调用。Rest网络通道提供了两种模式：vertx和servlet，分别对应两种部署运行模式，用户可根据自己的运行模式来选择Rest网络通道。
RestonVertx网络通道对应的依赖包如下。使用RestonVertx通道需要如下配置项：服务供给端进程需要配置cse.rest.address，向外暴露服务。服务消费端进程如果仅仅作为消费端则可不配置cse.rest.address项。
RestonServlet网络通道对应的依赖包如下：使用RestonServlet通道需要如下配置项：
参数当前Rest通道的body参数只支持application/json序列化方式。如果需要向服务端发送form类型参数，那么需要在调用端构造好application/json格式的body数据，如{"a":3,"b":4}，不能直接通过multipart/form-data格式传递form类型参数，服务端无法解析。返回值当前Rest通道的返回值支持application/json和text/plain两种序列化方式。服务供给端通过produces声明可提供的序列化能力，调用端通过请求的Accept头指明返回值序列化方式，默认返回application/json格式数据。
本文档详细的描述了微服务框架开发指南。
本文档主要适用于使用微服务框架进行应用开发的技术人员。
在本文中可能出现下列标志，它们所代表的含义如下。
微服务框架提供了三种契约配置方式。静态注册：将契约文件置于指定的文件夹下，框架会自行加载契约。动态注册：在运行阶段动态注册契约。从服务中心拉取（尚未实现）：调用端在进行服务调用时如果没有契约，会自动从服务中心拉取。
本节主要介绍JAXRS的服务端的开发。
根据开发之前定义好的契约来编写Java业务接口，示例代码如下。该接口需要与契约中指定的x-java-interface路径保持一致。
使用JAX-RS标注进行业务代码的开发，HelloWorld服务的实现如下。
首先通过在服务实现类上面打上@RestSchema标注，写明schemaId，即表示该实现作为当前微服务的一个schema进行发布，如下所示。然后在resources/META-INF/spring目录下创建hello.bean.xml文件，命名规则为*.bean.xml，配置spring进行服务扫描的base-package，如下。如果不按照上述命名规则及目录存放，则需要显示注明这些spring配置文件的加载路径。
微服务框架当前提供了两种部署运行模式：standalone模式和web容器模式。推荐使用standalone模式拉起服务进程。
调用性能统计模块用于在运行日志中输出请求的执行时间和系统吞吐量等信息，让开发者能够看到系统的性能状况。
调用性能统计模块对应的Pom软件包如下所示。
调用性能统计配置项如下所示。
本节主要介绍透明RPC的服务消费端开发。
消费端在进行服务调用之前需要对服务的调用进行声明。当前提供了springxml和注解两种方式。springxmlspringxml使用spring配置进行调用声明，在文件META-INF/spring/hello.bean.xml中声明如下：&lt;?xmlversion="1.0"encoding="UTF-8"?&gt;&lt;beansxmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:p="http://www.springframework.org/schema/p"xmlns:util="http://www.springframework.org/schema/util"xmlns:cse="http://www.huawei.com/schema/paas/cse/rpc"xsi:schemaLocation="http://www.springframework.org/schema/beansclasspath:org/springframework/beans/factory/xml/spring-beans-3.0.xsdhttp://www.huawei.com/schema/paas/cse/rpcclasspath:META-INF/spring/spring-paas-cse-rpc.xsd"&gt;&lt;cse:rpc-referenceid="helloworld"schema-id="helloworld"microservice-name="helloServer"&gt;&lt;/cse:rpc-reference&gt;&lt;/beans&gt;然后在消费端代码中使用HelloWorldhello=BeanUtils.getBean("helloworld")进行服务引用对象的获取。说明：不要每次调用都去getBean，spring的getBean内部有一个必然加锁的调用，会影响并发度，getBean得到的实例可以全局只存一份。RpcReference注解通过在消费对象的属性上打上@RpcReference标注来进行服务调用的声明，该属性会自动被实例化，如下：importcom.huawei.paas.cse.provider.pojo.RpcReference;@ComponentpublicclassConsumer{@RpcReference(microserviceName="helloServer")privateHelloWorldhello;...}说明：消费对象上面必须打上@Component标注，Spring会自动化将其实例化为bean.
调用端在加载完日志配置、sdk配置之后，就可以对服务进行远程调用了。实际调用和本地通过接口调用完全一样，如下所示：
平台默认提供的处理链如表3-1所示。
可以通过如下配置控制Provider和Consumer使用的处理链。Provider:cse.handler.chain.Provider.default=bizkeeper-provider,tracing-provider,sla-providerConsumer:cse.handler.chain.Consumer.default=loadbalance,bizkeeper-consumer,tracing-consumer,sla-consumer给不同的微服务指定不一样的处理链。cse.handler.chain.Consumer.service.[MicroServiceName]=loadbalance,bizkeeper-consumer,tracing-consumer,sla-consumer
处理链的顺序不同，系统工作行为也不同。下面列举一下常见问题。loadbalance和bizkeeper-consumer这两个顺序可以随机组合。但是行为是不一样的。当loadbalance在前面的时候，那么loadbalance提供的重试功能会在bizkeeper-consumer抛出异常时发生，比如超时等。如果已经做了fallbackpolicy配置，比如returnnull，那么loadbalance则不会重试。如果loadbalance在后面，那么loadbalance的重试会延长超时时间，即使重试成功，如果bizkeeper-consumer设置的超时时间不够，那么最终的调用结果也是失败。tracing-consumer,sla-consumer,tracing-provider,sla-provider这些调用链建议放到调用链的最开始位置，保证成功、失败的情况都可以记录日志（由于记录日志需要IP等信息，对于消费者，只能放到loadbalance后面）。如果不需要记录客户端返回的异常，则可以放到末尾，只关注网络层返回的错误。但是如果bizkeeper-consumer等超时提前返回的话，则可能不会记录日志。建议的顺序Consumer:loadbalance,tracing-consumer,sla-consumer,bizkeeper-consumerProvider:tracing-provider,sla-provider,bizkeeper-provider这种顺序能够满足大多数场景，并且不容易出现不可理解的错误。
可以通过实现AbstractHandler来扩展处理链。具体包含如下几个步骤：实现AbstractHandlerpublicclassMyHandlerextendsAbstractHandler{@Overridepublicvoidhandle(Invocationinvocation,AsyncResponseasyncResp)throwsException{//codebeforeinvocation.next(response-&gt;{//codeafterasyncResp.handle(response);});}}给处理链增加一个名字增加config/cse.handler.xml文件，内容如下。&lt;config&gt;&lt;handlerid="myhandler"class="xxx.xxx.xxx.MyHandler"/&gt;&lt;/config&gt;在microservices.ymal文件指定需要使用该处理链。cse:handler:chain:Provider:default:bizkeeper-provider,tracing-provider,sla-provider,perf-stats,myhandler处理链的顺序和上面定义的顺序有关，注意加到一个合适的位置。
本节主要介绍JAX-RS的服务消费端开发。当前尚未实现JAX-RS的服务消费端开发，可任意选用以下两种方法。，通过接口进行服务调用。，通过RestTemplate进行服务调用。
本节从微服务的服务服务端和消费端说明如何使用SpringMVC开发模式进行业务开发。本节主要介绍SpringMVC的服务端开发。本节主要介绍SpringMVC的服务消费端开发。
微服务名支持数字、大小写字母和"-"、"_"、"."三个特殊字符，但是不能以特殊字符作为首尾字符，命名规范为：^[a-zA-Z0-9]+$|^[a-zA-Z0-9][a-zA-Z0-9_\-.]*[a-zA-Z0-9]$。
微服务框架提供了三种业务开发模式供开发选择，包括透明RPC，SpringMVC，JAX-RS。本节从微服务的服务端和消费端说明如何使用JAX-RS开发模式进行业务开发。。本节从微服务的服务服务端和消费端说明如何使用SpringMVC开发模式进行业务开发。本节分别从微服务的服务端和消费端说明如何使用透明RPC开发模式进行业务开发。本节从微服务服务端和消费端说明CodeFirst开发模式进行业务开发。
通过microservice.yaml文件配置代码如下所示。
通过实现com.huawei.paas.cse.serviceregistry.api.PropertyExtended接口，业务可创建自己的Properties扩展类。在services.yaml里添加propertyExtendedClass配置项，写明业务自己实现的扩展类的路径，如下所示。当接口返回的key值和配置文件的key值存在重复的时候，会覆盖配置文件的值。初次注册服务时，会将服务的元数据一起注册到服务中心，之后如果要修改服务元数据，需要连同服务version一起变更。如果想在服务version不变的情况下更新元数据，需要通过服务管理中心统一变更。默认情况下，微服务只支持同一个app内部的服务调用。可在微服务的properties中配置allowCrossApp=true属性，开启可被跨app访问权限。
微服务常用属性定义如所示。
在进行应用开发之前，需要为微服务定义契约，用于服务端和消费端的解耦。服务端围绕契约进行服务的实现，消费端根据契约进行服务的调用，支持服务端和消费端采用不同的编程语言实现。使用yaml文件格式定义服务契约，推荐使用SwaggerEditor工具来编写契约，可检查语法格式及自动生成API文档。简单定义的HelloWorld服务的契约如下示例。根据下面契约描述，可通过/helloworld/sayhello?name=xxx调用HelloWrold接口的sayHello方法。详细契约文件格式请参考OpenAPI官方文档：https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md。根据swagger标准，basePath配置的路径需要包括webserver的webroot。
SDK提供了多种不同的路由策略，用户开发应用时通过配置即可方便使用。但实际使用中，对于某些特定的应用场景，当以上提供的几种路由策略不能满足用户使用时，用户可以在SDK提供的路由策略的框架下根据业务需要通过编程的方式来开发满足需要的路由策略。
实现接口com.netflix.loadbalancer.IRule中定义的接口方法。路由选择逻辑在publicServerchoose(Objectkey)方法中实现。LoadBalancerStats是一个封装了负载均衡器当前运行状态的一个结构。通过获取stats中各个实例的运行指标，在choose方法中，判定将当前请求路由到那个实例上进行处理。处理风格可以参照com.huawei.paas.cse.loadbalance.SessionStickinessRule。编译开发的策略，保证生成的class在classpath下。通过SDK配置该路由策略，假如是AbcRule。则配置如下。cse.loadbalance.NFLoadBalancerRuleClassName=com.huawei.cse.ribbon.rule.AbcRule
开发者可以通过多种形式指定微服务信息，微服务的详细内容可以参考《微服务设计和接口基线》。
本节介绍SpringMVC开发模式当前支持org.springframework.web.bind.annotation包下的注解。
SpringMVC开发模式当前支持org.springframework.web.bind.annotation包下的注解如所示，所有注解的使用方法参考SpringMVC官方文档：。当方法参数没有注解，且不为HttpServletRequest类型参数时，默认为RequestParam类型参数，参数名为契约中对应的参数名。
本节主要介绍透明RPC的服务端开发。
根据开发之前定义好的契约来编写Java业务接口，示例代码如下。该接口需要与契约中指定的x-java-interface路径保持一致，可通过工具根据契约自动化生成。
创建接口实现类HelloWorldImpl.java，根据需求编写业务代码，内容如下：
透明RPC开发模式支持通过springxml声明和注解两种服务发布方式。springxml在resources目录下创建"META-INF/spring/hello.bean.xml"文件，内容如下。&lt;?xmlversion="1.0"encoding="UTF-8"?&gt;&lt;beansxmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:p="http://www.springframework.org/schema/p"xmlns:util="http://www.springframework.org/schema/util"xmlns:cse="http://www.huawei.com/schema/paas/cse/rpc"xsi:schemaLocation="http://www.springframework.org/schema/beansclasspath:org/springframework/beans/factory/xml/spring-beans-3.0.xsdhttp://www.huawei.com/schema/paas/cse/rpcclasspath:META-INF/spring/spring-paas-cse-rpc.xsd"&gt;&lt;cse:rpc-schemaschema-id="helloworld"implementation="com.huawei.paas.cse.helloworld.server.HelloWorldImpl"&gt;&lt;/cse:rpc-schema&gt;&lt;/beans&gt;说明：每个服务接口一个schema声明。注解importcom.huawei.paas.cse.provider.pojo.RpcSchema;@RpcSchema(schemaId="helloworld")publicclassHelloWorldImplimplementsHelloWorld{...}在resources目录下创建META-INF/spring/hello.bean.xml,内容如下。&lt;?xmlversion="1.0"encoding="UTF-8"?&gt;&lt;beansxmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:context="http://www.springframework.org/schema/context"xsi:schemaLocation="http://www.springframework.org/schema/beansclasspath:org/springframework/beans/factory/xml/spring-beans-3.0.xsdhttp://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;&lt;context:component-scanbase-package="com.huawei.paas.cse.helloworld.server"/&gt;&lt;/beans&gt;说明：这里的base-package指定的包应该包含之前的业务实现类路径。
本节介绍开发过程依赖包的配置，请根据实际开发模式选择。使用dependencyManagement来进行依赖包版本的管理，通过修改version字段来使用相应版本的依赖包。依赖包中包括三类：transport、provider、handler，分别用于引入网络通道、开发模式、治理链依赖包。其中transport和provider为必选，服务端需要增加一个loadbalancehandler必选项。在Pom文件中增加如下内容：详细的依赖包说明请参见。
本节介绍SDK的配置。
在src/main/resources目录下面创建microservice.yaml文件，用于存放SDK配置信息。服务端配置服务中心地址，网络通道地址，以及处理链信息，内容如下。APPLICATION_ID:helloTestservice_description:name:helloServerversion:0.0.1cse:service:registry:address:http://127.0.0.1:9980rest:address:0.0.0.0:8080handler:chain:Provider:default:perf-stats消费端配置服务中心地址，网络通道地址，以及处理链信息，内容如下。APPLICATION_ID:helloTestservice_description:name:helloClientversion:0.0.1cse:service:registry:address:http://127.0.0.1:9980handler:chain:Consumer:default:loadbalance,perf-statsreferences:helloServer:version-rule:0.0.1transport:restreferences用于为服务调用指定特定的version和通道，下面可以配置多个微服务，每个微服务都有自己的version-rule、transport，未配置的微服务，version-rule默认为latest，transport默认使用所有可用的transport。这里的version-rule支持模糊匹配，例如0.1+。
Highway通道是高性能私有协议通道，在有特殊性能需求场景时可选用。
Highway通道对应的依赖包如下。
Highway通道需要的配置项如下：
本节介绍JAX-RS开发模式微服务当前版本支持的注解。
JAX-RS开发模式当前支持的注解如所示，所有注解的使用方法参考。当方法参数没有注解，且不为HttpServletRequest类型参数时，默认为body类型参数，一个方法只支持最多一个body类型参数。打在参数上面的注解建议显示定义出value值，否则将直接使用契约中的参数名，例如应该使用@QueryParam("name")Stringname，而不是@QueryParamStringname。
从服务中心下载或是通过线下手段，得到Producer的契约，通过契约生成相应的数据类型及接口，然后正常开发consumer逻辑。
本节主要介绍微服务从环境中获取的变量信息。微服务应用从环境中获取变量列表如所示。
本节主要介绍SpringMVC的服务端开发。
根据开发之前定义好的契约来编写Java业务接口，示例代码如下。该接口需要与契约中指定的x-java-interface路径保持一致，可通过工具根据契约自动化生成。
使用SpringMVC标注进行业务代码的开发，HelloWorld服务的实现如下。
首先通过在服务实现类上面打上@RestSchema标注，写明schemaId，即表示该实现作为当前微服务的一个schema进行发布，代码如下所示：然后在resources/META-INF/spring目录下创建hello.bean.xml文件，命名规则为*.bean.xml，配置spring进行服务扫描的base-package，如下。如果不按照上述命名规则及目录存放，则需要显示注明这些spring配置文件的加载路径。
实例的元数据也是通过中的两种方式进行配置，需要将service_description改为instance_description，如下所示。
实例元数据当前不支持通过配置动态修改，只支持通过直接调用接口与服务中心交互进行修改。JAVA接口可在业务代码中通过调用封装好的Java接口对实例properties进行修改，使用如下代码进行调用。Map&lt;String,String&gt;properties=newHashMap&lt;&gt;();properties.put("key0","value0");StringserviceId=RegistryUtils.getMicroservice().getServiceId();StringinstanceId=RegistryUtils.getMicroserviceInstance().getInstanceId();ServiceRegistryClientclient=RegistryClientFactory.getRegistryClient();booleansuccess=client.updateInstanceProperties(serviceId,instanceId,properties);RESTAPI可以直接调用服务中心的RESTAPI进行实例properties的修改。在调用api时每次访问均需要携带header：{"X-Tenant-Name":"default"}。首先使用GET操作访问http://127.0.0.1:9980/registry/v3/microservices，查询serviceId。然后使用GET操作访问http://127.0.0.1:9980/registry/v3/microservices/{serviceId}/instances，另外需携带header：{"X-ConsumerId":{serviceId}}，查询instanceId。最后再使用PUT操作访问http://127.0.0.1:9980/registry/v3/microservices/{serviceId}/instances/{instanceId}/properties，body参数格式如下：{"properties":{"tag1":"value1","tag0":"value0"}}。
无论是服务端还是消费端的实际业务开发之前都需要完成如下几项基本配置工作。依赖包引入服务契约配置日志配置SDK配置本节介绍开发过程依赖包的配置，请根据实际开发模式选择。本节介绍日志文件的配置。本节介绍SDK的配置。
框架支持根据场景返回不同的2xx状态码。首先需要在契约里面每个operation的responses部分定义好特定返回值与返回类型，以便生成文档。所有2xx状态码场景的返回值类型需要保持一致使用ContextUtils.getInvocationContext().setStatus(202)指定返回特定的状态码。如果是多线程或异步场景，使用如下方式指定：如果不使用ContextUtils设置状态码，那么服务端将返回默认的200状态码。
框架支持根据不同的异常情况返回不同状态码以及异常信息。首先需要在契约中定义好每个异常返回状态码与返回类型。然后在业务接口实现中抛出InvocationException异常，设置好状态码和异常信息，框架即可根据契约将特定异常返回给调用端。使用方法如下。
通过cse-context在框架中进行上下文数据的透传，不影响业务接口。服务端<olid="ZH-CN_TOPIC_0056814471__ol24572903192528"><liid="ZH-CN_TOPIC_0056814471__li25928142192528">业务代码中使用cse-context在业务代码中可通过ContextUtils获取到透传过来的上下文数据。Map&lt;String,Object&gt;context=ContextUtils.getInvocationContext().getContext();System.out.println(context.get("token"));handler中使用cse-contextMap&lt;String,Object&gt;context=invocation.getContext();System.out.println(context.get("token"));调用端<olid="ZH-CN_TOPIC_0056814471__ol2010460819284"><liid="ZH-CN_TOPIC_0056814471__li1734083019284">使用原生Rest客户端将所有需要透传到服务端的上下文数据打包成一个Map&lt;String,Object&gt;，然后序列化成json串之后放入到请求的header参数中，key为x-cse-context。Map&lt;String,Object&gt;context=newHashMap&lt;&gt;();context.put("token","token-abcd");#需要透传的上下文数据StringjsonContext=newObjectMapper().writeValueAsString(context);HttpHeadersheaders=newHttpHeaders();headers.add("x-cse-context",jsonContext);HttpEntity&lt;Object&gt;requestEntity=newHttpEntity&lt;&gt;(headers);ResponseEntity&lt;ResponseCls&gt;resEntity=template.exchange(url,httpmethod,requestEntity,ResponseCls.class);使用微服务客户端在下个版本中支持。
框架支持由业务自己做序列化，框架中对参数直接进行透传。首先需要在契约中给参数加上x-raw-json属性，只针对body类型参数，如下。在调用端需要业务自己对参数进行序列化为json字符串，然后进行调用，服务端的业务接口中直接收到原生json字符串，由业务自己反序列化成对象使用。
支持直接通过调用内部Java接口进行服务调用，代码如下。当前跨app调用只支持通过这种方式进行调用，不支持通过标准的编程接口模式进行访问。注意：在进行跨app的服务调用时，微服务名需要指定appId，格式如：appId:serviceName。
服务治理主要涉及“隔离”、“熔断”、“容错”、“负载均衡”等技术措施，这些技术措施共同完成了服务治理的能力。为了让开发者能够正确配置服务治理的参数，我们提供了一种技术措施上的定义。“隔离”是一种异常检测机制，常用的检测方法是请求超时、流量过大等。一般的设置参数包括超时时间、同时并发请求个数等。“熔断”是一种异常反应机制，“熔断”依赖于“隔离”。熔断通常基于错误率来实现。一般的设置参数包括统计请求的个数、错误率等。“容错”是一种异常处理机制，“容错”依赖于“熔断”。熔断以后，会调用“容错”的方法。一般的设置参数包括调用容错方法的次数等。把这些概念联系起来（配置参考)：当"隔离"措施检测到N次请求中共有M次错误的时候，"熔断"不再发送后续请求，调用"容错"处理函数。这个技术上的定义，是和NetflixHystrix一致的，通过这个定义，非常容易理解它提供的配置项，参考：https://github.com/Netflix/Hystrix/wiki/Configuration。SDK开发指南里面描述的都是技术概念，最终用户并不会用到这里的概念。系统提供的治理功能请参考治理中心的文档说明。
在灰度发布的情况下，Consumer可以通过下面的方式指定访问的服务版本号。默认情况下，只能够访问最新版本的服务，业务可以指定具体版本号。version-rule的详细规则请参考“服务中心契约”的描述。
配置分流策略可为每个微服务配置路由分流策略，通过配置中心动态更新，如下。cse:loadbalance:microserviceName:#如果为跨app访问，则配置为appId:serviceNametransactionControl:policy:com.huawei.paas.cse.loadbalance.filter.SimpleTransactionControlFilteroptions:tag0:value0说明：这里的SimpleTransactionControlFilter是由框架提供的简单路由分流策略，选中的实例的properties必须包含options中的所有tags。自定义分流策略业务可根据自己的需求实现自定义的分流策略，代码如下。importcom.huawei.paas.cse.loadbalance.filter.TransactionControlFilter;importcom.netflix.loadbalancer.Server;publicclassMyFilterextendsTransactionControlFilter{@OverridepublicList&lt;Server&gt;getFilteredListOfServers(List&lt;Server&gt;servers){......for(Serverserver:servers){CseServercseServer=(CseServer)server;Map&lt;String,String&gt;propertiesMap=cseServer.getInstance().getProperties();......}......returnnull;}}自定义的分流策略必须继承自框架提供的com.huawei.paas.cse.loadbalance.filter.TransactionControlFilter抽象类，配置到特定的微服务。cse:loadbalance:microserviceName:transactionControl:policy:com.path.to.class.MyFilter
本节主要介绍SpringMVC的服务消费端开发。
SpringMVC模式服务调用不需进行显式调用声明，直接使用RestTemplate通过自定义的URL进行调用。不过使用的RestTemplate实例需要由RestTemplateBuilder.create()进行创建。
进程在加载完日志配置和sdk配置之后，就可以对服务进行远程调用了。先通过RestTemplateBuilder创建扩展的SpringRestTemplate实例对象，再使用该对象通过自定义的URL进行服务调用，如下所示。URL格式为：cse://microserviceName/path?querystring。
微服务框架实现了两种网络通道，包括Rest和Highway，均支持TLS加密传输。
通信通道的公共配置如所示。
服务监听的地址和上报给注册中心的地址是分开的。服务监听地址由transport层cse.&lt;transport_name&gt;.address决定，服务上报给注册中心的地址由cse.service.publishAddress决定。若用户未配置cse.service.publishAddress，此时若服务监听地址为0.0.0.0，默认随机选择一个网卡上报给注册中心，若监听地址非0.0.0.0，默认上报服务监听地址。如所示。服务监听0.0.0.0时可能带来的安全风险请用户自行分析。
QPS流控用于限制每秒钟最大的请求数量。在consumer端，用于限制发往某个微服务的请求频率；在provider端，用于限制某个微服务过来的请求频率。consumer端和provider端的流控有些不同，请注意区分。provider端的流控不是安全意义上的流量控制，而是业务层面的功能。为了防止DOS攻击，需要结合其他的一些列措施。QPS流控不是绝对精确的，可能会有少量误差。
QPS配置项表如下所示。
流控是微服务级的，不是进程级的。假设调用目标微服务：ms，目标schema：s1，目标operation：op。启用流控后，如果不配置limit，QPS最高允许为2147483647。如果配置cse.flowcontrol.Consumer.qps.limit.ms为10000。调用ms，QPS最高允许为10000。启用流控后，如果配置cse.flowcontrol.Consumer.qps.limit.ms为10000，cse.flowcontrol.Consumer.qps.limit.ms.s1为20000。调用ms.s1，QPS最高允许为20000，除ms.s1以外的，对ms的调用，QPS最高允许为10000。启用流控后，如果配置cse.flowcontrol.Consumer.qps.limit.ms为10000，cse.flowcontrol.Conusmer.qps.limit.ms.s1为20000，cse.flowcontrol.Consumer.qps.limit.ms.s1.op为30000。调用ms.s1.op，QPS最高允许为30000。除ms.s1.op以外的，对ms.s1的调用，QPS最高允许为20000。除ms.s1以外的，对ms的调用，QPS最高允许为10000。
Provider流控配置比较简单，cse.flowcontrol.Provider.qps.limit.ms=1000，表示允许来自于微服务ms的请求每秒最大为1000。
本节介绍日志文件的配置。在resources目录下面创建config目录，添加log4j.hello.properties配置文件，日志配置文件命名规则为log4j.*.properties，内容如下。
本节主要介绍HttpServletRequest参数使用说明。
微服务框架支持在operation中直接使用HttpServletRequest参数，由开发者自己处理httprequest中的相关数据。该参数可用于JAX-RS和SpringMVC两种开发模式中。业务代码中通过HttpServletRequest使用到query/path/header/cookie/body五个类型的参数数据时必须在契约中将参数定义出来，否则无法在业务代码中获取到相关参数。业务接口实现如下。对应契约如下。
命名规范如下：cse.loadbalance.[MicroServiceName].[propertyname]只能配置客户端。对于全局配置，不需要指定MicroServiceName。针对特定的微服务的配置，需要增加MicroServiceName。负载均衡示例如下：.
负载均衡配置项如所示。
新增handler：grayrelease。<ulid="ZH-CN_TOPIC_0063425998__ul810251892639"><liid="ZH-CN_TOPIC_0063425998__li4320382392639">handler大体逻辑：获取灰度匹配规则。配置key：cse.grayrelease.microservice.group.policy获取Instance分组规则获取请求参数，匹配灰度规则，选定instance分组更新loadbalance的InstanceCache获取灰度匹配规则。提供GrayReleaseRatePolicyFilter实现rate方式的灰度匹配规则，提供GrayReleaseRulePolicyFilter实现契约参数匹配方式的灰度匹配规则。灰度匹配规则配置和使用支持微服务层和接口层。<ulid="ZH-CN_TOPIC_0063425998__ul2384524992738"><liid="ZH-CN_TOPIC_0063425998__li3525004092735">灰度匹配规则实现类配置的key值:cse.grayrelease.microserviceQualifiedName.GrayReleaseRuleClassNamecse.grayrelease.microservice.GrayReleaseRuleClassName取值范围：如果是选的rate规则，值为：com.huawei.paas.cse.loadbalance.RatePolicyFilterRule如果是选的策略规则，值为：com.huawei.paas.cse.loadbalance.RulePolicyFilterRule微服务规则配置：微服务层级：cse.grayrelease.microserviceName.rate.policycse.grayrelease.microserviceName.rule.policy接口层级：cse.grayrelease.microserviceName:schemaId:operation.rate.policycse.grayrelease.microserviceName:schemaId:operation.rule.policy提供AbstractGrayReleaseFilter和IGrayReleaseFilterRule，业务系统可以根据自身系统的要求，自定义灰度匹配规则灰度发布规则所作用的微服务instance范围确定<ulid="ZH-CN_TOPIC_0063425998__ul565266492822"><liid="ZH-CN_TOPIC_0063425998__li541635192822">如果分组有的配了版本，有的没有配置版本，就取该微服务所有instance如果所有分组都配置了版本，则取所有分组的版本全集。如果分组没有配置版本，instance范围由consumer的microservie.yml文件中定义的versionRule规则灰度发布分流处理逻辑<ulid="ZH-CN_TOPIC_0063425998__ul5252147892855"><liid="ZH-CN_TOPIC_0063425998__li5891072092855">如果instance的特征不属于任何instance组，则默认归入分组：graydefaultgroup。如果匹配到某个分组分流规则，流量则流向该分组。如果匹配不到分流规则，流量按照默认的versionRule规则流向这些instance。对于Rate方式的灰度分流策略，如果分组分流的概率总和小于100，则默认剩余的概率流向该分组外的instance。缓存设计<ulid="ZH-CN_TOPIC_0063425998__ul3710742092917"><liid="ZH-CN_TOPIC_0063425998__li3968701492917">新建缓存管理器InstanceVersionCacheManager，用于缓存微服务各版本的Instance信息。包括两个缓存：cacheAllMap（所有service版本的Instance缓存）和cacheVRuleMap（versionrule规则下的各service版本的Instance缓存）使用watch监听监听instance的更新变化if(!needToWatch()){return;}srClient.watch(getMicroservice().getServiceId(),(event)-&gt;{if(event.failed()){exception(event.cause());return;}MicroserviceInstanceChangedEventchangedEvent=event.result();if(isProviderInstancesChanged(changedEvent)&amp;&amp;!serviceRegistryConfig.isWatch()){return;}if(!isProviderInstancesChanged(changedEvent)&amp;&amp;!serviceRegistryConfig.isRegistryAutoDiscovery()){return;}InstanceCacheManager.INSTANCE.onInstanceUpdate(changedEvent);InstanceVersionCacheManager.INSTANCE.onInstanceUpdate(changedEvent);},open-&gt;{recover();},close-&gt;{});CacheRegistryListener监听缓存清理
微服务元数据定义。cse灰度发布管理功能使用service_description节点中version值和instance_description中tags标签作微服务分组依据。业务系统按照实际灰度发布需求，在提供方微服务microservice.xml文件中定义version和tags的值。version和tag会按照一定规则形成分组，成为灰度发布的分流对象。APPLICATION_ID:helloTestservice_description:name:helloServerversion:0.0.1instance_description:properties:tags:tag1cse:service:registry:address:http://10.21.209.138:30100rest:address:127.0.0.1:8081handler:chain:Provider:default:perf-statsconfig:client:serverUri:https://10.21.209.138:30103灰度发布规则配置<ulid="ZH-CN_TOPIC_0063426000__ul3490805010354"><liid="ZH-CN_TOPIC_0063426000__li1773716410354">定义分组规则。根据version和tags对微服务各instance分组。支持&amp;&amp;（且）和||（或）两个关系判断符。例如，定义分组规则如下：分组g1:version=0.0.1&amp;&amp;tags=tag1,tag2分组g2:version=0.0.2分组g3:tags=tag1,tag2分组g4:version=0.0.1||tags=tag1,tag2定义灰度引流规则提供了两类引流规则：[1]权重方式。配置每个分组的引流权重，流量会按照配置的百分比比率流向给对应的instance分组。例如：1.g1rate1002.g1rate503.g1rate30,g2rate70[2]自定义匹配方式定义每个分组的引流规则，例如：1.g1name=world2.g1name~wor*3.g1name=hello4.g1name~h*服务消费端增加灰度发布handler，编辑microservice.yml文件（1）cse.handler.chain.Consumer.default增加grayrelease，且要加入到loadbalance之前。（2）连接配置中心。cse.config.client.refreshMode配置成0时，表示配置由配置中心推送至该instance，则需配置推送端口cse.config.client.refreshPort；cse.config.client.refreshMode配置成1时，表示配置由该instance主动从配置中心拉取更新，则需配置更新频率cse.config.client.refresh_interval；APPLICATION_ID:helloTestservice_description:name:helloClientversion:0.0.1cse:service:registry:address:http://10.21.209.138:30100grpc:address:0.0.0.0:9190rest:address:0.0.0.0:8180highway:address:0.0.0.0:7170handler:chain:Consumer:default:grayrelease,loadbalanceconfig:client:serviceName:helloClientserverUri:http://10.21.209.138:30103tenantName:defaultrefreshMode:1refresh_interval:10000#refreshPort:30104
业务系统可自己根据系统的具体灰度发布需求自定义灰度发布实现逻辑。自定义灰度选择过滤器，继承AbstractGrayReleaseFilter类，实现其抽象方法。packagecom.huawei.paas.cse.grayrelease;/***&lt;一句话功能简述&gt;*&lt;功能详细描述&gt;*@authory00358339*@version[版本号,2017年5月27日]*@see[相关类/方法]*@since[产品/模块版本]*/publicclassXXXServiceGrayReleaseFilterextendsAbstractGrayReleaseFilter{/***灰度分流规则是否需要请求参数参与比较*/@OverrideprotectedbooleanisReqCompare(){//TODOAuto-generatedmethodstubreturnfalse;}/***对grayRules进行赋值，将灰度分流规则以List&lt;GrayReleaseRulePolicy&gt;的结构写入成员变量grayRules中*/@OverrideprotectedvoidfillGrayRules(){}/***对groupRules进行赋值，将灰度instance分组规则以List&lt;GrayReleaseGroupPolicy&gt;的结构写入成员变量groupRules中*/@OverrideprotectedvoidfillGroupRules(){}/***确定参与灰度发布的instance范围。*范围写入到成员变量instanceScope。InstanceScope.All表示所有instance；InstanceScope.VersionRule表示使用microservice.yaml中versionrule的instance范围；InstanceScope.PartVersion表示使用部分版本，在这种情况下，需要把版本号写入到成员变量versions。*/@OverrideprotectedvoiddefineInstanceScope(){intgroupRuleSize=groupRules.size();List&lt;String&gt;versions=newArrayList&lt;String&gt;();for(GrayReleaseGroupPolicyinsGroupRule:groupRules){StringruleStr=insGroupRule.getRule();Map&lt;String,Object&gt;groupRule=parseStrRule(ruleStr);List&lt;Map&lt;String,Object&gt;&gt;ruleDetailList=(List&lt;Map&lt;String,Object&gt;&gt;)groupRule.get(RULE_DETAILS_OBJECTLIST_NAME);StringversionValue=DEFAULT_MICROSERVICE_VERSION;for(Map&lt;String,Object&gt;ruleDetail:ruleDetailList){if(INSTANCE_GROUP_VERSION_KEY.equals(ruleDetail.get(RULE_DETAILS_NAME_KEY))){versionValue=ruleDetail.get(RULE_DETAILS_VALUE_KEY)==null?DEFAULT_MICROSERVICE_VERSION:(String)ruleDetail.get(RULE_DETAILS_VALUE_KEY);}}if(!DEFAULT_MICROSERVICE_VERSION.equals(versionValue)){versions.add(versionValue);}}intversionRuleCount=versions.size();if(versionRuleCount==0){setInstanceScope(InstanceScope.VersionRule);}elseif(versionRuleCount&lt;groupRuleSize){setInstanceScope(InstanceScope.All);}elseif(versionRuleCount==groupRuleSize){setInstanceScope(InstanceScope.PartVersion);setVersions(versions);}}/***根据灰度分流规则匹配得出groupName，返回groupName*如果需要请求参数来作匹配，从成员变量reqParams中即可获取请求参数*/@OverrideprotectedStringgrayChooseForGroupIdByRules(){returnnull;}/***instance的group规则解析逻辑*根据group规则，输入instance的tags和version，得到groupName*/@OverrideprotectedStringgetGroupNameByGroupRule(Stringtags,Stringversion){returnnull;}}服务消费方的微服务元数据microservice.yml文件。配置cse.grayrelease.helloServer.GrayReleaseRuleClassName为自定义的实现类APPLICATION_ID:helloTestservice_description:name:helloClientversion:0.0.1cse:service:registry:address:http://10.21.209.138:30100grpc:address:0.0.0.0:9190rest:address:0.0.0.0:8180highway:address:0.0.0.0:7170handler:chain:Consumer:default:grayrelease,loadbalancegrayrelease:helloServer:GrayReleaseRuleClassName:com.huawei.paas.cse.grayrelease.csefilter.GrayReleaseRatePolicyFilter
微服务的灰度发布，只做微服务之间的灰度发布场景，满足当微服务需要进行灰度的时候的操作。在最外面的边缘服务处不在本工作的范围内。灰度发布设置发布规则有两种：按照Request中某个字段（例如Header）的值进行匹配，匹配到的流量转入指定分组的provider实例处理。按照所有流量的百分比处理，部分流量转入指定provider实例分组规则设置可以参考Linkerd的路由规则。group分组策略：versiontagrule规则：rate自定义key（根据契约）value正则表达式
数据接入服务（DataIngestionService）为处理或分析流数据的自定义应用程序构建数据流管道，主要解决云服务外的数据实时传输到云服务内的问题。数据接入服务每小时可从数十万种数据源（如IoT数据采集、日志和定位追踪事件、网站点击流、社交媒体源等）中连续捕获、传送和存储数TB数据。
分区（Partition）是DIS数据通道的基本吞吐量单位，每个Partition提供1MB/秒数据输入和2MB/秒数据输出容量。一个分区最高可支持每秒1000个PUT记录。创建通道时，将指定所需的分区数量。目前每个租户默认Partition配额范围为1～50个，租户可以根据需要配置Partition个数。
开通DIS通道，在IAM（用户认证中心）中获取账号的AK/SK。进入，获取并解压DIS的SDKJar包和样例工程。建立工程，配置用户AK/SK、通道名称、分区数量等。配置完成后运行程序即可发送数据。建立工程，配置用户AK/SK、通道名称和分区数量。配置完成后运行程序即可接收数据。
永久在线：DIS永久在线，可以进行实时数据处理。利用DIS，您可以在数据生成时连续收集数据，并对您的业务和运营关键信息及时作出反应。无限扩展：DIS数据通道的吞吐量每小时可从数MB扩展到数TB，PUT记录每秒钟可从数千次扩展到数百万。易于使用：您可以在几秒钟内创建DIS数据通道，轻松的将数据放入通道中，并构建用于数据处理的应用程序。成本低廉：DIS没有前期成本，您只需要为实际使用的资源付费即可。并行处理：DIS可让您用多个应用程序同时处理同一个数据通道。例如，您可以让一个应用程序运行实时分析，让其他应用程序从同一个DIS数据通道中将数据发送至OBS。安全可靠：DIS可将数据保留24小时或168小时，以防数据在应用程序故障、个别机器故障或设施故障时丢失。
DIS对于从数据生产者快速移出数据，然后进行持续处理非常有用。以下是使用DIS的典型情景：加速日志和数据传送获取：您无需等待批量处理数据，而是让数据生产者在生成数据后立即输入DIS数据通道，防止因数据生产者出现故障导致的数据损失。例如，系统和应用程序日志可以持续添加到数据通道并可在数秒内进行处理。实时指标和报告：您可以实时从DIS数据通道数据提取指标并生成报告。例如，您的DIS应用程序可以处理系统和应用程序日志的指标和报告，因为数据被流入而不是等待收到批量数据。实时数据分析：通过DIS，您可以运行实时通道数据分析。例如，您可以通过单击通道将其添加到DIS数据通道中，并让您的DIS应用程序实时运行分析，从而在数分钟内从数据中获得重要见解，而无需数小时或数天时间。复杂的数据通道处理：您可以创建DIS应用程序和数据通道的DirectedAcyclicGraphs（DAG）。在这一情景中，一个或多个DIS应用程序可将数据添加到一个DIS数据通道进行进一步处理，以便于进行通道处理器的后续阶段。
服务控制面<ulid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_ul54674917"><liid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_li22312206">完成服务的开通、删除、配置操作，并将用户信息同步到数据面。完成数据面资源的申请与自动部署。服务数据面<ulid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_ul25253189"><liid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_li25952117">接收用户发送的请求，对已鉴权的数据接收并存储。接收用户获取数据的请求，在鉴权后输出对应的用户数据。按时老化存储在系统中的用户数据。根据用户配置，将用户数据存储到OBS。服务维护<ulid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_ul15674164"><liid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_li6849756">负责服务的安装、升级。负责服务的配置、巡检、日志收集与分析、运行监控。负责服务工单处理。用户SDK<ulid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_ul45420240"><liid="ZH-CN_TOPIC_0065509538__zh-cn_topic_0065281551_li6128980">提供Java接口，供用户上传与下载数据。提供数据加密功能。
开通实例时需要选择“输出类型”，选择“无”表示DIS存储，选择“OBS”表示存储在DIS中，并周期性导入OBS。两者具体区别如所示。
用户开通实例方式请参见《用户指南》中“开通实例”章节。
A-E
F<h5>分区</h5><p>分区（Partition）是DIS数据流的基本吞吐量单位，每个Partition提供1MB/秒数据输入和2MB/秒数据输出容量。一个分区最高可支持每秒1000个PUT记录。创建数据流时，您将指定所需的分区数量。</p><h5>分区键</h5><p>分区键用于隔离和路由记录到不同的数据流分区。分区键由您的数据生产者在添加数据到DIS数据流时指定。例如，假定您的数据流具有两个分区（分区1和分区2）。您可以将数据创建器配置为使用两个分区键（键A和键B），以将所有带键A的记录输入分区1，同时将所有带键B的记录输入分区2。</p>J<h5>记录</h5><p>记录（Record）是存储在DIS流中的数据单元。记录由序列号、分区键和数据块组成。数据块是您的数据生产者添加到数据流的重要数据。数据块的最大尺寸是1MB。</p>
J
P-T
U-Z
参见
分区（Partition）是DIS数据流的基本吞吐量单位，每个Partition提供1MB/秒数据输入和2MB/秒数据输出容量。一个分区最高可支持每秒1000个PUT记录。创建数据流时，您将指定所需的分区数量。
分区键用于隔离和路由记录到不同的数据流分区。分区键由您的数据生产者在添加数据到DIS数据流时指定。例如，假定您的数据流具有两个分区（分区1和分区2）。您可以将数据创建器配置为使用两个分区键（键A和键B），以将所有带键A的记录输入分区1，同时将所有带键B的记录输入分区2。
记录（Record）是存储在DIS流中的数据单元。记录由序列号、分区键和数据块组成。数据块是您的数据生产者添加到数据流的重要数据。数据块的最大尺寸是1MB。
记录（Record）是存储在DIS流中的数据单元。记录由序列号、分区键和数据块组成。数据块是您的数据生产者添加到数据流的重要数据。数据块的最大尺寸是1MB。
主要用于解决云服务外的数据实时传输到云服务内的问题。通过DIS，可以构建用于处理或分析流数据的自定义应用程序，以满足特定需求。
序列号是每个记录的唯一标识符。序列号由DIS在数据生产者调用PutRecord操作以添加数据到DIS数据流时分配。同一分区键的序列号通常会随时间变化增加。PutRecord或PutRecords请求之间的时间段越长，序列号越大。
支持。DMS创建队列时，可以选择“普通队列”和“有序队列”。有序队列适用于对顺序要求较高的场景，严格按照接收消息的顺序消费消息；普通队列适用于需要高并发度的场景，由于采用分布式设计，不能保证完全按照接收消息的顺序消费消息。
是的。分布式消息服务会在多台服务器上存储消息的副本，以实现冗余和高可用性。在极少数情况下，当您接收或删除消息时，存储消息副本的服务器之一可能不可用。如果出现这种情况，则该不可用服务器上的消息副本将不会被删除，并且您在接收消息时可能会再次获得该消息副本。这被称为“至少一次”交付。因此，您必须将您的应用程序设计为幂等的应用程序（即，如果您的应用程序多次处理同一条消息，则不得受到不利影响）。
保存72小时，超过72小时的消息会被删除。
每条消息的大小不超过512KB（包括消息体和消息属性）。
不能保证消息不重，但是在绝大部分情况下，消息是不重复的，在网络异常情况下，会出现消息重复。
分布式消息服务提供了安全可靠的身份验证机制，确保消息队列受到保护，防止遭到未经授权的访问。
每个用户默认最多可以创建五个队列，如果您想创建更多队列，请联系客服申请增加配额。
每个队列最多可以创建三个消费组，且消费组数量无法扩充配额。
一个队列中的消息存储在多个不同的分区，多分区设计提升了消费并发度，最大可同时处理同一个消费组的多个消费请求。为了性能考虑，每个消费请求只能消费一个分区中的消息，避免跨多个分区缓存管理和访问带来性能损失，当消息数量较少时，单个分区的消息数量可能小于指定的消费消息数量，这样单次消费请求返回的消息数会少于指定的消费消息数量，但是多次消费请求会自动负载均衡到不同的分区，所有分区的消息最终都将被消费。
为了保证消息的可靠性。消息发送和消费过程中的可靠性必须由DMS服务、生产者和消费者协同工作才能保证，只有当消费者确认该消息消费成功后，DMS才认为消息消费成功。在消费者消费消息M期间，消息M仍然停留在队列中，但消息M从被消费开始的30秒内不能被该消费组再次消费，若在这30秒内没有被消费者确认消费完成，则DMS认为消息M未消费成功，将可以被继续消费。只有使用API的时候才需要确认消息，使用Console控制台的时候不需要。
当租户余额小于100人民币时，无法创建队列，如需继续使用分布式消息服务，请为帐户充值。
A-E
F-J
W<h5>web控制台</h5><p>web控制台提供消息服务的所有功能，租户可以在web页面上创建消息队列，并进行消息收发动作。Web页面上进行消息的操作常用于测试目的。实际业务调用通常使用消息访问API而不是控制台。Web控制台部署在DMZ区，对租户可见。</p>X<h5>消息</h5><p>消息队列中信息传递的载体，以Json格式存在，目前消息负载最大限制为512KB。可以发送或消费一条消息，也可以批量发送或消费，目前批量的条数限制为10条。</p><h5>消息保留时间</h5><p>消息队列的消息均有一定的存储期，超过保留期限没有消费即被删除。租户业务应该在有效期内尽可能及时消费消息。</p><h5>消息队列</h5><p>用于接收消息并以文件的方式顺序存储，一个队列的消息可以同时被多个消费者消费。</p><h5>消息访问API</h5><p>消息访问API是业务使用消息服务的主要接口，基于RESTful接口，用户需认证才能访问，可以在业务逻辑里直接调用使用。消息访问API在DMZ区对租户可见。</p><h5>消息生产者</h5><p>发送消息的客户端，通过调用消息服务的发送接口发送消息到指定的消息队列中。</p><h5>消息属性</h5><p>每条消息均可以定义消息属性，由属性名及属性值组成，并随消息一起被发送和消费。可以运用消息属性来进行消息的识别、分类和过滤等功能来满足某些特殊的业务场景。</p><h5>消息消费者</h5><p>消费消息的客户端，通过调用消息服务的消费接口从队列中读取消息，消息消费确认后从队列中被自动删除。同一个消费组下可以有多个消费客户端进行并行消费，每个消费者消费同一个队列里的不同消息。</p><h5>消息消费组</h5><p>消息消费组区分了不同的消费客户端，同一个消息队列的消息可以同时被多个消费组消费，实现1对1或1对多的消息模式。</p>
X
参见
分布式消息服务（DistributedMessageService）是一项基于高可用分布式集群技术的消息中间件服务，具有大规模、高可靠、高并发访问、可扩展且完全托管的特点。使云应用程序的组件去耦合，具有很高的成本效益。
web控制台提供消息服务的所有功能，租户可以在web页面上创建消息队列，并进行消息收发动作。Web页面上进行消息的操作常用于测试目的。实际业务调用通常使用消息访问API而不是控制台。Web控制台部署在DMZ区，对租户可见。
消息队列中信息传递的载体，以Json格式存在，目前消息负载最大限制为512KB。可以发送或消费一条消息，也可以批量发送或消费，目前批量的条数限制为10条。
消息队列的消息均有一定的存储期，超过保留期限没有消费即被删除。租户业务应该在有效期内尽可能及时消费消息。
用于接收消息并以文件的方式顺序存储，一个队列的消息可以同时被多个消费者消费。
消息访问API是业务使用消息服务的主要接口，基于RESTful接口，用户需认证才能访问，可以在业务逻辑里直接调用使用。消息访问API在DMZ区对租户可见。
发送消息的客户端，通过调用消息服务的发送接口发送消息到指定的消息队列中。
每条消息均可以定义消息属性，由属性名及属性值组成，并随消息一起被发送和消费。可以运用消息属性来进行消息的识别、分类和过滤等功能来满足某些特殊的业务场景。
消费消息的客户端，通过调用消息服务的消费接口从队列中读取消息，消息消费确认后从队列中被自动删除。同一个消费组下可以有多个消费客户端进行并行消费，每个消费者消费同一个队列里的不同消息。
消息消费组区分了不同的消费客户端，同一个消息队列的消息可以同时被多个消费组消费，实现1对1或1对多的消息模式。
消息队列中信息传递的载体，以Json格式存在，目前消息负载最大限制为512KB。可以发送或消费一条消息，也可以批量发送或消费，目前批量的条数限制为10条。
消息队列的消息均有一定的存储期，超过保留期限没有消费即被删除。租户业务应该在有效期内尽可能及时消费消息。
用于接收消息并以文件的方式顺序存储，一个队列的消息可以同时被多个消费者消费。
消息访问API是业务使用消息服务的主要接口，基于RESTful接口，用户需认证才能访问，可以在业务逻辑里直接调用使用。消息访问API在DMZ区对租户可见。
发送消息的客户端，通过调用消息服务的发送接口发送消息到指定的消息队列中。
每条消息均可以定义消息属性，由属性名及属性值组成，并随消息一起被发送和消费。可以运用消息属性来进行消息的识别、分类和过滤等功能来满足某些特殊的业务场景。
消费消息的客户端，通过调用消息服务的消费接口从队列中读取消息，消息消费确认后从队列中被自动删除。同一个消费组下可以有多个消费客户端进行并行消费，每个消费者消费同一个队列里的不同消息。
消息消费组区分了不同的消费客户端，同一个消息队列的消息可以同时被多个消费组消费，实现1对1或1对多的消息模式。
不收费。
默认情况下，一个用户支持创建50个公网域名、500个记录集和50个反向解析。如果配额不满足实际需求，可以联系客服人员申请扩容。
域名、记录集和反向解析创建完成后，当前暂不支持对其进行修改。
创建域名提示“域名已经被其他帐号创建”，说明该域名已经在华为云上被其他用户创建过了。域名购买凭证购买域名成功的邮件域名所有者证明等
用户在创建域名时输入的Email，是域名管理员的邮箱，用于接收该域名的错误信息和问题报告。您可以使用常用的邮箱地址作为管理员邮箱，但是，RFC2142强烈建议您优先使用保留邮箱“HOSTMASTER@<emid="ZH-CN_TOPIC_0046899170__i6656435392531">域名”</em>作为该域名的管理员邮箱。域名创建完成后，Email信息会自动记录在该域名的SOA记录中。但是，由于“@”符号在SOA记录中有特殊的含义，因此邮箱地址中的“@”符号会被替换为“.”符号，同时，如果“@”符号前面有“.”符号，系统会自动使用转义字符“\”进行转换。更多详情，请参见RFC1035。示例：以“test.hostmaster@example.com”为例。假设用户在创建域名时输入的Email为“test.hostmaster@example.com”，那么，域名创建完成后，SOA记录中呈现的Email为“test\.hostmaster.example.com”。
支持。您可以通过使用通配符“*”作为主机名来创建泛解析记录。更多详情，请参见RFC4592。当前公有云平台支持的泛解析记录类型为A、AAAA、MX、CNAME、TXT五种类型的记录集。
域名解析时，域名解析请求会优先查找匹配的子域名。如果子域名存在，则会从子域名的配置文件中查询解析结果。如果子域名不存在，则会从上一级域名的配置文件中查询解析结果。示例：假设用户创建域名example.com，并添加A类型的解析记录集www.example.com，然后创建子域名www.example.com，但未添加A类型的解析记录集www.example.com。此时，如果访问www.example.com，解析请求会优先查找匹配子域名www.example.com。但是，由于未配置解析记录集，因此不会返回解析结果。
DataPipelineService是的一项基础服务，可以帮助用户轻松地创建和调度数据管道任务。DataPipelineService集成了多种华为云基础服务，可以帮助用户轻松地使用和移动存放在OBS和RDS中的数据。DataPipelineService也可以帮助用户轻松地创建和调度基于华为弹性大数据服务的数据处理和分析任务。
使用DataPipelineService，用户可以通过简单的拖拽操作来定制数据管道；用户可以设置定时参数执行数据管道；用户可以定义任务成功或失败后需要执行脚本策略。DataPipelineService提供多种数据采集和处理，可以将用户从复杂的数据流编制过程中解放出来，让用户专注于数据处理逻辑而不是编程工作。
Pipeline是由一系列的activities，DataSource互相关联构成，其中activity表示对数据的处理操作，DataSource表示数据来源和存放位置。相关联的activities表示前一个activity执行完毕后，下一个activity才能开始执行。
DataSource表示数据管道操作中被处理的数据，举例来说，一个OBSdatasource表示存放在OBS中的数据，它的path属性，表示了数据的存放路径。
DPS可以调度以下服务：OBSMRSRDS
目前默认每个用户最多可以创建10个Pipeline，同时系统支持用户根据实际需求调整最大配额。
为即将到期的数据管道续费后，在“RenewalManagement”页面中显示该数据管道的到期时间为续费后的时间，可是在数据调度服务的页面中查看该数据管道的到期时间为续费前的。原因是：用户完成续费后，用户中心将会为此数据管道分配新的订单号（此处称为续订订单号），并在“续费管理”中显示续费后的有效期限。当数据管道当前的订单号过期时，用户中心将向数据调度服务系统传递此数据管道的续订订单号信息，此时数据调度服务系统将在详细信息页面中刷新该数据管道的有效期限为续费后的。由于在数据调度服务系统中，此数据管道当前的订单号还未到期，所以页面显示的是当前订单号的有效期限，即续费前的有效期限。
A-E
F-J
P-T
参见
定义对数据执行的移动/转换操作。例如，可使用“分布式复制”活动将数据从OBS导入到HDFS。
数据调度服务（DataPipelineService）允许用户快速订制数据流进行数据处理；提供多种服务之间的编排与调度能力；提供通用的数据处理算子操作；客户仅需通过GUI进行简单组装操作，就可以实现业务逻辑，减少编程工作量，降低开发成本。
逻辑上相关活动的分组，共同执行某项数据处理任务。
数据存储的地方，例如，OBS、RDS、HDFS等。
数据仓库服务为用户提供一种即开即用、安全可靠的在线数据仓库服务，可以部署任意OLAP数据分析业务，如企业数据仓库，数据集市等。
数据仓库服务可通过web管理控制台，让用户自助完成创建数据仓库与管理维护，系统可用性高：快速部署在DWS管理页面中可以方便的创建集群，即开即用。便捷管理有完善的性能监控体系和多重安全防护措施，是专业、高性能的分析型数据库管理平台。架构兼容性采用Share-nothing架构的MPP系统，支持SQL92、SQL2003标准，具备完备的事务处理能力，提供标准的JDBC、ODBC和gsql等多种客户端工具，并兼容Postgres生态。
数据仓库集群每个节点默认能够支持3.6TB或512GB的存储容量。数据仓库系统会生成索引、临时缓存文件、运行日志等内容，并占用存储容量。每个节点实际存储的数据，可能小于总存储容量。
数据仓库服务使用IAM和VPC来控制用户、集群的网络安全隔离。用户对集群的访问则采用了SSL安全连接和安全算法套件，支持双向数字证书认证。同时在每个集群中对节点的操作系统进行安全加固，仅允许合法地访问操作系统文件，提高数据安全性。
用户在管理控制台只支持创建单个集群。
服务当前支持扩容，扩容后将增加集群节点以提升计算和存储能力。
DWS支持使用JDBC或ODBC应用程序连接数据库。应用程序可以在公有云环境的弹性云服务器中，或者互联网环境连接数据库。
已安装JDK1.6或以上版本，并配置环境变量。登录DWS管理控制台，单击“连接管理”。在“下载驱动程序”区域，单击下载链接“这里”下载证书文件。配置证书以使用SSL加密连接。<oltype="a"id="zh-cn_topic_0056218063__ol22252865144519"><liid="zh-cn_topic_0056218063__li8379608144519">解压压缩包得到证书文件。证书文件建议保存在英文路径，配置证书时需要根据实际情况指定路径，否则可能提示文件不存在。打开“命令提示符”程序，执行以下两条命令，转化根证书并导入到trustStore中。opensslx509-incacert.pem-outcacert.crt.der-outformderkeytool-keystoremytruststore-aliascacert-import-filecacert.crt.der<ulid="zh-cn_topic_0056218063__ul64135710144647"><liid="zh-cn_topic_0056218063__li30490779144647">“cacert.pem”为解压后获取的根证书。“cacert.crt.der”为生成的中间文件。根据实际情况，可以填写保存到其他路径，也可以自定义文件名称。“mytruststore”为生成的可信库名称，“cacert”为别名用户，二者可以根据需要进行修改。执行以下命令转化客户端私钥。opensslpkcs12-export-outclient.pkcs12-inclient.crt-inkeyclient.key需要输入客户端私钥的密码“Gauss@MppDB”，然后输入并确认用户自定义的私钥密码例如“key123”。执行以下命令，将私钥导入到keyStore中。keytool-importkeystore-deststorepassGauss@MppDB-destkeystoreclient.jks-srckeystoreclient.pkcs12-srcstorepasskey123-srcstoretypePKCS12-alias1下载JDBC驱动，并解压得到“gsjdbc4.jar”。在应用程序的工程中，设置引用Jar包。加载驱动。支持以下两种方法加载：<ulid="zh-cn_topic_0056218063__ul38409173141159"><liid="zh-cn_topic_0056218063__li1918654141159">在代码中隐含装载：Class.forName("org.postgresql.Driver");在JVM启动时参数传递：java-Djdbc.drivers=org.postgresql.Driverjdbctest使用JDBC的数据库链接方法DriverManager.getConnection()。此方法支持以下重载：<ulid="zh-cn_topic_0056218063__ul63894597141935"><liid="zh-cn_topic_0056218063__li13909555141935">DriverManager.getConnection(Stringurl);DriverManager.getConnection(Stringurl,Propertiesinfo);DriverManager.getConnection(Stringurl,Stringuser,Stringpassword);加密连接样例代码如：执行SQL语句。<oltype="a"id="zh-cn_topic_0056218063__ol4106272914244"><liid="zh-cn_topic_0056218063__li3008150414244">创建语句对象。Statementstmt=con.createStatement();执行语句对象。intrc=stmt.executeUpdate("CREATETABLEtab1(idINTEGER,nameVARCHAR(32));");释放语句对象。stmt.close();调用方法close()关闭连接。
登录DWS管理控制台，单击“连接管理”。在“下载驱动程序”区域下载Windows版本的ODBC驱动包。解压“dws_odbc_driver_for_windows.tar.gz”，并安装“psqlodbc.msi”。在“%APPDATA%\”目录创建一个新文件夹，并命名为“postgresql”。在DWS管理控制台，单击下载链接“这里”下载证书文件。解压证书压缩包，并准备证书文件。<oltype="a"id="zh-cn_topic_0056218063__ol57153261141524"><liid="zh-cn_topic_0056218063__li32429711141526">将证书文件包中的“client.crt”、“client.key”、“client.key.cipher”、“client.key.rand”文件保存至“%APPDATA%\postgresql”目录，并且将文件名中的client改为postgres，例如“client.key”修改为“postgres.key”。将“cacert.pem”文件保存至“%APPDATA%\postgresql”目录，并更名为“root.crt”。配置连接数据源。选择“开始菜单-&gt;控制面板-&gt;管理工具-&gt;数据源(ODBC)-&gt;用户DSN-&gt;添加-&gt;PostgreSQLUnicode”，连接与各配置项如下：配置连接数据源单击“Test”验证连接正确，界面提示“Connectionsuccessful”。编写ODBC样例程序连接数据源。样例代码如：//此示例演示如何通过ODBC方式获取DWS中的数据。//DBtest.c(compilewith:libodbc.so)#include&lt;stdlib.h&gt;#include&lt;stdio.h&gt;#include&lt;sqlext.h&gt;#ifdefWIN32#include&lt;windows.h&gt;#endifSQLHENVV_OD_Env;//HandleODBCenvironmentSQLHSTMTV_OD_hstmt;//HandlestatementSQLHDBCV_OD_hdbc;//Handleconnectionchartypename[100];SQLINTEGERvalue=100;SQLINTEGERV_OD_erg,V_OD_buffer,V_OD_err,V_OD_id;intmain(intargc,char*argv[]){//1.申请环境句柄V_OD_erg=SQLAllocHandle(SQL_HANDLE_ENV,SQL_NULL_HANDLE,&amp;V_OD_Env);if((V_OD_erg!=SQL_SUCCESS)&amp;&amp;(V_OD_erg!=SQL_SUCCESS_WITH_INFO)){printf("ErrorAllocHandle\n");exit(0);}//2.设置环境属性（版本信息）SQLSetEnvAttr(V_OD_Env,SQL_ATTR_ODBC_VERSION,(void*)SQL_OV_ODBC3,0);//3.申请连接句柄V_OD_erg=SQLAllocHandle(SQL_HANDLE_DBC,V_OD_Env,&amp;V_OD_hdbc);if((V_OD_erg!=SQL_SUCCESS)&amp;&amp;(V_OD_erg!=SQL_SUCCESS_WITH_INFO)){SQLFreeHandle(SQL_HANDLE_ENV,V_OD_Env);exit(0);}//4.设置连接属性SQLSetConnectAttr(V_OD_hdbc,SQL_ATTR_AUTOCOMMIT,SQL_AUTOCOMMIT_ON,0);//5.连接数据源，其中的用户名和用户密码等信息之所以能省略，是因为在odbc.ini文件中进行了配置，若没配置需要在SQLConnect函数参数中具体写明要连接数据库的用户名和用户密码等信息。V_OD_erg=SQLConnect(V_OD_hdbc,(SQLCHAR*)"gaussdb",SQL_NTS,(SQLCHAR*)"",SQL_NTS,(SQLCHAR*)"",SQL_NTS);if((V_OD_erg!=SQL_SUCCESS)&amp;&amp;(V_OD_erg!=SQL_SUCCESS_WITH_INFO)){printf("ErrorSQLConnect%d\n",V_OD_erg);SQLFreeHandle(SQL_HANDLE_ENV,V_OD_Env);exit(0);}printf("Connected!\n");//6.设置语句属性SQLSetStmtAttr(V_OD_hstmt,SQL_ATTR_QUERY_TIMEOUT,(SQLPOINTER*)3,0);//7.申请语句句柄SQLAllocHandle(SQL_HANDLE_STMT,V_OD_hdbc,&amp;V_OD_hstmt);//8.直接执行SQL语句。SQLExecDirect(V_OD_hstmt,"droptableIFEXISTStesttable",SQL_NTS);SQLExecDirect(V_OD_hstmt,"createtabletesttable(idint)",SQL_NTS);SQLExecDirect(V_OD_hstmt,"insertintotesttablevalues(25)",SQL_NTS);//9.准备执行SQLPrepare(V_OD_hstmt,"insertintotesttablevalues(?)",SQL_NTS);//10.绑定参数SQLBindParameter(V_OD_hstmt,1,SQL_PARAM_INPUT,SQL_C_SLONG,SQL_INTEGER,0,0,&amp;value,0,NULL);//11.执行准备好的语句SQLExecute(V_OD_hstmt);SQLExecDirect(V_OD_hstmt,"selectidfromtesttable",SQL_NTS);//12.获取结果集某一列的属性SQLColAttribute(V_OD_hstmt,1,SQL_DESC_TYPE,typename,100,NULL,NULL);printf("SQLColAtrribute%s\n",typename);//13.绑定结果集SQLBindCol(V_OD_hstmt,1,SQL_C_SLONG,(SQLPOINTER)&amp;V_OD_buffer,150,(SQLLEN*)&amp;V_OD_err);//14.通过SQLFetch取结果集中数据V_OD_erg=SQLFetch(V_OD_hstmt);//15.通过SQLGetData获取并返回数据。while(V_OD_erg!=SQL_NO_DATA){SQLGetData(V_OD_hstmt,1,SQL_C_SLONG,(SQLPOINTER)&amp;V_OD_id,0,NULL);printf("SQLGetData----ID=%d\n",V_OD_id);V_OD_erg=SQLFetch(V_OD_hstmt);};printf("Done!\n");//16.断开数据源连接并释放句柄资源SQLFreeHandle(SQL_HANDLE_STMT,V_OD_hstmt);SQLDisconnect(V_OD_hdbc);SQLFreeHandle(SQL_HANDLE_DBC,V_OD_hdbc);SQLFreeHandle(SQL_HANDLE_ENV,V_OD_Env);return(0);}
登录DWS管理控制台，单击“连接管理”。在“下载驱动程序”区域下载Linux版本的ODBC驱动包“dws_odbc_driver_for_linux.tar.gz”。下载开源unixODBC代码文件。支持版本为2.3.0，下载地址：http://sourceforge.net/projects/unixodbc/files/unixODBC/2.3.0/unixODBC-2.3.0.tar.gz/download。将ODBC驱动包和代码文件上传到Linux环境，并解压到指定目录。以root用户登录Linux环境。准备unixODBC。<oltype="a"id="zh-cn_topic_0056218063__ol51532133185452"><liid="zh-cn_topic_0056218063__li56389105185454">解压unixODBC代码文件。tar-xvfunixODBC-2.3.0.tar.gz修改配置。cdunixODBC-2.3.0viconfigure将“LIB_VERSION”修改为如下内容，并保存退出。LIB_VERSION="1:0:0"编译并安装。./configure--enable-gui=nomakemakeinstall替换驱动文件。<oltype="a"id="zh-cn_topic_0056218063__ol2972802419237"><liid="zh-cn_topic_0056218063__li6653799219340">解压“dws_odbc_driver_for_linux.tar.gz”。tar-xvfdws_odbc_driver_for_linux.tar.gz将“dws_odbc_driver_for_linux.tar.gz”解压后“lib”目录下所有文件，替换到“/usr/local/lib”。将“dws_odbc_driver_for_linux.tar.gz”解压后“odbc/lib”目录下的“psqlodbcw.la”和“psqlodbcw.so”，保存到“/usr/local/lib”。执行以下命令，修改驱动文件配置。vi/usr/local/etc/odbcinst.ini将以下内容保存到配置中[DWS]Driver64=/usr/local/lib/psqlodbcw.so参数说明如下：<ulid="zh-cn_topic_0056218063__ul1960091192141"><liid="zh-cn_topic_0056218063__li61496548192141">“[DWS]”：表示驱动器名称，支持自定义。“Driver64”或“Driver”：表示驱动动态库的路径。64位系统优先查找“Driver64”配置项，如果未配置则会继续查找“Driver”。执行以下命令，修改数据源文件。vi/usr/local/etc/odbc.ini将以下内容保存到配置文件中，并退出修改。[DWSODBC]Driver=DWSServername=10.10.0.13Database=postgresUsername=dbadminPassword=Abcd@123Port=8000Sslmode=allow配置环境变量。vi~/.bashrc在配置文件中追加以下内容。exportLD_LIBRARY_PATH=/usr/local/lib/:$LD_LIBRARY_PATHexportODBCSYSINI=/usr/local/etcexportODBCINI=/usr/local/etc/odbc.ini导入环境变量。source~/.bashrc执行以下命令，开始连接。/usr/local/bin/isql-vDWSODBC界面显示以下信息表示连接成功：+---------------------------------------+|Connected!||||sql-statement||help[tablename]||quit|||+---------------------------------------+SQL&gt;
基本原因可能有以下几种：集群状态是否正常。连接命令是否正确，用户名、密码、IP地址或端口无误。安装客户端的操作系统类型、版本是否正确。安装客户端的操作是否正确。如果是在公有云环境无法连接，还需要检查以下可能导致异常的原因：ECS是否与集群在相同可用分区、VPC、子网和安全组。安全组的出入规则是否正确。如果是在互联网环境无法连接，还需要检查以下可能导致异常的原因：用户网络是否与互联网可以正常连通。用户网络防火墙策略是否限制了访问。用户网络是否需要通过代理才能访问互联网。
如果无法确定原因并解决问题，请联系公有云运维人员。联系热线：4000-955-988
检查是否用户已经没有配额创建新的数据仓库集群。
如果无法确定原因并解决问题，请联系公有云运维人员。联系热线：4000-955-988
外表支持CSV格式文件，或者文本类型的其他格式文件，二者主要不同如下：CSV<ulid="ZH-CN_TOPIC_0056806999__ul36096339105854"><liid="ZH-CN_TOPIC_0056806999__li7540506105850">由记录组成，每条记录被分隔符分隔为字段，且每条记录都有同样的字段序列。可以有效处理数据列中的换行符，但对一些特殊字符处理有欠缺。TEXT可以有效处理一些特殊字符，但无法正确处理数据列中的换行符。
DWS支持开源PostgreSQL的JDBC和ODBC驱动，也支持Redshift的JDBC和ODBC驱动，可能存在兼容性问题。
DWS的样例数据默认保存在OBS中，所有云服务用户均拥有访问权限，当前不支持管理数据的权限。如果需要访问样例数据，可以通过OBSBrowser的挂载外部桶功能，加载样例数据所在的桶“dws”，然后查看“dws_sample_database_data_files”目录访问样例数据。
B
C
D
E
G
J
K
L
M
O
P
R
S
T
W
X
Y
Z
表是由行与列组合成的。每一列被当作是一个字段。每个字段中的值代表一种类型的数据。例如，一个表可能有3个字段：姓名、城市和国家。这个表就会有3列：一列代表姓名，一列代表城市，一列代表国家。表中的每一行包含3个字段的内容，姓名字段包含姓名，城市字段包含城市，国家字段包含国家。
包含表、索引、大对象、长数据等数据的逻辑存储结构。表空间在物理数据和逻辑数据间提供了抽象的一层，为所有的数据库对象分配存储空间。表空间创建好后，创建数据库对象时可以指定该对象所属的表空间。
在多用户环境下同时执行多个事务并保证数据完整性的一个DBMS服务。并发控制是DWS提供的一种多线程管理机制，用来保证多线程环境下在数据库中执行的操作是安全的和一致的。
也称为查询迭代算子（Iterator）或查询节点（QueryTreeNode）。一个查询的执行可以分解为一个或多个查询操作符，是构成一个查询执行的最基本单位。常见的查询操作符包括表扫描（Scan），表关联（Join），表聚集（Aggregation）等。
描述将数据从来源端经过抽取（extract）、转换（transform）、加载（load）至目的端的过程。
参见
存储过程（StoredProcedure）是在大型数据库系统中，一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名称并设置参数（如果该存储过程带有参数）来执行它。
利用多个机器构成集群的架构方式，也称为集群（Cluster）系统。
参见
参见
集群部分节点无法提供服务，性能受到影响。
参见
数据库中，一段指包含一个或多个区域的数据库中的一部分。区域是数据库的最小范围，由单元调用块组成。一个或多个段组成一个表空间。
参见
参见
数据库提供的具有一定逻辑和功能的存储过程、函数，这些具备功能的存储过程、函数统称为高级包。
将数据库内存中某一时刻的数据存到磁盘的机制。数据库定期将已提交的事务数据和未提交的事务数据存到磁盘，这些数据用来和Redo日志一起在数据库重启和崩溃时恢复数据库。
DWS服务的一个基本计量单位，其中包含用户指定的计算和存储资源，并且部署DWS程序的虚拟机。
数据库的标准查询语言。它可以分为数据定义语言（DDL），数据操纵语言（DML）和数据控制语言（DCL）。
DWS最小管理单元是集群，一个集群代表了一个独立运行的数据仓库，用户可以在DWS系统中对集群的生命周期进行管理。
快照是对一个数据仓库集群的一次全量数据备份，快照存储在OBS存储空间中。
创建好的快照支持在原有规格的新集群中进行恢复，当前仅支持在新创建的集群中进行恢复。
数据仓库系统最主要的应用，专门设计用于支持复杂的分析操作，侧重对决策人员和高层管理人员的决策支持，可以根据分析人员的要求快速、灵活地进行大数据量的复杂查询处理，并且以一种直观而易懂的形式将查询结果提供给决策人员，以便准确掌握企业（公司）的经营状况，了解对象的需求，制定正确的方案。
字段的等效概念。在数据库中，表由一列或多列组成。
数据库对象集，包括逻辑结构，例如表、视图、序、存储过程、同义名、索引、集群及数据库链接。
参见
参见
数据库关系对象结构中行存的最小内存单元。一个Page大小为默认为8KB。
记录对数据库进行操作的日志，这些日志包含重新执行这些操作所需要的信息。当数据库故障时，可以利用REDO日志将数据库恢复到故障前的状态。
数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成，事务必须满足ACID原则。
数据仓库服务是一种基于公有云基础架构和平台的在线数据处理数据库，为用户提供海量数据挖掘和分析服务。
负责对数据库对象运行数据访问工作的指令集。
负责数据结构定义与数据库对象定义的语言。
数据分区是指在一个数据库实例内部，将表按照划分为多个数据互不重叠的部分（Partition）。具体的分区方式可以有：范围分区（Range），它根据元组中指定字段的取值所处的范围映射到目标存储位置。
设置或者更改数据库用户或角色权限的语句。
数据库是存储在一起的相关数据的集合，这些数据可以被访问，管理以及更新。同一视图中，数据库可以根据存储内容类型分为以下几类：数目类、全文本类、数字类及图像类。
一个数据库实例是一个进程以及它控制的数据库文件。在集群的一个物理节点上安装多个数据库实例，集群各节点上所安装的GTM、CM、CN、DN统称为实例。一个数据库实例也被称为一个逻辑节点。
数据字典是一系列只读的表，用来提供数据库的信息。这些信息包括：数据库设计信息、存储过程信息、用户权限、用户统计数据、数据库进程信息、数据库增长统计数据和数据库性能统计数据。
参见
数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。
数据库使用统计信息估算查询代价，以查找代价最小的查询计划，统计信息一般是数据库自动收集的，包括表级信息（元组数、页面数等）和列级信息（列的值域分布直方图）。
参见
无共享架构是一种分布式计算架构，这种架构中不存在集中共享CPU、存储的状态，这种架构具有非常强的扩展性。
存储数据库元信息的表，元信息包括数据库中的用户表、索引、列、函数和数据类型等。
列存表的最小存储单位。
用来定义数据的数据。主要是描述数据自身信息，包含源、大小、格式或其它数据特征。数据库字段中，元数据用于理解以及诠释数据仓库的内容。
实现事务日志的标准方法，是指对数据文件（表和索引的载体）持久化修改之前必须先持久化相应的日志。
数据仓库进入只读状态后，只能响应所有的读操作。进入只读状态的情况有很多，在创建集群快照，或者集群存储容量超过总容量90%会进入只读状态。
建议不要自行升级的内核版本和操作系统版本；不要卸载云服务器上预装的性能辅助优化软件；不要修改云服务器网卡的MAC地址。
您可以随时变更您的规格。在变更时要先关机，然后选择要变更到的目标云服务器规格，补齐差价后，重启弹性云服务器即可变更成功。用户购买弹性云服务器时，如果选择“包年/包月”并执行变更规格操作，此时，具体规格（内存和vCPU）的变更只能由小变大，不能由大变小。
您可以随时变更您的规格，由于是按需计费，所以您不需要补齐差额，只要保证您帐户上的余额大于余额受限阈值（100元）即可。变更前先关机，之后再启动弹性云服务器即可变更成功。
用户采用远程登录方式访问弹性云服务器时，使用的浏览器应满足。
通常几分钟之内即可开通成功。具体的，与该弹性云服务器的规格、配置资源（如云硬盘、弹性IP），以及当前的系统负载有关。
暂时无法提供帐户资源转移的服务。
与传统硬件服务器一样，可以部署任意业务应用，例如：邮件系统、WEB系统、ERP系统等。
可以，一台最多挂载10块云硬盘作为数据盘。特别的，对于密集存储型弹性云服务器，最多可挂载27块数据盘（包括云硬盘和本地盘）。
可以，但是我们不建议您这样操作。如果需要配置多个弹性IP，则需要您手工配置路由策略。
如果无法启动或连接，可拨打免费客服电话4000-955-988。
删除是指删除，删除时可以选择同时删除弹性IP和数据盘。如果不选择，则会保留，需要您单独删除。
包年包月的：当您支付完费用且系统扣款成功后，将自动为您开通弹性云服务器。按需的弹性云服务器：由于是先使用后付费，所以确认创建后就进入开通状态。
这是一种的中间状态。说明弹性云服务器已被正常删除，在该状态下的弹性云服务器，不能对外提供业务，将会在短时间内从系统中彻底清除。
已删除的在管理控制台的弹性云服务器列表中只会停留较短时间，系统稍后便会将其彻底清除，因此不可以用来恢复系统和数据。您可以再次购买同样规格的弹性云服务器。
在创建时，由于系统盘的创建需要少许时间，所以等系统盘创建出来后即可看到创建中的弹性云服务器。
我们有按需、包年/包月两种计费方式，您可以根据您的实际情况选择不同的计费方式。
不同类型的弹性云服务器，关机后的计费规则不同。具体如下：普通云服务器除密集存储型弹性云服务器之外的其他类型云服务器，我们称之为普通云服务器。对于此类按需付费的弹性云服务器，关机后，基础资源(包括vCPU、内存、镜像)不计费，但系统盘仍会收取容量对应的费用。如有其他绑定的产品，如云硬盘、弹性IP、带宽等，按各自产品的计费方法（“包年/包月”或“按需付费”）进行收费，具体请参见。密集存储型弹性云服务器对于此类按需付费的弹性云服务器，关机后仍然计费。如果停止计费，需删除弹性云服务器。
按需每小时计费，不足一小时以实际使用时长为准。
按需是每小时计费，先使用后付费。
暂时不支持自动退费。
用户可在充值页面自助设置余额阈值，系统会在用户购买支付时进行余额扣费检查，小于等于阈值则发送提醒。
系统会以邮件、短信形式给客户发送账户余额变动通知，包括账户余额调整、充值到账、客户在线充值等。
系统支持按“按到款开具发票”、“按账期开具发票”和“按订单开具发票”模式，您可在管理控制台的用户中心自行选择。
需要在管理控制台的“用户中心&gt;订单管理”中进行续订。
首先，我们的监控系统会在发现您的流量异常时自动启动流量清洗并建议您封闭不用的端口。同时，我们提供了防DDoS的服务（），它可以阻止您的弹性云服务器受到非法的攻击。
建议您的密码由数字、大小写字母、特殊符号组成，长度在8至26位。同时建议您从华为云的云市场中下载并安装虚拟化杀毒产品和主机安全加固产品，这样可以保证您的弹性云服务器受到更加全面的保护。
不同帐号下的内网是不通的。
由于您可以自定义网络，所以是否在一个子网，完全由您来控制。
我们提供了虚拟化防病毒（从云市场购买）、Web漏洞扫描、主机加固与防护（从云市场购买）、Anti-DDoS流量清洗、Web应用防火墙等安全产品服务；同时我们也提供了虚拟私有云服务，您可以利用安全组服务保证您网络的逻辑安全隔离。
需要在安全组中开启ICMP协议规则。
请登录管理控制台，选择“云硬盘”，申请云硬盘并绑定给云服务器。
目前弹性云服务器备份可以通过“”功能实现。登录管理控制台。选择“计算&gt;弹性云服务器”。进入云服务器列表页面。在左侧导航树中选择“云硬盘备份”。单击“创建云硬盘备份”。根据界面提示完成云硬盘备份。更多信息，请参见《云硬盘备份用户指南》。
可以。需要开启Windowsserverbackup功能。但是我们建议您使用，提高您数据的备份可靠性。Linux的云服务器也可以使用云硬盘备份服务。
公有云平台提供的Linux系统和Windows系统不需要您支付版权费用。
需要使用我们提供的操作系统或者基于我们操作系统制作的操作系统，不能自行添加或升级，操作系统可以打补丁。
Linux操作系统的用户名为root，Windows操作系统的用户名为Administrator。密码为用户创建弹性云服务器时设置的密码。
能。更换方法请参见。
Windows操作系统是桌面管理，Linux操作系统是命令行，用户如果需要可以自己设置图形管理。
FTP需要用户自己安装和配置。
可以，我们不限制。您可以安装任何类型的数据库。
支持，但是我们建议您在正式使用前，先做一下性能测试看是否能满足您的需要。
地域是一个地理区域的概念。我国地域面积广大，由于带宽的原因，不可能只建设一个数据中心为全国客户提供服务。因此，我们根据地理区域的不同将全国划分成不同的地域。选择地域时通常根据就近原则进行选择，例如您或者您的客户在北京，那么您可以选择华北服务区，这样可以减少访问服务的网络时延，提高访问速度。
暂时存在。我们会将成熟的产品服务部署在各个地域，新产品则会在部分地域做试点发布。
可以。您可以将应用的主备节点部署到不同的地域，当主节点应用出现故障，备节点应用可以继续为您的客户提供服务。
暂时没有标准的灾备方案，如果您需要，请联系我们，我们将结合您的应用场景给您做定制方案。
可以，但是不建议这种部署方式。建议将一个应用软件内的不同部件部署到同一个地域，这样不同部件之间的通信可以采用内网网络通信，既可以节省因采用公网网络通信带来的带宽费用，又可以保证不同部件之间的网络通信质量。
暂不支持。建议您在不同地域使用不同的。
暂不支持。
目前在国内，不同地域的价格是相同的，但不排除以后地域之间会有价格差异。
可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内下的其它可用分区，可用分区间通过内网访问。
同一地域下的可用分区不收费，跨地域的可用分区则需要收费。
当您的浏览器是IE9时，可能无法导入密钥对或无法使用文件注入功能，请参考如下步骤修改浏览器默认属性后重试。在浏览器主界面，单击。选择“Internet选项”。单击选择“安全”页签。单击“Internet”。如果安全级别显示为“自定义”，单击“默认级别”按钮，把设置还原为默认级别。滑动安全级别滑块，把安全级别调到“中”级别，单击“应用”按钮。选择“自定义级别”。将“对未标记为可安全执行脚本的ActiveX控件初始化并执行脚本”设置为“提示”。单击“确定”。
用户支付订单后，如果收到开通失败的短信，请致电华为云客服中心电话4000-955-988，客服会协助用户排除故障，开通云服务器。如果故障无法及时排除，用户可以选择取消订单，客服会做退费处理，将订单费用退还至用户的公有云账户。
按需付费的产品需要您帐号上至少有100元现金才能购买，请确保您帐号上的现金金额充足。
重装操作系统提供以原镜像进行系统重装的功能，不会收取额外费用。
重装操作系统只支持使用原镜像进行系统重装，不支持使用新的系统镜像。如需使用新的系统镜像，请参见。
您可以通过本FAQ解决如下问题：用户在管理控制台执行弹性云服务器相关操作后出现异常，针对管理控制台提示的异常信息，应该如何处理？用户参见《弹性云服务器接口参考》调用云服务器相关的API接口时，如果返回错误码，应该如何处理？
用户通过管理控制台执行弹性云服务器的相关操作后，弹性云服务器列表页面将显示相应操作的申请状态。通过申请状态中显示的信息，用户可以获悉当前操作请求的执行状态。如果操作请求正常执行完毕，则任务提示栏中的记录将自动清除。如果操作请求在执行过程中出现异常，则任务提示栏将返回错误码及其说明。
您可以通过中的处理建议进行下一步操作，处理相应的异常。
如果对弹性云服务器执行重启/关机操作，弹性云服务器长时间（大于30分钟）处于“正在重启”/“正在关机”状态时，建议执行强制重启/强制关机操作。登录管理控制台。选择“计算&gt;弹性云服务器”。勾选待强制重启/强制关机的弹性云服务器，并单击“重启”/“关机”。系统弹窗提示用户是否要对弹性云服务器进行重启/关机操作。勾选“强制重启”/“强制关机”，确定强制重启/强制关机弹性云服务器。单击“确定”。
用户的计算机操作系统为Windows7时，如果使用IE10或IE11浏览器通过VNC方式登录弹性云服务器，且较长时间不做任何操作，VNC登录界面会出现无响应的状况，键盘和鼠标无法正常操作，可以通过单击两次VNC页面上的“AltGr”按钮重新激活页面。
使用VNC方式登录弹性云服务器后，执行查看数据操作时，例如在Linux操作系统下使用cat命令查看大文件、播放视频，由于部分浏览器自身内存占用太大，导致VNC无法正常使用，请更换其他浏览器后重新登录弹性云服务器。
公有云平台免费为您提供弹性云服务器的切换操作系统功能。切换后，系统将根据您选择的产品重新计费，具体收费请参见。
切换操作系统功能当前仅支持“按需付费”方式购买的弹性云服务器，且其挂载的系统盘也必须为“按需”方式购买的。“包年/包月”方式购买的弹性云服务器当前不能切换操作系统。
Linux操作系统下，用户由于误操作卸载弹性云服务器上的Tools，会对非PVOPS系统的磁盘和网卡产生影响，导致系统无法发现数据盘。此时，用户可通过新建一个弹性云服务器，将原数据盘挂载至新创建的弹性云服务器下，从而获取丢失的数据盘信息。具体操作方法如下：登录管理控制台，创建一个新的弹性云服务器。创建方法请参见。说明：请确保新创建的弹性云服务器和被误删除Tools的原弹性云服务器在同一个可用分区，且相关参数配置与原弹性云服务器保持一致。（可选）在弹性云服务器列表中，选中被误删除Tools的原弹性云服务器（以下简称原弹性云服务器），选择“Operation&gt;More&gt;Stop”，勾选“Forciblystop”并单击“OK”确认执行原弹性云服务器的强制关机操作。手动刷新弹性云服务器列表，待“Status”栏更新为“Stopped”，原弹性云服务器关机成功。说明：对于部分操作系统的弹性云服务器，支持在线卸载数据盘操作。此时，可在弹性云服务器运行状态下直接执行卸载数据盘的操作。更多关于在线卸载磁盘的信息，请参见。单击，查看原弹性云服务器上挂载的数据盘信息。说明：如果原弹性云服务器上挂载了多个数据盘，则需要重复操作-，分别执行各个数据盘的卸载与挂载操作。单击原弹性云服务器上挂载的数据盘，系统自动跳转至“ElasticVolumeService”界面。选中待卸载的数据盘，选择“Operation&gt;Detach”，勾选原弹性云服务器并单击“OK”，确认卸载原弹性云服务器上的数据盘。手动刷新云硬盘列表，待“Status”栏更新为“Available”，原弹性云服务器上的数据盘卸载成功。选中已卸载的数据盘，选择“Operation&gt;Attach”，勾选新创建的弹性云服务器名称，并选择磁盘的“SelectMountPoint”，单击“Attach”，将卸载的数据盘挂载至新创建的弹性云服务器。手动刷新云硬盘列表，待“Status”栏更新为“In-use”，挂载磁盘成功。磁盘挂载成功后，用户可登录管理控制台，在新创建的弹性云服务器磁盘信息中，查看新挂载的数据盘。
弹性云服务器的操作系统为CentOS7.0时，添加网卡后在弹性云服务器内部无法自启动，需要手动激活。
能。公有云提供了免费的SNAT服务，支持创建的弹性云服务器默认使用有限带宽单向访问Internet，便于用户进行软件更新等操作，但是从Internet无法直接访问该弹性云服务器。即这种方式只能使弹性云服务器访问外部网络，外部网络不能直接访问弹性云服务器，且用户创建的所有弹性云服务器共享带宽。SNAT服务的工作原理请参见《虚拟私有云用户指南》。如果不需要使用此项访问外网的免费服务，您可以通过限制弹性云服务器所在安全组的出方向规则禁止其访问外网。具体方法如下：假设用户需要禁止弹性云服务器访问外网，同时又要让其访问192.168.10.0/24网段，则需要在安全组中进行如下配置：删除安全组中的默认出方向全通规则。该规则删除过后虚拟机将不能向外访问任何网络，包括VPC内部的网络。删除默认出方向安全组规则增加出方向允许访问的规则。以允许弹性云服务器能够访问192.168.10.0/24网段为例，增加的规则如所示。增加出方向允许访问的规则
用户使用创建弹性云服务器时使用的密钥文件登录Linux云服务器时，登录失败。
根据Linux弹性云服务器使用的镜像不同，可能会存在如下原因：原因一：Linux弹性云服务器的镜像为用户自己制作的私有镜像，且在创建该私有镜像时用户未安装Cloud-init工具。原因二：Linux弹性云服务器的镜像安装了Cloud-init工具，但是在创建弹性云服务器时，获取密钥失败。
针对原因一：创建私有镜像时不安装Cloud-init工具，将无法对云服务器进行自定义配置，此时，用户只能使用镜像原有密码或密钥登录云服务器。其中，镜像原有密码或密钥指创建私有镜像时，用户自己设置的操作系统密码或密钥。如果忘记镜像原有密码，或镜像原有密钥丢失，可以通过弹性云服务器页面提供的“重置密码”功能，自助完成弹性云服务器的密码重置。针对原因二：<olid="ZH-CN_TOPIC_0031734664__zh-cn_topic_0031736846_ol46859259171911"><liid="ZH-CN_TOPIC_0031734664__zh-cn_topic_0031736846_li40959995171921">勾选待获取密码的弹性云服务器，单击“重启”，重新启动弹性云服务器。重启成功后，再次使用密钥文件登录弹性云服务器，确认是否能够正常登录。<ulid="ZH-CN_TOPIC_0031734664__zh-cn_topic_0031736846_ul47236236172129"><liid="ZH-CN_TOPIC_0031734664__zh-cn_topic_0031736846_li43665397172129">是，结束。否，请联系客服。
用户登录Windows操作系统的弹性云服务器时，需使用密码方式登录。因此需通过密钥文件，获取该弹性云服务器的初始密码。但是，用户参见内容单击“获取密码”后，系统提示查询不到密码，导致用户无法登录弹性云服务器。
根据Windows弹性云服务器使用的镜像不同，可能会存在如下原因：原因一：Windows弹性云服务器的镜像为用户自己制作的私有镜像，且在创建该私有镜像时未安装Cloudbase-init工具。原因二：Windows弹性云服务器的镜像安装了Cloudbase-init工具，但是在创建弹性云服务器时，获取密钥失败。
针对原因一：创建私有镜像时不安装Cloudbase-init工具，将无法对云服务器进行自定义配置，此时，用户只能使用镜像原有密码登录云服务器。其中，镜像原有密码指用户创建私有镜像时，给操作系统设置的密码。如果忘记镜像原有密码，可以通过弹性云服务器页面提供的“重置密码”功能，自助完成弹性云服务器的密码重置。针对原因二：<olid="ZH-CN_TOPIC_0031736846__ol46859259171911"><liid="ZH-CN_TOPIC_0031736846__li40959995171921">勾选待获取密码的弹性云服务器，单击“重启”，重新启动弹性云服务器。重启成功后，选择“操作”列下的“更多&gt;获取密码”，查看是否可以成功获取密码。<ulid="ZH-CN_TOPIC_0031736846__ul47236236172129"><liid="ZH-CN_TOPIC_0031736846__li43665397172129">是，结束。否，请联系客服。
这是因为该弹性云服务器已被其他用户使用VNC方式登录。VNC方式登录弹性云服务器时，同一时刻仅支持一个用户登录。如果多个用户同时登录，除第一个用户可正常登录外，其他用户登录时只会提示认证成功，但是不显示画面，出现黑屏现象。此时，用户需等待其他用户退出VNC登录后，才能继续登录。
在使用密集存储型/高计算型弹性云服务器时，网卡无法正常工作。
未正确安装网卡驱动。
密集存储型/高计算型弹性云服务器使用直通网卡来提升网络性能，因此，需要为弹性云服务器网卡安装直通网卡驱动，或者在镜像制作过程中安装直通网卡驱动。如果使用VPN网络进行挂载光驱的操作，则必须保证VPN网络带宽在8Mbps以上。获取直通网卡驱动。对于不同版本的操作系统，为了保证更好的兼容性，推荐使用不同版本的直通网卡驱动，各版本直通网卡的使用方法如所示。登录密集存储型/高计算型弹性云服务器。登录方法请参见。以CentOS7.264位操作系统为例，安装弹性云服务器的直通网卡驱动。<oltype="a"id="ZH-CN_TOPIC_0036068717__ol50819110174442"><liid="ZH-CN_TOPIC_0036068717__li54718812174442">配置直通网卡。部分操作系统的直通网卡名称不是eth0、eth1、……这样的常规命名，因此需要先配置弹性云服务器，使其识别到直通网卡。具体操作如下：<olclass="substepthirdol"id="ZH-CN_TOPIC_0036068717__ol35405014175415"><liid="ZH-CN_TOPIC_0036068717__li50209671175415">执行以下命令，查看当前弹性云服务器的所有网卡设备，找出直通网卡的名称。ifconfig-a执行以下命令，进入网络设备配置文件目录。cd/etc/sysconfig/network-scripts/执行以下命令，创建直通网卡的配置文件。其中，“NIC_name”为查询到的直通网卡名称。cpifcfg-eth0ifcfg-<emid="ZH-CN_TOPIC_0036068717__i4879122117580">NIC_name</em>使用VI编辑器打开并编辑新的网络设备配置文件。viifcfg-<emid="ZH-CN_TOPIC_0036068717__i21667555175415">NIC_name</em>将DEVICE参数编辑为新的网卡名称。编辑后的网络设备配置文件类似如下：DEVICE="<emid="ZH-CN_TOPIC_0036068717__i51249041814">NIC_name</em>"BOOTPROTO="dhcp"ONBOOT="yes"STARTMODE="onboot"执行以下命令，重启网络服务，使配置生效。servicenetworkrestart将获取到的驱动包上传至弹性云服务器目录，例如“/home”。在操作系统命令行终端中，切换到root用户，然后切换目录到直通网卡驱动软件包所在目录。本文中示例为“/home”，即执行命令cd<emid="ZH-CN_TOPIC_0036068717__i5994166318254">/home</em>执行以下命令，解压缩软件包。tar-zxvfixgbevf-2.16.4.tar.gz进入解压后的“src”目录。cdixgbevf-2.16.4/src执行make命令安装直通网卡驱动。makemakeinstall安装后，执行reboot命令重启弹性云服务器，使驱动生效。弹性云服务器重启后，再次打开命令行终端，切换到root用户，切换到“src”目录（例如cd<emid="ZH-CN_TOPIC_0036068717__i3766855618254">/home/ixgbevf-2.16.4/src</em>），执行以下三条命令确认安装是否成功。rmmodixgbevfinsmod./ixgbevf.koethtool-i<emid="ZH-CN_TOPIC_0036068717__i3709208318254">NIC_name</em>其中，“NIC_name”为直通网卡的网卡名，例如“ens5”。说明：<ulid="ZH-CN_TOPIC_0036068717__ul4784383818624"><liid="ZH-CN_TOPIC_0036068717__li2794136518624">执行rmmodixgbevf命令可能报错，但并不影响直通网卡驱动的安装。ethtool-i命令后面的参数以具体使用直通驱动的网卡名称为准。根据回显信息查看当前网卡驱动详情。其中，“driver”显示为“ixgbevf”，且“version”显示为当前安装的版本“2.16.4”，即表示安装成功。
Windows弹性云服务器中的cloudbase-init帐户为Cloudbase-Init代理程序的内置帐户，用于弹性云服务器启动的时候获取元数据并执行相关配置。如果删除此帐户，会影响云管理平台的相关功能，建议您不要修改、删除此帐户。如果自行修改、删除此帐户或者卸载Cloudbase-Init代理程序，会导致由此云服务器创建的Windows私有镜像所生成的新云服务器初始化的自定义信息注入失败。Linux弹性云服务器中不存在该帐户。
最大传输单元（MaximumTransmissionUnit,MTU）是指一种通信协议的某一层上所能通过的最大数据报大小，取值范围1280～8888，以字节为单位。以密集存储型弹性云服务器为例，针对SUSE、CentOS和Ubuntu操作系统，介绍Linux弹性云服务器网卡的MTU值的修改方法。
以操作系统SUSEEnterpriseLinuxServer11SP364bit为例，具体操作如下：使用管理员帐号登录弹性云服务器，执行命令sudosuroot切换至root用户。执行命令ifconfig，查看IP地址绑定的网卡。执行以下命令，打开文件ifcfg-<emid="ZH-CN_TOPIC_0038983525__i645335718653">XXX</em>。vi/etc/sysconfig/network/ifcfg-<emid="ZH-CN_TOPIC_0038983525__i5295988618653">XXX</em>说明：XXX表示中查询到的IP地址绑定的网卡，如eth0。按“i”，执行以下命令，设置网卡MTU值。MTU=8888按“ESC”，执行命令:wq!，保存并关闭文件。执行以下命令，重启网络。servicenetworkrestart执行命令ifconfig，验证MTU值的设置是否正确。
以操作系统CentOS7.264bit为例，具体操作如下：使用管理员帐号登录弹性云服务器，执行命令sudosuroot切换至root用户。执行命令ifconfig，查看IP地址绑定的网卡。执行以下命令，打开文件ifcfg-<emid="ZH-CN_TOPIC_0038983525__zh-cn_topic_0038983525_i645335718653">XXX</em>。vi/etc/sysconfig/network-scripts/ifcfg-<emid="ZH-CN_TOPIC_0038983525__zh-cn_topic_0038983525_i5295988618653">XXX</em>说明：XXX表示中查询到的IP地址绑定的网卡，如eth0。按“i”，执行以下命令，设置网卡MTU值。MTU=8888按“ESC”，执行命令:wq!，保存并关闭文件。执行以下命令，重启网络。servicenetworkrestart执行命令ifconfig，验证MTU值的设置是否正确。
使用管理员帐号登录弹性云服务器，执行命令sudosuroot切换至root用户。执行以下命令，打开文件interfaces。vi/etc/network/interfaces按“i”，执行以下命令，设置网卡MTU值。post-up/sbin/ifconfig/eth0mtu8888按“ESC”，执行命令:wq!，保存并关闭文件。执行以下命令，重启网络。/etc/init.d/networkingrestart执行命令ifconfig，验证MTU值的设置是否正确。
在弹性IP资源不足的情况下，用户通过管理控制台创建一台绑定弹性IP的弹性云服务器，此时弹性云服务器创建成功，但是绑定弹性IP失败。这种情况下，弹性云服务器申请状态栏显示任务失败，但弹性云服务器列表页面显示云服务器创建成功。
弹性云服务器列表中呈现的是创建成功的弹性云服务器列表和详情。申请状态栏显示的是创建弹性云服务器任务的执行状态，包括创建弹性云服务器任务的各个子状态，例如创建弹性云服务器资源、绑定弹性IP等子任务，只有所有子任务全部成功时，任务才会成功，否则都是失败任务。对于弹性云服务器资源创建成功，但是绑定弹性IP失败的情况而言，该任务处理失败。对于成功创建的弹性云服务器资源，会短时间内出现在弹性云服务器列表中，待系统完成回退操作后，将会在列表自动消失。
待挂载的云硬盘与弹性云服务器属于同一可用分区。待挂载的云硬盘为“可用”状态。弹性云服务器的状态为“运行中”或“关机”。挂载设备类型为SCSI的云硬盘的约束与限制，请参见《云硬盘用户指南》。对于“包年/包月”方式购买的弹性云服务器：在创建云服务器时购买的系统盘，卸载后，如果继续作为系统盘使用，则只能挂载给原云服务器；如果作为数据盘使用，则可以挂载给任意云服务器。在创建云服务器时购买的数据盘，卸载后，如果重新挂载，则只能挂载给原云服务器作数据盘使用。
为系统添加静态路由，避免重启系统后路由丢失而影响到网络可用性。
登录弹性云服务器。创建或修改静态路由配置文件。在“/etc/sysconfig/”目录下创建或修改静态路由配置文件static-routes文件，当系统没有此文件时，可以新建此文件。向文件中添加一行静态路由记录，例如：anynet<emid="ZH-CN_TOPIC_0043474363__zh-cn_topic_0040585386_i65036822142458">192.168.2.0</em>netmask<emid="ZH-CN_TOPIC_0043474363__zh-cn_topic_0040585386_i3747953014254">255.255.255.0</em>gw<emid="ZH-CN_TOPIC_0043474363__zh-cn_topic_0040585386_i1678918714259">192.168.1.34</em>添加完成后保存退出，最终文件内容如下：重启网络服务，使静态路由生效。servicenetworkrestart执行以下命令，查看路由信息。route-n
弹性云服务器系统密码涉及到客户重要的私人信息，提醒您妥善保管密码。对于Linux弹性云服务器，如果密码丢失，可以通过系统提供的重置密码功能找回密码，或者以单用户模式登录弹性云服务器重置密码。其中：通过系统提供的重置密码功能找回密码，请参见。如果您擅长使用单用户模式登录Linux弹性云服务器，请参见本节内容。
以单用户模式登录Linux弹性云服务器<ulid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_ul48320239204455"><liid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_li65872508204455">CentOS操作系统单用户模式：以单用户维护模式登录即可修改系统root密码。<oltype="a"id="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_ol6899663204455"><liid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_li9147109204455">登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表页面，在需要修改密码的弹性云服务器所在行，单击“操作”列下的“远程登录”。弹出VNC登录页面。如果弹出的页面全黑，则单击几下键盘的“Enter”键。然后单击重启按钮“SendCtrlAltDel”，系统开始重启。重启过程中，会出现一次连接断开的提示。连接断开后，请迅速单击弹性云服务器列表页的“远程登录”按钮，并使用键盘的“上下方向键”选中未忘记密码的系统，如，然后按“e”键进入选择系统界面。选择系统说明：如果按照上述操作未能顺利进入选择系统界面，则说明执行操作时动作过慢，请您重试～。进入系统后，再次使用键盘的“上下方向键”选择最新的内核，如，然后按“e”键。选择最新内核在已有命令行最后加“空格”，然后键入“single”命令，如，并敲下键盘的“Enter”键。键入“single”命令键入“single”命令并回车后，出现CentOS系统启动引导界面，如，此时再按下键盘“b”键，进入单用户维护模式。CentOS系统启动引导界面Ubuntu操作系统<oltype="a"id="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_ol2241786204455"><liid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_li31345362212032">登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表页面，在需要修改密码的弹性云服务器所在行，单击“操作”列下的“远程登录”。弹出VNC登录页面。如果弹出的页面全黑，则单击几下键盘的“Enter”键。然后单击重启按钮“SendCtrlAltDel”，系统开始重启。重启过程中，会出现一次连接断开的提示。连接断开后，请迅速单击弹性云服务器列表页的“远程登录”按钮，并使用键盘的“上下方向键”选择Ubuntu系统，如，否则系统在几秒内无操作会自动选择第一个进入系统。选择系统启动项说明：如果没有看到此窗口，说明执行动作过慢，请您重试。选中Ubuntu系统，单击键盘“e”键进入，如。进入Ubuntu系统将系统默认以ro只读方式进入改为以rw读写方式进入，如下所示，点击键盘“ctrl+x”键，即可进入单用户模式。修改用户登录模式重置密码<oltype="a"id="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_ol39738267204455"><liid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_li21771461115259">直接执行命令“passwd”，并按照系统提示执行操作：“回车&gt;输入新密码&gt;回车&gt;再输入一次新密码&gt;回车”，重置Linux弹性云服务器的密码。说明：输入密码时，如果发现文件为只读模式，需执行如下操作：<olid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_ol650380212217"><liid="ZH-CN_TOPIC_0043474368__zh-cn_topic_0040724580_li1724598012234">执行以下命令，修改为读写模式。mount-n/-oremount,rw修改完密码后，执行以下命令，恢复原来的模式。mount-n/-oremount,ro重置密码完成之后，单击“SendCtrlAltDel”，重启弹性云服务器。
针对Windows2012操作系统，由于安装应用系统会用到.netframework3.5，而2012自带的.netframework4.5版本需要卸载，但是卸载之后可能会遇到黑屏、无法进入系统桌面的问题，只能调出任务管理器。
卸载.netframework4.5后，系统由完整模式Full变为了核心模式Core，没有启用系统桌面。
恢复过程就是由核心模式切换到完整模式的过程，步骤如下：登录弹性云服务器。单击右上角的“SendCtrlAltDel”按钮，打开任务管理器。选择“文件&gt;运行新任务”。系统打开“新建任务”窗口。新建任务在“打开”栏，输入“cmd”，然后按回车键。在弹出的命令行窗口执行以下命令，将系统由核心模式切换到完整模式。Dism/online/enable-feature/all/featurename:Server-Gui-Mgmt/featurename:Server-Gui-Shell/featurename:ServerCore-FullServer大概10分钟左右，系统会提示重启，在命令行输入“Y”重启系统。再次登录系统后就可以正常显示桌面。
Windows弹性云服务器默认禁用音频设备，导致无法通过远程桌面的方式使用音频设备。对于使用弹性云服务器作为云桌面的用户，如果需要播放音频、使用多媒体音频功能，可参见本节内容进行设置。
启用RDP-TCP的“音频和视频播放”以及“录制音频”。<oltype="a"id="ZH-CN_TOPIC_0043474372__zh-cn_topic_0040724585_ol6384638172148"><liid="ZH-CN_TOPIC_0043474372__zh-cn_topic_0040724585_li11656464172148">打开“远程桌面会话主机配置”控制台。<olclass="substepthirdol"id="ZH-CN_TOPIC_0043474372__zh-cn_topic_0040724585_ol4416004817228"><liid="ZH-CN_TOPIC_0043474372__zh-cn_topic_0040724585_li13022790172214">打开“开始”菜单，选择“控制面板”。单击右上角的“查看方式”下拉菜单，选择“类别”。选择“系统和安全&gt;管理工具&gt;远程桌面服务&gt;远程桌面会话主机配置”。取消勾选“音频和视频播放”、“录制音频”。在“连接”列表里面双击“RDP-Tcp”，选择“客户端设置”，取消勾选“音频和视频播放”和“录制音频”，如所示。远程桌面会话主机配置单击“确定”，激活音频设备。单击“SendCtrlAltDel”按钮，重启弹性云服务器并登录。重启弹性云服务器后，您会发现声卡的标识依旧是显示音频服务未运行，这是因为服务未开启，开启音频服务后如所示。开启音频服务打开网页播放音乐，即可验证播放音频成功。
用户新购买的Windows弹性云服务器一般在1个小时内会自动激活，如果1个小时后仍然没有自动激活，则需要手动处理。
尝试手动激活Windows弹性云服务器。处理流程如下：<oltype="a"id="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_ol569933851980"><liid="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_li6155195619759">打开“开始”菜单，输入“cmd”。执行以下命令，查看是否激活。slmgr-ato按序排查弹性云服务器无法激活的原因。<oltype="a"id="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_ol1700998819911"><liid="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_li440542551999">查看弹性云服务器的内网IP地址是否有问题。<olclass="substepthirdol"id="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_ol4974068519102"><liclass="litext"id="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_li28036389105219">执行以下命令，查看内网IP地址。ipconfig确认系统内部IP地址和控制台上限制的IP地址是否相同。<ulid="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_ul324579217374"><liid="ZH-CN_TOPIC_0043474374__zh-cn_topic_0040724587_li6282559617379">是，执行。否，执行。执行以下命令，释放内网IP地址。ipconfig/release执行以下命令，重新获取内网IP地址。ipconfig/renew执行以下命令，再次查看是否激活。slmgr-ato查看弹性云服务器时间与标准时间是否一致，时间相差较大的情况下会出现无法激活的情况。执行以下命令，检查弹性云服务器到激活服务器端口是否通达。telnet100.125.1.2:1688在弹性云服务器内部测试激活服务器端口，如果无法连接，则说明弹性云服务器内部防火墙没有放通1688端口，需关闭或放通防火墙TCP1688端口，如果有安全狗之类的安全软件也暂时停止使用。执行以下命令，重试弹性云服务器是否激活。slmgr-ato正常情况下会显示激活成功。
华为云运维人员在对云平台做例行健康检查时，发现用户的部分弹性云服务器虚拟化驱动异常（Tools没有正常运行）。为保证弹性云服务器的正常使用，请用户参见本节内容进行修复。
弹性云服务器虚拟化驱动异常会影响弹性云服务器服务数据安全、可用性、系统性能。具体影响的表现：可能导致弹性云服务器文件系统损坏。用户控制台单击“关机”、“重启”按钮，由于没有Tools，在云平台底层弹性云服务器会被“强制关机”、“强制重启”。可能导致弹性云服务器服务不可用。虚拟化驱动异常的弹性云服务器无法在物理机之间做热迁移，当物理机故障或做硬件维护时，弹性云服务器无法被迁移到其他物理机，无法保证弹性云服务器服务的高可用性。弹性云服务器网络和存储性能降低。虚拟化驱动对弹性云服务器的网络、存储性能进行了优化，虚拟化驱动不正常时网络、存储性能降低。
场景一：弹性云服务器操作系统升级过内核，导致虚拟化驱动（Tools）无法正常运行。这种情况在Linux操作系统最为常见，可以参见，检查内核版本是否和镜像标准内核版本一致，如果不一致说明内核做过升级。场景二：弹性云服务器虚拟化驱动被卸载，导致虚拟化驱动无法正常运行。
针对场景一，修复虚拟化驱动的方法执行以下命令，编辑启动引导文件，如下。vimgrub.conf编辑启动引导文件编辑/boot/grub/grub.conf文件，修改default参数，default=1表示使用第二个内核（内核版本低的）引导系统，默认default=0，修改完保存。重启弹性云服务器，默认会使用旧的内核启动系统。检查虚拟化驱动进程是否正常。如下所示，有两个uvp-monitor进程，表示虚拟化进程正常。虚拟化驱动进程正常状态针对场景二，Linux弹性云服务器修复方法重新安装Tools的步骤：根据获取Tools安装包“uvp-tools-linux-2.2.0.206-190.tar.bz2”。假设安装包放在/home目录下，执行以下命令，以root帐号解压缩安装包。tarjxvf/home/uvp-tools-linux-2.2.0.206-190.tar.bz2执行以下命令，切换到安装目录。cd/home/uvp-tools-linux-2.2.0.206-190解压后执行以下命令。sh./install-i执行以下命令，重新启动弹性云服务器。reboot执行以下命令，验证Tools进程是否正常运行。ps-ef|grepuvp如所示，Tools进程已正常运行。Tools进程正常运行状态针对场景二的Windows弹性云服务器修复方法重新安装Tools的步骤：根据获取Tools安装包“uvp-tools-windows-2.2.0.206-190.zip”。解压缩安装包，双击setup.exe执行文件开始安装，如所示。安装pvdriver单击“下一步”，选择是否接受许可。单击“Install”开始安装，安装进度显示如所示。安装进度单击“Finish”，安装完成，如所示。安装完成界面重启弹性云服务器，如所示。选择重启弹性云服务器界面提示在弹性云服务器桌面的右下角查看Tools是否正常，如果有黄色图标代表正常，如所示。Tools状态正常
对于已安装Tools的Linux弹性云服务器，升级内核前，需先卸载Tools，否则存在如下风险：升级内核后，Linux弹性云服务器无法识别网卡，从而导致网络不通。升级内核后，Linux弹性云服务器无法识别数据盘，从而导致系统启动挂载点异常，弹性云服务器无法正常启动。
关于PVOPS和Tools：PVOPS为使用Linux发行版厂商自带的xen驱动。Tools为经过华为修改的xen驱动。
登录弹性云服务器。判断Linux弹性云服务器是否安装了Tools（以操作系统SUSE11SP1为例）。<oltype="a"id="ZH-CN_TOPIC_0043939785__ol59299440113945"><liid="ZH-CN_TOPIC_0043939785__li51025735113941">在任意目录下执行以下命令，查询弹性云服务器的驱动信息，如所示。lsmod|grepxen查询驱动信息执行以下命令，查询驱动路径（以磁盘驱动为例），如所示。modinfoxen_vbd查询驱动路径查看回显，根据驱动路径中是否带有“pvdriver”字段信息，判断弹性云服务器是否安装了Tools。<ulid="ZH-CN_TOPIC_0043939785__ul31816662114244"><liid="ZH-CN_TOPIC_0043939785__li50267971114244">是，如所示，执行。否，执行。卸载Tools。<oltype="a"id="ZH-CN_TOPIC_0043939785__ol2245718611461"><liid="ZH-CN_TOPIC_0043939785__li55595805111743">执行以下命令，切换至root用户。suroot执行以下命令，在根目录下卸载Tools。/etc/.uvp-monitor/uninstall卸载Tools后，可能会引起弹性云服务器的监控指标缺失、无法正常收集监控信息等问题。您可以通过自行编译安装uvpmonitor解决该问题，具体操作请参见。升级内核，具体升级方式由用户自己决定。判断Linux弹性云服务器的驱动是否使用PVOPS。判断方法有三种，请根据实际情况任选其一即可：<ulid="ZH-CN_TOPIC_0043939785__ul57220847171011"><liid="ZH-CN_TOPIC_0043939785__li51043482171011">方法一：根据弹性云服务器的操作系统进行判断。<ulid="ZH-CN_TOPIC_0043939785__ul52570233164432"><liid="ZH-CN_TOPIC_0043939785__li43466544164432">对于Linux发行版操作系统，都自带XEN开源驱动，即默认使用PVOPS方式。对于OS能力中心提供的SUSE11SP3版本操作系统，不带XEN开源驱动，即不支持使用PVOPS方式。方法二：在任意目录下执行以下命令，查询弹性云服务器的驱动信息中是否包括带XEN的驱动模块，如果包括，则表示使用PVOPS方式，如所示。lsmod|grepxen查询驱动信息说明：对于不同的Linux发行版操作系统，模块名称有所不同，您只需确认驱动信息中包括XEN字段的驱动模块即可。方法三：在任意目录下执行以下命令，查询回显信息中是否包括带XEN的字段，如果包括，则表示使用PVOPS方式，如所示。cat/boot/config*|grep-ixen查询XEN字段PVOPS方式适配内核升级场景，因此，进入新内核后，驱动使用PVOPS方式，不再安装Tools。根据的判断结果：<ulid="ZH-CN_TOPIC_0043939785__ul10488738171523"><liid="ZH-CN_TOPIC_0043939785__li18874470171523">如果Linux弹性云服务器的驱动使用PVOPS方式，执行。如果Linux弹性云服务器的驱动没有使用PVOPS方式，执行。安装开源组件xen-kmp，从而提供xen开源驱动，即使用PVOPS方式。如何使用PVOPS，请参见《公共镜像制作及注册指南》中“安装Linux虚拟机（不使用Cloud-Init）”章节“安装操作系统”部分关于“如果操作系统为“SUSELinuxEnerpriseServer11SP364位”的内容。文档获取方式：登录，选择“技术支持&gt;产品支持&gt;运营商IT&gt;云计算&gt;运营商公有云&gt;PublicCloudSolution&gt;PublicCloudSolutionV100&gt;PublicCloudSolutionV100R001&gt;PublicCloudSolution2.0.1”（可选）对于部分Linux发行版操作系统，需参考缺陷列表添加对应参数。Linux发行版操作系统缺陷列表：
用户需要更新弹性云服务器的系统或者软件时，可以连接Internet，通过外部openSUSE镜像源提供相关服务。但是，如果弹性云服务器无法访问Internet，或者外部openSUSE镜像源提供的服务不稳定时，可以使用华为云提供的openSUSE镜像源进行更新。
本节内容仅限中国华北区用户使用。
登录弹性云服务器。登录方法请参见。执行以下命令，备份repo文件。mkdir/etc/zypp/repos.d/repo_bakmv/etc/zypp/repos.d/*.repo/etc/zypp/repos.d/repo_bak/使用curl命令下载对应版本的repo文件。curl-o/etc/zypp/repos.d/repo.tar.gzhttp://100.125.1.27/repo/opensuse-13.2.tar.gz说明：当前华为云支持的openSUSE镜像源版本为openSUSE13.2。执行以下命令，将中下载的repo文件放入/etc/zypp/repos.d/目录。tarzxvf/etc/zypp/repos.d/repo.tar.gz-C/etc/zypp/repos.d/
用户需要更新弹性云服务器的系统或者软件时，可以连接Internet，通过外部CentOS镜像源提供相关服务。但是，如果弹性云服务器无法访问Internet，或者外部CentOS镜像源提供的服务不稳定时，可以使用华为云提供的CentOS镜像源进行更新。
本节内容仅限中国华北区用户使用。
登录弹性云服务器。登录方法请参见。执行以下命令，备份CentOS-Base.repo文件。mv/etc/yum.repos.d/CentOS-Base.repo/etc/yum.repos.d/CentOS-Base.repo.bk使用curl命令下载对应版本的CentOS-Base.repo文件，并将其放入/etc/yum.repos.d/目录。针对华为云当前支持的CentOS镜像源版本，使用的curl命令分别如下：<ulid="ZH-CN_TOPIC_0043941022__ul23308744112336"><liid="ZH-CN_TOPIC_0043941022__li7746046112336">CentOS5curl-o/etc/yum.repos.d/CentOS-Base.repohttp://100.125.1.27/repo/CentOS-Base-5.repoCentOS6curl-o/etc/yum.repos.d/CentOS-Base.repohttp://100.125.1.27/repo/CentOS-Base-6.repoCentOS7curl-o/etc/yum.repos.d/CentOS-Base.repohttp://100.125.1.27/repo/CentOS-Base-7.repo执行以下命令，生成缓存。yummakecache说明：如果执行命令yummakecache后，回显信息为“Anotherappiscurrentlyholdingtheyumlock”，则需执行命令rm-rf/var/run/yum.pid删除yum.pid文件，然后再执行命令yummakecache生成缓存。
用户需要更新弹性云服务器的系统或者软件时，可以连接Internet，通过外部Ubuntu镜像源提供相关服务。但是，如果弹性云服务器无法访问Internet，或者外部Ubuntu镜像源提供的服务不稳定时，可以使用华为云提供的Ubuntu镜像源进行更新。
本节内容仅限中国华北区用户使用。
登录弹性云服务器。登录方法请参见。执行以下命令，备份sources.list文件。mv/etc/apt/sources.list/etc/apt/sources.list.bak使用wget命令下载对应版本的sources.list文件，并将其放入/etc/apt/目录。针对华为云当前支持的Ubuntu镜像源版本，使用的wget命令分别如下：<ulid="ZH-CN_TOPIC_0043957442__ul23308744112336"><liid="ZH-CN_TOPIC_0043957442__li7746046112336">Ubuntu12.04wget-O/etc/apt/sources.listhttp://100.125.1.27/repo/sources.list.preciseUbuntu14.04wget-O/etc/apt/sources.listhttp://100.125.1.27/repo/sources.list.precise执行以下命令，更新软件列表。apt-getupdate
对于采用“按需付费”计费方式的产品，包括按需付费的弹性云服务器、按需付费的云硬盘等，如果用户不再使用该产品，需彻底停止计费，请直接删除相应产品。对于采用“包年/包月”计费方式的产品，包括包年/包月的弹性云服务器、包年/包月的云硬盘等，用户在购买时一次性付费，到期自动停止使用。如果用户提前终止使用，系统不会予以退费。以按需付费的弹性云服务器为例，详细介绍删除弹性云服务器对计费的影响。假设该云服务器的组成如所示。删除该弹性云服务器后，计费情况如下：弹性云服务器基础资源：停止计费云硬盘<ulid="ZH-CN_TOPIC_0046592591__ul1302280414525"><liid="ZH-CN_TOPIC_0046592591__li30989470111658">系统盘：停止计费数据盘：删除弹性云服务器时，如果用户勾选“删除云服务器挂载的数据盘”，则停止计费。否则，继续计费。弹性IP：删除弹性云服务器时，如果用户勾选“释放云服务器绑定的弹性IP地址”，则停止计费。否则，继续计费。
对于一个用户组的用户，加密特性使用权限的规则如下：拥有SecurityAdministrator权限的用户可以直接授权EVS访问KMS，使用加密特性。普通用户（即没有SecurityAdministrator权限的用户）使用加密特性时，根据该普通用户是否为用户组内第一个使用加密特性的用户，作如下区分：<ulid="ZH-CN_TOPIC_0047272493__ul30334744165242"><liid="ZH-CN_TOPIC_0047272493__li18355338165239">是，即该普通用户是用户组内第一个使用加密特性的，需先联系拥有SecurityAdministrator权限的用户增加权限，然后再使用加密特性。否，即用户组内的其他用户已经使用过加密特性，该普通用户有权限直接使用加密特性。下面，我们以一个用户组为例，介绍授权EVS访问KMS时的用户权限问题。假设该用户组有4个用户（用户1~用户4），其中，用户1拥有“SecurityAdministrator”权限，其他三个用户为普通用户，没有“SecurityAdministrator”权限，如所示。
在该用户组中，如果是用户1（拥有SecurityAdministrator权限）首次使用加密特性，则操作流程如下：创建Xrole，授权EVS访问KMS。授权成功后，系统会为您创建默认主密钥“evs/default”，此密钥用来加密云硬盘。说明：云硬盘的加密依赖KMS，首次使用加密特性时，需要授权EVS访问KMS。当授权成功后，用户组中的所有用户使用加密特性均无需再次进行授权操作。选择密钥。您可以选择使用的密钥如下：<ulid="ZH-CN_TOPIC_0047272493__ul66321024171321"><liid="ZH-CN_TOPIC_0047272493__li5131522171321">默认主密钥“evs/default”。用户主密钥，即您已有的密钥。新创建密钥，创建方法请参见《密钥管理服务用户指南》的“创建密钥”章节。用户1成功使用加密特性后，用户组中的所有用户都可以直接使用加密特性，无需联系用户1获取权限。
在该用户组中，如果是用户3（普通用户）首次使用加密特性，则操作流程如下：用户3使用加密特性，系统提示权限不足。联系用户1，获取SecurityAdministrator权限。用户1给用户3开放SecurityAdministrator权限。用户3拥有SecurityAdministrator权限后，也可以给其他普通用户添加SecurityAdministrator权限。用户3获取SecurityAdministrator权限后，创建Xrole，授权EVS访问KMS。用户3成功使用加密特性后，用户组中的所有用户都可以直接使用加密特性，无需联系用户1获取权限。
通过puttygen.exe工具创建的密钥对，在导入管理控制台使用时，系统提示导入公钥文件失败。
公钥内容的格式不符合系统要求。当用户使用puttygen.exe工具创建密钥对时，如果使用puttygen.exe工具的“Savepublickey”按钮保存公钥，公钥内容的格式会发生变化，不能直接导入管理控制台使用。
使用本地保存的私钥文件，在“PuTTYKeyGenerator”中恢复内容格式正确的公钥文件，然后再将该公钥文件导入管理控制台。双击“PUTTYGEN.EXE”，打开“PuTTYKeyGenerator”。PuTTYKeyGenerator单击“Load”，并在本地选择该密钥对的私钥文件。系统将自动加载该私钥文件，并在“PuTTYKeyGenerator”中恢复格式正确的公钥文件内容，如所示，红框中的内容即为符合系统要求的公钥文件。恢复公钥文件内容复制红框中的公钥内容，并将其粘贴在文本文档中，以.txt格式保存在本地，保存公钥文件。将公钥文件导入管理控制台。<oltype="a"id="ZH-CN_TOPIC_0047654687__ol6110882216115"><liid="ZH-CN_TOPIC_0047654687__zh-cn_topic_0014250631_li57193461143442">登录管理控制台。选择“计算&gt;弹性云服务器”。在左侧导航树中，选择“密钥对”。在“密钥对”页面，单击“导入密钥对”。将“.txt”格式文本文档中的公钥内容粘贴至“PublicKeyContent”的空白区域，并单击“OK”，导入公钥文件。
对于密码鉴权方式创建的Windows2012弹性云服务器，使用初始密码以MSTSC方式登录时，登录失败，系统显示“第一次登录之前，你必须更改密码。请更新密码，或者与系统管理员或技术支持联系”。
用户本地使用的计算机（即客户机）操作系统为Windows10。由于Windows10操作系统的自身限制，不能以初始密码直接远程连接操作系统为Windows2012的弹性云服务器。
方法一更换使用Windows7操作系统的计算机作为客户机，远程连接操作系统为Windows2012的弹性云服务器。方法二继续使用Windows10客户机远程登录，但是，需先修改弹性云服务器的初始密码。<olid="ZH-CN_TOPIC_0050723430__ol3436925916017"><liid="ZH-CN_TOPIC_0050723430__li1452586716017">首次登录，以VNC方式登录操作系统为Windows2012的弹性云服务器。登录成功后，按照界面提示修改弹性云服务器的密码。使用修改后的密码，以MSTSC方式远程登录。方法三继续使用Windows10客户机，并以初始密码远程登录。<olid="ZH-CN_TOPIC_0050723430__ol26673579161135"><liid="ZH-CN_TOPIC_0050723430__li62616054161135">单击“开始”菜单，在“搜索程序和文件”中，输入“mstsc”。系统进入“远程桌面连接”界面。依次输入弹性IP、用户名“administrator”以及创建弹性云服务器时设置的登录密码进行连接。连接失败，系统提示“第一次登录之前，你必须更改密码。请更新密码，或者与系统管理员或技术支持联系”。单击“远程桌面连接”页面左下角的“选项”。在“常规”页签，单击“连接设置”栏的“另存为”，保存“.rdp”格式的远程桌面文件。使用Notepad++打开中保存的远程桌面文件。编辑远程桌面文件，在文件的最后一行，添加如下语句并保存。enablecredsspsupport:i:0双击更新后的“.rdp”文件，打开远程桌面连接。单击“连接”，重新连接操作系统为Windows2012的弹性云服务器。
Linux弹性云服务器的静态主机名来源于创建弹性云服务器时，通过Cloud-init注入的用户自定义名称。虽然可以使用hostname命令更改Linux弹性云服务器的主机名，但如果重新启动弹性云服务器，它将自动还原为使用Cloud-init注入的用户自定义名称。
虽然hostname命令可以修改Linux弹性云服务器的主机名，但是，如果您希望修改后的主机名在弹性云服务器关机、重启后仍然生效，需要将其写入相应的配置文件中，使之永久生效。假设修改后的主机名为“new_hostname”。修改配置文件“/etc/hostname”。<oltype="a"id="ZH-CN_TOPIC_0050735736__ol1338172421315"><liid="ZH-CN_TOPIC_0050735736__li5332665521315">执行以下命令，编辑配置文件“/etc/hostname”。sudovim/etc/hostname修改配置文件，将文件中的主机名替换为修改后的主机名（new_hostname）。执行以下命令，保存并退出文件。:wq修改配置文件“/etc/sysconfig/network”。<oltype="a"id="ZH-CN_TOPIC_0050735736__ol3766280211735"><liid="ZH-CN_TOPIC_0050735736__li33920697211736">执行以下命令，编辑配置文件“/etc/sysconfig/network”。sudovim/etc/sysconfig/network修改涉及“HOSTNAME”的参数值，将其设置为修改后的主机名（new_hostname）。HOSTNAME=<emid="ZH-CN_TOPIC_0050735736__i23868013212159">修改后的主机名</em>示例：HOSTNAME=new_hostname执行以下命令，保存并退出文件。:wq修改配置文件“/etc/cloud/cloud.cfg”。<oltype="a"id="ZH-CN_TOPIC_0050735736__ol56256819212633"><liid="ZH-CN_TOPIC_0050735736__li2783255212639">执行以下命令，编辑配置文件“/etc/cloud/cloud.cfg”。sudovim/etc/cloud/cloud.cfg按需选择如下两种方法，修改配置文件。<ulid="ZH-CN_TOPIC_0050735736__ul58717313213157"><liid="ZH-CN_TOPIC_0050735736__li6569486411229">方法一：修改或添加“preserve_hostname”参数项。如果文件“/etc/cloud/cloud.cfg”中已有参数项“preserve_hostname:false”，将其修改为“preserve_hostname:true”即可。如果文件“/etc/cloud/cloud.cfg”中没有该参数项，需在“cloud_init_modules”模块前，添加语句preserve_hostname:true。选择方法一，弹性云服务器关机、重启后，修改后的主机名（new_hostname）仍然生效。但是，如果使用该云服务器制作私有镜像，并使用生成的镜像重新创建弹性云服务器，则新创建的弹性云服务器的主机名即为私有镜像使用的主机名（new_hostname），不能通过Cloud-init重新注入用户自定义名称。方法二：删除或者注释语句-update_hostname。选择方法二，弹性云服务器关机、重启后，修改后的主机名（new_hostname）仍然生效。但是，如果使用该云服务器制作私有镜像，并使用生成的镜像重新创建弹性云服务器，用户可以通过Cloud-init注入用户自定义名称（如new_new_hostname），并通过本节内容长久有效地修改静态主机名。执行以下命令，重启弹性云服务器。sudoreboot执行以下命令，验证主机名的修改是否永久生效。sudohostname如果回显的内容是修改后的主机名（new_hostname），则表示主机名修改成功，永久生效。
最大传输单元（MaximumTransmissionUnit,MTU）是指一种通信协议的某一层上所能通过的最大数据报大小，取值范围1280～8888，以字节为单位。以Windows2012为例，介绍Windows弹性云服务器网卡的MTU值的修改方法。开启网卡的JumboPacket。<oltype="a"id="ZH-CN_TOPIC_0053186233__ol21743148151222"><liid="ZH-CN_TOPIC_0053186233__li49026131151218">单击“开始”菜单，打开“控制面板”。控制面板在“网络和Internet”栏，单击“查看网络状态和任务”。网络和共享中心在“查看活动网络&gt;连接”栏，选择需要更改配置的网卡，以的网卡“Ethernet15”为例。单击“Ethernet15”。系统进入“Ethernet15状态”页面。单击“属性”。系统进入“Ethernet15属性”页面。单击“配置”，并在新页面中选择“高级”页签，如所示。Inter(R)82599VirtualFunction#13属性在“设置”栏，选择“JumboPacket”，在“值”栏选择“9014Bytes”。单击“确定”。修改MTU值。<oltype="a"id="ZH-CN_TOPIC_0053186233__ol20068291153816"><liid="ZH-CN_TOPIC_0053186233__li10484324153812">通过快捷键“Win+R”，打开“运行”界面。运行在“打开”栏输入“cmd”，并单击“确定”。执行以下命令，查询当前网卡的MTU值。netshinterfaceipv4showsubinterfaces根据查询结果可以看出，开启“JumboPacket”的网卡的MTU值为9000，如所示。查看当前网卡的MTU值执行以下命令，修改网卡的MTU值。netshinterfaceipv4setinterface"<emid="ZH-CN_TOPIC_0053186233__i65887499154919">网卡名称</em>"mtu=<emid="ZH-CN_TOPIC_0053186233__i62126478154849">修改后的MTU值</em>store=persistent假设将网卡“Ethernet15”的MTU值修改为8888，则命令行如下：netshinterfaceipv4setinterface“Ethernet15”mtu=8888store=persistent执行以下命令，查询修改后的MTU值。netshinterfaceipv4showsubinterfaces查看修改后网卡的MTU值
从Intel官网下载最新的20.4.1版本驱动包（下载地址：），该版本驱动包在Windows764位SR-IOV直通弹性云服务器上安装时会提示“找不到英特尔适配器”错误。
Intel82599直通网卡在未安装驱动时被操作系统识别为以太网控制器设备，20.4.1版本驱动包在安装时未能正确识别出Intel网卡设备，导致程序报错。
在20.4.1驱动包文件夹下运行Autorun.exe。安装驱动包前先给网卡安装驱动，使网卡被系统识别为Intel82599VF设备，安装驱动有两种方法。方法1：通过版本更新方法安装驱动<olid="ZH-CN_TOPIC_0053287548__ol61756599201023"><liid="ZH-CN_TOPIC_0053287548__li58690911201023">从Intel官网下载18.6版本驱动包。到18.6驱动包安装文件夹下运行Autorun.exe进行安装。成功后到20.4.1版本驱动包文件夹下运行Autorun.exe更新驱动。方法2：设备管理器手动安装驱动<olid="ZH-CN_TOPIC_0053287548__ol18602149201036"><liid="ZH-CN_TOPIC_0053287548__li22913818201036">打开Windows资源管理器，右键单击“计算机”，选择“管理”，打开“设备管理器”，在设备管理器中找到网卡，未安装驱动时，网卡位于“其他设备”一栏，名字为“以太网控制器”。右键单击“以太网控制器”，选择“更新驱动程序软件”。单击“浏览”，选择驱动包所在路径，单击“下一步”。驱动安装成功后，可以在设备管理器的“网络适配器”一栏看到网卡。单击“Autorun.exe”安装20.4.1版本一键安装驱动包。
尊敬的华为云客户，您好！为使您在使用弹性云服务器产品时无后顾之忧，华为云为您提供了部分第三方软件的技术支持，不断提升产品相关的服务能力。具体包括如下第三方软件在弹性云服务器上安装、配置和问题排查的建议。WEB服务<ulid="ZH-CN_TOPIC_0056846236__ul4886232115417"><liid="ZH-CN_TOPIC_0056846236__li4632157615414">ApacheIISNginx数据库服务<ulid="ZH-CN_TOPIC_0056846236__ul3189002815439"><liid="ZH-CN_TOPIC_0056846236__li3148191515437">MySQLMicrosoftSQLServer网络安全服务<ulid="ZH-CN_TOPIC_0056846236__ul1950659415457"><liid="ZH-CN_TOPIC_0056846236__li1974401815452">Linux的IptablesWindows的Firewall其他网络服务<ulid="ZH-CN_TOPIC_0056846236__ul317373315515"><liid="ZH-CN_TOPIC_0056846236__li933863815512">SSH、Windows远程和路由访问SFTP、FTPOpenVPNDNS华为云服务团队向您提供的第三方软件的建议只针对有经验的系统管理员或其他相关IT人员，华为云服务团队不负责上述第三方软件的安装、调试及建议的具体实施。对于上述服务出现的问题我方也并非全部负责解决。为方便您理解，详细说明如下：我们可以协助您排查或提供建议：WEB服务：端口不通、访问报4XX的问题。数据库：远程连接失败、改造监听端口。防火墙：在iptables和Firewall上添加规则、开放端口。网络服务：ssh连接不上、Windows远程连接不上。OpenVPN：无法代理上网的问题。DNS：LinuxDNS的基本配置。需要您自行设置、排查与优化：WEB服务：优化配置、编写伪静态规则、插件调试等。数据库：数据库调优、SQL语句优化等。防火墙：基于iptables构建自动化检测防御工具等。网络服务：SSH传输文件速度优化、SFTP如何限速等。OpenVPN：多个OpenVPN互联等。DNS：LinuxDNS组网规划及配置优化。
A<h5>AZ</h5><p>参见</p><h5>安全组</h5><p>安全组用来实现安全组内和组间虚拟机的访问控制，加强虚拟机的安全保护。安全组创建后，用户可以在安全组中定义各种访问规则，当虚拟机加入该安全组后，即受到这些访问规则的保护。安全组的默认规则是在出方向上的数据报文全部放行，安全组内的虚拟机无需添加规则即可互相访问。</p>E<h5>ECS</h5><p>参见</p><h5>EIP</h5><p>参见</p>
E
F-J
K-O
S<h5>私有镜像</h5><p>用户基于创建的个人镜像，仅用户自己可见。包含操作系统、预装的公共应用以及用户的私有应用。选择私有镜像创建云服务器，可以节省您重复配置云服务器的时间。</p>T<h5>弹性IP地址</h5><p>弹性IP地址是独立申请的公网IP地址，您可以将弹性IP地址动态绑定到上，使其可以与Internet通信。</p><h5>弹性云服务器</h5><p>弹性云服务器是由CPU、内存、镜像、云硬盘组成的一种可随时获取、弹性可扩展的计算服务器，同时它结合、虚拟防火墙、数据多副本保存等能力，为您打造一个高效、可靠、安全的计算环境，确保您的服务持久稳定运行。</p>
T
V<h5>VPC</h5><p>参见</p>X<h5>虚拟私有云</h5><p>VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。您可以在VPC中定义与传统网络无差别的虚拟网络，同时提供弹性IP、安全组等高级网络服务。</p>
X
参见
安全组用来实现安全组内和组间虚拟机的访问控制，加强虚拟机的安全保护。安全组创建后，用户可以在安全组中定义各种访问规则，当虚拟机加入该安全组后，即受到这些访问规则的保护。安全组的默认规则是在出方向上的数据报文全部放行，安全组内的虚拟机无需添加规则即可互相访问。
参见
参见
参见
参见
平台提供的常见的标准操作系统镜像，所有用户可见。包含操作系统以及预装的公共应用。请根据您的实际情况自助配置应用环境或相关软件。
可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内下的其它可用分区，可用分区间通过内网访问。
用户基于创建的个人镜像，仅用户自己可见。包含操作系统、预装的公共应用以及用户的私有应用。选择私有镜像创建云服务器，可以节省您重复配置云服务器的时间。
弹性IP地址是独立申请的公网IP地址，您可以将弹性IP地址动态绑定到上，使其可以与Internet通信。
弹性云服务器是由CPU、内存、镜像、云硬盘组成的一种可随时获取、弹性可扩展的计算服务器，同时它结合、虚拟防火墙、数据多副本保存等能力，为您打造一个高效、可靠、安全的计算环境，确保您的服务持久稳定运行。
弹性IP地址是独立申请的公网IP地址，您可以将弹性IP地址动态绑定到上，使其可以与Internet通信。
弹性云服务器是由CPU、内存、镜像、云硬盘组成的一种可随时获取、弹性可扩展的计算服务器，同时它结合、虚拟防火墙、数据多副本保存等能力，为您打造一个高效、可靠、安全的计算环境，确保您的服务持久稳定运行。
参见
VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。您可以在VPC中定义与传统网络无差别的虚拟网络，同时提供弹性IP、安全组等高级网络服务。
VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。您可以在VPC中定义与传统网络无差别的虚拟网络，同时提供弹性IP、安全组等高级网络服务。
（ElasticLoadBalance，以下简称ELB）通过将访问流量自动分发到多台弹性云服务器，扩展应用系统对外的服务能力，实现更高水平的应用程序容错性能。用户通过基于浏览器、统一化视图的云计算管理图形化界面，可以创建ELB，为服务配置需要监听的端口，配置云服务器。消除单点故障，提高整个系统的可用性。
弹性负载均衡服务提供按需收费方式。
公网弹性负载均衡的带宽可以调整。调整范围为1-300M。调整带宽的具体操作请参考章节的“调整带宽”部分的内容。
当前ELB支持轮询、最小连接数和源地址三种模式的转发规则。轮询：将请求轮流发送给后端云服务器，常用于短连接服务，例如HTTP等服务。最少连接：优先将请求发给拥有最少连接数的后端云服务器，常用于长连接服务，例如数据库连接等服务。源地址：将请求的源地址进行hash运算，派发请求至某匹配的服务器，这可以使得同一个客户端IP的请求始终被派发至某特定的服务器。该方式适合负载均衡无cookie功能的TCP协议。
可以。ELB本身不会限制后端的云服务器使用哪种操作系统，只要您的2台云服务器中的应用服务部署是相同且保证数据的一致性即可。但是，我们建议您选择2台相同操作系统的云服务器进行配置，以便您日后的管理维护。
单个用户默认支持保有5个弹性负载均衡。如果需要创建更多弹性负载均衡，请填写工单申请更高配额，申请的弹性负载均衡个数不超过255个。提交工单的步骤如下。在管理控制台右上角单击用户名，选择“提交工单”。进入提交工单页面，按照界面提示选择云服务区、业务类型、问题模板，输入问题描述等信息。单击“提交”。
弹性负载均衡的IP为在创建过程中自动分配的，不需要进行手动申请。
承担ELB具体的协议和端口配置；云服务器协议和端口配置；监听策略配置。
系统支持4层（TCP）和7层（HTTP）两种协议的负载均衡，可通过具体提供的服务能力选择对应的协议以及该协议对外呈现的端口。
后端云服务器自身提供的网络服务的协议以及协议的端口，如使用windows操作系统上安装的IIS（webservice），该服务默认的协议为HTTP，端口为80。
在您购买使用ELB服务的整个生命周期内，该服务地址（IP）都是由您所购买的服务独占的。
如果您的ELB服务地址（IP）已经正常解析到域名且对外提供服务，除非必要请不要删除您创建的ELB服务，删除了ELB服务以后相应的服务配置和服务地址（IP）将会被释放掉，数据一旦删除，不可恢复。如果您重新创建ELB服务，系统会重新给您分配一个新的服务地址（IP）。
关于健康检查的参数配置，提供如下参考建议。间隔时间：2秒，间隔时间为健康检查每次检查的时间间隔。超时时间：5秒，超时时间为健康检查等待时间。健康阈值：3，健康阈值为健康检查的连续变化次数。不健康阈值：3，不健康阈值为不健康检查的连续变化次数。在此配置下有利于用户服务及应用状态的尽快收敛。云服务器健康检查失败响应时间：2×3+5=11秒如果用户有更高要求，可以适当地降低响应超时时间值，但必须先保证自己服务在正常状态下的处理时间小于这个值。云服务器健康检查成功响应时间：2×3=6秒
ELB的健康检查是通过ELB系统向后端云服务器发起心跳检查的方式来实现的，而ELB系统和云服务器之间是通过内网进行通信的，为了确保健康检查工作的正常进行，您需要确保能够通过内网访问您的云服务器，请按照以下方法排查。在监听器页面，在健康检查异常的监听器所在行，单击“健康检查”列下的“查看”。弹出健康检查配置项提示框，如所示。<ulid="elb_faq_0014__ul3692420316598"><liid="elb_faq_0014__li5590400017135">检查“健康检查方式”：确保后端服务器已配置相应协议并开启端口。检查“检查路径”：如果是使用HTTP协议进行健康检查，还应检查后端主机的健康检查路径是否正确。健康检查配置项检查后端云主机中防火墙等软件是否有对来自健康检查源IP的屏蔽。检查后端云主机所在安全组规则是否配置放行100.125.0.0/16，并配置ELB用于健康检查的协议和端口。健康检查的协议和端口在步骤中弹出的健康检查配置项提示框中获取。如果以上配置检查均正常但问题依然存在，请联系技术支持。
这和ELBTCP的实现机制有关。在4层（TCP协议）服务中，当前不支持添加进后端云服务器池的云服务器既作为RealServer，又作为客户端向所在的ELB实例发送请求。因为，返回的数据包只在云服务器内部转发，不经过ELB，所以通过配置在ELB内的云服务器去访问的公网IP是不通的。
这是由于ELB系统进行健康检查引起的。ELB系统除了会通过系统服务器的内网IP将来自外部的访问请求转到后端云服务器上之外，还会对云服务器进行健康检查，并对后端服务进行可用性监控，这些访问的来源都是由ELB系统发起的，具体包含的IP地址段是：100.125.0.0/16。为了确保您对外服务的可用性，请确保在云服务器所在的安全组上对上述地址的访问配置放行规则。
针对7层（HTTP协议）服务，ELB通过HttpHeader:X-Forwarded-For获取来访者真实IP，该功能已经默认开启，无需配置，也不能修改。针对4层（TCP协议）服务需要配置TOA插件获取。配置TOA插件请参考。
在您的负载均衡服务监听器创建成功时会话保持就默认打开。在监听器生命周期内全程开启。如果会话保持是关闭状态，请在监听器里表中选择需要开启会话保持的监听器，单击操作栏下的“修改”，在弹出的“修改监听器”对话框中将会话保持开关打开。
针对7层（HTTP协议）服务，ELB系统是基于cookie的会话保持。针对4层（TCP/UDP协议）服务，ELB系统是基于IP地址的会话保持。
当后端云服务器的状态为异常且出现标记“[已删除]”，则表示该云服务器已在云服务器服务中删除。为更好的管理后端云服务器、减少冗余资源，防止分发异常，请对该后端云服务器进行移除操作。
系统默认的ELB公网IP并发连接数为十万。如果需要更多并发连接数，请提交工单申请扩大并发连接数。提交工单的步骤如下。在管理控制台右上角单击用户名，选择“提交工单”。进入提交工单页面，按照界面提示选择云服务区、业务类型、问题模板，输入问题描述等信息。单击“提交”。
私网弹性负载均衡是支持同一个虚拟私有云下的云服务器之间互相访问的负载均衡功能。同一个虚拟私有云下的云服务器通过访问私网弹性负载均衡的服务IP和端口来将负载分发到后端云服务器上。
在一个架构完整的系统中，通常包含多个子系统或者部件。通常各个子系统之间的访问是在内部网络中完成的。例如，业务服务节点对数据库节点的访问和各个子系统或者部件间的接口调用。私网弹性负载均衡可以为这些场景提供流量分发、横向扩展和容错等高可用性的功能。
负载均衡健康检查是通过UDP报文和Ping报文探测来获取后端主机的状态信息。针对此种情况，用户需要确保后端主机未关闭ICMP协议，确认方法如下：用户登录后端云主机，以root权限执行以下命令：cat/proc/sys/net/ipv4/icmp_echo_ignore_all若返回值为1，表示ICMP协议关闭；若为0，则表示未关闭。当前UDP协议服务健康检查可能存在服务真实状态与健康检查不一致的问题：如果后端ECS服务器是Linux服务器，在大并发场景下，由于Linux的防ICMP攻击保护机制，会限制服务器发送ICMP的速度。此时，即便服务已经出现异常，但由于无法向前端返回“portXXunreachable”报错信息，会导致负载均衡由于没收到ICMP应答进而判定健康检查成功，最终导致服务真实状态与健康检查不一致。当负载均衡的类型为私网时，不允许创建UDP协议的监听器。
使用HTTP或者HTTPS协议上传文件时，文件的大小不能超过10M。如果超过10M，建议使用TCP协议。
B<h5>不健康阈值</h5><p>后端云服务器在正常状态下，健康检查连续失败的次数超过不健康阈值后，ELB将该后端云服务器的健康检查状态由正常改为异常。</p>E<h5>ELB</h5><p>参见</p>
E
G<h5>公网负载均衡器</h5><p>对公网用户提供负载均衡服务，将来自公网的访问流量自动分发到多台弹性云服务器。</p>J<h5>健康阈值</h5><p>后端云服务器在异常状态下，健康检查连续成功的次数超过健康阈值后，ELB将该后端服务器的健康检查状态由异常改为正常。</p>
J
K-O
P-T
后端云服务器在正常状态下，健康检查连续失败的次数超过不健康阈值后，ELB将该后端云服务器的健康检查状态由正常改为异常。
参见
参见
对公网用户提供负载均衡服务，将来自公网的访问流量自动分发到多台弹性云服务器。
后端云服务器在异常状态下，健康检查连续成功的次数超过健康阈值后，ELB将该后端服务器的健康检查状态由异常改为正常。
后端云服务器在异常状态下，健康检查连续成功的次数超过健康阈值后，ELB将该后端服务器的健康检查状态由异常改为正常。
对内网用户提供负载均衡服务，将来自同一个VPC下的访问流量自动分发到多台弹性云服务器。
负载均衡器的一个特性，它将用户的会话绑定到特定的应用程序实例，以便在会话期间来自同一个用户的所有请求都发送到同一个应用程序实例。
通过将访问流量自动分发到多台弹性云服务器，扩展应用系统对外的服务能力，实现更高水平的应用程序容错性能。
（ElasticVolumeService，EVS）是一种基于分布式架构的，可弹性扩展的虚拟块存储设备。您可以通过管理控制台创建云硬盘并挂载给云服务器，云服务器可以为弹性云服务器或者裸金属服务器，云硬盘的使用方式与传统服务器硬盘完全一致。同时，云硬盘具有更高的数据可靠性，更高的I/O吞吐能力和更加简单易用等特点，适用于文件系统、数据库或者其他需要块存储设备的系统软件或应用。云硬盘也称磁盘。
类型有三种：超高IO、高IO和普通IO。
可满足大容量存储需求。系统盘容量范围为1GB-32768GB，数据盘容量范围为10GB-32768GB。
一台云服务器可以挂载10块云硬盘。
不可以，一块云硬盘同时只能挂载到一台云服务器上。当云硬盘为共享盘时，支持同时挂载最多16个云服务器。共享盘是云硬盘的一种，可以同时挂载到多个云服务器。
在上，单击云硬盘所在行“操作”列下的“挂载”即可。
云硬盘当前阶段只支持扩容，不支持减容。
云硬盘支持扩容，数据盘和系统盘均支持扩容。只有云硬盘处于“可用”状态，即云硬盘没有挂载到云服务器时才可以扩容云硬盘。处于“正在使用”状态的云硬盘无法进行扩容。
卸载云硬盘：将云硬盘从挂载的云服务器卸载下来。扩容云硬盘：根据您的使用需求对云硬盘进行扩容。挂载云硬盘：将扩容后的云硬盘挂载至云服务器。初始化云硬盘：登录云服务器对云硬盘新增部分进行初始化。初始化成功后，扩容后的云硬盘便可正常使用。具体请参见《云硬盘用户指南》中“扩容云硬盘(Windows)”和“扩容云硬盘(Linux)”。
您可以购买最多100块云硬盘。
不会。关闭待卸载云硬盘所挂载的云服务器。待云服务器关机后，卸载云硬盘。
云硬盘有如下几种状态，每种状态的意义及支持的操作如所示。当云硬盘状态为错误、删除失败、扩容失败、恢复失败、回滚数据失败时，您可以参考。
目前云硬盘有四种异常状态，当处于这些状态时，请参考下面处理建议。
对于一个用户组的用户，加密特性使用权限的规则如下：拥有SecurityAdministrator权限的用户可以直接授权EVS访问KMS，使用加密特性。普通用户（即没有SecurityAdministrator权限的用户）使用加密特性时，根据该普通用户是否为用户组内第一个使用加密特性的用户，作如下区分：<ulid="evs_faq_0015__zh-cn_topic_0047272493_ul30334744165242"><liid="evs_faq_0015__zh-cn_topic_0047272493_li18355338165239">是，即该普通用户是用户组内第一个使用加密特性的，需先联系拥有SecurityAdministrator权限的用户增加权限，然后再使用加密特性。否，即用户组内的其他用户已经使用过加密特性，该普通用户有权限直接使用加密特性。下面，我们以一个用户组为例，介绍授权EVS访问KMS时的用户权限问题。假设该用户组有4个用户（用户1~用户4），其中，用户1拥有“SecurityAdministrator”权限，其他三个用户为普通用户，没有“SecurityAdministrator”权限，如所示。
在该用户组中，如果是用户1（拥有SecurityAdministrator权限）首次使用加密特性，则操作流程如下：创建Xrole，授权EVS访问KMS。授权成功后，系统会为您创建默认主密钥“evs/default”，此密钥用来加密云硬盘。说明：云硬盘的加密依赖KMS，首次使用加密特性时，需要授权EVS访问KMS。当授权成功后，用户组中的所有用户使用加密特性均无需再次进行授权操作。选择密钥。您可以选择使用的密钥如下：<ulid="evs_faq_0015__zh-cn_topic_0047272493_ul66321024171321"><liid="evs_faq_0015__zh-cn_topic_0047272493_li5131522171321">默认主密钥“evs/default”。用户主密钥，即您已有的密钥。新创建密钥，创建方法请参见《密钥管理服务用户指南》的“创建密钥”章节。用户1成功使用加密特性后，用户组中的所有用户都可以直接使用加密特性，无需联系用户1获取权限。
在该用户组中，如果是用户3（普通用户）首次使用加密特性，则操作流程如下：用户3使用加密特性，系统提示权限不足。联系用户1，获取SecurityAdministrator权限。用户1给用户3开放SecurityAdministrator权限。用户3拥有SecurityAdministrator权限后，也可以给其他普通用户添加SecurityAdministrator权限。用户3获取SecurityAdministrator权限后，创建Xrole，授权EVS访问KMS。用户3成功使用加密特性后，用户组中的所有用户都可以直接使用加密特性，无需联系用户1获取权限。
云硬盘的磁盘模式默认为VBD类型，只支持简单的SCSI读写命令。SCSI类型的云硬盘支持SCSI指令透传，允许云服务器操作系统直接访问底层存储介质。除了简单的SCSI读写命令，SCSI类型的云硬盘还可以支持更高级的SCSI命令。BMSBMS的操作系统中已经预安装了使用SCSI类型云硬盘所需的驱动，无需安装。ECS<ulid="evs_faq_0016__ul29589308164739"><liid="evs_faq_0016__li64977187164739">当ECS的操作系统为Windows时，具体请参见。当ECS的操作系统为Linux时，具体请参见。
快照有如下几种状态，每种状态的意义及支持的操作如所示。
A<h5>AZ</h5><p>参见</p>D<h5>地域</h5><p>地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布情况选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华北、中国华南和中国华东；针对海外，目前暂无可供选择的地址。</p>E<h5>EVS</h5><p>参见</p>
D<h5>地域</h5><p>地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布情况选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华北、中国华南和中国华东；针对海外，目前暂无可供选择的地址。</p>E<h5>EVS</h5><p>参见</p>
E
K-O
U-Z
参见
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布情况选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华北、中国华南和中国华东；针对海外，目前暂无可供选择的地址。
参见
地域（Region）指的是云硬盘所在的物理位置。您可以根据您的客户群体分布情况选择不同地域的云硬盘服务。针对中国境内，目前可供选择的地域有中国华北、中国华南和中国华东；针对海外，目前暂无可供选择的地址。
参见
参见
可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内下的其它可用分区，可用分区间通过内网访问。
云硬盘是一种基于分布式架构的，可弹性扩展的虚拟块存储设备。您可以在线进行操作，使用方式与传统服务器硬盘完全一致。同时，云硬盘具有更高的数据可靠性，更高的I/O吞吐能力和更加简单易用等特点，适用于文件系统、数据库或者其他需要块存储设备的系统软件或应用。
OBS为用户提供了超大存储容量的能力，适合存放任意类型的文件，适合普通用户、网站、企业和开发者使用。由于OBS是一项面向Internet访问的服务，提供了基于HTTP/HTTPS协议的Web服务接口，用户可以随时随地在任意可以连接至Internet的电脑上，通过OBS管理控制台或客户端访问和管理存储在OBS中的数据。此外，OBS支持JAVA、Python、.Net、iOS、C++、Android、Ruby、PHP等语言的SDK、以及兼容AmazonS3原生接口的RESTAPI接口，可使用户方便管理自己存储在OBS上的数据，以及开发多种类型的上层业务应用。
对象存储服务具有如下优势：数据稳定，业务可靠：OBS支撑华为手机云相册，数亿用户访问，稳定可靠。通过AZ内设备和数据多冗余、AZ之间数据容灾，保障数据持久性高达99.999999999%，业务连续性高达99.99%，远高于传统架构。多重防护，授权管理：OBS通过可信云认证，让数据存储安全放心。并支持多版本、服务端加密、防盗链、VPC网络隔离、访问日志审计以及细粒度的权限控制，保障数据安全可信。智能高效，随需扩展：OBS通过智能调度和响应，优化数据访问路径，并结合事件通知、传输加速、大数据垂直优化，为用户提供大并发、大带宽、稳定时延的数据访问体验，为业务保驾护航。简单易用，便于管理：OBS支持标准RESTAPI、多版本SDK和数据迁移工具，让业务快速上云。无需事先规划存储容量，存储资源可线性无限扩展，不用担心存储资源扩容、减容问题。数据分层，按需使用：提供按量计费和包年包月两种支付方式，支持标准、低频访问、归档数据独立计量计费，降低存储成本。
（OBS，ObjectStorageService）是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力，包括：创建、修改、删除桶，上传、下载、删除对象等。
桶（Bucket）是OBS中存储对象的容器。对象存储提供了基于桶和对象的扁平化存储方式，桶中的所有对象都处于同一逻辑层级，去除了文件系统中的多层级树形目录结构。对象存储服务设置有三类存储类别，分别为：标准存储、低频访问存储、归档存储，从而满足客户业务对存储性能、成本的不同诉求。创建桶可以指定桶的存储类别。OBS中的每个对象与其所属桶的存储类别相同。详情请参见。在OBS中，桶名必须是全局唯一的且不能修改，即用户创建的桶不能与自己已创建的其他桶名称相同，也不能与其他用户创建的桶名称相同。每个桶在创建时都会生成默认的桶ACL（AccessControlList），桶ACL列表的每项包含了对被授权用户授予什么样的权限，如读权限、写权限、完全控制权限等。用户只有对桶有相应的权限，才可以对桶进行操作，如创建、删除、显示、设置桶ACL等。一个用户最多可创建100个桶，但每个桶中存放的对象的数量和大小总和没有限制，用户不需要考虑数据的可扩展性。
对象（Object）是OBS中数据存储的基本单位，一个对象实际是一个文件的数据与其相关属性信息（元数据）的集合体。用户上传至OBS的数据都以对象的形式保存在OBS的桶中。Key：键值，即对象的名称，为经过UTF-8编码的长度大于0且不超过1024的字符序列。一个桶里的每个对象必须拥有唯一的对象键值。Metadata：元数据，即对象的描述信息，包括系统元数据和用户元数据，这些元数据以键值对（Key-Value）的形式被上传到OBS中。<ulid="obs_faq_0005__zh-cn_topic_0045829081_ul37780617"><liid="obs_faq_0005__zh-cn_topic_0045829081_li4481233">系统元数据由OBS自动产生，在处理对象数据时使用，包括Date，Content-length，Last-modify，Content-MD5等。用户元数据由用户在上传对象时指定，是用户自定义的对象描述信息。Data：数据，即对象的数据内容。通常，我们将对象等同于文件来进行管理，但是由于OBS是一种对象存储服务，并没有文件系统中的文件和文件夹概念。为了使用户更方便进行管理数据，OBS提供了一种方式模拟文件夹。通过在对象的名称中增加“/”，例如“test/123.jpg”。此时，“test”就被模拟成了一个文件夹，“123.jpg”则模拟成“test”文件夹下的文件名了，而实际上，对象名称（Key）仍然是“test/123.jpg”。
SAN存储提供给应用的是一个LUN或者是一个卷，LUN和卷是面向磁盘空间的一种组织方式，上层应用要通过FC或者ISCSI协议访问SAN。SAN存储处理的是管理磁盘的问题，其它事情都要依靠上层的应用程序实现。NAS存储提供给应用的是一个文件系统或者是一个文件夹，上层应用通过NFS和CIFS协议进行访问。文件系统要维护一个目录树。对象存储更加适合web类应用，基于URL访问地址提供一个海量的桶存储空间，能够存储各种类型的文件对象，对象存储是一个扁平架构，无需维护复杂的文件目录。无需考虑存储空间的限制，一个桶支持近乎无限大的存储空间。
OBS兼容AmazonS3RESTAPI。如果您有基于AmazonS3的业务，可以无缝地移植到OBS上。
OBS可以存储任何格式的任何类型数据。
OBS系统和单个桶都没有总数据容量和对象/文件数量的限制。
每个对象的大小最小可达1字节，最大可至5TB。如果您调用PUTObject的API上传，上传单个对象最大为5GB；如果您调用多段上传的API上传，上传单个对象最大为5TB；如果您通过OBS管理控制台上传，上传单个对象最大为50MB；如果您通过OBS客户端上传，上传单个对象最大是5TB。
OBS管理控制台对象存储服务在Portal中与云服务的其它服务产品共同提供Web版的用户统一自服务控制台，用户在统一自服务控制台内可以完成云服务中包括云存储在内各项产品的自服务操作。OBS客户端您可以安装OBS管理客户端软件，通过客户端软件管理OBS中存储的资源。OBS客户端软件包集成在OBS管理控制台中，登录OBS管理控制台，在OBS管理控制台主界面单击“下载OBS客户端”。RESTAPI您可以通过调用简单的RESTAPI接口来访问管理数据。
对象存储服务设置有如下存储类别，分别为：标准存储、低频访问存储、归档存储，从而满足客户业务对存储性能、成本的不同诉求。OBS标准存储拥有低访问时延和较高的吞吐量，因而适用于有大量热点文件（平均一个月多次）或小文件（&lt;1MB），且需要频繁访问数据的业务场景，例如：大数据、移动应用、热点视频、社交图片等场景。OBS低频访问存储适用于不频繁访问（平均一年少于12次）但在需要时也要求快速访问数据的业务场景，例如：文件同步/共享、企业备份等场景。与标准存储相比，低频访问存储有相同的数据持久性、吞吐量以及访问时延，且成本较低，但是可用性略低于标准存储。OBS归档存储适用于很少访问（平均一年访问一次）数据的业务场景，例如：数据归档、长期备份等场景。归档存储安全、持久且成本极低，可以用来替代磁带库。为了保持成本低廉，数据取回时间可能长达数分钟到数小时不等。
OBS客户端支持断点续传功能，OBS管理控制台、API、SDK暂不支持该功能。
OBS客户端、API、SDK均支持批量上传，而OBS管理控制台暂不支持批量上传。通过OBS客户端、API、SDK，您不仅可以批量一次上传多个文件，也可以一次性上传整个文件夹。
不一样。由于OBS是一种对象存储服务，并没有文件系统中的文件和文件夹概念。为了使用户更方便进行管理数据，OBS提供了一种方式模拟文件夹。通过在对象的名称中增加“/”，将该对象在管理控制台上模拟成一个文件夹的形式展现。
OBS支持JAVA、Python、.Net、iOS、C++、Android、Ruby、PHP等语言的SDK，当前已提供JAVA、Python、.Net、C++、Android、Ruby、PHP的SDK和SDK参考文档供下载。您可以在中搜索并下载这些资源。
在OBS上创建桶时，您可以指定一个区域。在该区域内，您的数据存储在多台设备上。
根据您的个人需求不同需要考虑多个因素。您可能希望将数据存储在具备以下条件的区域：距离您的客户、数据中心或其他OBS资源较近，以便缩短数据访问延迟。距离运营地点很远，以实现地理位置冗余和灾难恢复。让您能够达到特定法律和法规要求。
OBS支持批量删除对象，一次批量删除的对象数最多为100个。OBS管理控制台和OBS客户端均支持批量删除多个对象。
可以，AK与SK是用户访问OBS时需要使用的密钥对。不同的用户使用相同的一对AK和SK可以同时访问OBS中的资源，且访问到的资源相同。
相同，用户通过帐户密码登录OBS管理控制台后，可在“我的凭证”页面创建该帐户对应的AK和SK，若用户使用该AK和SK登录OBS客户端，访问到的OBS资源与通过登录OBS管理控制台访问到的OBS资源相同。
用户选择清除数据之后，系统会保证完全删除数据，不会留下残留信息，无需担心信息泄露。
可以。OBS支持对桶的访问请求创建并保存访问日志记录，可用于进行请求分析或日志审计。由于日志存储在OBS中也会占用用户租用的OBS存储空间，也即意味着将产生额外的存储费用，默认情况下，OBS不会为用户的桶收集访问日志。出于分析或审计等目的，用户也可以开启日志管理功能。通过访问日志记录，桶的所有者可以深入分析访问该桶的用户请求性质、类型或趋势。当用户开启一个桶的日志管理功能后，OBS会自动将对这个桶的访问请求记录日志，并生成日志文件写入用户指定的桶（即目标桶）中。
通过OBS管理控制台直接管理数据。通过应用程序调用简单的RESTAPI接口来访问管理数据。通过RESTAPI调用时，每个桶都有自动分配的域名供访问。通过OBS客户端或者第三方的客户端管理数据。
生命周期管理是指通过配置指定的规则，实现定时删除桶中的对象。
生命周期管理可适用于以下典型场景：周期性上传的日志文件，可能只需要保留一个星期或一个月。到期后要删除它们。某些文档在一段时间内经常访问，但是超过一定时间后就可能不会再访问了。这些文档需要在一定时间后删除。对于上述场景中的对象，您可以定义用于识别这些对象的生命周期管理规则，通过这些规则实现对象的生命周期管理。自动删除无用的文件后，由于您使用的OBS存储空间减少，这将一定程度上减少您的租赁费用。
存储类别为标准和低频访问的桶支持静态网站托管。用户可以通过OBS管理控制台将自己的桶配置成静态网站托管模式，当客户端通过桶的website接入点访问桶内的对象资源时，浏览器可以直接解析出这些网页资源，呈现给最终用户。
静态网站通常仅包含静态网页，以及可能包含部分可在客户端运行的脚本，如JavaScript、Flash等。
支持。在使用静态网站托管功能时，OBS支持配置请求重定向，即您可以将特定的请求或所有请求实施重定向。典型的应用场景包括：重定向所有请求到另外一个站点。设定特定的重定向规则，对特定的请求实施重定向。
跨域资源共享（CORS，Cross-OriginResourceSharing）是由W3C标准化组织提出的一种网络浏览器的规范机制，定义了一个域中加载的客户端Web应用程序与另一个域中的资源交互的方式。而在通常的网页请求中，由于同源安全策略SOP（SameOriginPolicy）的存在，不同域之间的网站脚本和内容是无法进行交互的。对象存储服务支持以下三种存储类别：标准存储、低频访问存储、归档存储。存储类别为标准和低频访问的桶支持配置CORS规则。
在云服务网申请成云服务正式用户，在网站申请开通OBS，开通后，使用生成密钥即可直接使用OBS。
对象存储服务提供按需、包年包月两种计费方式。详细的服务资费费率标准请参见。对象存储服务默认是按需计费的，即按实际使用的时长收费，以小时为单位，按每小时整点结算，不设最低消费标准。具体结算时，共分为三个计费项，总费用为三者之和，如所示。对象存储服务同时提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长，具体计费模型如所示。
通过CORS支持，使用JavaScript和HTML5来构建Web应用，直接访问OBS中的资源，而不再需要代理服务器做中转。使用HTML5中的拖拽功能，直接向OBS上传文件，展示上传进度，或是直接从Web应用中更新内容。托管在不同域中的外部网页、样式表和HTML5应用，现在可以引用存储在OBS中的Web字体或图片，让这些资源能被多个网站共享。
桶中不完整的数据称之为碎片，通常是由于数据上传失败而产生的。
OBS本身是非常安全的。OBS本身也提供端到端的安全服务。访问桶或对象时，如果桶或对象未公开，只有桶或对象的拥有者才能够访问，访问时需要提供安全密钥（AK/SK）。您还可以使用各种访问控制机制，例如桶策略和访问控制列表(ACL)，选择性地向您的用户和用户组授予权限。传输数据时，OBS支持HTTPS/SSL协议；如果您需要更高安全性，可在上传前自行进行加密。
系统对数据做的扫描仅限于判断数据块是否存在和被损坏（如有损坏，会启动修复），不会读取具体的内容。
管理员无法导出用户数据。访问桶或对象时，如果桶或对象未公开，只有桶或对象的拥有者才能够访问，访问时需要提供安全密钥（AK和SK）。
只有桶或对象的拥有者才能访问，访问时需要提供AK/SK，并且还有ACL、桶策略、防盗链等多种访问控制机制保证数据的访问安全。
您可以使用以下几种机制来控制对OBS的访问：访问密钥（AK和SK）身份验证OBS向您提供的帐户包括了AK（接入键标识，AccessKeyID）和SK（安全接入键，SecretAccessKey），用于鉴别身份。您通过客户端向OBS发送请求时，客户端发送的头域需要包含签名信息，该签名信息由SK、请求时间、请求类型等计算生成。访问控制列表(ACL)ACL可以限制所有用户或特定用户对单个桶或对象的访问权限，例如只读权限，写入权限，完全控制权限。所有的桶和对象在默认情况下，只允许桶的创建者访问桶内的对象。用户也可以设置其他的访问策略，比如对一个对象可以设置公开访问策略，允许所有人对其都有读权限。OBS支持在创建桶或上传对象时可以同时设置桶或对象的权限控制策略。如果在创建桶或上传对象时没有设置权限控制策略，则可以在之后的操作中对已存在的桶或对象，使用ACL操作获取或更改ACL。ACL只能用来授予权限。桶策略（BucketPolicy）通过桶策略，您可以定义OBS资源请求的规则，以控制单个用户或多个用户访问桶或桶下对象的访问权限。例如在某些请求条件下(例如请求来自某个IP或IP段)，授予对某个桶的写入权限。桶策略既可以用来授予权限，也可以禁止权限。
可以，在使用过程中，密钥（AK和SK）可以随时更换。
您在将数据上传到OBS中前，可以事先对数据进行加密，以保证传输和保存的安全性。OBS不限定客户端加密的技术。用户可根据需要对对象进行服务端加密，使对象更安全的存储在OBS中。需要上传的对象可以通过密钥管理服务器提供密钥的方式进行服务端加密。用户首先需要在KMS中创建密钥（或者使用KMS提供的默认密钥），当用户在OBS中上传对象时使用该密钥进行服务端加密。当启用服务端加密功能后，用户上传对象时，数据会在服务端加密成密文后存储。用户下载加密对象时，存储的密文会先在服务端解密为明文，再提供给用户。OBS支持通过接口提供KMS托管密钥的服务端加密(SSE-KMS)和客户提供加密密钥的服务端加密（SSE-C）两种方式，SSE-C方式是指OBS使用用户提供的密钥和密钥的MD5值进行服务端加密。接口相关详细信息请参见《对象存储服务接口参考》的“”章节。
建议启用版本控制功能，不带版本号删除对象仅产生一个带唯一版本号的删除标记，并不删除对象，从而可以找回数据。如果未启用版本控制功能，或启用该功能后指定版本号删除了对象，OBS将彻底删除这些数据，将无法找回。
OBS采用分块上传的模式上传数据，在下列情况下（但不仅限于此）通常会导致数据上传失败而产生垃圾数据，因此需要清理这些碎片数据来释放空间。网络条件较差，与OBS的服务器之间的连接经常断开。上传过程中，人为中断上传任务。设备故障。突然断电等特殊情况。
会，OBS采用分块上传的模式上传数据，在下列情况下（但不仅限于此）通常会导致数据上传失败而产生垃圾数据。网络条件较差，与OBS的服务器之间的连接经常断开。上传过程中，人为中断上传任务。设备故障。突然断电等特殊情况。
多版本控制为用户意外覆盖或删除对象场景提供了一种恢复手段。默认情况下，OBS中新创建的桶不会开启多版本功能，向同一个桶上传同名的对象时，新上传的对象将覆盖原有的对象。
开启多版本控制后：上传对象时，OBS自动为每个对象创建唯一的版本号。上传同名的对象将以不同的版本号同时保存在OBS中。可以指定版本号下载对象，不指定版本号默认下载最新的对象。如果需要彻底删除对象，必须在对象列表“显示”版本的情况下指定版本号进行删除，且删除后不可恢复。如果在对象列表“隐藏”版本的情况下，则删除对象后，OBS将仅产生一个带唯一版本号的删除标记，而并不实际删除该对象，当有访问该对象的请求时，则提示对象不存在；如果将删除标记删除，可取消对对象的删除。列出桶内对象列表时默认列出最新对象列表，也可以指定列出桶内所有版本对象列表。除删除标记外，每个版本的对象存储在OBS中均需要进行计费。当不需要对桶内对象进行版本控制时，可以暂停多版本控制：旧的版本数据将继续保留在OBS中，您需要手动删除不再需要的旧版本数据。仍可以指定版本号下载对象，不指定版本号默认下载最新的对象。除删除标记外，旧版本的对象存储在OBS中仍需要进行计费。
若开启了多版本控制，上传对象时，OBS自动为每个对象创建唯一的版本号。上传同名的对象将以不同的版本号同时保存在OBS中。若未开启多版本控制，向同一个文件夹中上传同名的对象时，新上传的对象将覆盖原有的对象。
您可以通过事件通知发送警报或触发工作流，并通过消息通知服务（SMN：SimpleMessageNotification）发送通知。
您可以通过事件通知发送警报或触发工作流，并通过消息通知服务（SMN：SimpleMessageNotification）发送通知。目前，OBS支持发布以下事件：使用Put方法上传对象。使用Post方法上传对象。使用APIs等工具复制对象。目前OBS管理控制台和OBS客户端暂时不支持对象复制功能。分段上传对象。指定对象版本号删除对象。不指定对象版本号删除对象。您可以将通知配置为按对象名称的前缀和后缀进行筛选。例如，您可以添加一个事件，以便仅在将带有“.jpg”后缀的图像文件添加到存储桶时收到通知。或者，您也可以添加一个事件，该配置仅在将带有前缀为“images/”的对象添加到存储桶时收到通知。
对象URL（对象共享）功能，可实现匿名用户通过共享链接地址，直接访问对象数据。OBS提供对象URL功能，当用户为特定对象设置了匿名用户的读取权限时，所有匿名用户均可使用该对象的URL链接地址，快速访问此特定对象。
元数据（Metadata）为描述对象的数据，主要是描述对象属性的信息。对象元数据是一组名称值对，用作对象管理的一部分。
元数据（Metadata）为描述对象的数据，主要是描述对象属性的信息。对象元数据是一组名称值对，用作对象管理的一部分。
FunctionStage是华为云提供的serverless服务，用户无需预配置服务器等基础设施，实现上传代码即可运行。FunctionStage在执行代码时实现计算资源自动伸缩，以弹性和高可靠性运行代码，并提供日志查询，性能监控等功能。用户借助FunctionStage可以快速构建起多种类型的应用和服务。用户无需管理和运维，由FunctionStage承担执行计算资源的管理工作，如服务器和操作系统维护、容量预置和自动扩展、代码监控和记录等。用户只需为运行代码消耗的计算资源支付费用，代码未运行时不产生费用。
用户使用FunctionStage时，不需要开通或者预配置计算、存储、网络等服务，由FunctionStage提供和管理底层计算资源，包括服务器CPU、内存、网络和其他配置/资源维护、代码部署、弹性伸缩、负载均衡、安全升级、资源运行情况监控等，用户只需要按照FunctionStage支持的编程语言提供代码，上传即可运行。
与FunctionStage相关联的华为云服务有：IAM（统一身份认证服务）、SMN（消息通知服务）、DMS（分布式消息服务）。使用FunctionStage创建函数之前需要在IAM创建“委托”，用以身份验证。使用FunctionStage创建SMN触发器之前需要在SMN创建“主题”，用以订阅消息主题。使用FunctionStage创建DMS触发器之前需要在DMS创建“队列”和“消费组”，用以定期拉取消息。
FunctionStage目前支持的编程语言有Node.js、Python、Java。
对于Node.js和Python运行时，支持用户在线编辑函数。在线编辑，只能实现比较简单的功能，不能引入标准及第三方类库。由于Java是编译型语言，所以不能在线编辑代码，只能上传jar包或者zip包，zip包中也必须是编译好的jar包。如果开发一个逻辑相对复杂函数，可以在本地编码，构建打包（包含标准及第三方类库），上传至FunctionStage即可运行。
用户可使用编程语言和操作系统的功能，在函数中创建额外的线程和进程。
用户在本地开发程序之后打包，必须是ZIP包（Java、Node.js、Python）或者JAR包（Java），上传至FunctionSage即可运行，无需其它的部署操作。
12.执行以下命令，设置服务器重启后永久关闭防火墙。搭建Web环境一、安装Web环境Complete!二、配置Web环境部署网站代码验证搭建结果|
通信平台云提供的语音、视频、协作能力，能够充分满足在线培训的应用场景需求，在实际使用过程中，用户可以通过简单操作和基于通信平台云的二次开发，快速构建定制化的在线培训应用系统。
二次开发流程二次开发指南&gt;接口调用流程&gt;在线培训的核心功能开发
使用华为云只需五步初级篇将介绍使用华为云企业服务的五个步骤，包括获取账户、挑选服务、购买服务、支付费用和使用业务。
使用华为云搭建网站业务进阶篇将介绍如何使用华为云搭建网站业务，帮助您使用华为云服务在实际场景应用中的部署应用。
通信平台云入门操作指引以在线培训应用场景为例我要购买ECS使用指南我要备案备案成功，请妥善保管备案号和备案密码...
常用服务账号服务支付服务用户服务
知识渊博的智能问答机器人
为您在线解答售前（5*8）、售后咨询（7*24）服务
欢迎提出宝贵的意见和建议，我们将积极采纳，更好改善我们的服务。
为您提供咨询和定制化解决方案等服务
知识渊博的智能问答机器人
为您在线解答售前（5*8）、售后咨询（7*24）服务
欢迎提出宝贵的意见和建议，我们将积极采纳，更好改善我们的服务。
为您提供咨询和定制化解决方案等服务
为您在线解答售前（5*8）、售后咨询（7*24）服务
欢迎提出宝贵的意见和建议，我们将积极采纳，更好改善我们的服务。
为您提供咨询和定制化解决方案等服务
欢迎提出宝贵的意见和建议，我们将积极采纳，更好改善我们的服务。
为您提供咨询和定制化解决方案等服务
为您提供咨询和定制化解决方案等服务
用户通过登录管理控制台，选择“安全&gt;合作伙伴产品中心&gt;主机入侵检测”，进入页面查看主机入侵检测客户端的运行状态。当“主机检测状态”为“异常”时，表明已成功安装客户端，并且开启了入侵检测服务，但客户端与服务器间通信异常。可能的原因：网络故障，或者是客户端进程异常。处理方法：由于网络故障导致的异常，在网络恢复正常后客户端状态会自动更新为“正常”，不需要人为处理。如果长时间客户端状态异常，需要登录弹性云服务器，重启或重新安装客户端。
登录管理控制台，选择“安全&gt;合作伙伴产品中心&gt;主机入侵检测”，进入“主机列表”页面。找到需要执行扫描的弹性云服务器，单击“手动扫描”。对于“扫描状态”为“扫描完成”的弹性云服务器，选择“更多&gt;扫描详情”可查看报告。
目前主机入侵检测只提供基础的检测和告警服务，不提供自动修复功能。对于主机入侵检测和扫描产生的告警，用户需要自己修改弹性云服务器的相应配置进行处理，例如更改检测到的弱口令。
此项服务目前是免费提供给用户使用的。
三步即可启用服务：下载客户端到本地，上传客户端到弹性云服务器。登录弹性云服务器，安装客户端。<ulid="ZH-CN_TOPIC_0029588609__ul68417361997"><liid="ZH-CN_TOPIC_0029588609__li263177451997">Linux环境：请使用root用户安装客户端，安装成功后客户端自动运行。Windows环境：请使用Administrator用户安装客户端，安装成功后客户端自动运行。登录管理控制台，选择“安全&gt;合作伙伴产品中心&gt;主机入侵检测”，单击“开启检测”。
H
Z
参见
主机入侵检测服务为用户提供一个针对主机的基础安全检测平台，检测云服务器是否遭受暴力破解攻击、是否有异地登录情况、识别云服务器的弱点等。用户通过管理控制台，可以对主机入侵检测功能进行配置，执行手动扫描，查看检测报告。用户根据提示的云服务器缺陷，可以有针对性地进行安全加固，提高系统的安全性，降低云服务器被黑客入侵的风险。
主机漏洞检测服务提供的检测数据包括：影响弹性云服务器的TOP7高危漏洞，漏洞分级统计详情，受高危漏洞影响的TOP7弹性云服务器的统计数据。数据来源：从当前时间开始计算，过去24小时内所有主机的扫描结果。
漏洞等级采用CVSS2.0标准的评分原则，对单个漏洞进行基本向量评分。CVSS:CommonVulnerabilityScoringSystem，即“通用漏洞评分系统”，是一个“行业公开标准，其被设计用来评测漏洞的严重程度，并帮助确定所需反应的紧急度和重要度”。CVSS系统对所有漏洞按照从0.0至10.0的级别进行评分，其中，10.0表示最高安全风险。在CVSS系统中获得0.0至3.9的分数的低危漏洞仅可能被本地利用且需要认证。成功的攻击者很难或无法访问不受限制的信息、无法破坏或损坏信息且无法制造任何系统中断。示例包括默认或可推测的SNMP社区名称以及OpenSSLPRNG内部状态发现漏洞。在CVSS系统中获得4.0至6.9的分数的中危漏洞可被拥有中级入侵经验者利用，且不一定需要认证。成功的攻击者可以部分访问受限制的信息、可以破坏部分信息且可以禁用网络中的个体目标系统。示例包括允许匿名FTP可写入和弱LAN管理器散列。在CVSS系统中获得7.0至10.0的分数的高危漏洞可被轻易访问利用，且几乎不需要认证。成功的攻击者可以访问机密信息、可以破坏或删除数据且可以制造系统中断。示例包括匿名用户可以获取Windows密码策略。
H
L
Z
参见
漏洞是软件代码中未受保护的部分，攻击者可能蓄意利用其达到自己的目的。例如，复制未受保护的应用程序中所使用的数据。扫描计算机漏洞可帮助您发现计算机中的此类弱点。
主机漏洞检测，即HVD（HostVulnerabilityDetection），为用户提供针对弹性云服务器（ECS）的安全检测服务，通过安装到ECS的Agent定期对操作系统进行扫描，帮助您及时了解系统存在的安全漏洞，在漏洞被利用之前发现漏洞并修补漏洞，防患于未然，提高系统的安全性。
A-E
F-J
P-T
U-Z
表示用户身份的密钥对。
系统中用于用户身份鉴权的凭证，例如密码、PIN码、数字证书等。
完成同一个目的的一组权限的集合。
能够安全地控制用户对服务和资源的访问权限。可以使用它创建和管理用户和群组，并使用各种权限来允许或拒绝他们对资源的访问。
用户是指云服务的使用人员，对应企业内的员工，具有身份凭证（密码和访问密钥），可以登录管理控制台或者访问API。
用户的分组，往往指代企业内部的部门/工作组。同一用户组的用户具有相同的权限。
支持在线迁移。支持X86架构下主流的Linux、Windows等操作系统平台迁移，部署简。支持基于Windows和Linux在线块级迁移、文件级迁移、数据同步，以及基于Windows的在线分段块级迁。支持基于华为FusionSphere云平台的P2V和V2V业务迁移操作。支持并发迁移任务。支持断点续传。多次数据同步功能保障数据一致性。
报价及影响因素说明：<ulid="ZH-CN_TOPIC_0051027070__ul56310613192653"><liid="ZH-CN_TOPIC_0051027070__li63656929192627">标准业务迁移服务方案按照整体打包的方式向用户销售，因而它的服务价格以项目整体报价，不存在分项报价和报价组合的说法。定制化业务迁移服务方案报价根据你方需求评估工作时间，再以人天方式进行项目整体报价。最终的服务报价与虚拟机数量、待迁移数据量以及服务时间等因素相关。支付方式说明：支付方式为用户经理代理下单，用户在控制台收到支付订单支付即可。
DCRainbowhConvertor迁移工具（简称“hConvertor”）是华为自研的迁移工具，提供将主机（X86服务器或其他特定虚拟化平台的虚拟机）系统及数据完整迁移到FusionCompute环境虚拟机上的功能。
对业务连续性要求高的迁移，可以采用在线迁移的方式，并且选择选在业务量最低时进行业务切换，最大幅度降低业务切换对用户感受的影响。
专线网络带宽及网络质量。迁移源主机和目的虚拟机的磁盘IO。迁移数据总量大小。源主机和目的主机性能（如：CPU、内存等）。
通常，有如下情景需要提供业务迁移服务：原业务平台即将过保或已过保，拟采购华为虚拟化平台的情景。原业务平台空间已无法再次扩容，通过购买华为虚拟化平台提供更大容量空间的情景。原业务平台性能已不能满足业务需要，购买华为虚拟化平台来提升性能的场景数据中心虚拟化资源池建设，需要对整体架构重新设计时。
P2V(传统物理设备到云平台)。V2V（其他公司虚拟化平台到华为云平台）。华为云平台内部迁移。
应用级业务迁移：使用专门的应用层迁移工具，在保证可用性前提下，从应用程序层面，将数据从旧系统迁移到新系统，满足用户迁移同时，完成对操作系统、数据库软件的升级。例如：Oracle和SQLSERVER的在线迁移。文件级业务迁移：根据用户的需要，通过迁移工具，将用户的工作负载以基于文件系统的方式，从源主机迁移到目标主机，以满足用户对磁盘规格的重规划、操作系统的升级。系统级业务迁移：在用户的一台主机上运行了大量应用，可以通过迁移工具将主机硬件以上的系统迁移到目标虚拟机上，包括操作系统、应用程序和配置数据，主要用于系统盘的迁移。
本身免费，不收取操作系统License费用，收取私有镜像存储费用。当前为试用阶段，您可以免费使用。
Windows适用于Windows环境下的开发平台或运营业务。系统盘要求40GB及以上、内存1GB及以上。可以安装IIS、SQLServer等。Linux适用于Linux环境下的开发平台或运营业务。当前提供CentOS（推荐）和Ubuntu类型等操作系统。系统盘要求40GB及以上、内存512MB及以上。4G以上内存操作系统选择如果使用4GB及以上内存，请选择64位及以上的操作系统（32位操作系统只能4GB内寻址，超过4GB的内存操作系统无法访问）。
在当前阶段，您在一个区域内默认最多可以创建10个私有镜像。如果您需要创建更多的私有镜像，可以通过提交工单的方式，申请扩大配额上限。
使用私有镜像创建的云服务器，其系统盘大小不能任意指定，必须和镜像的系统盘大小相同。CPU、内存、带宽、数据盘可以根据需要进行修改。
使用镜像创建云服务器，其系统盘大小不能任意指定，必须和镜像的系统盘大小相同。
如果没有你所需要的镜像文件，可拨打免费客服电话4000-955-988咨询或者邮件至hwclouds.cs@huawei.com邮箱。
基于云服务器制作镜像是免费的。但后续会收取镜像存储费用。当前阶段为试用期，您可以免费使用。
私有镜像占用的对象存储空间，后续会按照存储容量按需收费。当前阶段是试用阶段，您可以免费使用。
使用云服务器创建私有镜像，通常需要约20分钟。
是的。运行状态下的云服务器，其内存可能会缓存正准备写入的数据，为了避免您制作的镜像出现数据丢失问题，请您在制作镜像前关闭云服务器。
如果您通过镜像文件注册私有镜像时，填写的系统磁盘容量小于镜像文件内部的系统盘容量，在创建云服务器时可能会导致镜像文件中的数据无法写入，导致云服务器创建失败。如果出现此类情况，请您删除使用错误参数注册的镜像，并选择正确的配置参数重新创建私有镜像。
如果您没有将云服务器网卡配置成DHCP，或者没有删除残留的udev规则。那么，通过镜像文件注册的私有镜像所创建出的云服务器仍和源镜像文件中的配置保持一致，或者出现云服务器的网卡不从eth0开始的情况。此时，您需要通过云服务器的远程登录功能对云服务器再次进行手动配置。如果用于创建您的Linux云服务器的镜像没有提前进行手动配置，在创建Linux云服务器过程中可能会导致以下三种情况出现。无法实现自定义密码注入。无法注入证书。无法实现其他可能的云服务器自定义配置。如果您没有清理“fstab”文件中对用户磁盘的自动挂载检测相关信息，可能会导致创建出来的云服务器在启动时出现异常。
目前仅支持VMDK、VHD、QCOW2和ZVHD格式的镜像注册。不支持-flat.vmdk格式的镜像、包含任何快照卷或者包含差分卷的镜像文件包。用户可以使用qemu-img开源工具将对应的镜像转换成支持的格式后，再进行上传。Windows平台下qemu-img开源工具相关安装和使用可以参考以下地址：。
通常情况下，这是由于没有启动时没有加载xen-blockfront.ko模块导致的，您需要修改操作系统内核启动参数。登录VNC后如所示。该步骤需要在操作系统启动后执行，建议用户在原来创建镜像的源云服务器中启动修改。修改操作系统内核启动参数操作步骤如下。执行以下命令，登录操作系统。lsinitrd/boot/initramfs-<emid="ims_faq_0018__zh-cn_topic_0029124532_zh-cn_topic_0027434320_i401275394028">操作系统的启动内核版本号</em>.img|grep-ixen<ulid="ims_faq_0018__zh-cn_topic_0029124532_ud11b5ac656014e9db18bf68a9844200b"><liid="ims_faq_0018__zh-cn_topic_0029124532_l28017a11ec4d437eac03ed373b3bc60e">如果回显中包含“xen-blockfront.ko”的相关信息，请您联系技术支持。如果没有回显，执行。对下面原有的grub.conf文件进行。<ulid="ims_faq_0018__zh-cn_topic_0029124532_u3ed02047fb3f4ed9a7e25d5b47a8459f"><liid="ims_faq_0018__zh-cn_topic_0029124532_l82c1499875414c6ebb3003226d5d9276">对于CentOS6系列，请执行以下命令进行备份。cp/boot/grub/grub.conf/boot/grub/grub.conf.bak对于CentOS7系列，请执行以下命令进行备份。cp/boot/grub2/grub.conf/boot/grub2/grub.conf.bak使用vi编辑器打开grub配置文件。以CentOS7系列为例，执行以下命令。vi/boot/grub2/grub.conf在对应默认的启动内核后面增加参数“xen_emul_unplug=never”，如所示按“ESC”，再输入“:wq”并单击回车，退出vi编辑器。将该云服务器制作成为镜像，重新上传并注册到公有云平台中。
用户B拒绝了用户A的共享镜像的情况下，如果需要使用该共享镜像，需要告知用户A按照以下步骤完成操作。用户A在共享镜像租户列表中，删除用户B的帐户名称。请参考。用户A重新将用户B添加为镜像的共享租户。请参考。
如果您通过镜像文件注册私有镜像选择了进行后台自动化配置的方式，那么后台系统会进行以下操作。对于Linux操作系统：修改“grub”和“syslinux”配置文件，增加内核启动参数，并将磁盘分区名改成“UUID=<emid="ims_faq_0020__i17485973161837">磁盘分区的UUID</em>”。检查“/etc/fstab”文件中的磁盘分区名并修改成“UUID=<emid="ims_faq_0020__i18940734161847">磁盘分区的UUID</em>”的形式。检查“initrd”文件是否含有XEN和IDE驱动，若不含有，则加载XEN和IDE驱动。修改“xwindows”配置文件“/etc/X11/xorg.conf”，避免图形化界面显示失败。删除VMwaretools对应的服务。针对这4款Linux：CentOS7.2、centos6.5、SUSESLES11SP4、redhat7.2，会添加Linux操作系统自带的virtio前端驱动到initrd或initramfs中。
通常是由于跨平台后，磁盘分区的ID发生变化，导致镜像无法按照原来磁盘分区ID查询对应的分区名，此时,需要将镜像中的磁盘分区修改为“UUID=<emid="ims_faq_0021__i2207523162146">磁盘分区的UUID</em>”。以OpenSUSE13.2的镜像为例，修改分区名的操作步骤如下。执行以下命令，确认当前磁盘分区对应的ID。ls-l/dev/disk/by-id/回显类似如下所示。total0lrwxrwxrwx1rootroot10Jul2201:35ata-QEMU_HARDDISK_QM00001-&gt;../../xvdalrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part1-&gt;../../xvda1lrwxrwxrwx1rootroot12Jul2201:35ata-QEMU_HARDDISK_QM00001-part10-&gt;../../xvda10lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part2-&gt;../../xvda2lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part5-&gt;../../xvda5lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part6-&gt;../../xvda6lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part7-&gt;../../xvda7lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part8-&gt;../../xvda8lrwxrwxrwx1rootroot11Jul2201:35ata-QEMU_HARDDISK_QM00001-part9-&gt;../../xvda9lrwxrwxrwx1rootroot10Jul2201:35ata-QEMU_HARDDISK_QM00005-&gt;../../xvdelrwxrwxrwx1rootroot10Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-&gt;../../xvdalrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part1-&gt;../../xvda1lrwxrwxrwx1rootroot12Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part10-&gt;../../xvda10lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part2-&gt;../../xvda2lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part5-&gt;../../xvda5lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part6-&gt;../../xvda6lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part7-&gt;../../xvda7lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part8-&gt;../../xvda8lrwxrwxrwx1rootroot11Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00001-part9-&gt;../../xvda9lrwxrwxrwx1rootroot10Jul2201:35scsi-SATA_QEMU_HARDDISK_QM00005-&gt;../../xvde其中，“ata-QEMU_HARDDISK_xxx”和“scsi-SATA_QEMU_HARDDISK_xxx”表示该云服务器的磁盘为qemu模拟设备。磁盘分区ID为“-&gt;”左侧内容，对应的分区名为“-&gt;”右侧内容。执行以下命令，确认当前磁盘分区对应的UUID。ls-l/dev/disk/by-uuid/回显类似如下所示。total0lrwxrwxrwx1rootroot11Jul2201:3545ecd7a0-29da-4402-a017-4564a62308b8-&gt;../../xvda5lrwxrwxrwx1rootroot11Jul2201:3555386c6a-9e32-41d4-af7a-e79596221f51-&gt;../../xvda9lrwxrwxrwx1rootroot11Jul2201:3555f36660-9bac-478c-a701-7ecc5347f789-&gt;../../xvda8lrwxrwxrwx1rootroot11Jul2201:35780f36bc-0ada-4c98-9a8d-44570d65333d-&gt;../../xvda1lrwxrwxrwx1rootroot11Jul2201:35b3b7c47f-6a91-45ef-80d6-275b1cc16e19-&gt;../../xvda6lrwxrwxrwx1rootroot11Jul2201:35ea63b55d-3b6e-4dcd-8986-956b72bac3e9-&gt;../../xvda7lrwxrwxrwx1rootroot12Jul2201:35eb3cc645-925e-4bc5-bedf-c2a6f3b65809-&gt;../../xvda10其中，每条磁盘信息中，“-&gt;”左侧为磁盘的UUID，“-&gt;”右侧为对应的磁盘分区名。结合结果，可以得到磁盘分区名，磁盘分区ID和磁盘分区UUID的对应关系。执行以下命令，查看“/etc/fstab”文件中分区名称。vi/etc/fstab回显类似如下所示。/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part5/ext3defaults,errors=panic11/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part1/bootext3defaults,errors=panic12/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part6/homeext3nosuid,errors=panic12/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part10/optext3defaults,errors=panic12/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part7/tmpext3nodev,nosuid,errors=panic12/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part9/usrext3defaults,errors=panic12/dev/disk/by-id/scsi-SATA_QEMU_HARDDISK_QM00001-part8/varext3nodev,nosuid,errors=panic12sysfs/syssysfsnoauto00proc/procprocdefaults00usbfs/proc/bus/usbusbfsnoauto00devpts/dev/ptsdevptsmode=0620,gid=500/dev/cdrom/media/udf,iso9660noexec,noauto,nouser,nodev,nosuid12tmpfs/dev/shmtmpfsnoexec,nodev,nosuid00回显中第一列为磁盘分区ID。按“i”进入编辑模式，按照和的查询结果，将“/etc/fstab”文件中“/dev/disk/xxx”所在行磁盘分区ID修改为“UUID=<emid="ims_faq_0021__i60155770161941">磁盘分区的UUID</em>”的形式。修改结果如下所示。UUID=45ecd7a0-29da-4402-a017-4564a62308b8/ext3defaults,errors=panic11UUID=780f36bc-0ada-4c98-9a8d-44570d65333d/bootext3defaults,errors=panic12UUID=b3b7c47f-6a91-45ef-80d6-275b1cc16e19/homeext3nosuid,errors=panic12UUID=eb3cc645-925e-4bc5-bedf-c2a6f3b65809/optext3defaults,errors=panic12UUID=ea63b55d-3b6e-4dcd-8986-956b72bac3e9/tmpext3nodev,nosuid,errors=panic12UUID=55386c6a-9e32-41d4-af7a-e79596221f51/usrext3defaults,errors=panic12UUID=55f36660-9bac-478c-a701-7ecc5347f789/varext3nodev,nosuid,errors=panic12sysfs/syssysfsnoauto00proc/procprocdefaults00usbfs/proc/bus/usbusbfsnoauto00devpts/dev/ptsdevptsmode=0620,gid=500/dev/cdrom/media/udf,iso9660noexec,noauto,nouser,nodev,nosuid12tmpfs/dev/shmtmpfsnoexec,nodev,nosuid00说明：请确保对应的UUID修改正确，否则会造成云服务器无法正常启动。按“Esc”后，输入“:wq”，按“Enter”。保存设置并退出vi编辑器。检查引导系统的配置文件中的分区名。不同操作系统对应的系统引导配置文件，通常为如下几种。请确认当前操作系统使用系统引导配置文件的文件名。<ulid="ims_faq_0021__ul40048048155218"><liid="ims_faq_0021__li4037438155218">grub引导配置文件<ulid="ims_faq_0021__ul13041754155229"><liid="ims_faq_0021__li21282470155227"><emid="ims_faq_0021__i12658557155214">/boot/grub/grub.conf</em><emid="ims_faq_0021__i18710201155214">/boot/grub/menu.lst</em><emid="ims_faq_0021__i39131309155214">/boot/grub/grub.cfg</em><emid="ims_faq_0021__i15519490155214">/boot/grub2/grub.cfg</em>syslinux引导配置文件<ulid="ims_faq_0021__ul46054397155256"><liid="ims_faq_0021__li4863616155250"><emid="ims_faq_0021__i39419617155214">/extlinux.conf</em><emid="ims_faq_0021__i38872414155214">/boot/syslinux/extlinux.conf</em><emid="ims_faq_0021__i61657848155214">/boot/extlinux/extlinux.conf</em><emid="ims_faq_0021__i28229782155214">/boot/syslinux/syslinux.cfg</em><emid="ims_faq_0021__i4911009155214">/syslinux/syslinux.cfg</em><emid="ims_faq_0021__i62247424155214">/syslinux.cfg</em>按“i”进入编辑模式，修改引导系统的配置文件中的分区名。按照和的查询结果，将“/boot/grub/menu.lst”文件中的磁盘分区名修改为“UUID=<emid="ims_faq_0021__i51931176161930">磁盘分区的UUID</em>”的形式。default0timeout3titlexxxServerOS-xxxxxxkernel/boot/vmlinuz-3.0.101-0.47.52-defaultroot=UUID=45ecd7a0-29da-4402-a017-4564a62308b8resume=memmap=0x2000000$0x3E000000nmi_watchdog=2crashkernel=512M-:256Mconsole=ttyS0,115200console=tty0xen_emul_unplug=allinitrd/boot/initrd-3.0.101-0.47.52-default按“Esc”后，输入“:wq”，按“Enter”。保存设置并退出vi编辑器。
通过外部镜像文件制作私有镜像过程中，需要对镜像完成初始化配置才能创建正常状态的私有镜像。如果上传的外部镜像文件已经完成了初始化设置，可以在注册镜像时勾选“已完成镜像的初始化配置”，注册后的私有镜像即为正常状态的私有镜像。使用外部镜像文件创建Linux操作系统私有镜像过程中，需要对镜像完成的初始化配置包括以下操作：查看并清理网络规则文件查看并设置网卡属性安装并配置Cloud-init工具具体操作请参考和。以下相关步骤操作需要在云服务器内部完成，强烈建议您选择原有平台中导出镜像前的虚拟机实施修改操作。添加Linux操作系统自带的xen-pv和virtio前端驱动到initrd或initramfs中。只需要添加module形式存在OS内的驱动，在内核中以build-in形式存在的驱动不需要添加。<ulid="ims_faq_0022__ul430870641675"><liid="ims_faq_0022__li391132661675">RHEL、CentOS、Oracle系列操作系统，以CentOS7.1为例，需修改“/etc/dracut.conf”文件，在add-driver项中添加xen-pv以及virtio的驱动（xen-pv驱动：xen-blkfront、xen-netfront；virtio驱动：virtio_blk、virtio_scsi、virtio_net、virtio_pci、virtio_ring、virtio），驱动名之间以空格隔开，保存并退出/etc/dracut.conf文件，执行dracut-f命令，重新生成initrd。<oltype="a"id="ims_faq_0022__ol341720801675"><liid="ims_faq_0022__li86816551675">修改/etc/dracut.conf在add-driver项中添加xen-pv和virtio的驱动（具体格式要根据OS本身的要求来决定）：[root@CTU10000xxxxx<fontstyle="font-size:8pt"face="CourierNew">~</font>]#vi/etc/dracut.conf#additionalkernelmodulestothedefaultadd_drivers+="xen-blkfrontxen-netfrontvirtio_blkvirtio_scsivirtio_netvirtio_pcivirtio_ringvirtio"……保存并退出/etc/dracut.conf文件，执行dracut-f命令，重新生成initrd。说明：如果引导的虚拟文件系统不是默认的initramfs或者initrd，则命令为dracut-f实际使用的initramfs或者initrd文件名。实际使用的initramfs或者initrd文件名可在menu.lst或者grub.cfg配置（“/boot/grub/menu.lst”或“/boot/grub/grub.cfg”或“/boot/gurb2/grub.cfg”）中获取。以centos6为例如下所示：default=0timeout=1serial--unit=0--speed=115200terminal--timeout=1serialconsoletitleCentOS(2.6.32-431.29.2.el6.x86_64)root(hd0,0)kernel/boot/vmlinuz-2.6.32-431.29.2.el6.x86_64roroot=UUID=dcb1645e-05a6-4311-8bce-a9c12bec5801rd_NO_LUKSrd_NO_LVMLANG=en_US.UTF-8rd_NO_MDconsole=ttyS0,115200crashkernel=autoSYSFONT=latarcyrheb-sun16KEYBOARDTYPE=pcKEYTABLE=usrd_NO_DMinitrd<emid="ims_faq_0022__i655439001675">/boot/initramfs-2.6.32-431.29.2.el6.x86_64.img</em>其中，initrd所在行的/boot/initramfs-2.6.32-431.29.2.el6.x86_64.img为实际使用的initrd文件，执行的时候请按照dracut-f/boot/initramfs-2.6.32-431.29.2.el6.x86_64.img执行。如果initrd所在行的initrd文件不包含/boot目录，如/initramfs-xxx，请在执行dracut命令时增加boot目录，例如：dracut-f/boot/initramfs-xxx。以centos7为例如下所示：menuentry'CentOSLinux(3.10.0-514.el7.x86_64)7(Core)'--classcentos--classgnu-linux--classgnu--classos--unrestricted$menuentry_id_option'gnulinux-3.10.0-514.el7.x86_64-advanced-3e109aa3-f171-4614-ad07-c856f20f9d25'{load_videosetgfxpayload=keepinsmodgzioinsmodpart_msdosinsmodxfssetroot='hd0,msdos1'if[x$feature_platform_search_hint=xy];thensearch--no-floppy--fs-uuid--set=root--hint='hd0,msdos1'3e109aa3-f171-4614-ad07-c856f20f9d25elsesearch--no-floppy--fs-uuid--set=root3e109aa3-f171-4614-ad07-c856f20f9d25filinux16/boot/vmlinuz-3.10.0-514.el7.x86_64root=UUID=3e109aa3-f171-4614-ad07-c856f20f9d25roconsole=tty0console=ttyS0,115200n8crashkernel=autoconsole=ttyS0,115200LANG=en_US.UTF-8initrd16<emid="ims_faq_0022__i665126751675">/boot/initramfs-3.10.0-514.el7.x86_64.img</em>}其中，initrd16所在行的/boot/initramfs-3.10.0-514.el7.x86_64.img为实际使用的initrd文件，执行的时候请按照dracut-f/boot/initramfs-3.10.0-514.el7.x86_64.img行，如果initrd16所在行的initrd文件不包含/boot目录，如/initramfs-xxx，请在执行dracut命令时增加boot目录，例如：dracut-f/boot/initramfs-xxx。检查是否已经成功装载了XEN的PVOPS或者KVM的virtio相应模块。[root@CTU10000xxxxxhome]#lsinitrd/boot/initramfs-`uname-r`.img|grepxen-rwxr--r--1rootroot54888Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/block/xen-blkfront.ko-rwxr--r--1rootroot45664Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/net/xen-netfront.ko[root@CTU10000xxxxxhome]#lsinitrd/boot/initramfs-`uname-r`.img|grepvirtio-rwxr--r--1rootroot23448Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/block/virtio_blk.ko-rwxr--r--1rootroot50704Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/net/virtio_net.ko-rwxr--r--1rootroot28424Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/scsi/virtio_scsi.kodrwxr-xr-x2rootroot0Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/virtio-rwxr--r--1rootroot14544Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/virtio/virtio.ko-rwxr--r--1rootroot21040Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/virtio/virtio_pci.ko-rwxr--r--1rootroot18016Jul1617:53lib/modules/2.6.32-573.8.1.el6.x86_64/kernel/drivers/virtio/virtio_ring.koUbuntu和Debian系列系统，修改/etc/initramfs-tools/modules文件，添加xen-pv以及virtio的驱动（xen-pv驱动：xen-blkfront、xen-netfront；virtio驱动：virtio_blk、virtio_scsi、virtio_net、virtio_pci、virtio_ring、virtio），驱动名之间是空格隔开，保存并退出/etc/initramfs-tools/modules文件，执行update-initramfs-u命令，重新生成initrd。<oltype="a"id="ims_faq_0022__ol269184851675"><liid="ims_faq_0022__li140579931675">修改/etc/initramfs-tools/modules文件，添加xen-pv以及virtio的驱动（具体格式要根据OS本身的要求来决定）。[root@CTU10000xxxxx<fontstyle="font-size:8pt"face="CourierNew">~</font>]#vi/etc/initramfs-tools/modules……#Examples:##raid1#sd_mOdxen-blkfrontxen-netfrontvirtio_blkvirtio_scsivirtio_netvirtio_pcivirtio_ringvirtio……执行update-initramfs-u命令，重新生成initrd。检查是否已经成功装载了XEN的PVOPS或者KVM的virtio相应模块。[root@CTU10000xxxxxhome]#lsinitramfs/boot/initrd.img-`uname-r`|grepxenlib/modules/3.5.0-23-generic/kernel/drivers/net/ethernet/qlogic/netxenlib/modules/3.5.0-23-generic/kernel/drivers/net/ethernet/qlogic/netxen/netxen_nic.kolib/modules/3.5.0-23-generic/kernel/drivers/net/xen-netbacklib/modules/3.5.0-23-generic/kernel/drivers/net/xen-netback/xen-netback.kolib/modules/3.5.0-23-generic/kernel/drivers/block/xen-blkbacklib/modules/3.5.0-23-generic/kernel/drivers/block/xen-blkback/xen-blkback.ko[root@CTU10000xxxxxhome]#lsinitramfs/boot/initrd.img-`uname-r`|grepvirtiolib/modules/3.5.0-23-generic/kernel/drivers/scsi/virtio_scsi.koSUSE和openSUSE系列系统，修改/etc/sysconfig/kernel文件，在INITRD_MODULES=""添加xen-pv以及virtio的驱动，（xen-pv驱动：xen_vnif、xen_vbd、xen_platform_pci；virtio驱动：virtio_blk、virtio_scsi、virtio_net、virtio_pci、virtio_ring、virtio），驱动名之间是空格隔开，执行mkinitrd命令，重新生成initrd。说明：SUSE系列操作系统首先应确认OS已经安装了xen-kmp包(xen-pv的驱动包)：linux-s27m:~#rpm-qa|grepxen-kmp回显类似如下：xen-kmp-default-4.2.2_04_3.0.76_0.11-0.7.5如果没有安装xen-kmp的包，请到安装ISO中获取并安装。<oltype="a"id="ims_faq_0022__ol469281901675"><liid="ims_faq_0022__li151964891675">修改/etc/sysconfig/kernel文件，在INITRD_MODULES=""添加xen-pv以及virtio的驱动（具体格式要根据OS本身的要求来决定）。SIA10000xxxxx:<fontstyle="font-size:8pt"face="CourierNew">~</font>#vi/etc/sysconfig/kernel#(likedriversforscsi-controllers,forlvmorreiserfs)#INITRD_MODULES="ata_piixata_genericxen_vnifxen_vbdxen_platform_pcivirtio_blkvirtio_scsivirtio_netvirtio_pcivirtio_ringvirtio"执行mkinitrd命令，重新生成initrd。说明：如果引导的虚拟文件系统不是默认的initramfs或者initrd，则命令为dracut-f实际使用的initramfs或者initrd文件名。实际使用的initramfs或者initrd文件名可在menu.lst或者grub.cfg配置（“/boot/grub/menu.lst”或“/boot/grub/grub.cfg”或“/boot/gurb2/grub.cfg”）中获取。以suse11SP4为例如下所示：default0timeout10gfxmenu(hd0,0)/boot/messagetitlesles11sp4_001_[_VMX_]root(hd0,0)kernel/boot/linux.vmxvga=0x314splash=silentconsole=ttyS0,115200n8console=tty0net.ifnames=0NON_PERSISTENT_DEVICE_NAMES=1showoptsinitrd/boot/initrd.vmxtitleFailsafe_sles11sp4_001_[_VMX_]root(hd0,0)kernel/boot/linux.vmxvga=0x314splash=silentide=nodmaapm=offnoresumeedd=offpowersaved=offnohz=offhighres=offprocesssor.max+cstate=1nomodesetx11failsafeconsole=ttyS0,115200n8console=tty0net.ifnames=0NON_PERSISTENT_DEVICE_NAMES=1showoptsinitrd/boot/initrd.vmx其中，initrd所在行的/boot/initrd.vmx为实际使用的initrd文件，执行的时候请按照dracut-f/boot/initrd.vmx执行。如果initrd所在行的initrd文件不包含/boot目录，如/initramfs-xxx，请在执行dracut命令时增加boot目录，例如：dracut-f/boot/initramfs-xxx。检查是否已经成功装载了XEN的PVOPS或者KVM的virtio相应模块。SIA10000xxxxx:<fontstyle="font-size:8pt"face="CourierNew">~</font>#lsinitrd/boot/initrd-`uname-r`|grepxen-rwxr--r--1rootroot42400Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/block/xen-blkfront.ko-rwxr--r--1rootroot44200Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/xen-netfront.koSIA10000xxxxx:<fontstyle="font-size:8pt"face="CourierNew">~</font>#lsinitrd/boot/initrd-`uname-r`|grepvirtio-rwxr--r--1rootroot19248Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/scsi/virtio_scsi.ko-rwxr--r--1rootroot23856Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/block/virtio_blk.kodrwxr-xr-x2rootroot0Jul1214:53lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/virtio-rwxr--r--1rootroot15848Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/virtio/virtio_ring.ko-rwxr--r--1rootroot20008Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/virtio/virtio_pci.ko-rwxr--r--1rootroot12272Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/virtio/virtio.ko-rwxr--r--1rootroot38208Jun222012lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/virtio_net.ko修改menu.lst或者grub.cfg配置（“/boot/grub/menu.lst”或“/boot/grub/grub.cfg”或“/boot/gurb2/grub.cfg”，具体路径根据OS不同会有所不同），启动分区使用UUID方式配置。以CentOS6.7为例，执行blkid命令获取根分区分区对应的UUID并记录下来，编辑/boot/grub/grub.cfg文件，使用根分区的UUID来配置boot项。如果根分区已经使用UUID形式则不需要修改。修改方法如下：[root@PEK1000012301<fontstyle="font-size:8pt"face="CourierNew">~</font>]#blkid/dev/xvda1:UUID="749d6c0c-990a-4661-bed1-46769388365a"TYPE="swap"/dev/xvda2:UUID="f382872b-eda6-43df-9516-5a687fecdce6"TYPE="ext4"修改前：[root@PEK1000012301<fontstyle="font-size:8pt"face="CourierNew">~</font>]#cat/boot/grub/grub.cfgdefault=0timeout=5splashimage=(hd0,1)/boot/grub/splash.xpm.gzhiddenmenutitleCentOS(2.6.32-573.8.1.el6.x86_64)root(hd0,1)kernel/boot/vmlinuz-2.6.32-573.8.1.el6.x86_64roroot=/dev/xvda2rd_NO_LUKSrd_NO_LVMLANG=en_US.UTF-8rd_NO_MDSYSFONT=latarcyrheb-sun16crashkernel=autoKEYBOARDTYPE=pcKEYTABLE=usrd_NO_DMrhgbquietinitrd/boot/initramfs-2.6.32-573.8.1.el6.x86_64.img说明：根据/boot/grub/grub.cfg配置文件里标记的根分区，找到root=/dev/xvda2,再根据blkid命令获取的分区对应UUID将root分区改成UUID形式root=UUID=f382872b-eda6-43df-9516-5a687fecdce6。修改后：[root@PEK1000012301<fontstyle="font-size:8pt"face="CourierNew">~</font>]#cat/boot/grub/grub.cfgdefault=0timeout=5splashimage=(hd0,1)/boot/grub/splash.xpm.gzhiddenmenutitleCentOS(2.6.32-573.8.1.el6.x86_64)root(hd0,1)kernel/boot/vmlinuz-2.6.32-573.8.1.el6.x86_64roroot=UUID=f382872b-eda6-43df-9516-5a687fecdce6rd_NO_LUKSrd_NO_LVMLANG=en_US.UTF-8rd_NO_MDSYSFONT=latarcyrheb-sun16crashkernel=autoKEYBOARDTYPE=pcKEYTABLE=usrd_NO_DMrhgbquietinitrd/boot/initramfs-2.6.32-573.8.1.el6.x86_64.img以CentOS7.1为例，执行blkid命令获取根分区分区对应的UUID并记录下来，编辑/boot/grub2/grub.cfg文件，使用根分区的UUID来配置boot项。如果根分区已经使用UUID形式则不需要修改。[root@PEK1000012301<fontstyle="font-size:8pt"face="CourierNew">~</font>]#blkid/dev/xvda2:UUID="4eb40294-4c6f-4384-bbb6-b8795bbb1130"TYPE="xfs"/dev/xvda1:UUID="2de37c6b-2648-43b4-a4f5-40162154e135"TYPE="swap"修改前：[root@CTU1000028010<fontstyle="font-size:8pt"face="CourierNew">~</font>]#cat/boot/grub2/grub.cfg……menuentry'RedHatEnterpriseLinuxServer7.1(Maipo),withLinux3.10.0-229.el7.x86_64'--classfedora--classgnu-linux--classgnu--classos--unrestricted$menuentry_id_option'gnulinux-3.10.0-229.el7.x86_64-advanced-4eb40294-4c6f-4384-bbb6-b8795bbb1130'{load_videosetgfxpayload=keepinsmodgzioinsmodpart_msdosinsmodxfssetroot='hd0,msdos2'if[x$feature_platform_search_hint=xy];thensearch--no-floppy--fs-uuid--set=root--hint='hd0,msdos2'4eb40294-4c6f-4384-bbb6-b8795bbb1130elsesearch--no-floppy--fs-uuid--set=root4eb40294-4c6f-4384-bbb6-b8795bbb1130filinux16/boot/vmlinuz-3.10.0-229.el7.x86_64root=/dev/xvda2rocrashkernel=autorhgbquietLANG=en_US.UTF-8initrd16/boot/initramfs-3.10.0-229.el7.x86_64.img}说明：根据/boot/grub/grub.cfg配置文件里标记的根分区，找到root=/dev/xvda2,再根据blkid命令获取的分区对应UUID将root分区改成UUID形式root=UUID=4eb40294-4c6f-4384-bbb6-b8795bbb1130。修改后：[root@CTU1000028010<fontstyle="font-size:8pt"face="CourierNew">~</font>]#cat/boot/grub2/grub.cfg……menuentry'RedHatEnterpriseLinuxServer7.1(Maipo),withLinux3.10.0-229.el7.x86_64'--classfedora--classgnu-linux--classgnu--classos--unrestricted$menuentry_id_option'gnulinux-3.10.0-229.el7.x86_64-advanced-4eb40294-4c6f-4384-bbb6-b8795bbb1130'{load_videosetgfxpayload=keepinsmodgzioinsmodpart_msdosinsmodxfssetroot='hd0,msdos2'if[x$feature_platform_search_hint=xy];thensearch--no-floppy--fs-uuid--set=root--hint='hd0,msdos2'4eb40294-4c6f-4384-bbb6-b8795bbb1130elsesearch--no-floppy--fs-uuid--set=root4eb40294-4c6f-4384-bbb6-b8795bbb1130filinux16/boot/vmlinuz-3.10.0-229.el7.x86_64root=UUID=4eb40294-4c6f-4384-bbb6-b8795bbb1130rocrashkernel=autorhgbquietLANG=en_US.UTF-8initrd16/boot/initramfs-3.10.0-229.el7.x86_64.img}
特殊类型的弹性云服务器仅支持特定的操作系统类型，如果镜像的操作系统不匹配，则由该镜像创建的弹性云服务器将无法正常使用，详情请参考《弹性云服务器用户指南》。特殊弹性云服务类型与操作系统版本的关系如所示。未列举出来的弹性云服务器类型支持的操作系统与公共镜像列表保持一致。
对于需要加入域且使用域账号登录Windows操作系统的用户，在创建私有镜像前，需要执行Sysprep操作。否则，镜像会包含和原云服务器相关的信息，特别是SID信息。具有多个相同SID的云服务器加入域会失败。Sysprep的相关详细信息请参考：如果您的windows系统不需要加入域等操作，您可以选择不执行Sysprep操作。由于操作系统的相关限制，只能将Sysprep用于配置Windows操作系统的全新安装。可以根据需要多次运行Sysprep以构建和配置Windows安装。但是，重置Windows激活次数最多为三次。禁止使用Sysprep来重新配置已部署的Windows现有安装。在Windows命令行中输入以下命令，在“WindowsScriptHost”弹出窗中查看还能执行Sysprep的次数。slmgr/dlv当“剩余Windows重置计数”的值为0时，无法执行Sysprep。
目前，加密镜像不允许共享或者发布为市场镜像，如果用户想要将某个加密的私有镜像共享或者发布为市场镜像，可以通过“复制镜像”功能，将该镜像复制为一个非加密的新镜像，再共享该非加密镜像共享或者将该非加密镜像发布为市场镜像。
如果用户需要将原来某个非加密的镜像采用加密方式进行保存，则可以通过“镜像复制”功能，指定加密密钥，将原有的非加密镜像复制为新的一个加密私有镜像。
用户设置的系统盘大小小于原来平台虚拟机的系统盘大小，请重新确认原镜像文件的系统盘大小并重新注册。用户使用的vhd格式是通过qemu-img或者其他类似工具转换生成，产生的vhd格式的实际虚拟磁盘大小(virtualsize)和用户原虚拟机系统盘大小不一致，具体原因参考：此情况下可以通过qemu-img工具的qemu-imginfo命令检查处理。[xxxx@xxxxxtest]$qemu-imginfo2g.vhdimage:2g.vhdfileformat:vpcvirtualsize:2.0G(2147991552bytes)disksize:8.0Kcluster_size:2097152计算virtualsize的bytes换算成以G为单位的值是否为整数值。如上所示，2147991552bytes通过换算得到大小约为2.0004G大于2G，因此上传时，上传时需要设置系统盘大小大于2G的值。
D<h5>弹性云服务器</h5><p>云服务器是具有完整硬件、操作系统、网络功能，并且运行在一个完全隔离环境中的计算机系统。云服务器具有弹性、按需获取的特点。</p>E<h5>ECS</h5><p>参见</p>
E
F-J
P<h5>PRI</h5><p>参见</p><h5>PUI</h5><p>参见</p>S<h5>私有镜像</h5><p>用户基于云服务器创建的个人镜像，仅用户自己可见。</p>
S
V<h5>VBS</h5><p>参见</p>Y<h5>云硬盘备份</h5><p>云硬盘备份服务用于磁盘某一时间点数据的备份与恢复。通过云硬盘备份服务，您可以将磁盘回滚到某一备份点，也可使用备份创建新的磁盘或镜像，从而避免磁盘重要数据丢失。</p>
Y
云服务器是具有完整硬件、操作系统、网络功能，并且运行在一个完全隔离环境中的计算机系统。云服务器具有弹性、按需获取的特点。
参见
参见
华为公有云平台提供的常见的标准操作系统镜像，所有用户可见。
参见
参见
用户基于云服务器创建的个人镜像，仅用户自己可见。
用户基于云服务器创建的个人镜像，仅用户自己可见。
参见
云硬盘备份服务用于磁盘某一时间点数据的备份与恢复。通过云硬盘备份服务，您可以将磁盘回滚到某一备份点，也可使用备份创建新的磁盘或镜像，从而避免磁盘重要数据丢失。
云硬盘备份服务用于磁盘某一时间点数据的备份与恢复。通过云硬盘备份服务，您可以将磁盘回滚到某一备份点，也可使用备份创建新的磁盘或镜像，从而避免磁盘重要数据丢失。
计算存储网络安全管理与部署应用服务数据库数据分析企业应用云通信解决方案其他
密钥管理服务，即KMS（KeyManagementService），是一种安全、可靠、简单易用的密钥托管服务，帮助用户集中管理密钥，保护密钥安全。KMS通过使用硬件安全模块HSM（HardwareSecurityModule）保护密钥安全，帮助用户轻松创建和管理密钥，所有的用户密钥都由HSM中的根密钥保护，避免密钥泄露。KMS对密钥的所有操作都会进行访问控制及日志跟踪，提供所有密钥的使用记录，满足审计和合规性要求。
用户主密钥，即CMK（CustomerMasterKey），是用户使用密钥管理服务创建的密钥，是一种密钥加密密钥，主要用于加密并保护数据加密密钥。一个用户主密钥可以加密多个数据加密密钥。
数据加密密钥是用于加密数据的密钥。
删除密钥是一个需要非常谨慎的操作。操作前，用户需确保使用该密钥加密的相关数据都已完成迁移。因为密钥一旦被删除，所有使用该密钥加密的相关数据都无法解密。因此在删除密钥时，KMS会将该操作推迟7天到1096天执行，推迟时间由用户指定。超过推迟时间，密钥才会被真正删除。在密钥被真正删除之前，如果用户发现该密钥仍然有用，可取消删除操作。KMS通过这种方式来减少用户误操作所带来的损失。
对象存储服务和镜像服务借助KMS服务实现了加密特性。
A
C
D
G
H
K
M
S
T
X
Y
Z
参见
参见
参见
一种对称分组密码算法，由美国国家标准与技术研究院（NIST）于2001年11月26日发布，是对称密钥加密中最流行的算法之一。
参见
参见
参见
一种安全可靠的密钥托管服务，用于集中管理用户密钥，保证密钥安全。
用于保护DEK的密钥。
用于加密数据的加密密钥。
参见
一种加密手段，将加密数据的数据密钥封入信封中存储、传递和使用，不再使用主密钥直接加解密数据。
一种安全产生、存储、管理及使用密钥并提供加密处理服务的硬件设备。
用户使用密钥管理服务中创建的密钥，主要用于加密保护数据的加密密钥。
一种通过物理过程而不是计算机程序来生成随机数字的设备，用以生成完全不可预测的随机数。
在编辑接收组可勾选的主题数量限制为10个（不含默认接收组）。
公测期间，每个用户可以最多创建3000个主题。每个用户可以最多创建3000个主题。
公测期间，每个主题最多支持10000个订阅者。每个主题最多支持10000个订阅者。
订阅终端地址不允许修改。如果需要更换某个主题下的订阅终端地址，可在消息通知服务中删除原有的订阅终端，重新在该主题下选择订阅协议并输入对应的订阅终端。
可以在指定接收组中取消勾选的主题。
消息中心服务没有权限修改订阅，修改订阅需要在消息通知服务中执行。具体操作请参考《消息通知服务用户指南》的“”章节。
使用已注册的帐号登录华为云网站：。选择“产品&gt;云通信&gt;消息&amp;短信”，申请公测后，开通消息&amp;短信服务。在消息&amp;短信服务管理控制台，单击“登录开发者Portal”，根据帮助中心提供的接口文档完成相应的应用开发，调用短信业务API。
对于错误码已经详细描述问题所在，根据错误码描述处理问题。对于系统错误，SP直接联系华为管理员处理。
IE10及以上版本浏览器GoogleChrome53及以上版本浏览器
A<h5>API</h5><p>参见</p>C<h5>超文本传输安全协议</h5><p>HypertextTransferProtocolSecure，超文本传输安全协议。加密的HTTP协议，是HTTP的扩展，用于将消息通过不同的方法进行封装。HTTPS提供了实现认证，保密性和完整性的不同机制。</p><h5>超文本传送协议</h5><p>HypertextTransportProtocol，超文本传送协议。超文本传送协议是一种Internet工程专门小组中的一种协议，主要用来进行文件传输。</p>
C
F-J
R<h5>软件开发工具包</h5><p>SoftwareDevelopmentKit，软件开发工具包。SDK是一套应用开发接口，它包含了监控业务管理和控制、设备管理、用户管理、资源管理以及系统维护接口，用户可使用这些接口实现各种组合应用的开发。</p>S<h5>SDK</h5><p>参见</p><h5>SP</h5><p>参见</p>
S
U-Z
参见
HypertextTransferProtocolSecure，超文本传输安全协议。加密的HTTP协议，是HTTP的扩展，用于将消息通过不同的方法进行封装。HTTPS提供了实现认证，保密性和完整性的不同机制。
HypertextTransportProtocol，超文本传送协议。超文本传送协议是一种Internet工程专门小组中的一种协议，主要用来进行文件传输。
HypertextTransferProtocolSecure，超文本传输安全协议。加密的HTTP协议，是HTTP的扩展，用于将消息通过不同的方法进行封装。HTTPS提供了实现认证，保密性和完整性的不同机制。
HypertextTransportProtocol，超文本传送协议。超文本传送协议是一种Internet工程专门小组中的一种协议，主要用来进行文件传输。
参见
参见
SoftwareDevelopmentKit，软件开发工具包。SDK是一套应用开发接口，它包含了监控业务管理和控制、设备管理、用户管理、资源管理以及系统维护接口，用户可使用这些接口实现各种组合应用的开发。
参见
参见
参见
参见
ServiceProvider，业务提供商。为个人用户提供业务订购并和网络运营商签订合同的实体。该实体为特定的DN实现业务。业务提供商可以和多个网络运营商签订合同。
ApplicationProgrammingInterface，应用软件编程接口，应用程序接口是指应用程序之间为了保证互相通讯所提供的一系列特殊规则和要求。
机器学习服务应用于海量数据挖掘分析场景。市场分析商场从顾客消费记录中找出某类顾客群的共有特征（兴趣、收入水平和消费习惯等），分析出什么样的顾客买什么产品，从而调整市场策略。定向推荐银行从客户的个人财务状况信息中分析客户特征，定向推荐合适的产品（贷款项目、理财产品），以小代价获取大收益。欺骗检测保险公司分析投保人的历史行为数据，建立欺骗行为模型，识别出假造事故骗取保险赔偿的投保人。
通过内网地址访问MLS实例<olid="ZH-CN_TOPIC_0052971410__ol4760273144520"><liid="ZH-CN_TOPIC_0052971410__zh-cn_topic_0071976551_li33202723142714">用户所创建的MLS实例未绑定弹性IP，则需通过内网地址访问。内网访问地址只允许与MLS实例同一子网的客户端机器访问，需登录与MLS实例内网地址互通的弹性云服务器，以访问MLS实例。MLS实例的运行状态为“服务中”。通过公网地址访问MLS实例<olid="ZH-CN_TOPIC_0052971410__ol56931476144610"><liid="ZH-CN_TOPIC_0052971410__zh-cn_topic_0071976552_li59593496143626">用户所创建的MLS实例已自动绑定弹性IP，可通过公网地址访问。MLS实例的运行状态为“服务中”。
使用远程桌面工具，以Administrator用户登录与MLS实例在同一子网和安全组的弹性云服务器。说明：如果没有与MLS实例在同一子网和安全组的弹性云服务器，则需创建弹性云服务器，请参见“机器学习服务&gt;用户指南&gt;入门&gt;访问MLS实例&gt;通过内网地址访问MLS实例”。在弹性云服务器中打开浏览器，登录公有云管理控制台。单击“服务列表”，选择“数据分析&gt;机器学习服务”，默认显示“MLS实例管理”。在“MLS实例管理”页面，单击目标实例所在行的“访问”，进入MLS实例的登录界面。或者单击目标实例的名称，查看该实例的“内网访问地址”。在浏览器输入该实例的“内网访问地址”，进入MLS实例的登录界面。在所示的MLS登录界面中，输入账户名、用户名和密码，登录MLS实例，进入MLS实例的工作界面。MLS实例的登录界面说明：账户名和密码即是用户登录公有云管理控制台的账户名和密码，用户名默认和账户名一致。
登录公有云管理控制台。单击“服务列表”，选择“数据分析&gt;机器学习服务”，默认显示“MLS实例管理”。在“MLS实例管理”页面，单击目标实例所在行的“访问”，进入MLS实例的登录界面。或者单击目标实例的名称，查看该实例的“外网访问地址”。在浏览器输入该实例的“外网访问地址”，进入MLS实例的登录界面。在所示的MLS登录界面中，输入账户名、用户名和密码，登录MLS实例，进入MLS实例的工作界面。MLS实例的登录界面说明：账户名和密码即是用户登录公有云管理控制台的账户名和密码，用户名默认和账户名一致。
机器学习服务的基本使用流程如所示：用户通过访问机器学习服务控制台，可以创建并管理机器学习服务实例，在机器学习服务实例可视化管理界面，创建并管理项目，在项目中创建并编辑工作流，进行数据分析业务。
MLS与MRS集群无缝配合，可以从MRS集群中的HDFS或Hive组件中直接读取数据。MRS集群的数据源来源于OBS（对象存储服务），并支持将OBS中的数据导入至HDFS中。用户需要将本地数据上传至OBS系统，通过MRS集群将OBS中的数据导入至HDFS中，在使用MLS时，直接从HDFS中读取数据。
机器学习服务可降低机器学习使用门槛，提供可视化的操作界面来编排机器学习模型的训练、评估和预测过程，无缝衔接数据分析和预测应用，降低机器学习模型的生命周期管理难度，为用户的数据挖掘分析业务提供易用、高效、高性能的平台服务。易用性强，技术门槛低内置分类、回归、聚类、数据处理等常用建模节点，用户通过拖拽式操作即可在可视化的工作流编排界面数据建模，降低建模难度。可视化操作，直观高效实现数据可视化，内置丰富的图表类型，不同的数据可以选择不同的图表类型进行展示，所见即所得，提升数据探索效率。模型应用提供“模型应用”算子，支持在工作流中导入训练完成的模型，提供批量预测的能力。
检查用户是否已经没有配额创建新的机器学习服务实例。检查用户是否已经申请了最新版本的MRS集群。
如果无法确定原因或解决问题，请联系公有云运维人员。
MLS实例当前所触发的计算任务都在对应的MRS集群中完成，MLS实例本身暂不提供扩容能力，但能够基于MRS集群完成计算能力的扩容。
机器学习服务基于VPC来控制用户、实例的网络安全隔离。用户对实例的访问则采用了SSL安全连接和安全算法套件，支持双向数字证书认证。同时在每个实例中对节点的操作系统进行安全加固，提高数据安全性。
请检查MLS实例状态是否正常。如果是在互联网环境无法连接，还需要检查以下可能导致异常的原因：<ulid="ZH-CN_TOPIC_0057495867__ul57415899202645"><liid="ZH-CN_TOPIC_0057495867__li27225296202649">用户网络是否与互联网可以正常连通。用户网络防火墙策略是否限制了访问。用户网络是否需要通过代理才能访问互联网。
如果无法确定原因或解决问题，请联系公有云运维人员。
机器学习服务支持以下格式的数据源：Hive表。3种HDFS文件格式：“Parquet”、“JSON”和“CSV”。
机器学习服务，即MachineLearningService，简称MLS，是一项数据挖掘分析平台服务，旨在帮助用户通过机器学习技术发现已有数据中的规律，从而创建机器学习模型，并基于机器学习模型处理新的数据，为业务应用生成预测结果。
F
G
J
M
N
S
X
Y
服务地址是指MLS实例的访问地址，每个MLS实例都有其对应的访问地址，用户通过该地址可以访问各MLS实例的工作界面。
公网访问地址只有当用户创建MLS实例时绑定了弹性IP才会存在，它允许Internet上的任意客户端机器访问。
工作流是由多个节点组成的一个完整的用于完成某个业务过程的流程集合。用户在MLS实例的工作界面通过拖拽和连接的方式组合不同的节点，来形成一个比单一节点更复杂的运行逻辑定义，即工作流。
节点是一种逻辑运行单元，代表某个数据处理子步骤。机器学习服务将各种数据处理步骤（数据加载、数据预处理、机器学习算法等）封装成不同的节点，屏蔽了编程细节。用户可通过拖拽节点图标、连接节点和修改节点属性，灵活实现对数据的导入、导出、转换、分析等处理。
机器学习服务是一项数据挖掘分析平台服务，旨在帮助用户通过机器学习技术发现已有数据中的规律，从而创建机器学习模型，并基于机器学习模型处理新的数据，为业务应用生成预测结果。
机器学习服务实例，即MLS实例，每个MLS实例由两台弹性云服务器组成，构成主备模式。机器学习服务以MLS实例的方式提供给用户，用户可以同时创建多个MLS实例，并分别管理和访问每个MLS实例。
参见
参见
模型保存着使用数据进行预测的方法，系统中的模型按照PMML（PredictiveModelMarkupLanguage）格式存储管理。用户可以在MLS实例的工作界面训练模型，并通过“保存PMML模型文件”节点保存成通用的PMML格式。用户还可以通过MLS的模型管理功能，对已发布的PMML模型进行管理。
模型构建是指选择数据和算法，执行算法生成模型的过程。
模型可视是指将模型信息以图形化方式展示。
模型通过准确率，召回率等指标进行评价，而对这些指标的求解称为模型评估。
将模型作用到一份数据上的各步骤作为计算任务，下发到系统中执行的过程，称为模型应用。
模型预测是将已有的模型作用到数据上，针对每一条样本数据给出其对应的结果的过程。
内网访问地址只允许与MLS实例同一子网的客户端机器访问。
数据分析是通过使用适当的统计方法、机器学习方法等，对收集的大量数据进行计算、分析、汇总和整理，以求最大化的开发数据价值，发挥数据作用。目的是将隐藏在一大批杂乱无章的数据背后的信息集中处理并进行提炼，从而总结得到研究对象的内在规律。
数据挖掘一般是指从大量的数据中自动搜索隐藏于其中的，有着特殊关系性的信息的过程。它通常与计算机科学有关，通过统计、在线分析处理、情报检索、机器学习和模式识别等诸多方法来实现上述目标。
算法是指一系列规则和运算公式。将这些规则和运算公式作用到数据集上，能够得到一个分析结果，通常就是一个模型。
项目用于组织用户定义的信息资源。用户在MLS实例的工作界面可以通过创建不同项目来管理自己定义的工作流、运行配置模板等信息。
运行配置模板是计算资源的配置模板。用户在MLS实例的工作界面可以创建运行配置模板，并分配给需要的项目。
多维交互分析服务（M-OLAPService），简称M-OLAP，是一种新型的ApacheHadoop本地文件格式。通过采用列式存储、索引、压缩和编码技术，提高计算效率，实现PB数量级的数据交互查询。M-OLAP也是一种将数据源和Spark集成的高性能分析引擎。
当数据源导入到HDFS上之后，可以使用LOADDATA命令加载数据，此时路径必须以“hdfs://hacluster”开头。比如在HDFS上有如下文件：那么在加载数据时，其HDFS路径为“hdfs://hacluster/user/omm/user_info.csv”，M-OLAP命令示例为：LOADDATAINPATH'hdfs://hacluster/user/omm/user_info.csv'intotableuser_Info;
公测期间是不收取费用的，您可以免费使用M-OLAP服务。公测后收取相应费用，费用=（每小时费率*主节点数*使用时长）+（每小时费率*核心节点数*使用时长）。
用户提交语句之后，可以在页面看到“执行中”的提示，但有时候看不到结果。执行成功，但是结果集为空。上述情况为正常现象，表明查询结果为空。执行失败，有错误提示。一般来说，从反馈的日志可以初步定位出原因。<ulid="ZH-CN_TOPIC_0034789768__ul11110931192113"><liid="ZH-CN_TOPIC_0034789768__li32889519192113">如果是提示语法错误，则检查DDL/DML命令格式是否正确，如下所示。如果是数据源不存在，则在“文件管理”中检查数据路径是否正确，如下所示。如果从页面无法定位，则用户可向系统提交工单请求技术支持。
M-OLAP执行LOADDATA命令时，需要从HDFS获取数据源，目前不支持从OBS获取数据。故要将数据源上传到OBS，再使用集群导入功能将OBS数据导入至HDFS中。将本地数据上传OBS。<oltype="a"id="ZH-CN_TOPIC_0034789769__ol47117559103645"><liid="ZH-CN_TOPIC_0034789769__li21404848103645">登录OBS服务。在OBS上创建桶userdata，然后在userdata下创建input。<olclass="substepthirdol"id="ZH-CN_TOPIC_0034789769__ol34878258103645"><liid="ZH-CN_TOPIC_0034789769__li45468866103645">单击“创建桶”，创建一个userdata桶。在userdata桶下单击“新建文件夹”，创建input目录。上传数据至userdata桶。<olclass="substepthirdol"id="ZH-CN_TOPIC_0034789769__ol66747423103645"><liid="ZH-CN_TOPIC_0034789769__li63855903103645">进入input文件夹，单击选择用户程序。单击“上传”将用户数据文件上传至input目录。将OBS数据导入至HDFS。<oltype="a"id="ZH-CN_TOPIC_0034789769__ol34990017103645"><liid="ZH-CN_TOPIC_0034789769__li46474705103645">登录M-OLAP服务。进入“文件管理”页面，选择“文件列表”。进入数据存储目录，如“bd_app1”。“bd_app1”目录仅为示例，可以是界面上的任何目录，也可以通过“新建”创建新的目录。单击“导入”，通过选择OBS和HDFS路径，如所示。导入文件单击“导入”。文件上传进度可在“拷贝进度”中查看。
M-OLAP将数据源集成到Spark生态系统，是Spark的一部分，所以不止可以提交M-OLAP语句，还支持所有可以直接在SparkSQL上运行的SQL查询操作。
当Beeling被启动，默认的用户为匿名用户。该用户将不具有权限去写或删除HDFS的内容。因此DDL命令在Beeling中执行失败。解决方法：当启动Beeling窗口时，输入带有参数“-n”的用户名。例如：bin/beeline-ujdbc:hive2://<i>&lt;IP&gt;:&lt;PORT&gt;&nbsp;-n<i>&lt;username&gt;
当对decimal数据类型进行带过滤条件的查询时，输出结果不正确。例如：输出结果：解决方法：为了得到准确的输出结果，需在数字后面加上“BD”。例如：输出结果：
M-OLAP将数据源集成到Spark生态系统，使用SparkSQL执行数据查询。也可以使用Spark提供的第三方工具ThriftServer连接到SparkSQL，直接发送请求来完成结构化数据的计算和解析。另外M-OLAP与SparkSQL完全兼容，支持所有可以直接在SparkSQL上运行的SQL查询操作。
C<h5>存储位置</h5><p>M-OLAP数据文件的创建和写入的目录位置。</p>D<h5>DDL</h5><p>参见</p><h5>DML</h5><p>参见</p><h5>多维交互分析服务</h5><p>M-OLAP是一种新型的ApacheHadoop本地文件格式。通过采用列式存储、索引、压缩和编码技术，提高计算效率，实现PB数量级的数据交互查询。M-OLAP也是一种将数据源和Spark集成的高性能分析引擎。</p>
D
F-J
K<h5>Kettle</h5><p>Kettle是一种强大的提供提取、转换和加载（ETL）能力的工具。</p>M<h5>M-OLAP</h5><p>参见</p>
M
S<h5>数据操作语言</h5><p>数据操纵语言中的语句是用来对模式对象（数据库、表、列）中的数据进行管理。</p><h5>数据定义语言</h5><p>数据定义语言中的语句是用来对数据库中的对象（数据库、表、列）结构进行定义。</p><h5>数据压缩</h5><p>数据压缩是指降低reduce过程对磁盘空间的消耗，或者通过对旧数据文件的重组，将零散的数据重新组织合并。</p>T<h5>ThriftServer</h5><p>ThriftServer是一个可以通过JDBC连接来使用SparkSQL的服务。</p>
T
M-OLAP数据文件的创建和写入的目录位置。
参见
参见
M-OLAP是一种新型的ApacheHadoop本地文件格式。通过采用列式存储、索引、压缩和编码技术，提高计算效率，实现PB数量级的数据交互查询。M-OLAP也是一种将数据源和Spark集成的高性能分析引擎。
参见
参见
M-OLAP是一种新型的ApacheHadoop本地文件格式。通过采用列式存储、索引、压缩和编码技术，提高计算效率，实现PB数量级的数据交互查询。M-OLAP也是一种将数据源和Spark集成的高性能分析引擎。
基数指数据库表中特定的列（属性）所包含的数据值，此数据值必须唯一。
Kettle是一种强大的提供提取、转换和加载（ETL）能力的工具。
参见
参见
数据操纵语言中的语句是用来对模式对象（数据库、表、列）中的数据进行管理。
数据定义语言中的语句是用来对数据库中的对象（数据库、表、列）结构进行定义。
数据压缩是指降低reduce过程对磁盘空间的消耗，或者通过对旧数据文件的重组，将零散的数据重新组织合并。
ThriftServer是一个可以通过JDBC连接来使用SparkSQL的服务。
ThriftServer是一个可以通过JDBC连接来使用SparkSQL的服务。
MapReduce服务是公有云的一项基础服务，用于海量数据的管理和分析，简称MRS。MRS打造了高可靠、高安全、易使用的运行维护平台，对外提供大容量的数据分析和计算能力，可解决各大企业的数据存储和处理需求。用户可以独立申请和使用托管Hadoop、Spark、HBase和Hive组件，用于快速在主机上创建集群，提供海量数据的实时性要求不高的批量数据分析和计算能力。
MRS的主要特点和优势在于：易用提供Hadoop、Spark、SparkSQL、HBase和Hive能力，全流程统一的SQL交互接口使得大数据开发变得更加简单。低成本免运维，计算和存储分离，计算的集群可以按需创建，作业运行结束就可以释放集群。稳定您用于调试和监视集群的时间将更少，服务可用性高（99.9%），数据可靠性高（99.9999%）。开放积极拥抱开源大数据生态，兼容开源，易于与其他服务对接，提供RESTAPI、JDBC等多种使用方式。
基于开源软件Hadoop进行功能增强、Spark内存计算引擎、HBase分布式存储数据库以及Hive数据仓库框架，提供企业级大数据存储、查询和分析的统一平台，帮助企业快速构建海量数据信息处理系统，可解决各大企业的以下需求：海量数据的分析与计算海量数据的存储
MRS是公有云的一项基础服务，使用简单。通过使用在集群中连接在一起的多台计算机，您可以运行各种任务，处理或者存储（PB级）巨量数据。MRS的基本使用流程如下：准备数据准备程序和数据文件，用户需要先将本地的程序和数据文件上传至对象存储服务（OBS）中。创建集群使用MRS的首要操作就是购买集群，集群购买数量受弹性云服务器数量限制。配置集群基本信息，完成集群的创建。为节省您的宝贵时间，且方便使用MRS，创建集群时可同时提交作业。说明：创建集群时只能新增一个作业，若需要新增多个作业，则需要执行步骤。导入数据MRS集群创建成功后，可使用集群导入功能，将OBS中的数据导入至集群HDFS中。MRS集群既能处理OBS中数据，也能处理HDFS中的数据。创建作业数据上传到OBS后可对数据进行分析和处理，MRS为用户提供程序执行平台，程序由用户自身开发，MRS负责程序的提交、执行和监控。作业创建成功后自动运行一次，状态默认为“运行中”。查看作业执行结果作业运行需要时间，作业运行结束后，在“作业管理”的“作业”页签，刷新作业列表，查看作业执行结果。作业执行成功或失败后都不能再次执行，只能新增或者复制作业，配置作业参数后重新提交作业。终止集群如果作业执行结束后不需要集群了，可以在“集群列表”中单击“终止”，集群状态由“运行中”更新为“删除中”，待集群删除成功后，集群状态更新为“已终止”，并且显示在“历史集群”中。集群终止后不再产生费用。
MRS作为一个海量数据管理和分析平台，具备高安全性。主要从以下几个方面保障数据和业务运行安全：网络隔离整个公有云网络划分为2个平面，即业务平面和管理平面。两个平面采用物理隔离的方式进行部署，保证业务、管理各自网络的安全性。<ulid="zh-cn_topic_0029116645__ul22907204103554"><liid="zh-cn_topic_0029116645__li4838251103554">业务平面：主要是集群组件运行的网络平面，支持为用户提供业务通道，对外提供数据存取、任务提交及计算能力。管理平面：主要是公有云管理控制台，用于购买和管理MRS。主机安全用户可以根据自己业务的需要部署第三方的防病毒软件。针对操作系统和端口部分，MRS提供如下安全措施：<ulid="zh-cn_topic_0029116645__ul1276149103554"><liid="zh-cn_topic_0029116645__li11485349103554">操作系统内核安全加固更新操作系统最新补丁操作系统权限控制操作系统端口管理操作系统协议与端口防攻击数据安全MRS支持数据存储在OBS上，保障客户数据安全。数据完整性MRS处理完数据后，通过SSL加密传输数据至OBS，保证客户数据的完整性。
目前MRS商用收费基本要素为集群中弹性云服务器。购买MRS时默认支持按需购买集群节点和包年/包月购买集群节点。包年/包月：根据集群购买时长，一次性支付集群费用。最短时长为1个月，最长时长为3年。按需付费：节点按实际使用时长计费，计费周期为一小时。按需计费如下：<ulid="zh-cn_topic_0029116646__ul40872564151956"><liid="zh-cn_topic_0029116646__li59708390151956">弹性云服务器计费因子：费率、节点数、使用时长。弹性云服务器规格不同，费率就不同。MRS计费公式：费用=（每小时费率*Master节点数*使用时长）*40%+（每小时费率*Core节点数*使用时长）*40%目前除了“启动中”、“错误”和“已终止”状态的集群不收费，其他状态的集群都需要收费。此处费用只是购买集群所需费用，MRS上的数据存储、带宽和流量另外计费。扣费时余额不足先提醒用户续费，在保留期冻结集群资源，续费后再解冻。
MRS既可以处理OBS中的数据，也可以处理HDFS中的数据。在使用MRS分析数据前，需要先准备数据。将本地数据上传OBS。<oltype="a"id="zh-cn_topic_0029116647__ol47117559103645"><liid="zh-cn_topic_0029116647__li21404848103645">登录OBS管理控制台。在OBS上创建userdata桶，然后在userdata桶下创建program、input、output和log文件夹。<olclass="substepthirdol"id="zh-cn_topic_0029116647__ol34878258103645"><liid="zh-cn_topic_0029116647__li45468866103645">单击“创建桶”，创建一个名称为userdata的桶。在userdata桶下单击“新建文件夹”，分别创建program、input、output和log目录。上传数据至userdata桶。<olclass="substepthirdol"id="zh-cn_topic_0029116647__ol66747423103645"><liid="zh-cn_topic_0029116647__li63855903103645">进入program文件夹，单击选择用户程序。单击“上传”。使用同样方式将用户数据文件上传至input目录。将OBS数据导入至HDFS。当“Kerberos认证”为“关闭”，且运行中的集群，可执行将OBS数据导入至HDFS的操作。<oltype="a"id="zh-cn_topic_0029116647__ol34990017103645"><liid="zh-cn_topic_0029116647__li46474705103645">登录MRS管理控制台。进入“文件管理”页面，选择“HDFS文件列表”。进入数据存储目录，如“bd_app1”。“bd_app1”目录仅为示例，可以是界面上的任何目录，也可以通过“新建”创建新的目录。单击“导入数据”，通过选择OBS和HDFS路径，如所示。导入文件单击“确定”。文件上传进度可在“文件操作记录”中查看。
MRS集群处理的数据源来源于OBS或HDFS，HDFS是Hadoop分布式文件系统（HadoopDistributedFileSystem），OBS（ObjectStorageService）即对象存储服务，是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力。MRS可以直接处理OBS中的数据，客户可以基于云管理平台Web界面和OBS客户端对数据进行浏览、管理和使用，同时可以通过RESTAPI接口方式单独或集成到业务程序进行管理和访问数据。数据存储在OBS：数据存储和计算分离，集群存储成本低，存储量不受限制，并且集群可以随时删除，但计算性能取决于OBS访问性能，相对HDFS有所下降，建议在数据计算不频繁场景下使用。数据存储在HDFS：数据存储和计算不分离，集群成本较高，计算性能高，但存储量受磁盘空间限制，删除集群前需将数据导出保存，建议在数据计算频繁场景下使用。
MRS所有的集群都展示在“集群列表”页面中，进入“集群列表”页面，可查看所有集群。集群数量较多时，可采用翻页显示，您可以查看任何状态下的集群。现有集群：包含除“已终止”状态外的所有集群。历史集群：仅包含“已终止”状态的集群，目前界面只显示6个月内创建且已终止的集群，若需要查看6个月以前创建的集群，请联系技术支持人员。任务状态：仅包含“失败”状态的任务。在任务状态页面，您还可以删除失败的任务。<ulid="ZH-CN_TOPIC_0029116649__zh-cn_topic_0012808230_ul260827114188"><liid="ZH-CN_TOPIC_0029116649__zh-cn_topic_0012808230_li4887447314184">集群创建失败的任务集群终止失败的任务集群扩容失败的任务
“操作日志”页面记录了用户对集群和作业的操作的日志信息。目前，MRS界面记录的日志信息分为2类：集群操作<ulid="ZH-CN_TOPIC_0029116650__zh-cn_topic_0012808265_ul4677467110212"><liid="ZH-CN_TOPIC_0029116650__zh-cn_topic_0012808265_li366182110210">创建集群、删除集群和扩容集群创建目录、删除目录和删除文件作业操作：创建作业、停止作业和删除作业记录用户操作的日志信息如所示：
作业是MRS为用户提供的程序执行平台，当前MRS支持MR、Spark和Hive作业，作业的特点及区别如所示。
MRS为用户提供程序执行平台，程序由用户自身开发，MRS负责程序的提交、执行和监控。那如何将用户程序提交至MRS中呢？新增作业时，将“执行程序路径”参数配置为用户程序的实际存放路径，如所示。
集群创建完成后可在基本信息页面中查看集群的基本配置信息，包括集群的名称、ID、付费类型、工作地域、创建时间、Hadoop组件版本及节点的实例规格、容量。其中，节点的实例规格和容量决定了该集群对数据的分析处理能力。节点实例规格越高，容量越大，集群运行速度越快，分析处理能力越强，相应的成本也越高。在基本信息页面，单击“ClusterManager”，跳转至MRS集群管理页面。用户可在集群管理页面查看和处理告警信息、修改集群配置以及升级集群补丁等。
MRS根据丰富的大数据产品调优经验，提供不同场景对应的最佳搭配。MRS当前支持以下规格主机，主机规格的配型由CPU+内存+Disk共同决定：BigData_4核_16G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i5989450151420">XX</em>（s1.xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul35012669171645"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li31975014171643">CPU：4核内存：16GBDisk：40GBBigData_8核_16G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i2950438151417">XX</em>（c2.2xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul57446600171726"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li43429998171724">CPU：8核内存：16GBDisk：40GBBigData_16核_32G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i58651589151414">XX</em>（c2.4xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul55783573171757"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li17754594171755">CPU：16核内存：32GBDisk：40GBBigData_16核_64G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i35658823151411">XX</em>（s1.4xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul59922758171828"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li17791925171825">CPU：16核内存：64GBDisk：40GBBigData_32核_128G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i3806281615144">XX</em>（s1.8xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul31045118171855"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li41664361171853">CPU：32核内存：128GBDisk：40GBBigData_16核_128G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i2111172415140">XX</em>（d1.4xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul35871674171922"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li11704554171920">CPU：16核内存：128GBDisk：1.8TB*12HDDBigData_36核_256G云主机_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i36542910151339">XX</em>（d1.8xlarge）<ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul2052868817200"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li4494575171954">CPU：36核内存：256GBDisk：1.8TB*24HDDBigData_8核32G_MapReduce服务_<emid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_i1007247215139">XX</em><ulid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_ul30079161104119"><liid="ZH-CN_TOPIC_0029116655__zh-cn_topic_0013363945_li2702909110411">CPU：8核内存：32GBDisk：40GB主机的实例规格配置越高，数据处理分析能力越强，集群所需费用也越高，请根据您要处理的数据量选择主机配型。
MRS当前支持Hadoop2.7.2、Spark&nbsp;1.5.1、HBase&nbsp;1.0.2和Hive&nbsp;1.2.1组件，后续会支持更多版本和组件。组件在MRSManager中也被称为服务。
Spark是和Hadoop数据兼容快速和通用的处理引擎。通过YARN，Spark可以在Hadoop集群下运行。Spark可以处理在HDFS、HBase、Hive以及Hadoop输入的任何形式的数据。
当前在MRS页面，集群支持提交Spark、SparkScript和SparkSQL形式的Spark作业。
与Hadoop集群一样，Spark集群可以访问存储在OBS系统中的数据，只需在提交作业时将“数据输入路径”、“输出路径”配置为OBS的路径即可。
Hive与HDFS间的关系Hive是Apache的Hadoop项目的子项目，Hive利用HDFS作为其文件存储系统。Hive通过解析和计算处理结构化的数据，HadoopHDFS则为Hive提供了高可靠性的底层存储支持。Hive数据库中的所有数据文件都可以存储在HadoopHDFS文件系统上，Hive所有的数据操作也都是通过HadoopHDFS接口进行。Hive与MapReduce间的关系Hive所有的数据计算都依赖于MapReduce。MapReduce也是Apache的Hadoop项目的子项目，它是一个基于HadoopHDFS分布式并行计算框架。Hive进行数据分析时，会将用户提交的HiveQL语句解析成相应的MapReduce任务并提交MapReduce执行。Hive与DBService间的关系Hive的MetaStore（元数据服务）处理Hive的数据库、表、分区等的结构和属性信息，这些信息需要存放在一个关系型数据库中，由MetaStore维护和处理。在MRS中，这个关系型数据库由DBService组件维护。Hive与Spark间的关系Hive的数据计算也可以运行在Spark上。Spark也是Apache的一个项目，它是基于内存的分布式计算框架。Hive进行数据分析时，会将用户提交的HiveQL语句解析成相应的Spark任务并提交Spark执行。
提供目前主流的Hadoop，目前支持Hadoop2.7.2版本，并且随社区更新版本。
MRS管理控制台不支持变更集群节点，也不建议用户在ECS管理控制台直接修改MRS集群节点。如果手动在ECS管理控制台对集群节点执行停止ECS、删除ECS、修改或重装ECS操作系统，以及修改ECS规格的操作，可能影响集群稳定运行。如果您对MRS集群节点进行了上述操作，MRS会自动识别并直接删除发生变更的集群节点。您可以登录MRS管理控制台，通过扩容恢复已经删除的节点。请勿在扩容过程中对正在扩容的节点进行操作。
A
B
C
D
E
F
G
H
J
L
M
N
Q
R
S
W
X
Y
Z
参见
参见
是HDFS的安全模式，用于管理和维护HDFS集群的安全。
负责相应的调度和协调，结合从ResourceManager获得的资源和NodeManager协同工作来运行和监控任务。
HDFS中存储文件的副本数。
HBase的表是三个维度排序的映射。从行主键、列主键和时间戳映射为单元格的值。所有的数据存储在HBase的表单元格中。
参见
即异构存储，一个HDFS的各个存储节点上可以指定若干不同的存储媒介，比如SSD（solidstatedisk固态磁盘）等。这样，用户可以根据应用特点将不同类型数据存储在不同媒介上，以满足性能需求。
作为资源隔离，当前仅仅提供java虚拟机CPU、内存的隔离。
HBase中通过行和列确定的一个存贮单元称为单元格。
是HDFS集群的工作节点。根据客户端或者是元数据节点的调度存储和检索数据，定期向元数据及客户端发送他们所存储的文件块的列表。
参见
参见
参见
是针对RDD的操作，例如返回写过、写入存储等。
集群内资源的逻辑组合。
NameNode使用的事件日志称为EditLog。用于记录文件系统元数据的所有变更。
被授权访问某一资源的实体及其访问权限的列表。用于访问权限的控制。
分布式弹性数据集是一种抽象的分布式内存，允许开发者在分布式集群中进行容错计算。
类似传统数据库中的分区，每个RegionServer上可以有多个Region。
参见
参见
一个用于保证服务能够在所有时间保持可用的系统或者设计方案，避免出现错误，且不影响其性能。
基于最大最小公平算法将资源分配给各个资源池或者用户的一种YARN资源调度策略。
参见
MRS集群中的核心节点，处理数据并在HDFS中存储过程数据。
HBase的文件格式，存储HBase的Key和Value的文件。Key和Value都是Byte类型的数组。
Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的SQL查询功能，可以将SQL语句转换为MapReduce任务进行运行。
应用于Hive数据仓库的标准数据查询语言。
参见
又称Master，负责HBase中RegionServer的管理，包括RegionServer的负载均衡、Region分裂、Region分配、Region迁移等。在HA模式下，包含主用HMaster和备用HMaster。
是Spark应用程序中由Shuffle隔开的任务集合。
在集群中为外部提供集群资源管理的服务。例如StandaloneManager、Mesos、YARN。
在安全套接层使用标准的FTP协议和指令的一种增强型FTP协议，为FTP协议和数据通道增加了SSL安全功能。
HBase表的一个维度。列名称的格式为“&lt;family&gt;:&lt;label&gt;”，&lt;family&gt;和&lt;label&gt;为任意字符组合。表由&lt;family&gt;的集合组成（&lt;family&gt;又称为列族）。HBase表中的每个列，都归属于某个列族。
列族是预定义的列集合，且存储在HBaseSchema中。如果需要在列族下创建一些列，首先需创建列族。列族将HBase中具有相同性质的数据进行重组，且没有类型的限制。同一列族的每行数据存储在同一个服务器中。每个列族像一个属性，如压缩包、时间戳、数据块缓存等等。
将一个Store中的所有StoreFile合并成一个，这个过程会删除冗余数据。
用来把一组键值对映射成一组新的键值对。
MapReduce服务打造了高可靠、高安全、易使用的运行维护平台，对外提供大容量的数据存储和分析能力，可解决各大企业的数据存储和处理需求。用户可以独立申请和使用托管Hadoop、Spark、Hbase和Hive服务，用于快速在主机上创建集群，提供海量数据的实时性要求不高的批量数据存储和计算能力。
MemStore是HBase存储的核心。在存储数据时，数据首先写入Memstore中，然后WALentry写入Hlog日志中。同样地，在加载数据时，数据首先从Memstore中读取，然后再从StoreFiles中读取。
将多个小的StoreFile合并成一个StoreFile，这个过程不会删除冗余数据。
参见
是HDFS集群的主节点。维护着文件树和文件数据的存储位置信息，并处理客户端的文件访问请求。在HA部署模式下，包含主NameNode和备NameNode。
namespace是表中的一个逻辑组，类似于关系型数据库系统中放入数据库。
参见
参见
负责执行应用程序的容器，同时监控应用程序的资源使用情况（CPU、内存、硬盘、网络）并且向ResourceManager汇报。
是用于运行应用的main方法和创建SparkContext的程序。
Quota是用户使用资源的一个限制值。HDFS包含NameQuota和SpaceQuota。NameQuota限制指定文件夹下文件和目录的数量，SpaceQuota限制使用的空间大小。
参见
用来保证所有映射的键值对中的每一个共享相同的键组。
RegionServer是HBase集群运行在每个工作节点上的服务。一方面维护Region的状态，提供对于Region的管理和服务；另一方面，上传Region的负载信息，参与HMaster的分布式协调管理。
承载业务逻辑的运算单元，也是可执行的最小工作单位。
集群的资源管理器，基于应用程序对资源的需求进行调度。资源管理器提供一个调度策略的插件，它负责将集群资源分配给多个队列和应用程序。调度插件可以基于现有的能力调度和公平调度模型。
参见
容量调度被设计出来使得Hadoop应用能够共享的、多用户的、操作简便的运行在集群上，同时最大化集群的吞吐率和利用率。
参见
帮助元数据节点管理元数据的工具。用于镜像备份，或日志与镜像的定期合并。
用于索引同一份数据的不同版本，时间戳的类型是64位整型。时间戳可以由HBase在数据写入时自动赋值或者由客户显式赋值。
从Map任务输出的数据到Reduce任务的输入数据的过程称为Shuffle。
HiveQL语言中一种负责对数据库对象运行数据访问工作的指令集，以INSERT、UPDATE、DELETE三种指令为核心，分别代表插入、更新与删除，是开发以数据为中心的应用程序必定会使用到的指令。
HiveQL语言中一种负责数据结构定义与数据库对象定义的语言，由CREATE、ALTER与DROP三个语法所组成，最早是由Codasyl(ConferenceonDataSystemsLanguages)数据模型开始，现在被纳入SQL指令中作为其中一个子集。
用于保存文件系统目录的某个特定时间的数据。
是HBase存储的核心，一个Store拥有一个MemStore和多个StoreFile，一个Store对应一个分区中表的列族。
HBase数据文件的基本单元。MemStore中数据存储达到一定量时，会生成StoreFile进行存储。
一种数据结构，提高了对数据库表中的数据检索操作效率。可以使用一个数据库表中的一列或多列，提供了快速随机查找和有效访问有序记录的基础。
参见
用于定义写同分布文件中所有文件块的DataNode集合。
一种TCP/IP协议。该协议使得文件可以通过网络从一台计算机传送到另一台计算机。在FTP传输中，两台计算机必须支持它们各自的FTP角色：一台必须是FTP客户端；另一台是FTP服务器。
是HDFS中存储的最小逻辑单元。每个HDFS文件由一个或多个文件块存储。所有的文件块存储在DataNode中。
HBase提供的在RegionServer执行的计算逻辑的接口。提供多个类型的协处理，以便灵活处理不同场景。用于管理Region生命周期，监控客户端对表的操作，按需触发执行在Region的功能。
HBase表的一个维度，包含行主键（由任意字符组合成）。表是按照行主键的字母进行排序。行主键用于表的检索。
HBase中标的主键，表按照主键的字母升序排列。
用户使用Java、Scala、Phython设计语言定义的程序，包含驱动程序和执行者程序。用于在Spark中实现用户的业务计算逻辑。
数据库中一种高效的日志算法。在相同的数据量下，采用预写日志系统（WAL）日志的数据库系统在事务提交时，磁盘写操作只有传统的回滚日志的一半左右，大大提高了数据库磁盘I/O操作的效率，从而提高了数据库的性能。HBase中每次增量加载的数据都是写在WAL中。
执行者是工作节点中执行Spark应用的进程。该进程运行任务并在内存或磁盘保存数据。每个应用都有其对应的执行者。
它是一种网页单点登录协议。其目的是用户只需提供一次凭据（如用户名和密码），即可访问多个应用程序。在Web应用程序没有获得用户的安全凭据（如密码）的情况下，它也允许Web应用程序对用户进行身份验证。CAS也指实现了这个协议的软件包。
是针对RDD的一种操作，将一个RDD转换成新的RDD。Transformation操作是Lazy的，也就是说从一个RDD转换生成另一个RDD的操作不是马上执行，需要等到有Actions操作的时候才会真正启动计算过程进行计算。
MapReduceService集群中的主节点，负责管理集群，协调将MapReduce可执行文件分配到核心节点。此外，还会跟踪每个作业的执行状态，监控DataNode的运行状况。
MRS为用户提供程序执行平台，用户可将自己开发的程序提交到MRS集群中，执行程序并获取结果。也支持在线提交SQL语句，对结构化数据进行查询和解析。
A<h5>ACL</h5><p>参见</p><h5>AK</h5><p>参见</p><h5>API</h5><p>参见</p><h5>安全接入键</h5><p>用户在对象存储服务系统中的安全接入键，是用户访问对象存储服务系统的密钥，用户根据安全接入键和请求头域生成鉴权信息。安全接入键和接入键标识一一对应。</p>B<h5>版本控制</h5><p>通过在系统中记录并存储对象在不同时间的修订版本，实现对象多个版本之间的跟踪管理，也方便在出现意外时指定版本进行数据恢复。</p>C<h5>CNAME</h5><p>参见</p><h5>CORS</h5><p>参见</p>D<h5>DNS</h5><p>参见</p><h5>对象</h5><p>对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。</p><h5>对象存储服务</h5><p>基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。</p>
B<h5>版本控制</h5><p>通过在系统中记录并存储对象在不同时间的修订版本，实现对象多个版本之间的跟踪管理，也方便在出现意外时指定版本进行数据恢复。</p>C<h5>CNAME</h5><p>参见</p><h5>CORS</h5><p>参见</p>D<h5>DNS</h5><p>参见</p><h5>对象</h5><p>对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。</p><h5>对象存储服务</h5><p>基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。</p>
C<h5>CNAME</h5><p>参见</p><h5>CORS</h5><p>参见</p>D<h5>DNS</h5><p>参见</p><h5>对象</h5><p>对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。</p><h5>对象存储服务</h5><p>基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。</p>
D
F<h5>访问控制列表</h5><p>ACL是被授权访问某一资源的实体及其访问权限的列表。</p>J<h5>接入键标识</h5><p>用户在对象存储服务系统中的接入键标识，一个接入键标识唯一对应一个用户，一个用户可以同时拥有多个接入键标识。对象存储服务系统通过接入键标识识别访问系统的用户。</p><h5>静态网站托管</h5><p>用户将静态网站文件存储在对象存储服务上，并将该桶配置为托管模式，通过访问对象存储服务中的桶实现访问其静态网站的一种业务模式。</p>
J
K<h5>跨域资源共享</h5><p>CORS是一份浏览器技术的规范，提供了Web服务从不同网域传来沙盒脚本的方法，以避开浏览器的同源策略，是JSONP模式的现代版。</p>L<h5>LCM</h5><p>参见</p>O<h5>OBS</h5><p>参见</p>
L<h5>LCM</h5><p>参见</p>O<h5>OBS</h5><p>参见</p>
O
R<h5>软件开发工具包</h5><p>SDK是一套应用开发接口，它包含了监控业务管理和控制、设备管理、用户管理、资源管理以及系统维护接口，用户可使用这些接口实现各种组合应用的开发。</p>S<h5>SDK</h5><p>参见</p><h5>SK</h5><p>参见</p><h5>生命周期管理</h5><p>对象的生命周期包括从创建到删除全阶段，LCM是一种实现将符合指定条件的对象自动删除的一种管理手段。</p>T<h5>桶</h5><p>存放对象的容器，桶名必须全局唯一。</p><h5>桶策略</h5><p>一组对桶的访问请求进行接受或拒绝的控制策略，主要用于控制单个或多个用户对桶及桶内对象的访问权限。</p>
S<h5>SDK</h5><p>参见</p><h5>SK</h5><p>参见</p><h5>生命周期管理</h5><p>对象的生命周期包括从创建到删除全阶段，LCM是一种实现将符合指定条件的对象自动删除的一种管理手段。</p>T<h5>桶</h5><p>存放对象的容器，桶名必须全局唯一。</p><h5>桶策略</h5><p>一组对桶的访问请求进行接受或拒绝的控制策略，主要用于控制单个或多个用户对桶及桶内对象的访问权限。</p>
T
U-Z
参见
参见
参见
用户在对象存储服务系统中的安全接入键，是用户访问对象存储服务系统的密钥，用户根据安全接入键和请求头域生成鉴权信息。安全接入键和接入键标识一一对应。
通过在系统中记录并存储对象在不同时间的修订版本，实现对象多个版本之间的跟踪管理，也方便在出现意外时指定版本进行数据恢复。
参见
参见
参见
对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。
基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。
通过在系统中记录并存储对象在不同时间的修订版本，实现对象多个版本之间的跟踪管理，也方便在出现意外时指定版本进行数据恢复。
参见
参见
参见
对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。
基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。
参见
参见
参见
对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。
基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。
参见
对象存储服务中的基本数据单位，由对象数据和描述该对象属性的对象元数据组成。
基于对象的云存储服务，提供易扩展、高安全、高可靠性、低成本的数据存储能力，用户可以通过基于HTTP协议的接口对对象进行管理和使用。对象存储服务一般应用于大规模的数据存储服务。
ACL是被授权访问某一资源的实体及其访问权限的列表。
用户在对象存储服务系统中的接入键标识，一个接入键标识唯一对应一个用户，一个用户可以同时拥有多个接入键标识。对象存储服务系统通过接入键标识识别访问系统的用户。
用户将静态网站文件存储在对象存储服务上，并将该桶配置为托管模式，通过访问对象存储服务中的桶实现访问其静态网站的一种业务模式。
用户在对象存储服务系统中的接入键标识，一个接入键标识唯一对应一个用户，一个用户可以同时拥有多个接入键标识。对象存储服务系统通过接入键标识识别访问系统的用户。
用户将静态网站文件存储在对象存储服务上，并将该桶配置为托管模式，通过访问对象存储服务中的桶实现访问其静态网站的一种业务模式。
CORS是一份浏览器技术的规范，提供了Web服务从不同网域传来沙盒脚本的方法，以避开浏览器的同源策略，是JSONP模式的现代版。
参见
参见
参见
参见
参见
SDK是一套应用开发接口，它包含了监控业务管理和控制、设备管理、用户管理、资源管理以及系统维护接口，用户可使用这些接口实现各种组合应用的开发。
参见
参见
对象的生命周期包括从创建到删除全阶段，LCM是一种实现将符合指定条件的对象自动删除的一种管理手段。
存放对象的容器，桶名必须全局唯一。
一组对桶的访问请求进行接受或拒绝的控制策略，主要用于控制单个或多个用户对桶及桶内对象的访问权限。
参见
参见
对象的生命周期包括从创建到删除全阶段，LCM是一种实现将符合指定条件的对象自动删除的一种管理手段。
存放对象的容器，桶名必须全局唯一。
一组对桶的访问请求进行接受或拒绝的控制策略，主要用于控制单个或多个用户对桶及桶内对象的访问权限。
存放对象的容器，桶名必须全局唯一。
一组对桶的访问请求进行接受或拒绝的控制策略，主要用于控制单个或多个用户对桶及桶内对象的访问权限。
应用软件编程接口是指应用程序之间为了保证互相通讯所提供的一系列特殊规则和要求。
CNAME是一个别名的正规名，也称作规范名字。CNAME记录允许将多个域名映射到同一台计算机。
TCP/IP网络中的功能实体，通过该服务器，用户只通过域名就可以访问对应的服务器。在TCP/IP网络中域名与IP地址一一对应，域名便于记忆，但网络中的服务器间只能通过IP地址相互识别，域名和IP地址之间的转换称为域名解析，域名解析需要通过专门的域名解析服务器来完成，DNS就是进行域名解析的服务器。
登录首页。单击页面右上方“注册”。
登录首页。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;代码检查”，进入软件开发云管理控制台“代码检查”页面，如所示。注意：代码检查单击“代码检查”页面上方的。单击。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的代码检查首页，可以开始使用服务。说明：
服务过期或账户被冻结后，提供15天的保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。进入软件开发云控制台页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账户总览输入充值金额后，根据页面提示完成充值续费。
登录首页。单击页面右上方“注册”。
登录首页。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;编译构建”，进入软件开发云管理控制台“编译构建”页面，如所示。注意：编译构建单击“编译构建”页面上方的。单击。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的编译构建首页，可以开始使用服务。说明：
服务过期或账户被冻结后，提供15天的保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。进入软件开发云控制台页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账户总览输入充值金额后，根据页面提示完成充值续费。
登录首页。单击页面右上方“注册”。
登录首页。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;配置管理”，进入软件开发云管理控制台“配置管理”页面，如所示。注意：配置管理单击“配置管理”页面上方的。单击。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的配置管理首页，可以开始使用服务。说明：
服务过期或账户被冻结后，提供15天的保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。进入软件开发云控制台页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账户总览输入充值金额后，根据页面提示完成充值续费。
文档数据库服务（DocumentDatabaseService，简称DDS）完全兼容MongoDB协议，提供安全、高可用、高可靠、弹性伸缩和易用的数据库服务，同时提供一键部署、弹性扩容、容灾、备份、恢复、监控和告警等功能。文档数据库按实际使用量付费开通。按需取用，按需付费，无需购买大量设备。适合使用周期较短，实例运行环境需求多变的用户，实例规格如下。
您可根据自己的业务需要，定制相应计算能力和存储空间的DDS。
登录管理控制台。选择“数据库&gt;文档数据库”，进入DDS控制台。在“总览”页面，单击“申请数据库实例”。在“规格选型”页面，填选实例配置、节点参数、网络、数据库配置、备份策略和安全设置，单击“立即购买”。按需付费这种购买方式比较灵活，可以即开即停，按实际使用时长计费。说明：用户所申请实例的性能，取决于申请实例所选择的配置，可供用户选择的硬件配置项为各节点的规格和存储容量。在“规格确认”页面，进行规格确认。<ulid="ZH-CN_TOPIC_0047545984__zh-cn_topic_0044018333_ul39403645154947"><liid="ZH-CN_TOPIC_0047545984__zh-cn_topic_0044018333_li19088491154947">如果需要重新选择，单击“上一步”，回到上个页面修改实例信息。如果没有问题，勾选“我已经阅读并同意《公测免费使用服务条款协议》的全部内容。”，单击“提交订单”，完成实例的申请。DDS实例创建成功后，用户可以在“实例管理”页面，查看并管理自己的数据库实例。<oltype="a"id="ZH-CN_TOPIC_0047545984__zh-cn_topic_0044018333_ol63111971111114"><liid="ZH-CN_TOPIC_0047545984__zh-cn_topic_0044018333_li26400592111115">创建实例过程中，实例运行状态显示为“创建中”，此过程约15分钟。创建完成，运行状态显示为“服务中”。
现阶段处于定点公测，各种实例规格费用均为零，相关内容，后续补充。
现阶段处于定点公测，各种实例规格费用均为零，相关内容，后续补充。
随着业务数据的增加，原来申请的数据库存储容量不能满足需求。这时，您需要为实例进行存储扩容。每个实例最多只能扩容三次。故障的实例不可扩容。重启中、存储扩容中、节点扩容中、实例恢复和创建备份中的实例不可扩容。扩容过程中，该实例不可重启和删除。存储容量变更只允许扩容，不能缩容。
在“实例管理”页面，选择指定的实例，单击“更多&gt;扩容”。在“规格选型”页面的“存储空间”页签下，选择config节点或者shard节点，选择“扩容到”的空间大小，单击“立即购买”。用户每次扩容最小容量必须为100GB，所选容量大小必须为10的整数倍，最大磁盘容量为1000GB。由于实例存储扩容时，部分节点扩容失败，各角色对应的存储空间大小不一致，现显示实例中最大的存储容量。在“规格确认”页面，进行订单确认。<ulid="ZH-CN_TOPIC_0047546001__zh-cn_topic_0044018350_zh-cn_topic_0029128264_zh-cn_topic_0023328283_ul47954158162931"><liid="ZH-CN_TOPIC_0047546001__zh-cn_topic_0044018350_zh-cn_topic_0029128264_li26523207131216">如果确认无误，勾选“我已阅读并同意《公测免费使用服务条款协议》”，单击“提交订单”，提交扩容。如需重新选择，单击“上一步”，回到“规格选型”页面，修改新增大小。检查存储扩容结果。在实例管理页面，可以看到任务状态显示为“实例存储扩容中”。稍后在实例列表中，单击，展开实例信息查看磁盘大小，检查扩容是否成功。这个过程需要3~5分钟。
随着业务数据的增加，原来申请的数据库节点数量不能满足需求。这时，您需要对实例的节点进行扩容。故障的实例不可扩容。重启中、存储扩容中、节点扩容中、实例恢复和创建备份中的实例不可扩容。扩容过程中，该实例不可重启和删除。节点变更只允许扩容，不能缩容。
在“实例管理”页面，选择指定的实例，单击“更多&gt;扩容”。在“规格选型”页面的“节点”页签，选择shard或mongos节点，选择“扩容到”的节点数量，单击“立即购买”。shard和mongos最大可扩容到12个。在“规格确认”页面，进行订单确认。<ulid="ZH-CN_TOPIC_0047546003__zh-cn_topic_0044018351_zh-cn_topic_0029128264_zh-cn_topic_0023328283_ul47954158162931"><liid="ZH-CN_TOPIC_0047546003__zh-cn_topic_0044018351_zh-cn_topic_0029128264_li26523207131216">如果确认无误，勾选“已经阅读并接受《公测免费使用服务条款协议》的全部内容”，单击“提交订单”，提交扩容。如需重新选择，单击“上一步”，回到“规格选型”页面，修改新增大小。查看节点扩容结果。在实例管理页面，可以看到任务状态为“实例节点扩容中”。稍后在实例列表中，单击“管理”，单击“shard”或“mongos”页签，查看节点信息，检查扩容是否成功。此过程需要10~15分钟。
现阶段处于定点公测，各种实例规格费用均为零，相关内容，后续补充。
下面为您介绍如何购买华为专属云。
登录华为云网站：。单击页面右上方“注册”。进入页面，根据提示信息完成注册。
购买专属云服务前，需要先申请、开通专属云服务。请为各环节预留充足时间，确保可以按时使用专属云。
在华为云网站首页，单击页面右上方“管理控制台”。进入华为云管理控制台登录页面。输入注册用户信息，登录华为云管理控制台。单击用户名下的“用户中心”，在用户中心完成充值。切换区域，进入已经开通的专属云区域，如所示。切换区域单击“专属云”。在“专属云”界面单击“申请资源”，如所示。专属云在“申请专属云”，根据界面提示配置参数，如所示。申请专属云单击“立即申请”。确认配置无误后，单击“提交申请”。任务下发成功后，关闭创建界面。
本节为您介绍当专属云即将过期时，您如何续费。续费后，您可以继续使用专属云。
登录管理控制台。单击用户名下的“用户中心”，如所示。用户中心根据计费类型，选择续费方式：<ulid="ZH-CN_TOPIC_0017134637__zh-cn_topic_0013859512_ul5418071916509"><liid="ZH-CN_TOPIC_0017134637__zh-cn_topic_0013859512_li3362968416509">包年/包月：选择“订单管理&gt;待续订订单”。按需：选择“欠费业务”。在对应页面根据页面提示完成续费。
您申请的专属云无法满足业务需要时，可对专属云进行扩容。
登录管理控制台。单击右侧上方地域下拉列表，切换到待扩容的专属云所在服务区。单击“专属云”。在“专属云”界面，单击待扩容的专属云右侧的“申请扩容”，如所示。扩容专属云在“申请资源”，根据界面提示配置参数，如所示。申请资源单击“立即申请”。确认配置无误后，单击“提交申请”。任务下发成功后，关闭创建界面。
按照实例计费
包年
介绍数据接入服务产生的背景、关键能力、功能特性以及服务的基本概念。
数据接入服务（DataIngestionService）为处理或分析流数据的自定义应用程序构建数据流管道，主要解决云服务外的数据实时传输到云服务内的问题。数据接入服务每小时可从数十万种数据源（如IoT数据采集、日志和定位追踪事件、网站点击流、社交媒体源等）中连续捕获、传送和存储数TB数据。
加速日志和数据传送获取：您无需等待批量处理数据，而是让数据生产者在生成数据后立即输入DIS数据通道，防止因数据生产者出现故障导致的数据损失。例如，系统和应用程序日志可以持续添加到数据通道并可在数秒内进行处理。实时指标和报告：实时从DIS数据通道数据提取指标并生成报告。例如，数据接入服务应用程序可以处理系统和应用程序日志的指标和报告，因为数据被流入而不是等待收到批量数据。实时数据分析：通过数据接入服务，可以运行实时通道数据分析。例如，可以通过API把数据实时添加到DIS数据通道中，并让您的DIS应用程序实时运行分析，从而在数分钟内从数据中获得重要见解，而无需数小时或数天时间。复杂的数据通道处理：您可以创建DIS应用程序和数据通道的DirectedAcyclicGraphs（DAG）。在这一情景中，一个或多个DIS应用程序可将数据添加到一个DIS数据通道进行进一步处理，以便于进行通道处理器的后续阶段。
永久在线：DIS永久在线，可以进行实时数据处理。利用DIS，您可以在数据生成时连续收集数据，并对您的业务和运营关键信息及时作出反应。无限扩展：DIS数据通道的吞吐量每小时可从数MB扩展到数TB，PUT记录每秒钟可从数千次扩展到数百万。易于使用：您可以在几秒钟内创建DIS数据通道，轻松的将数据放入通道中，并构建用于数据处理的应用程序。成本低廉：DIS没有前期成本，您只需要为实际使用的资源付费即可。并行处理：DIS可让您用多个应用程序同时处理同一个数据通道。例如，您可以让一个应用程序运行实时分析，让其他应用程序从同一个DIS数据通道中将数据发送至OBS。安全可靠：DIS可将数据保留24小时，以防数据在应用程序故障、个别机器故障或设施故障时丢失。
DIS对数据传输所需要的基础设置、存储、网络和配置进行管理。您无需为数据通道担心配置、部署、持续的硬件维护等。此外，DIS还可在云区域同步复制数据，为您提供数据高可用性和数据持久性。
DIS使用简单的按需付费定价结构。不存在前期成本或最低费用，您仅需为使用的资源付费。定价结构基于两个核心维度：分区时间和负载单元，具体价格如所示。负载单元定为25k，即用户一次输入的数据占用多少个25k。如果依次输入的数据量是30k，则占用2个负载单元；一次输入的数据量为10k，则占用1个负载单元。按负载单元数目计费，每一百万个负载单元收取0.1元。
使用DIS前需要注册共有云账户，再开通DIS。注册公有云账户的操作，请参见。
使用注册账户登录DIS控制台，进入DIS管理页面。单击“申请接入通道”配置相关参数。<ulid="ZH-CN_TOPIC_0052557477__zh-cn_topic_0068150553_ul61729771"><liid="ZH-CN_TOPIC_0052557477__zh-cn_topic_0068150553_li22700712145745">通道名称：用户发送或者接收数据时，需要指定通道名称，通道名称不可重复。通道名称由英文字母、数字、中划线和下划线组成。长度为1～64个字符。分区数量：分区是DIS数据通道的基本吞吐量单位。每个分区的最高接入速度可达1MB/秒，最高记录速度1000条记录/秒，最高读取速度可达2MB/秒。取值范围为1～50的整数，每个租户分区数量总和不能超过50。通道的多个分区可以并发进行数据传输，以提升效率。数据转储：通道数据存储位置。若不选则默认为“无”。<ulid="ZH-CN_TOPIC_0052557477__zh-cn_topic_0068150553_ul59356268113353"><liid="ZH-CN_TOPIC_0052557477__zh-cn_topic_0068150553_li64444365113353">无：通道数据只存储在DIS中。OBS：通道数据存储在DIS中，并周期性导入OBS。DIS为临时存储器，存储在DIS中的数据最长保留时间为24小时。只有“数据转储”选择为“OBS”时，才会显示“数据转储地址”、“转储文件前缀”和“数据转储周期”配置项。数据转储地址：存储该通道数据的OBS桶名称。桶名称在“对象存储服务”中“创建桶”时创建。转储文件前缀(可选)：文件名的前缀，取值范围为英文字母、数字和下划线。最大长度为50个字符。数据转储周期（s）：根据用户配置的时间，周期性的将数据导入OBS，若某个时间段内无数据，则此时间段不会生成打包文件。取值范围：60～900。单位：秒。单击“提交申请”，弹出“规格确认”页面。勾选“我已阅读并同意《华为云DIS服务协议》。”单击“确认申请”，完成通道接入。
数据调度服务（DataPipelineService，简称DPS）是对公有云上数据移动和处理的过程进行编排和调度的云服务。DPS服务内置多种数据源、移动/转换活动。用户可以通过在编辑页面编排不同的活动和数据源，构建基于实际业务的数据处理流程，并对数据处理流程进行调度、运行、管理和监控。DPS可以帮助用户可靠地处理数据并以指定的周期在不同的计算与存储服务之间以及内部数据源之间移动数据。DPS可以帮助用户轻松创建具有容错性、可重复性和高可用性特征的数据处理流程。
DPS服务只收取服务管理费用，DataPipeline运行所需的基础设施资源不由DPS所收取，服务管理费用如所示。DPS服务支持按包年/包月方式购买时长，最短时长为1个月，最长时长为3年。购买DPS服务使用时长的优惠信息如下：花10个月费用享1年使用权。花20个月费用享2年使用权。花30个月费用享3年使用权。
用户需要具备操作数据管道的权限。
登录数据调度服务，进入“数据管道列表”页面。单击“创建数据管道”，进入“购买数据调度服务”页面。在“基本信息”页面，系统自动生成一个数据管道名称，您可以根据需要修改。说明：数据管道名称只能由字母、数字和下划线组成，并且长度为1～62个字符。在“购买量”页面中的“购买时长”区域框下，拖动“购买时长”，确定购买时间及配置费用后，单击“立即购买”。说明：<ulid="ZH-CN_TOPIC_0057960727__ul33770099153837"><liid="ZH-CN_TOPIC_0057960727__li24398967153837">确定购买时长后，系统会自动计算出配置费用。在“配置费用”中，您可以单击“了解计费详情”，在弹出的“产品价格详情”页面中，查看具体的计费详情。在“订单确认”页面，确认订单配置信息后，勾选“我已经阅读并且同意《DPS服务协议》”，单击“提交订单”。订单配置信息如所示。选择如下任一方式付款：余额支付，支付宝，网上银行支付和转账汇款。单击“确认付款”，购买服务成功。返回“数据管道列表”页面，数据管道创建成功。
目前DPS仅提供包年包月购买方式，用户一次性付费。到期后将为用户提供7天的宽限期：宽限期内完成续费或者未完成续费，用户都可以继续使用服务。宽限期后没有续费，系统将为用户提供15天的保留期。保留期内系统将冻结用户服务权限，并停止用户构建的调度任务。<ulid="ZH-CN_TOPIC_0058464772__ul853265217479"><liid="ZH-CN_TOPIC_0058464772__li968500617479">如果保留期内完成续费，将解冻用户服务权限，用户可以继续使用服务。如果保留期后没有续费，将自动删除用户创建的数据管道。请参见以下指导完成自助续费，以确保服务正常使用。
登录数据调度服务。单击页面右上角帐户名右侧，单击“续费管理”。在页面右上方选择“订单号”，在搜索框中输入订单号，单击进行搜索。在“操作”列中，单击“续费”，根据页面提示完成续费。
我们有按需、包年/包月两种计费方式，您可以根据您的实际情况选择不同的计费方式。
如果用户需要在服务器上部署相关业务，较之物理服务器，弹性云服务器的创建成本较低，并且可以在几分钟之内快速获得基于公有云平台的弹性云服务器设施，并且这些基础设施是弹性的，可以根据需求伸缩。下面介绍如何购买弹性云服务器。
专属物理资源如果您希望弹性云服务器运行在隔离的物理硬件中，请您先申请专属云，再创建弹性云服务器。了解和申请专属云请参考。
登录公有云网站www.huaweicloud.com。单击页面右上方“注册”。进入注册页面，根据提示信息完成注册，详细操作请参见注册成功后，系统会自动跳转至您的个人信息界面。返回公有云网站首页，单击页面下方“产品”区域框中的“弹性云服务器(ECS)”。进入弹性云服务器购买页面。选择弹性云服务器付费类型。您可以选择“包年/包月”或“按需付费”。<ulid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_ul6439687519405"><liid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_li493754519405">“包年/包月”方式：用户选购完主机配置后，可以根据需要设置购买时长，单位为月或者年，最短时长为1个月，最长为3年，系统会一次性按照购买价格对账户余额进行扣费。“按需付费”方式：用户选购完主机配置后，无需设置购买时长，默认购买时长单位为小时，系统每小时按照实际消费金额对账户余额进行扣费。填写基本信息、网络信息、登录弹性云服务器方式和购买数量等。参数说明如所示。说明：<ulid="ZH-CN_TOPIC_0013859510__ul1588144719257"><liid="ZH-CN_TOPIC_0013859510__li26905356192510">购买弹性云服务器时，用户不能选择已售罄的CPU和内存资源。购买弹性云服务器时，系统盘大小可以根据需要自定义。弹性云服务器当前支持的系统盘大小范围为1GB~32768GB，且不小于使用的镜像要求的系统盘最小值。单击“立即购买”。<ulid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_ul1859907819405"><liid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_li4911138319405">如果选择“按需付费”方式，则单击“立即申请”。如果您对价格有疑问，可以单击“配置费用”右侧的“了解计费详情”来了解产品价格。在规格确认页面，您可以查看资源详情并提交订单。<ulid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_ul2464124719405"><liid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_li3013037419405">付费方式为“包年/包月”时，如果您确认规格和价格无误，请勾选“我已经阅读并同意《华为弹性云服务器服务协议》和《系统镜像免责声明》”，单击“提交订单”。如果您暂不付款，可以单击“提交订单”右侧的“确认订单，暂不付款”。系统将保留您的订单，您可以在个人信息管理页面的“订单管理”中的“待支付订单”中，找到您未付款的订单，并执行“继续付款”或“取消该订单”的操作。付费方式为“按需付费”时，如果您确认规格和价格无误，请勾选“我已经阅读并同意《华为弹性云服务器服务协议》和《系统镜像免责声明》”，单击“提交申请”。选择付费方式，单击“确认付款”。说明：本操作仅适用于包年/包月计费方式。<ulid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_ul3762574919405"><liid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_li596892119405">系统提供了“余额支付”、“平台支付”、“网上银行支付”和“转账汇款”四种支付方式。如果您使用“余额支付”方式，请及时充值以保证付费成功。如果您使用“平台支付”和“网上银行支付”方式，请根据系统引导的跳转页面执行操作。如果您使用“转账汇款方式”，请参考界面显示的汇款账户填写信息完成汇款，并及时反馈转账汇款工单。按照不同的计费策略，后续处理有所不同。<ulid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_ul3614222819405"><liid="ZH-CN_TOPIC_0013859510__zh-cn_topic_0027498860_li2778684819405">包年/包月：根据系统提示付费。付费成功后，系统自动创建弹性云服务器。您可以在弹性云服务器页面查询弹性云服务器的创建状态。按需付费：申请弹性云服务器后，当用户余额充足时，系统自动创建弹性云服务器。您可以在弹性云服务器页面查询弹性云服务器的创建状态。单击“立即申请”。如果您创建弹性云服务器时添加了数据盘，待弹性云服务器创建完成后，需要初始化数据盘。操作方法请参考《云硬盘用户指南》中的“数据盘初始化（Windows）”和“数据盘初始化（Linux）”。
创建弹性云服务器需要花费几分钟时间，您可以随时查看弹性云服务器的创建状态，具体操作请参见。
如果您购买的弹性云服务器规格或网络带宽无法满足业务需要时可参考该章节变更弹性云服务器规格。您可以升级弹性云服务器的vCPU、内存、磁盘和带宽，还可以为弹性云服务器添加网卡和变更网卡所属安全组。
变更须知变更包年/包月的弹性云服务器时，变更后的弹性云服务器价格不能低于原有价格。变更弹性云服务器规格时，用户不能选择已售罄的CPU和内存资源。弹性云服务器规格（CPU或内存）变小，会影响弹性云服务器的性能。操作步骤登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表，查询待变更弹性云服务器状态。（可选）如果弹性云服务器状态不是关机状态，单击弹性云服务器所在行的“操作”列下的“更多&gt;关机”。待弹性云服务器状态变更为关机状态时，单击弹性云服务器所在行“Operation”列下的“More&gt;ModifySpecifications”。在弹出的变更规格页面，选择变更后的vCPU和内存，如所示。变更vCPU和内存单击“确定”。在弹性云服务器“变更规格”页面中，确认变更后的CPU和内存规格无误后，阅读并勾选同意服务协议后，单击“提交申请”。
当您的云硬盘容量不足时，你可以对其进行扩容。扩容云硬盘的整体流程为：卸载云硬盘-&gt;扩容云硬盘-&gt;挂载云硬盘-&gt;初始化云硬盘。详情请参考《云硬盘用户指南》中的“扩容云硬盘”。
当您的弹性云服务器需要多个网卡时，可以参考下面步骤为弹性云服务器添加网卡。登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表中的右上角，输入弹性云服务器名、IP地址或ID，并单击进行搜索。单击待添加网卡的弹性云服务器名称。系统跳转至该弹性云服务器详情页面。选择“网卡”页签，并单击“添加网卡”。选择待增加的子网和安全组，如所示。说明：如果需要给弹性云服务器添加一张指定IP地址的网卡，用户需填写“私有IP地址”。选择子网和安全组单击“确定”。后续任务部分操作系统无法识别新添加的网卡，需手动激活网卡。下面以Ubuntu系统为例介绍具体激活网卡的操作步骤，其他操作系统请自行完成相关操作，如有问题，请参见对应操作系统的官网指导或手册来完成操作。在弹性云服务器所在行的“操作”列下，单击“远程登录”。登录弹性云服务器。执行如下命令，查看网卡名称。ifconfig-a例如，查询到的网卡名为：eth2。执行如下命令，进入相应目录。cd/etc/network执行如下命令，打开interfaces文件。viinterfaces在interfaces文件中，增加类似如下信息。auto<emid="ZH-CN_TOPIC_0013859511__i3229292515545">eth2</em>iface<emid="ZH-CN_TOPIC_0013859511__i350112715550">eth2</em>inetdhcp执行如下命令，保存并退出interfaces文件。:wq执行命令ifupeth<emid="ZH-CN_TOPIC_0013859511__i49953291211534">X</em>或/etc/init.d/networkingrestart，使新增网卡生效。上述命令中的X为具体的网卡名称序号，例如，ifupeth2。执行如下命令，查看回显信息中是否包括查询到的网卡。ifconfig例如，回显信息中包含网卡eth2。<ulid="ZH-CN_TOPIC_0013859511__ul19071745154619"><liid="ZH-CN_TOPIC_0013859511__li36308608154619">是，表示新增网卡生效，结束。否，表示新增网卡未生效，执行。登录管理控制台，在弹性云服务器所在行的“操作”列下，选择“更多”，并单击“重启”。再次执行命令ifconfig，查看回显信息中是否包括查询到的网卡。<ulid="ZH-CN_TOPIC_0013859511__ul4972136319247"><liid="ZH-CN_TOPIC_0013859511__li4483908619247">是，结束。否，请联系技术支持人员。
弹性云服务器最多可以有12个网卡，其中包括一个主网卡，且主网卡不可删除。当您的弹性云服务器需要删除主网卡以外的其他网卡时，可以参考下面步骤。登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表中，单击待删除网卡的弹性云服务器名称。系统跳转至该弹性云服务器详情页面。选择“网卡”页签，并单击“删除”。说明：对于该弹性云服务器的主网卡（默认为网卡列表中显示的第一个网卡），用户不能执行删除操作。在弹出的对话框中单击“确定”，删除网卡。
当弹性云服务器的网卡需要变更所属安全组时，可以参考下面步骤。登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表中，单击待变更安全组的弹性云服务器名称。系统跳转至该弹性云服务器详情页面。选择“网卡”页签，并单击“更改安全组”。在弹出的“更改安全组”对话框中，选择指定的安全组，单击“确定”。
您可以绑定浮动私有IP地址，为网卡提供第二个IP地址，从而实现更灵活的网络功能。登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表中，单击待绑定浮动私有IP地址的弹性云服务器名称。系统跳转至该弹性云服务器详情页面。选择“网卡”页签，单击“管理私有IP地址”。在弹出的“管理私有IP地址”对话框中，勾选“绑定浮动私有IP地址”。设置子网和IP地址，单击“确定”。
当弹性云服务器绑定了弹性IP时，通过带宽提供公网和弹性云服务器间的访问流量。当弹性云服务器的带宽需要调整时，可以参考下面步骤。登录管理控制台。选择“计算&gt;弹性云服务器”。在弹性云服务器列表中，单击待调整带宽的弹性云服务器名称。系统跳转至该弹性云服务器详情页面。选择“弹性IP”页签，展开待修改的弹性IP，并单击“带宽大小”参数项的“修改带宽”。进入“修改带宽”页面。根据页面提示，修改“带宽名称”、“带宽大小”，如所示。修改带宽
本节为您介绍当弹性云服务器即将过期时，您如何续费。续费后，您可以继续使用弹性云服务器。
登录管理控制台。单击用户名下的“用户中心”，如所示。用户中心根据计费类型，选择续费方式：<ulid="ZH-CN_TOPIC_0013859512__ul5418071916509"><liid="ZH-CN_TOPIC_0013859512__li3362968416509">包年/包月：选择“我的订单&gt;待续订”。按需：选择“欠费业务”。在对应页面根据页面提示完成续费。
弹性云服务器是由CPU、内存、镜像、云硬盘组成的一种可随时获取、弹性可扩展的计算服务器，同时它结合VPC、虚拟防火墙、数据多副本保存等能力，为您打造一个高效、可靠、安全的计算环境，确保您的服务持久稳定运行。弹性云服务器的开通是自助完成的，您只需要指定CPU、内存、镜像规格，我们将会在最短的时间内帮您开通，同时您也可以根据您的需求随时调整您的弹性云服务器规格。
下面为您介绍如何购买华为弹性负载均衡。弹性负载均衡购买时属于按需付费形式。登录华为云网站：。单击页面左上方“注册”。根据界面提示填写用户基本信息，完成注册，如所示。注册用户密码复杂度满足如下要求：至少包含大写字母、小写字母、数字、特殊字符中的三种；长度大于等于8个字符。返回华为云网站首页，单击页面右上方“管理控制台”。进入华为云管理控制台登录页面。输入注册用户信息，登录华为云管理控制台。单击用户名下的“用户中心”，在用户中心完成充值。选择地域，如所示。选择地域单击“网络&gt;弹性负载均衡”。单击“申请负载均衡”。根据界面提示配置参数。参数说明如和所示。单击“立即申请”。确认配置无误后，请勾选“我已经阅读并同意《华为弹性负载均衡服务协议》”，单击“立即创建”。任务下发成功后，关闭创建界面。
本节为您介绍当ELB即将过期时，您如何续费。续费后，您可以继续使用ELB。
登录管理控制台。单击用户名下的“用户中心”，如所示。用户中心根据计费类型，选择续费方式：<ulid="ZH-CN_TOPIC_0016047547__zh-cn_topic_0013859512_ul5418071916509"><liid="ZH-CN_TOPIC_0016047547__zh-cn_topic_0013859512_li3362968416509">包年/包月：选择“我的订单&gt;待续订”。按需：选择“欠费业务”。在对应页面根据页面提示完成续费。
对按照带宽进行按需计费。
按需。
如果您购买的ELB网络带宽无法满足业务需要时可参考该章节升级ELB。
在管理控制台的“弹性负载均衡”界面的信息列表，单击待调整的负载均衡所在行的“调整带宽”。根据需要调整带宽后，单击“确定”。
本节为您介绍当云硬盘即将过期时，您如何续费。续费后，您可以继续使用云硬盘。
登录管理控制台。单击用户名下的“用户中心”，如所示。用户中心根据计费类型，选择续费方式：<ulid="ZH-CN_TOPIC_0017934418__zh-cn_topic_0013859512_ul5418071916509"><liid="ZH-CN_TOPIC_0017934418__zh-cn_topic_0013859512_li3362968416509">包年/包月：选择“我的订单&gt;待续订”。按需：选择“欠费业务”。在对应页面根据页面提示完成续费。
我们有按需、包年/包月两种计费方式，您可以根据您的实际情况选择不同的计费方式。
当您的云硬盘容量不足，无法满足您的使用需求时，你可以对云硬盘进行扩容。
卸载云硬盘：将云硬盘从挂载的弹性云服务器卸载下来。扩容云硬盘：根据您的使用需求对云硬盘进行扩容。挂载云硬盘：将扩容后的云硬盘挂载至弹性云服务器。初始化云硬盘：登录弹性云服务器对扩容后的云硬盘进行初始化。初始化成功后，扩容后的云硬盘便可正常使用。
Windows系统：Linux系统：
系统盘在创建云服务器时自动添加，无需单独购买。数据盘可以在购买云服务器的时候购买，由系统自动挂载给云服务器。也可以在购买了云服务器之后，单独购买云硬盘并挂载给云服务器。
登录华为云网站。单击页面右上方“注册”。进入注册页面，根据提示信息完成注册，详细操作请参见。注册成功后，系统会自动跳转至您的个人信息界面。返回华为云网站首页，单击页面下方“产品”区域框中的“云硬盘(EVS)”。进入云硬盘主页面。单击“立即购买”。根据界面提示，配置云硬盘的基本信息，如所示。说明：您也可勾选“从备份创建”，根据备份数据来创建新云硬盘，详细操作参见《云硬盘备份用户指南》中“使用云硬盘备份恢复数据”章节的“根据备份创建新云硬盘”小节。单击“立即购买”。核对云硬盘信息，阅读并勾选服务协议。单击“提交订单”。根据界面提示付款，单击“确认付款”。返回“云硬盘”主页面。待云硬盘创建完成后，并且状态变为“可用”时，单击云硬盘所在行的“操作”列下的“挂载”。在弹出的对话框中，选择磁盘待挂载的云服务器，在弹出的下拉列表中，选择挂载点，单击“确定”。“挂载点”即为该磁盘云服务器上对应的盘符。同一个云服务器上的云硬盘挂载的挂载点不允许重复。返回磁盘列表页面，当磁盘状态为“正在使用”时，表示挂载成功。初始化数据盘，具体操作请参见的以下内容：<ulid="ZH-CN_TOPIC_0017934424__ul9708427215714"><liid="ZH-CN_TOPIC_0017934424__li43761842215740">Windows系统：数据盘初始化（Windows）Linux系统：数据盘初始化（Linux）
（ElasticVolumeService，EVS）是一种基于分布式架构的，可弹性扩展的虚拟块存储设备。您可以在线创建云硬盘并挂载给云服务器，云服务器可以为弹性云服务器或者裸金属服务器，云硬盘的使用方式与传统服务器硬盘完全一致。同时，云硬盘具有更高的数据可靠性，更高的I/O吞吐能力和更加简单易用等特点，适用于文件系统、数据库或者其他需要块存储设备的系统软件或应用。加密云硬盘使用KMS提供的密钥，包括默认主密钥和用户主密钥(CMK,CustomerMasterKey)，具体请参见《密钥管理服务用户指南》中的“简介&gt;概念”。默认主密钥不支持禁用、计划删除等操作。如果加密云硬盘使用的用户主密钥被执行禁用或计划删除操作，当操作生效后，使用该用户主密钥加密的云硬盘在一段时间内可以正常使用，但当该加密云硬盘被卸载并重新挂载至云服务器时，由于无法正常获取密钥会导致挂载失败，云硬盘不可用。云硬盘简称为磁盘。
现阶段机器学习服务处于公测期，MLS实例均为免费。
机器学习服务依赖MapReduce服务（MapReduceService，简称MRS）提供计算资源，在申请机器学习服务前，请提前购买MapReduce服务，详情参见《MapReduce服务购买指南》。现阶段机器学习服务处于公测期，MLS实例为免费（与MLS配合使用的VPC和MRS正常收费）。
现阶段机器学习服务处于公测期，MLS实例均为免费。
用户可根据业务需要，定制相应计算能力和存储空间的MLS实例。
登录公有云管理控制台。单击“服务列表”，选择“数据分析&gt;机器学习服务”，默认显示“MLS实例管理”。在“MLS实例管理”页面，单击“创建MLS实例”。在“服务选型”页面，填选“实例规格”、“网络”和“计算服务”。单击“立即申请”，进入“规格确认”页面。阅读并勾选“我已阅读并同意《公测免费使用服务条款协议》”。单击“立即申请”。实例创建需要时间，所创实例的初始状态为“创建中”，请等待一段时间。创建成功后状态更新为“服务中”，用户可以开始使用实例。
机器学习服务，即MachineLearningService，简称MLS，是一项数据挖掘分析平台服务，旨在帮助用户通过机器学习技术发现已有数据中的规律，从而创建机器学习模型，并基于机器学习模型处理新的数据，为业务应用生成预测结果。机器学习服务可降低机器学习使用门槛，提供可视化的操作界面来编排机器学习模型的训练、评估和预测过程，无缝衔接数据分析和预测应用，降低机器学习模型的生命周期管理难度，为用户的数据挖掘分析业务提供易用、高效、高性能的平台服务。MLS支持按需购买MLS实例，按实际使用时长计费，不同的公有云基础架构资源会与机器学习服务统一下单然后合并计费，方便用户快速使用机器学习服务。
MRS（MapReduce服务）是一个用于海量数据的管理和分析的虚拟化服务，通过将弹性云服务器（ECS）、云硬盘（EVS）、镜像（IMS）、对象存储服务（OBS）和虚拟私有云（VPC）进行组合搭配，以获取定制化的集群。用户可以在集群内可新增MapReduce、Spark和Hive作业，对数据进行分析和处理。数据处理完成后，采用SSL加密传输数据至对象存储服务，保证数据的完整性和机密性。MRS集群支持自动化部署，用户只需要指定基础服务的规格，可以开通一个运行中的集群。同时MRS支持根据用户的需求随时调整规格，例如扩容节点、删除集群或申请新集群。
包年/包月：根据集群购买时长，一次性支付集群费用。最短时长为1个月，最长时长为3年。按需付费：节点按实际使用时长计费，计费周期为一小时。购买MRS集群，每种规格的弹性云服务器对应MRS费用体系如所示。Master节点支持规格16核32G、16核64G和32核128G，Core节点支持全部规格。HDDSAS是密集存储型实例提供高IO性能的本地硬盘。
用户需要使用MRS集群时，需要提前购买，再正常使用。请参见以下指导完成首次购买MRS集群过程。
登录MRS管理控制台。单击“申请集群”，进入“集群配置”页面。说明：创建集群时需要注意配额提醒。当资源配额不足时，建议按照提示申请足够的资源，再创建集群。参考下列表格配置集群基本信息。当创建包年包月集群，单击“立即购买”，当创建按需集群，单击“立即申请”。确认集群规格信息，勾选“我已阅读并同意《MapReduce服务协议》”，单击“提交订单”，完成集群的创建。集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。MRS系统界面支持同一时间并发创建10个集群，且最多支持管理集群100个。说明：当创建集群时，您还可以创建处于Failed或者Terminated状态的同名集群。
如果已购买的MRS集群已无法满足业务的存储与计算需要，用户需要扩容集群来满足业务。由于MRS集群通过Core节点存储并处理数据，扩容集群即增加Core节点场景。增加节点后，集群的收费需重新计算。用户可以在MRS管理控制台执行增加节点的任务，不需要额外变更集群架构，增加易用性。
登录MRS管理控制台。选择“集群列表&gt;现有集群”，选择指定名称的集群，进入集群基本信息页面。然后选择“节点信息&gt;添加节点”。只有运行中的集群才能进行扩容操作。配置“节点数量”，单击“确定”。只支持扩容Core节点，不支持扩容Master节点。此处添加的最大节点数为（100-集群Core节点数）。例如：当前集群Core节点数为3，此处添加的节点数必须小于等于97。集群扩容过程说明如下：<ulid="ZH-CN_TOPIC_0037237991__ul22837900154345"><liid="ZH-CN_TOPIC_0037237991__li55087411154345">扩容中：集群正在扩容时集群状态为“扩容中”。已提交的作业会继续执行，也可以提交新的作业，但不允许继续扩容和终止集群，也不建议重启集群和修改集群配置。扩容成功：集群扩容成功后集群状态为“运行中”，计费会按照新增节点+已有节点使用的资源计算。扩容失败：集群扩容失败时集群转入失败任务管理页面，其状态为“运行中”，用户可以执行作业，也可以重新进行扩容操作。。
目前MRS提供按需和包年/包月购买方式，按需是每小时扣费时余额不足导致欠费，而包年/包月是集群时长用完后需重新购买时长，系统自动先提醒用户续费，并在15天的保留期内冻结集群资源。用户续费后解冻集群，可继续正常使用。如果在保留期内用户没有续费，集群将终止服务。请参见以下指导完成自助续费。
登录管理控制台。单击用户名下的“用户中心”。根据计费类型，选择续费方式。如按需付费，在“总览”单击“欠费业务”。在对应页面根据页面提示完成续费。
本章介绍对象存储服务的计费方式以及收费标准。提供按需、包年包月两种计费方式。用户可以根据实际需求变更资源的资费方式。详细的服务资费费率标准请参见。
某公司有大量视频或音频数据需要备份存储在OBS中，假设该公司通过公网总共存储1TB的文件到OBS中，每月除DELETE请求外有1500万请求次数，每月下行流量为100GB。1TB的存储包中包含如下免费请求数：PUT,COPY,POST,LIST所有请求总计60万次。GET和其它请求总计240万次。基于此案例，可详细计算出通过以下两种不同的计费方式的消费情况。OBS按需付费OBS包年包月此案例中的单价仅为示例，且计算出的费用为估算值。单价的变动和实际场景中计算出来的费用可能会有偏差。请以云服务官网发布的数据为准。
用户可以查看自己的欠费信息，欠费后需要充值余额来还款。
登录OBS管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。在“总览”页面消费详情下可以查看到当前的欠费金额。如果存在欠费，请及时充值。
对象存储服务默认是按需计费，即按实际使用的时长收费，以小时为单位，按每小时整点结算，不设最低消费标准。若账户余额小于100元，仅可读取OBS中的数据，不可继续存储更多的数据。用户注册云服务帐号后，仅需进入充值页面，充值后便可正常使用OBS。
注册云服务帐号。<oltype="a"id="ZH-CN_TOPIC_0058921518__ol1835080210522"><liid="ZH-CN_TOPIC_0058921518__li2744777610522">打开浏览器，在地址栏中输入并按“Enter”。在页面右上角单击“注册”。在注册页面按需填写注册信息并单击“提交注册信息”。根据界面提示进行信息配置。充值。<oltype="a"id="ZH-CN_TOPIC_0058921518__ol29781488105545"><liid="ZH-CN_TOPIC_0058921518__li39705146105549">登录OBS管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。单击“充值”，系统自动跳转到充值窗口。根据界面提示信息，对账户进行充值。充值成功后，关闭充值窗口，返回管理控制台首页。单击“对象存储服务”，开通并进入OBS管理控制台。
对象存储服务同时提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长。
开通OBS服务后，在OBS管理控制台主页面单击“购买资源包”，进入资源包购买页。根据界面提示进行信息配置。您可以单击“”查看计费标准。单击“立即购买”。确认订单无误后，并单击“提交订单”。若发现订单有误，也可单击“上一步”修改订单后再继续购买。根据界面提示进行订单支付。说明：资源包购买注意事项：不支持续订、退订。资源包到期后，不会影响您在OBS上的使用和数据安全。您只要保证云服务账户上有足够的余额，系统会自动以按需付费的方式进行结算。流量包每月重置规则说明：按自然月重置，若产生下行流量，先扣除流量包额度，超出部分按照按需扣费机制结算。例如：您在4月15日购买6个月的下行流量包2TB并支付，您在4月15日到4月30日就会有2TB的下行流量可以使用。我们会在5月1日0点，重新给您2TB的下行流量，此2TB流量您可以在5月份使用。若上个月有未使用完的流量，也会清零。6月1日0点我们会再次分配2TB的下行流量给您，以此类推，直至购买资源包到期为止。
对象存储服务默认是按需计费的，即按实际使用的时长收费，以小时为单位，按每小时整点结算，不设最低消费标准。详细的服务资费费率标准请参见。此案例中计算出的该公司的每月消费情况如下：存储费用其占用存储空间为1TB，费用估算如下：0.000217元/小时*GB×（1TB×1024）GB×（1个月×30×24）小时=159.98976元请求费用除DELETE请求外每月有1500万次请求，费用估算如下：1500万次×0.01元/万次=15元流量费用其通过公网流出流量为100GB，费用估算如下：0.55×100GB=55元每月总计消费：15元+159.98976元+55元=229.98976元
假设该公司选择用OBS包年包月方式进行结算，则平均每个月的费用包括存储流量包费用和下行流量包费用，若用户使用OBS过程中，使用额度超出了存储包和下行流量包规格，则超出部分会根据按需计费方式结算。不同存储流量包中包含了默认免费的访问次数，超出的访问请求次数会根据按需计费方式结算。详细的服务资费费率标准请参见。假设该公司购买了6个月使用量，则平均每月费用估算如下：存储包费用：750元（1TB存储包6个月价格）÷6（月）=125元/月超出免费的访问请求次数费用：（1500-300）万次×0.01元/万次=12元流量包费用：270元（100GB外网流出流量包6个月价格）÷6（月）=45元/月总费用：182元/月假设该公司购买了12个月使用量，则平均每月费用估算如下：存储包费用：1350元（1TB存储包12个月价格）÷12（月）=112.5元/月超出免费的访问请求次数费用：（1500-300）万次×0.01元/万次=12元流量包费用：486元（100GB外网流出流量包12个月价格）÷12（月）=40.5元/月总费用：165元/月由此可见，购买资源包使用包年包月的方式将为您节省大量成本，购买资源包的时长越长优惠越多。
对象存储服务默认按照按需付费（使用量按小时计费），也支持以包年包月（资源包）的方式提前购买使用额度和时长，获取更多的优惠。用户可以根据实际需求变更资源的资费方式。对象存储类别可以分为：标准存储、低频访问存储、归档存储，从而满足客户业务对存储性能、成本的不同诉求。OBS标准存储拥有低访问时延和较高的吞吐量，因而适用于有大量热点文件（平均一个月多次）或小文件（&lt;1MB），且需要频繁访问数据的业务场景，例如：大数据、移动应用、热点视频、社交图片等场景。OBS低频访问存储适用于不频繁访问（平均一年少于12次）但在需要时也要求快速访问数据的业务场景，例如：文件同步/共享、企业备份等场景。与标准存储相比，低频访问存储有相同的数据持久性、吞吐量以及访问时延，且成本较低，但是可用性略低于标准存储。OBS归档存储适用于很少访问（平均一年访问一次）数据的业务场景，例如：数据归档、长期备份等场景。归档存储安全、持久且成本极低，可以用来替代磁带库。为了保持成本低廉，数据取回时间可能长达数分钟到数小时不等。您可以参考，选择计费方式，并设置其他条件，查询所需费用。OBS服务的基础计费项包括：存储容量、流量、请求次数。此外，归档存储还需为每次取回数据收取流量费用。
包年包月售卖模式只支持标准存储服务。您可以购买包年包月套餐，提前规划资源的使用额度和时长，具体计费模型如所示。
对象存储服务默认是按需计费的，低频访问存储和归档存储的桶只能选择按需计费。即按实际使用的时长收费，以小时为单位，按每小时整点结算，不设最低消费标准。具体结算时，共分为三个计费项，总费用为三者之和，如所示。低频访问存储，对象最短存储期限为30天，早于30天删除，需要补足未满30天的剩余天数的存储费用，超过30天不需要补。归档型存储，对象最短存储期限为90天，早于90天删除，需要补足未满90天的剩余天数的存储费用，超过90天不需要补。
如未及时还款，可能会导致账户被冻结或订单取消。账户不足100元时，包年包月也会停止服务。
登录OBS管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。在左侧导航栏中选择“续费管理”。单击待续费业务后的“续费”，进入“续费”页面。根据界面提示充值余额。说明：余额充值成功后，系统自动扣除欠费。
查看消费明细时，用户可查看详细的消费信息，包括消费金额、使用量、扣费详情等信息。
登录OBS管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。在左侧的导航栏中选择“费用中心&gt;消费明细”进入“消费明细”页面。选择消费类型，并设置查询条件，筛选出需要查看的订单。说明：“消费时间”支持以月为维度进行查询。单击记录后的“详情”进入“流水详情”页面，查看概要、费用详情等信息。
软件开发云中项目管理为按需计费，您也可以选择购买软件开发云套餐进行包年，请您根据实际情况选择不同的计费方式。项目管理的价格体系如所示。如何收费及实际价格详情请。
购买项目管理前，需要先注册华为云用户（如果华为云用户已注册，请忽略该步骤）操作如下：登录首页。单击页面右上方“注册”。
购买项目管理前，需要先开通项目管理；服务开通后，即开始按需计费。登录首页。单击页面右上方“管理控制台”进入华为云管理控制台登录页面。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;项目管理”，进入软件开发云管理控制台“项目管理”页面，如所示。注意：进入开通服务前，请先进行实名认证；如果您尚未实名认证，页面会提示前去认证。实名认证通过后，才能使用华为云账号开通服务（即购买资源）。项目管理单击“项目管理”页面上方的。进入“开通项目管理服务”页面。请根据实际需要设置“可用分区”与“计费类型”。单击。进入“开通详情”页面。请根据开通详情确认开通申请。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。进入项目管理服务请求下发页面，等待几秒后，成功开通，页面自动进入软件开发云控制台的“项目管理”页面。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的项目管理首页，可以开始使用服务。如果服务未开通，立即使用服务，则只能使用服务内的免费额度；超过该额度后，请根据提示立即开通服务。
暂不涉及。
本节为您介绍当服务即将过期或账户被冻结时，您如何续费。续费后，您可以继续使用对应服务。服务过期或账户被冻结后，提供15天的保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。单击首页右上方“管理控制台”，进入华为云管理控制台页面。进入软件开发云控制台页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账户总览输入充值金额后，根据页面提示完成充值续费。
目前，RDSforMySQL支持“包年/包月”和“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。目前，RDSforPostgreSQL仅支持“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。目前，RDSforMicrosoftSQLServer仅支持“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。只读副本用于增强集群的读能力，减轻主机负载。
只读副本用于增强集群的读能力，减轻主机负载。RDS集群创建成功后，可根据业务需要创建只读副本，但这将产生一定的费用。只读副本的CPU/内存和数据库端口可以重新配置，存储空间以及类型与主实例保持一致。租户可用余额不足100元，此时将不允许新增只读副本。一个集群中，最多可以增加5个只读副本。RDSforMicrosoftSQLServer暂不支持新增只读副本。
在“RDS实例管理”页面，选择指定的集群，在该集群对应的主机上选择“更多&gt;创建只读副本”，进入“服务选型”页面。在“服务选型”页面，填选只读副本名称、数据库端口、可用分区和性能规格，单击“立即创建”。RDS支持在同一个可用区内或者跨可用区部署数据库主实例和只读副本，只读副本的选择和主机可用分区对应情况：<ulid="ZH-CN_TOPIC_0029162919__zh-cn_topic_0029128286_ul45626247185535"><liid="ZH-CN_TOPIC_0029162919__zh-cn_topic_0029128286_li7983046185535">相同，主机和只读副本会部署在同一个可用分区（默认）。不同，主机和只读副本会部署在不同的可用分区，提高可靠性。在“规格确认”页面，进行信息确认。<ulid="ZH-CN_TOPIC_0029162919__zh-cn_topic_0029128286_zh-cn_topic_0023328277_ul38357864102621"><liid="ZH-CN_TOPIC_0029162919__zh-cn_topic_0029128286_zh-cn_topic_0023328277_li9676461102621">信息确认无误，勾选“我已经阅读并同意《华为关系型数据库服务协议》”，单击“提交订单”，下发新增只读副本的请求。如果需要重新选择，单击“上一步”，回到服务选型页面修改基本信息。只读副本创建成功后，用户可以在“RDS实例管理”页面，选择只读副本所对应的集群，在实例列表中，查看并管理该集群下的只读副本。
用户可以在基本信息中看到包周期订单状态，如果显示即将过期，为不影响业务，请及时续费。续费后便可继续使用RDS。
登录管理控制台。单击用户名下的“用户中心”。在“续费管理”页面，根据业务情况选择续费方式。在对应页面根据提示完成续费。说明：续费不能进行计费类型切换。
RDS（RelationalDatabaseService，关系型数据库服务）是一种基于云计算平台的即开即用、稳定可靠、弹性伸缩、便捷管理的在线关系型数据库服务。RDS提供专业的数据库备份、恢复及优化方案，使你能专注于应用开发和业务发展。
<emid="ZH-CN_TOPIC_0029162932__zh-cn_topic_0043898355_i53931425172036">db</em>的取值和数据库引擎有关：当数据库引擎为MySQL，<emid="ZH-CN_TOPIC_0029162932__zh-cn_topic_0043898355_i12279186172041">db</em>取值为mysql。例如：rds.mysql.s1.xlarge。当数据库引擎为PostgreSQL，<emid="ZH-CN_TOPIC_0029162932__zh-cn_topic_0043898355_i19294642172046">db</em>取值为pg。例如：rds.pg.s1.xlarge。当数据库引擎为MicrosoftSQLServer，<emid="ZH-CN_TOPIC_0029162932__zh-cn_topic_0043898355_i53762515172049">db</em>取值为mssql。例如：rds.mssql.s1.xlarge。如果开启了HA，数据库实例类名称会自动增加后缀“.ha”，例如：rds.<emid="ZH-CN_TOPIC_0029162932__zh-cn_topic_0043898355_i20294559171537">db</em>.s1.xlarge.ha。RDSforMicrosoftSQLServer不支持1vCPU和2vCPU规格。
RDS提供按需付费和包年/包月两种计费方式，你可以根据实际情况选择计费方式。PostgreSQL和MicrosoftSQLServer数据库引擎只支持按需付费模式，现处于定点公测阶段，各种实例规格费用均为零。
这种购买方式相对比较优惠，对于长期使用者，推荐该方式。用户可选择1个月、2个月、3个月、4个月、5个月、6个月、7个月、8个月、9个月、1年、2年和3年。计费详情，请见：。
这种购买方式比较灵活，可以即开即停，按实际使用时长计费。每小时计费总费用=弹性云服务器费用（CPU＋内存）＋数据盘费用+备份资源费用（非必须）。RDS提供了部分免费存储空间，用于存放您的备份数据，其总容量约为您购买容量的50%。比如您购买的实例为100GB，则会得到50GB免费存储空间。
目前，RDSforMySQL支持“包年/包月”和“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。租户可用余额不足100元，此时将不允许进行RDS申请。
选择“数据库&gt;关系型数据库”。进入关系型数据库信息页面。在“总览”页面，单击“购买数据库实例”。在“服务选型”页面，选择付费方式，填选网络、实例规格、数据库配置和备份策略后，单击“立即购买”付费方式：包年/包月：详情请参见，在“购买量”处选择“购买时长”，系统会自动计算对应的配置费用。若选择该模式，跳过，执行。按需付费：详情请参见。若选择该模式，继续执行。说明：用户所申请RDS的性能，取决于申请RDS时所选择的配置。可供用户选择的硬件配置项为性能规格、磁盘类型以及磁盘容量。其中，RDS配置中存储空间I/O的高低决定该实例的读写速度。磁盘容量以后可进行扩容。在“规格详情”页面，进行规格确认。<ulid="ZH-CN_TOPIC_0033326084__ul16222036181325"><liid="ZH-CN_TOPIC_0033326084__li11780600181325">如果需要重新选择，单击“上一步”，回到上个页面修改RDS实例信息。如果没有问题，勾选“我已经阅读并同意《华为关系型数据库服务协议》”，单击“提交申请”，完成RDS实例的申请。在“订单详情”页面，进行订单确认。<ulid="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_zh-cn_topic_0023328336_ul59357586161135"><liid="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_li51523360153359">如果需要重新选择，单击“上一步”，回到上个页面修改RDS实例信息。如果没有问题，勾选“我已经阅读并同意《华为关系型数据库服务协议》”，单击“提交订单”，进入“付款”页面。如果暂不确定，可单击“确认订单，暂不付款”，稍后可在“用户中心&gt;我的订单”中支付或取消订单。选择付费方式，单击“确认付款”，在弹出框中单击“获取验证码”，获取并输入收到的验证码，单击“确认付款”，提交订单。说明：本操作仅适用于包年/包月计费方式。可选择的支付方式有：余额支付、平台支付、网上银行支付和转账汇款。RDS实例创建成功后，用户可以在“RDS实例管理”页面，查看并管理自己的实例。<oltype="a"id="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_ol63111971111114"><liid="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_li26400592111115">创建RDS实例过程中，状态显示为“创建中”，此过程约15分钟。在集群列表的右上角，单击刷新列表，可查看到创建完成的RDS实例状态显示为“服务中”。付款成功后，才会创建。如果实例状态为“故障”，则是因为资源开通失败导致。您可以联系客服人员帮助取消订单，然后到“用户中心&gt;我的订单”中执行退订操作。用户可选择对应实例，单击“管理”，在“基本信息”页签，查看如下有关订单信息：<ulid="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_ul33147578123657"><liid="ZH-CN_TOPIC_0033326084__zh-cn_topic_0029128256_li26785267123646">“订单”，单击订单号，去用户中心查看订单详情。“下单时间”。“到期时间”。“订单状态”。
CPU/内存规格可根据业务需要进行变更。租户可用余额不足100元，此时将不允许变更规格。包周期实例不支持CPU和内存规格变更。当集群下实例进行CPU/内存规格变更时，该实例不可被删除。
在“RDS实例管理”页面，选择相应的RDS集群，在该集群对应的主机或只读副本上选择“更多&gt;规格变更”。说明：RDSforMicrosoftSQLServer暂无只读副本。在“规格变更”页面的CPU/内存区域，在“修改到”下拉列表中选择所需规格，单击“立即申请”。<ulid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_ul4139520113645"><liid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_li52085130113645">单击“确定”，不创建快照，进入“规格确认”页面。<ulid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_ul61893948113718"><liid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_li60338274113647">用户可扩大或缩小规格。修改CPU和内存后，将会重启数据库服务。单击“取消”，为提高可靠性，建议您到“快照管理”页面创建手动快照。在“规格确认”页面，进行规格确认。<ulid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_ul3938423018435"><liid="ZH-CN_TOPIC_0033326556__zh-cn_topic_0029128264_li1891375218435">如果确认无误，勾选“我已经阅读并同意《华为关系型数据库服务协议》”，单击“提交申请”，提交变更。如需重新选择，单击“上一步”，回到“服务选型”页面，修改规格。查看变更结果。在实例管理页面，可以看到实例状态为“修改中”。稍后在实例列表中，展开实例信息查看实例规格，检查修改是否成功。此过程需要5~15分钟。注意：RDSforMicrosoftSQLServer规格变更后，数据库参数maxservermemory不能自动调整，需要手动修改。maxservermemory值建议设置为内存大小-520MB，例如：您的内存为1GB，那么，该值设置为1GB-520MB，即504MB。
包年/包月按照订单的到期时间来进行结算。按需<ulid="ZH-CN_TOPIC_0034237065__ul58459380173521"><liid="ZH-CN_TOPIC_0034237065__li53104478173521">结算周期，以小时为单位整点来结算。结算范围，RDS实例从“开通”开启计费到“删除”结束计费。结算时间，以系统的自动结算时间为准。PostgreSQL和MicrosoftSQLServer数据库引擎现阶段处于定点公测，各种实例规格费用均为零。
扣费后，用户操作如下：账户余额大于100元，用户所有操作不受限制。账户余额小于或等于100元，且未欠费，该用户不能进行新增资源相关操作。账户余额小于或等于0元，则系统会对该用户下实例进行冻结，并提醒用户进行充值。该用户不允许进行新增资源相关操作，实例冻结保留期为15天，如果15天还未充值，该实例会被清理。只有当用户在用户中心充值成功，欠款核销后，冻结保留期内的实例才会解冻，解冻后相关业务恢复正常。新增资源的相关操作包括：创建实例、磁盘扩容、CPU/内存变更、新增只读副本、设置或修改备份策略和创建或复制快照。“包年/包月”模式的集群，在未到期之前删除，所有资源释放，RDS不会自动触发退款流程，您需要联系客服人员，按照退订流程申请退款。“包年/包月”模式的集群，当账户余额小于或等于0元，如果您未进行过扩容、新增只读副本，则该集群在未到期之前可以继续使用。
数据库磁盘容量不够用时可申请扩容。随着业务数据的增加，原来申请的数据库容量可能会不够用。这时，您需要为RDS集群或单实例进行扩容。RDSforMicrosoftSQLServer暂不支持扩容磁盘。只有当集群下所有实例的磁盘容量相同时，才能进行集群扩容。每个实例最多只能扩容四次。针对主机扩容时，会同时对其备机进行扩容。备机容量与主机保持一致时，允许对主机进行扩容；备机故障时，不允许对主机进行扩容。扩容过程中，该实例不可重启和删除。磁盘容量变更只允许扩容，不能缩容。租户可用余额不足100元，此时将不允许扩容。
在“RDS实例管理”页面，选择相应的RDS集群，单击进入“服务选型”页面。在“服务选型”页面选择“扩容到”的空间大小，单击“立即申请”。用户每次扩容最小容量为120GB，所选容量大小必须为10的整数倍，最大磁盘容量为2000GB，这将产生更多服务费用。在“规格确认”页面，进行订单确认。<ulid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_zh-cn_topic_0023328283_ul47954158162931"><liid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_li26523207131216">如果确认无误，单击“提交申请”，提交扩容。如需重新选择，单击“上一步”，回到“服务选型”页面，修改新增大小。查看扩容结果。在实例管理页面，稍后在实例列表中，展开实例信息查看磁盘大小，检查扩容是否成功。此过程需要3~5分钟。
在“RDS实例管理”页面，选择相应的RDS集群，在该集群对应的主机或只读副本上选择“更多&gt;规格变更”。在“规格变更”页面，单击“磁盘存储空间”页签，选择“扩容到”的空间大小，单击“立即申请”。用户每次扩容最小容量为120GB，所选容量大小必须为10的整数倍，最大磁盘容量为2000GB，这将产生更多服务费用。在“规格确认”页面，进行订单确认。<ulid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_zh-cn_topic_0029128264_zh-cn_topic_0023328283_ul47954158162931"><liid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_zh-cn_topic_0029128264_li26523207131216">如果确认无误，勾选“我已经阅读并同意《华为关系型数据库服务协议》”，单击“提交申请”，提交扩容。如需重新选择，单击“上一步”，回到“服务选型”页面，修改新增大小。说明：<ulid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_zh-cn_topic_0029128264_ul1021747171657"><liid="ZH-CN_TOPIC_0036331932__zh-cn_topic_0035750846_zh-cn_topic_0029128264_li3487577317174">只读副本磁盘扩容与主实例的磁盘扩容互不影响。只读副本磁盘容量不能大于主实例磁盘容量。查看扩容结果。在实例管理页面，稍后在实例列表中，展开实例信息查看磁盘大小，检查扩容是否成功。此过程需要3~5分钟。
目前，RDSforMicrosoftSQLServer仅支持“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。该数据库引擎现处于公测阶段，您可在“总览”页面进行公测申请。
选择“数据库&gt;关系型数据库”。进入关系型数据库信息页面。在“总览”页面，单击“购买数据库实例”。在“服务选型”页面，填选网络、实例规格、数据库配置和备份策略后，单击“立即购买”。说明：用户所申请RDS的性能，取决于申请RDS时所选择的配置。可供用户选择的硬件配置项为性能规格、磁盘类型以及磁盘容量。其中，RDS配置中存储空间I/O的高低决定该实例的读写速度。在“规格详情”页面，进行规格确认。<ulid="ZH-CN_TOPIC_0054166747__zh-cn_topic_0053089697_zh-cn_topic_0029128256_zh-cn_topic_0023328336_ul59357586161135"><liid="ZH-CN_TOPIC_0054166747__zh-cn_topic_0053089697_li19088491154947">如果需要重新选择，单击“上一步”，回到上个页面修改RDS实例信息。如果没有问题，勾选“我已经阅读并同意《公测免费试用服务协议》”，单击“提交订单”，完成RDS实例的申请。RDS实例创建成功后，用户可以在“RDS实例管理”页面，查看并管理自己的实例。<oltype="a"id="ZH-CN_TOPIC_0054166747__zh-cn_topic_0029128256_ol63111971111114"><liid="ZH-CN_TOPIC_0054166747__zh-cn_topic_0029128256_li26400592111115">创建RDS实例过程中，状态显示为“创建中”，此过程约20分钟。在集群列表的右上角，单击刷新列表，可查看到创建完成的RDS实例状态显示为“服务中”。
目前，RDSforPostgreSQL仅支持“按需付费”购买，您可以根据业务需要定制相应计算能力和存储空间的RDS。RDS允许每个租户在当前项目下最多可创建20个RDS实例。该数据库引擎现处于公测阶段，您可在“总览”页面进行公测申请。
选择“数据库&gt;关系型数据库”。进入关系型数据库信息页面。在“总览”页面，单击“购买数据库实例”。在“服务选型”页面，选择“按需付费”，填选网络、实例规格、数据库配置和备份策略，单击“立即购买”。说明：用户所申请RDS的性能，取决于申请RDS时所选择的配置。可供用户选择的硬件配置项为性能规格、磁盘类型以及磁盘容量。其中，RDS配置中存储空间I/O的高低决定该实例的读写速度。磁盘容量以后可进行扩容。在“规格详情”页面，进行规格确认。<ulid="ZH-CN_TOPIC_0057122070__zh-cn_topic_0046585384_ul30666695153045"><liid="ZH-CN_TOPIC_0057122070__zh-cn_topic_0046585384_li7564807153045">如果需要重新选择，单击“上一步”，回到上个页面修改RDS实例信息。如果没有问题，勾选“我已经阅读并同意《公测免费试用服务协议》”，单击“提交申请”，完成RDS实例的申请。RDS实例创建成功后，用户可以在“RDS实例管理”页面，查看并管理自己的实例。<oltype="a"id="ZH-CN_TOPIC_0057122070__zh-cn_topic_0046585384_ol46428207152648"><liid="ZH-CN_TOPIC_0057122070__zh-cn_topic_0046585384_li15200686152648">创建RDS实例过程中，状态显示为“创建中”，此过程约15分钟。在集群列表的右上角，单击刷新列表，可查看到创建完成的RDS实例状态显示为“服务中”。
服务过期或账户被冻结后，提供15天保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。进入控制台总览页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账号总览输入充值金额后，根据页面提示完成充值续费。
登录首页。单击页面右上方“注册”。请先进行实名认证；如果您尚未实名认证，页面会提示前去认证。实名认证通过后，才能使用华为云账号购买套餐。先切换云服务区为“中国东北区1”。
登录首页。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;发布管理”，进入软件开发云管理控制台“发布管理”页面，如所示。发布管理单击“发布管理”页面上方的。单击。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的发布管理首页，可以开始使用服务。说明：
服务过期或账户被冻结后，提供15天保留期，保留期内资源不可用，但并未删除。保留期后，如果您没有续费，资源将自动删除。
登录软件开发云管理控制台。进入控制台总览页面，单击用户名称，选择“用户中心”，如所示。用户中心单击“用户中心”。进入用户中心“总览”页面，单击“充值”，进入充值页面，如所示。账号总览输入充值金额后，根据页面提示完成充值续费。
登录首页。单击页面右上方“注册”。请先进行实名认证；如果您尚未实名认证，页面会提示前去认证。实名认证通过后，才能使用华为云账号购买套餐。先切换云服务区为“中国东北区1”。
登录首页。输入注册用户信息，登录华为云管理控制台。选择“软件开发云&gt;测试管理”，进入软件开发云管理控制台“测试管理”页面，如所示。测试管理单击“测试管理”页面上方的。单击。根据提示勾选“我已阅读并同意《DevCloud服务协议》”，单击。选择“开通记录”页签，“开通记录”中显示已开通的记录详情。开通完成后，单击页面上方，进入软件开发云的测试管理首页，可以开始使用服务。说明：
云硬盘备份（VolumeBackupService）提供对云硬盘的基于快照技术的数据保护服务，简称VBS。VBS使您的数据更加安全可靠。例如，当您的云硬盘出现故障或云硬盘中的数据发生逻辑错误时（如误删数据、遭遇黑客攻击或病毒危害等），可快速恢复数据。VBS支持全量备份和增量备份。第一次做备份时，系统默认做全量备份，非第一次的备份，系统默认做增量备份。无论是全量还是增量都可以方便的将云硬盘恢复至备份时刻的状态。手工备份或自动备份，均遵循该原则。VBS使用简单，您可以一键式针对服务器上的云硬盘进行在线备份和恢复。其中，服务器指弹性云服务器或裸金属服务器。受益于VBS的永久增量备份技术，最终备份产生的容量通常小于租户所备份云硬盘的容量。单个云硬盘备份的存储容量为该云硬盘所有备份的容量总和。例如租户定义了自动备份策略，每天00:00进行一次备份，第一天00:00首次备份为全量备份，该租户在上午8:00又进行了一次手工备份，该次备份为增量备份。备份的存储容量可按照：全量备份容量+增量备份容量×（备份保留份数-1）估算。其中，全量备份针对租户云硬盘的已有数据备份，例如一块100GB的云硬盘，实际使用容量为40GB，则全量备份容量为40GB；增量备份针对上次备份后变化的数据备份，例如首次全量备份后，租户又写入或修改了5GB数据，则第二次增量备份容量为5GB。单个云硬盘的备份容量分阶梯收费。当租户删除该备份后，停止计费。处于“错误”状态的备份不会产生计费。
VBS提供按需和包年包月两种计费方式。详细的服务资费费率标准请参见中“云硬盘备份服务”的内容。
本节为您介绍当服务即将过期时，您如何续费。续费后，您可以继续使用云硬盘备份服务。
登录管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。在左侧导航栏中选择“续费管理”。进入“续费管理”页面，可以查看到当前的欠费业务和欠费金额。单击“立即还款”，进入“余额”页面。根据页面提示充值余额。说明：余额充值成功后，系统自动扣除欠费。
您可以根据实际业务需求按照按需方式或者包年包月方式购买云硬盘备份服务。
按需计费即按备份实际使用的存储容量和时长收费，不设最低消费标准。备份、恢复功能当前不额外收费。存储容量以GB为单位，对单个云硬盘的备份容量分阶梯收费，使用容量越大，平均每GB的收费越便宜。时长以小时为单位，整点结算（以北京时间为准）。结算时，备份存在时长不足1小时的，按1小时计费。
费用=每小时每GB费率×存储容量×使用小时数
某租户对一个云硬盘进行了多次备份，当前备份数据总容量为3TB（3072GB）。假设00:00~01:00期间租户未进行备份（自动备份和手工备份），这3TB备份数据在00:00~01:00间产生的费用为：[0.000221元/GB/小时×1024GB+0.000217元/GB/小时×2048GB]×1小时=0.67元如果租户在01:00~02:00进行了备份（自动备份或手工备份），且相比上次备份产生了500GB的增量数据，则01:00~02:00间产生的费用为：[0.000221元/GB/小时×1024GB+0.000217元/GB/小时×2548GB]×1小时=0.78元该云硬盘的备份在1天内产生的费用将按照如上规则累计1天24小时的所有费用。
云硬盘备份服务提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长。备份、恢复功能当前不额外收费。资源包规格存储容量以GB和TB为单位，需要结合时长合理规划。购买时长购买时长以月和年为单位，需要结合资源包存储容量合理规划。
费用优先按照包年包月方式结算。如果使用额度超出了资源包存储容量规格，则超出部分会根据按需计费方式结算。
某租户购买12个月10TB的资源包，总费用为13860元。如果按需购买，产生的费用如下：[0.000221元/GB/小时×1024GB+0.000217元/GB/小时×9216GB]×（12×30×24）小时=19234（元）由此可见，购买资源包使用包年包月的方式将为您节省大量成本。
云硬盘备份服务默认是按需计费，即按实际使用的时长收费，以小时为单位，按每小时整点结算，不设最低消费标准。用户注册云服务帐号后，仅需进入充值页面，充值后便可正常使用VBS。
注册云服务帐号。<oltype="a"id="ZH-CN_TOPIC_0064361617__ol1835080210522"><liid="ZH-CN_TOPIC_0064361617__li2744777610522">打开浏览器，在地址栏中输入并按“Enter”。在页面右上角单击“注册”。在注册页面按需填写注册信息并单击“提交注册信息”。根据界面提示进行信息配置。充值。<oltype="a"id="ZH-CN_TOPIC_0064361617__ol29781488105545"><liid="ZH-CN_TOPIC_0064361617__li39705146105549">登录VBSConsole。单击“充值”，系统自动跳转到充值窗口。根据界面提示信息，对帐户进行充值。充值成功后，关闭充值窗口，返回管理控制台首页。单击“云硬盘备份”，开通并进入VBSConsole。
云硬盘备份服务同时提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长。
开通VBS服务后，在VBSConsole主页面单击“购买存储包”，进入存储包购买页。根据界面提示进行信息配置。您可以单击“”查看计费标准。单击“立即购买”。确认订单无误后，并单击“提交订单”。若发现订单有误，也可单击“上一步”修改订单后再继续购买。根据界面提示进行订单支付。说明：资源包购买注意事项：不支持续订、退订。资源包到期后，不会影响您在VBS上的使用和数据安全。您只要保证云服务账户上有足够的余额，系统会自动以按需付费的方式进行结算。
计费模式：按需，包年包月计费因子：按照带宽收费：带宽大小（MB）+使用时长，带宽采取梯形定价，带宽越大收费越高
计费模式：按需计费因子：使用时长
本节为您介绍当带宽或VPN即将过期时，您如何续费。续费后，您可以继续使用对应的服务。
登录管理控制台。单击用户名下的“用户中心”，如所示。用户中心根据计费类型，选择续费方式：<ulid="ZH-CN_TOPIC_0016133005__zh-cn_topic_0013859512_ul5418071916509"><liid="ZH-CN_TOPIC_0016133005__zh-cn_topic_0013859512_li3362968416509">包年/包月：选择“我的订单&gt;待续订”。按需：选择“欠费业务”。在对应页面根据页面提示完成续费。
服务本身不收取费用。但用户在使用带宽或VPN时需要按照收费标准购买，购买时可以选择“包年包月”和“按需付费”两种形式。
下面为您介绍如何申请华为虚拟私有云。登录华为云网站：。单击页面右上方“注册”。进入注册页面，根据提示信息完成注册，详细操作请参见。返回华为云网站首页，单击页面右上方“管理控制台”。进入华为云管理控制台登录页面。输入注册用户信息，登录华为云管理控制台。单击用户名下的“用户中心”，在用户中心完成充值。选择地域，例如选择“中国华北”。在系统首页，单击“网络&gt;虚拟私有云”。在“总览”界面，单击“申请虚拟私有云”。在“申请虚拟私有云”页面，根据界面提示配置参数。阅读并勾选服务协议后，单击“立即申请”。
申请VPN前需要先通过提交工单开通VPN服务。登录管理控制台。在系统首页，单击“网络&gt;VPN”。在“VPN”界面，单击“立即开通”。在“用户中心”提交工单，如所示。提交工单<ulid="ZH-CN_TOPIC_0022044924__zh-cn_topic_0013748707_ul1720408192234"><liid="ZH-CN_TOPIC_0022044924__zh-cn_topic_0013748707_li15483672192234">云服务区选择您资源所在的分区。业务类型选择“网络功能开通”。问题描述-申请原因-申请开通：共享带宽/VPN等。其他选根据界面提示填写。
注册并登录管理控制台。在系统首页，单击“网络&gt;VPN”。在“VPN”界面，单击“申请VPN”。根据界面提示配置参数，并单击“确认”。说明：IKE策略指定了IPSec隧道在协商阶段的加密和认证算法，IPSec策略指定了IPSec在数据传输阶段所使用的协议，加密以及认证算法；这些参数在VPC上的VPN和您数据中心的VPN中需要进行相同的配置，否则会导致VPN无法建立连接。阅读并勾选服务协议后，单击“提交订单”。创建成功后云为该IPSecVPN分配一个公网出口IP地址。该地址为VPN页面中，已创建的VPN的本段网关地址，如所示。在您自己数据中心配置对端隧道时，远端网关需要配置为该IP地址。网关出口IP地址因为隧道的对称性，还需要在您自己数据中心的路由器或者防火墙上进行IPSecVPN隧道配置。<ulid="ZH-CN_TOPIC_0022044924__zh-cn_topic_0013748707_ul3755369920388"><liid="ZH-CN_TOPIC_0022044924__zh-cn_topic_0013748707_li1366698220388">VPN配置样例请参考《虚拟私有云用户指南》的“常见问题&gt;如何配置VPN对端设备？（HUAWEIUSG6000配置示例）”。VPN连接支持的协议请参考《虚拟私有云用户指南》的“常见问题&gt;VPN参考标准和协议有哪些？”。VPN设备支持列表请参考《虚拟私有云用户指南》的“常见问题&gt;对端VPN设备支持列表”。
CloudIDE是面向软件开发者的云端开发环境，支持在云端创建工作空间，在线编写代码、智能提示、代码调试、代码检视、代码提交、推送代码缺陷、代码片段搜索等功能。无需安装WebIDE，可从任何本地或远程设备访问。轻量、快速、美观、可实现随时随地编写代码，不受本地环境限制。CloudIDE具有以下特性：基于容器技术的云端工作空间，支持不同的技术栈。支持100多种编程语言的语法加亮，以及主流语言的代码智能提示。支持主题切换，对于不同的主题颜色会自动匹配合适的代码着色风格。支持多视图，流行的视图布局，边栏支持收缩。支持Git的配置库操作。支持DevCloudCodeCheck缺陷推送。支持基于语义理解的智能化代码片段搜索。
文档修订记录累积了每次文档更新的说明。最新版本的文档包含以前所有文档版本的更新内容。
CloudIDE功能列表如所示。
应用：服务化Web应用。场景特点：开发者受限于本地环境，无开发环境无法开发。通过Web直接访问CloudIDE，实现随时随地开发。适用场景：适用于基于容器的服务化Web应用开发，保障快速搭建一致的开发环境，随时在线编写代码。
。
一个平台支持多种语言检查，持续增加支持广度。提供华为典型检查规则集，支撑Web检查、安全检查、架构检查、编码问题检查等场景。支持用户自定义检查规则集。针对代码缺陷列表提供多维度筛选，支撑用户分级处理。针对代码缺陷，提供影响说明、修改示例和建议。单击代码缺陷，精确定位代码行，立即查看代码。单击一键跳转到代码库，支持在线编辑代码。支持批量处理代码缺陷，快速高效。质量星级，专业代码质量评分。问题状态，指导项目每日改进闭环。质量趋势，分析历史问题根因，持续改进。
应用：用Web安全规则集进行代码检视。场景特点：Web服务面向Internet互联网，容易遭受DDos攻击、冒名访问、信息泄露等风险。适用场景：互联网服务交付安全等级验收。
应用：在交付过程中实时根据代码复杂度、重复率，质量得分控制风险。场景特点：项目经理的共识“从前端保证质量，把质量做在日常交付”，但经常没有有效的工具平台，目前大部分的质量工作还是依赖后端测试。适用场景：项目经理迭代交付质量控制。
支持Java、C、C++、PHP、Android、Groovy、Python、EMBEDDED等主流编译构建语言。支持Maven、Ant、Grails等主流构建标准，配置使用简单。多种混合语言及构建标准并行执行。编译构建软件包下载。编译构建历史记录。编译构建任务分组管理。编译构建任务统计。编译构建定时执行。编译构建结果动态和邮件通知。编译构建日志和分析报告。安全可靠，资源隔离，网络隔离和安全组规则保护，远离病毒，木马骚扰，防DDoS攻击。服务器统一维护，大幅降低成本。支持灵活计费模式按需购买，最大限度降低一次投入成本。支持根据用户业务需求进行弹性伸缩，用户可以根据业务需求自行定义弹性配置和策略，满足业务需求的同时，减少资源投入。
应用：互联网Web应用。场景特点：互联网企业业务种类多，业务跨平台，多语言编程成为常态。适用场景：适用于Web应用前台、后端应用程序的编译构建，支持Java、AngularJS、NodeJS等语言，并支持Maven、Ant等主流构建标准。
应用：移动终端APP编译构建。场景特点：移动终端APP业务变化快，交付要求短平快。适用场景：利用云端并行编译技术，快速编译构建，缩短交付周期。支持Android系列移动终端APP的编译构建。
应用：传统应用软件开发。场景特点：传统应用软件为本地应用，业务复杂，软件规模大，编译构建耗时长。适用场景：按需分配编译构建资源，提升编译构建速度。支持Linux下C/C++应用程序的编译构建，及Windows下C/C++/C#应用程序的编译构建。
在线代码阅读、修改、提交，随时随地开发，不受地域限制。在线分支管理，包含分支新建、切换、合并，实现多分支并行开发，效率高。高可用的代码托管服务，包括代码克隆/下载/提交/推送/比较/合并/分支等。支持多分支并行开发、效率高。分支保护，可防止分支被其他人提交或误删。统计服务：关键数据在仓库首页展示、代码仓库提交信息统计、代码仓库贡献者统计。安全可靠，资源隔离，网络隔离和安全组规则保护，远离病毒，木马骚扰，防DDoS攻击。IP白名单地域控制和支持Https传输，拦截不合法的代码下载，确保数据传输安全性。细粒度的权限管控，提供企业级的权限保护。服务器统一维护，大幅降低成本。支持重置密码，解决用户忘记密码之忧。支持根据用户业务需求进行弹性伸缩，用户可以根据业务需求自行定义弹性配置和策略，满足业务需求的同时，减少资源投入。研发数据加密传输和存储，数据云端存储，集中灾备，确保7×24小时高可靠性。支持灵活计费模式根据需要购买，最大限度降低一次投入成本。
应用：配置管理服务多分支管理、合并请求功能。场景特点：用户群体对开发工作的推进效率，敏捷度要求更高，需要高效的协作管理方式和更低开发成本。面临异地开发协同效率低、代码合并冲突频繁的难题。适用场景：面向中小企业、孵化中心，云端配置管理服务，实现协同开发。多分支管理功能和合并请求功能，彻底解决代码合并冲突的难题。
应用：高校教师与学生，学习与授课场景特点：目前缺少功能完备的研发工具链，搭建研发工具环境耗费大量时间，环境维护耗费精力，现有的研发工具上手慢，学习成本高，不利于教学。适用场景：配置管理服务提供完整的代码托管服务，以及丰富的代码仓库模板，使学生可以迅速上手。
一键式创建新部署任务，简单方便。预定义主流编程语言部署模板和示例程序，包括Tomcat、Java、Ruby、Python、PHP、NodeJS和Go。一个部署任务同时部署到多台主机和主机组，部署日志可以分主机查看。支持自定义部署模板，可以由编译构建归档自定义部署模板到发布仓库，也可以手工上传自定义模板。部署任务支持自定义环境变量和动态执行时参数配置。支持无缝集成流水线，支持流水线执行参数。
应用：用户需要开发简单Web应用或者微服务，并使用软件开发云编译构建和部署。适用场景：适用于Web应用程序和微服务的部署，支持Tomcat、Java、Python、NodeJS、Go、PHP、Ruby语言。
应用：大型应用软件网站有很多的组件或微服务组合协调，需要软件开发云进行部署。适用场景：支持Linux下多服务、多组件、多层次的大型应用，用户需要自定义部署模板，定制适合自己应用的部署脚本和部署参数，并应用流水线编排各个组件的统一部署，实现全系统的自动化部署。
成本低，提供丰富的Android真机，每日随机多款免费。高效率，自动完成深度遍历、性能监控、特性分析等测试，并生成详细报告。机型新，提供年度新款流行机型，并不断增加新款。机型种类多，提供全面的华为机型。强大的问题检测能力，深度优化的遍历算法，能快速定位修复问题。
应用：适配多机型。场景特点：Android手机碎片化，硬件配置和定制系统差异大，开发测试覆盖难度大。适用场景：选择需要适配的机型覆盖主流用户，提交全自动化的真机兼容性测试，发现产品兼容性问题。
应用：兼容性验收测试。场景特点：应用适配机型需求多，兼容性验收测试缺少测试机型，手工测试投入大。适用场景：选择需要适配的机型，自动化输出兼容性检测报告。
应用：第三方产品兼容性测试。场景特点：外包应用开发项目难以定义机型适配需求边界。适用场景：发包方和接包方双方使用软件开发云移动应用测试作为共同的第三方测试服务，选择需要适配的机型和达标的兼容性准出条件。
对象存储服务具有如下优势：数据稳定，业务可靠：OBS支撑华为手机云相册，数亿用户访问，稳定可靠。通过AZ内设备和数据多冗余、AZ之间数据容灾，保障数据持久性高达99.999999999%，业务连续性高达99.99%，远高于传统架构。多重防护，授权管理：OBS通过可信云认证，让数据存储安全放心。并支持多版本、服务端加密、防盗链、VPC网络隔离、访问日志审计以及细粒度的权限控制，保障数据安全可信。智能高效，随需扩展：OBS通过智能调度和响应，优化数据访问路径，并结合事件通知、传输加速、大数据垂直优化，为用户提供大并发、大带宽、稳定时延的数据访问体验，为业务保驾护航。简单易用，便于管理：OBS支持标准RESTAPI、多版本SDK和数据迁移工具，让业务快速上云。无需事先规划存储容量，存储资源可线性无限扩展，不用担心存储资源扩容、减容问题。数据分层，按需使用：提供按量计费和包年包月两种支付方式，支持标准、低频访问、归档数据独立计量计费，降低存储成本。
除直接使用对象存储服务OBS提供的超大存储空间外，如果您同时购买了云服务中的其他产品，您还可充分利用OBS提供的存储资源，服务于您购买的其他产品。OBS支持作为以下服务的存储资源池或快照备份存储：数据快递服务（DataExpressService,DES）关系型数据库（RelationalDatabaseService，RDS）镜像服务（ImageManagementService，IMS）云审计服务(CloudTraceService，CTS）OBS依赖以下服务完成对象的服务端加密：密钥管理服务（KeyManagementService,KMS）OBS依赖以下服务完成用户的身份鉴权和特定用户的权限设置：统一身份认证服务(IdentityandAccessManagement,IAM)OBS依赖以下服务完成发送使用OBS的消息通知给用户：消息通知服务(SimpleMessageNotification,SMN)可使用以下服务对存储在OBS中的数据进行分析：MapReduce服务(MapReduceService，MRS）OBS为以下服务准备机器学习的数据源：机器学习服务(MachineLearningService，MLS）
（OBS，ObjectStorageService）是一个基于对象的海量存储服务，为客户提供海量、安全、高可靠、低成本的数据存储能力，包括：创建、修改、删除桶，上传、下载、删除对象等。OBS为用户提供了超大存储容量的能力，适合存放任意类型的文件，适合普通用户、网站、企业和开发者使用。由于OBS是一项面向Internet访问的服务，提供了基于HTTP/HTTPS协议的Web服务接口，用户可以随时随地在任意可以连接至Internet的电脑上，通过OBS管理控制台或客户端访问和管理存储在OBS中的数据。此外，OBS支持JAVA、Python、.Net、iOS、C++、Android、Ruby、PHP等语言的SDK、以及兼容AmazonS3原生接口的RESTAPI接口，可使用户方便管理自己存储在OBS上的数据，以及开发多种类型的上层业务应用。云服务实现了在多地域部署基础设施，具备高度的可扩展性和可靠性，用户可根据自身需要指定地域使用OBS服务，由此获得更快的访问速度和实惠的服务价格。
本节介绍使用OBS过程中所需要了解的几个关键概念，包括对象、桶、AK、SK、区域等。
对象（Object）是OBS中数据存储的基本单位，一个对象实际是一个文件的数据与其相关属性信息（元数据）的集合体。用户上传至OBS的数据都以对象的形式保存在OBS的桶中。Key：键值，即对象的名称，为经过UTF-8编码的长度大于0且不超过1024的字符序列。一个桶里的每个对象必须拥有唯一的对象键值。Metadata：元数据，即对象的描述信息，包括系统元数据和用户元数据，这些元数据以键值对（Key-Value）的形式被上传到OBS中。<ulid="zh-cn_topic_0045829081__ul37780617"><liid="zh-cn_topic_0045829081__li4481233">系统元数据由OBS自动产生，在处理对象数据时使用，包括Date，Content-length，Last-modify，Content-MD5等。用户元数据由用户在上传对象时指定，是用户自定义的对象描述信息。Data：数据，即对象的数据内容。通常，我们将对象等同于文件来进行管理，但是由于OBS是一种对象存储服务，并没有文件系统中的文件和文件夹概念。为了使用户更方便进行管理数据，OBS提供了一种方式模拟文件夹。通过在对象的名称中增加“/”，例如“test/123.jpg”。此时，“test”就被模拟成了一个文件夹，“123.jpg”则模拟成“test”文件夹下的文件名了，而实际上，对象名称（Key）仍然是“test/123.jpg”。在OBS管理控制台和客户端中，用户均可直接使用文件夹的功能，符合了文件系统下的操作习惯。
桶（Bucket）是OBS中存储对象的容器。对象存储提供了基于桶和对象的扁平化存储方式，桶中的所有对象都处于同一逻辑层级，去除了文件系统中的多层级树形目录结构。对象存储服务设置有三类存储类别，分别为：标准存储、低频访问存储、归档存储，从而满足客户业务对存储性能、成本的不同诉求。创建桶可以指定桶的存储类别。OBS中的每个对象与其所属桶的存储类别相同。详情请参见。在OBS中，桶名必须是全局唯一的且不能修改，即用户创建的桶不能与自己已创建的其他桶名称相同，也不能与其他用户创建的桶名称相同。每个桶在创建时都会生成默认的桶ACL（AccessControlList），桶ACL列表的每项包含了对被授权用户授予什么样的权限，如读权限、写权限等。用户只有对桶有相应的权限，才可以对桶进行操作，如创建、删除、显示、设置桶ACL等。一个用户最多可创建100个桶，但每个桶中存放的对象的数量和大小总和没有限制，用户不需要考虑数据的可扩展性。由于OBS是基于REST风格HTTP和HTTPS协议的服务，您可以通过URL（UniformResourceLocator）来定位资源。OBS中桶和对象的关系如所示：
OBS向您提供的帐户包括了AK（接入键标识，AccessKeyID）和SK（安全接入键，SecretAccessKey），用于鉴别身份。您通过客户端向OBS发送请求时，客户端发送的头域需要包含签名信息，该签名信息由SK、请求时间、请求类型等计算生成。AK与SK是用户访问OBS时需要使用的密钥对。当通过对象存储服务API（ApplicationProgrammingInterface）访问存储数据时，AK/SK用于生成鉴权信息进行安全认证。在用户注册开通OBS服务后，可以登录“我的凭证”，根据需要创建AK和SK，系统通过AK识别访问系统的用户，而SK用于密钥鉴权。一个AK唯一对应一个用户，而一个用户可以拥有多个AK。SK与AK一一对应，形成访问OBS时的密钥对，确保访问安全。
用户在创建桶时，可以根据自身对价格、响应时延、请求来源等不同要求，指定该桶所在的区域。桶创建完成后，不支持修改该桶所在的区域。OBS在多个区域提供服务，不同区域功能上线时间可能有所不同，请以实际界面为准。创建桶后，上传至该桶内的所有对象都将存放在对应的区域数据中心内。
OBS主要面向以下几类应用场景提供存储服务：
OBS为用户提供OBS管理控制台、OBS客户端、多语言SDK（Java、.NET、Python、PHP、Android、C++、Ruby）、RESTAPI等多样化的管理和开发平台。目前，OBS管理控制台提供的功能如下：
支持编译构建、代码检查、子流水线、部署四种任务类型。流水线阶段中的任务支持串行执行与并行执行。执行状态上报。执行日志上报。软件包下载。单任务执行。进度统计。流水线参数化执行。提供流水线执行历史记录。子任务的查看功能。流水线统计功能。支持定时执行。可视化自定制的自动化交付流水线。安全可靠，资源隔离，网络隔离和安全组规则保护，远离病毒、木马骚扰，防DDoS攻击。服务器统一维护。支持根据业务需求进行弹性伸缩，可以根据业务需求自行定义弹性配置和策略。
应用：软件开发。场景特点：软件开发中需要进行代码检查、编译打包、发布等多项活动，管理多个单独的活动比较复杂，增加管理成本。适用场景：利用流水线技术将开发过程中的多个活动按需进行关联管理，或并行或串行，按需进行执行，提升交付效率。
项目管理（ProjectMan）为软件开发团队提供敏捷化项目管理协作服务，提供多项目管理、敏捷迭代管理、需求管理、缺陷跟踪、社交化协作、多层次事务（工作项）看板、多维度统计报表等功能。云端多项目、多角色异地协同开发，多层次项目看板，多维度统计报表，保障您敏捷迭代开发，及时响应客户需求。项目管理具有以下特性：秒级创建新项目，简单方便。多项目管理方便，项目成员可以在线管理多个项目。通过关注置顶项目，省却项目查询操作。支持一键切换项目，用户可以从一个项目快速切换至其他项目。项目卡片涂鸦化展现方式，有效提升项目辨识度。支持敏捷迭代开发，迭代计划和时间线清晰展现项目进展。多维度项目看板，提供个人级、项目级看板，直观呈现进展与风险。人性化设计，提供树表、任务墙视图展现方式，满足不同的用户使用习惯。社交化协作，多角色跨地域协同开发效率高。多维度统计报表，从不同角度展现企业级宏观进展与项目级微观进展。提供基于项目/需求的文档管理服务，支持多种类型的文件上传，确保项目经验固化及传承。提供基于项目的百科（WIKI）管理，供用户发布词条。支持灵活计费模式按需购买，最大限度降低一次投入成本。服务器统一维护，大幅降低成本。
项目管理功能列表如所示。
应用：敏捷交付项目管理适用场景：采用敏捷流程进行产品开发的团队，通过软件开发云项目管理，进行迭代计划制定、需求分析、任务分解、缺陷跟踪，高效协作开发产品。
应用：需求管理、项目管理、产品验收等适用场景：外包项目发包方和接包方基于软件开发云项目管理的同一个外包项目，进行协同开发与交付。发包方在项目中提出需求，并跟踪项目进展，完成产品验收。接包方进行需求分析、开发、交付与问题修复。通过软件开发云项目管理，双方实现无缝、实时对接，确保项目交付准确度和高质量。
。
安全可靠，资源隔离，网络隔离和安全组规则保护，远离病毒，木马骚扰，防DDoS攻击。服务器统一维护，大幅降低成本。支持重置密码，解决用户忘记密码之忧。支持根据用户业务需求进行弹性伸缩，用户可以根据业务需求自行定义弹性配置和策略，满足业务需求的同时，减少资源投入。
应用：提供稳定的Maven中央仓库代理服务，方便用户项目工程开发过程中，依赖构件的下载。场景特点：项目开发中，需要依赖使用第三方依赖件，依赖仓库不统一，依赖构件不全，直接从公网下载速度极慢，导致开发交付进度缓慢。适用场景：编译构建。
应用：规范软件包发布，提供软件发布管理仓库。场景特点：简单的文件服务器管理，缺少规范的软件包版本管理，容易导致版本发布错误。适用场景：软件包发布归档。
应用：提供标准的版本发布包URL资源路径。场景特点：构件包快速分享，服务多项目协同开发交付，提供统一的对外发布出口，方便产品包部署应用。适用场景：编译构建，部署下载。
需求-用例-缺陷双向关联可追溯。友好的用例设计，提供用例分级、前置条件、操作步骤、预期结果。测试问题快速提单，提高测试效率。统计报告，查看总体用例、已关联需求用例、已关联缺陷用例情况。多维度版本质量看板，清晰的需求验收与缺陷统计数据。
应用：需求-用例-缺陷双向关联。场景特点：确保所有需求都被正确测试，杜绝漏测、误测。适用场景：适用于产品端到端需求开发、交付、验收，保障需求全部验收，产品高质量交付。
应用：云端测试管理服务。场景特点：提供统一的云端测试管理平台，方便软件需求方与供应商跨地域高效验收，开展测试用例执行、缺陷提交，清晰及时查看验收报告，提升验收效率。适用场景：适用于软件需求方与供应商的验收工作，使用测试管理服务开展测试验收活动，及时查看需求交付、验收过程把控、产品质量。
为了在用户申请创建裸金属服务器后，可以通过“申请状态”栏查看任务的创建状态。创建裸金属服务器的任务包括创建裸金属服务器资源、绑定弹性IP等子任务。申请状态栏的任务状态包括如下两类：处理中：指系统正在处理的请求。失败：指未能成功处理的请求。对于处理失败的任务，系统会自动回退，同时在界面上会显示处理失败。<p>更多详细信息，请参见。
用户在申请负载均衡器时，负载均衡类型选择“公网”，此时可使用已有弹性IP创建负载均衡器。<p>更多详细信息，请参见。
创建MySQL5.6.30实例的功能界面截图：<p>更多详细信息，请参见。
设置自动备份保留期的功能界面截图：
将数据库实例恢复至备份保留期内指定时间点的功能界面截图：<p>更多详细信息，请参见。
现在，RDS在原有16个OpenAPI的情况下，新增9个OpenAPI供您在本地管理系统中调用来管理数据库实例及相关的云资源。附：新增的9个RDSOpenAPI<p>更多详细信息，请参见。
从备份恢复到新数据库实例的功能界面截图：<p>更多详细信息，请参见。
对于现有的MySQL数据库实例，在扩展存储时，您可能会看到部分I/O的容量有所增加。添加存储需要耗费时间，并且会降低数据库实例的性能，因此您应计划好何时适合进行这些更改。值得注意的是，存储容量扩容不会中断数据库服务。虽然在添加存储时可以使用数据库实例进行读写，但也会出现性能下降的情况，直至添加过程完成。另外请注意，存储容量大小在分配后不可缩减。数据库集群存储容量扩容的功能界面截图：<p>更多详细信息，请参见。
附：新增的7个RDSOpenAPI<p>更多详细信息，请参见。
现在，您可以随时、自由、快速地变更所需要的计算和内存资源，用来支撑您随时变化的数据库业务负载。RDS支持您对数据库的计算和内存资源进行弹性伸缩，您可以根据选择的资源规格，最小使用1核vCPU和2GB内存，最大扩展到32核vCPU和128GB内存。规格变更操作目前暂时不支持在维护时段执行，您的操作会立即生效，数据库服务会立即中断，中断过程通常可在10分钟之内结束。新的数据库实例恢复可用后，您无需重新配置部署模式、网络配置和数据库配置等，数据库即可恢复正常为应用业务提供服务。修改MySQL数据库实例的数据库实例类的功能界面截图：附：RDS数据库实例类列表<p>更多详细信息，请参见。
创建数据库快照的功能界面截图：将数据库快照还原的功能界面截图：复制数据库快照的功能界面截图：删除数据库快照的功能界面截图：<p>更多详细信息，请参见。
数据库引擎参数配置的功能界面截图：附：新增的20个MySQL引擎参数
更多详细信息，请参见“。
创建MySQL5.6.33实例的功能界面截图：<p>更多详细信息，请参见。

快照与备份有什么不同？备份与恢复的功能界面截图：<p>更多详细信息，请参见。
<p>更多详细信息，请参见。
SMN新增短信直发接口，通过调用该接口，可将短信发送给指定的手机号码。公测期间，同一个手机号码限制一小时内最多发送10条短信，一天最多发送20条短信。<p>更多详细信息，请参见。
发布管理服务，提供便捷的软件发布管理平台，包括仓库初始化、软件发布、软件下载、软件查看等功能。通过安全可靠的开发软件仓库，实现自动化软件包管理，缩短开发周期，支撑产品的持续发布。
&bull;&nbsp;&nbsp;安全可靠安全可靠，资源隔离，网络隔离和安全组规则保护，远离病毒，木马骚扰，防DDoS攻击。&bull;&nbsp;&nbsp;统一维护服务器统一维护，大幅降低成本。&bull;&nbsp;&nbsp;弹性伸缩支持根据用户业务需求进行弹性伸缩，用户可以根据业务需求自行定义弹性配置和策略，满足业务需求的同时，减少资源投入。
发布管理服务主要适用场景包括如下：&bull;&nbsp;&nbsp;自动下载依赖包提供稳定的Maven中央仓库代理服务，方便用户项目工程开发过程中，依赖构件的下载。项目开发中，需要依赖使用第三方依赖件，依赖仓库不统一，依赖构件不全，直接从公网下载速度极慢，导致开发交付进度缓慢。&bull;&nbsp;&nbsp;编译构建包自动归档规范软件包发布，提供软件发布管理仓库。简单的文件服务器管理，缺少规范的软件包版本管理，容易导致版本发布错误。&bull;&nbsp;&nbsp;产品包分发部署提供标准的版本发布包URL资源路径。构件包快速分享，服务多项目协同开发交付，提供统一的对外发布出口，方便产品包部署应用。更多详细信息请参见“”。
“IAM用户指南”
【特性优化】云监控告警规则条数配额增加到100条<p>&nbsp;云监控告警规则条数配额由20条免费增加到100条。
对象存储服务同时提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长，具体计费模型如表所示。
对象存储服务同时提供包年包月计费方式，您可以购买包年包月套餐，提前规划资源的使用额度和时长。
开通OBS服务后，在OBSConsole主页面单击“购买包年/包月”，进入资源包购买页。根据界面提示进行信息配置。您可以单击“”查看计费标准。单击“立即购买”。确认订单无误后，并单击“提交订单”。若发现订单有误，也可单击“上一步”修改订单后再继续购买。根据界面提示进行订单支付。&nbsp;资源包购买注意事项：不支持续订、退订。资源包到期后，不会影响您在OBS上的使用和数据安全。您只要保证云服务账户上有足够的余额，系统会自动以按需付费的方式进行结算。流量包每月重置规则说明：按自然月重置，若产生下行流量，先扣除流量包额度，超出部分按照按需扣费机制结算。例如：您在4月15日购买6个月的下行流量包2TB并支付，您在4月15日到4月30日就会有2TB的下行流量可以使用。我们会在5月1日0点，重新给您2TB的下行流量，此2TB流量您可以在5月份使用。若上个月有未使用完的流量，也会清零。6月1日0点我们会再次分配2TB的下行流量给您，以此类推，直至购买资源包到期为止。
测试管理针对测试团队敏捷协作、个人高效测试提供了更加便利的流程和界面，提供了一种针对需求驱动的测试方法和实践，更易适合不同规模的测试团队使用。<b>、【用例管理】实现【测试管理】和【项目管理】的松耦合，用例管理更加轻量便捷支持：如果不需要需求驱动的测试，你可以把【测试管理】的【用例视图】作为独立的测试用例管理工具使用，而不依赖于【项目管理】下的需求。如果你使用需求驱动的测试，那么可以在创建用例时关联需求，或者在【追溯视图】作测试设计，根据需求创建用例。【用例管理】页面提供了【追溯视图】，可以作为需求驱动的测试设计和测试执行活动的快捷入口，【追溯视图】用颜色区分需求的测试完成情况，需求卡片左侧色条绿色代表完成测试，蓝色代表测试未完成。<b>、新的[设计与验收]页面能有效减少漏测，提高测试效率。新的【设计与验收】页面提供了一种需求驱动的测试方法和实践，能更有效的减少漏测、提高测试效率。适合于不同规模的测试团队：A.有测试经理、测试组长、测试执行人员的层级团队结构；B.单个测试人员的测试团队、开发人员自测试的测试用例和执行结果管理。l&nbsp;优化了[用例视图]和[追溯视图],在不同页面保持视图下操作习惯的连贯性。【测试执行】默认使用【用例视图】，测试人员进入页面直接查看测试用例步骤和检查点，提交缺陷，设置测试结果。【测试设计】默认使用【追溯试图】，测试人员进入页面直接开展分析业务需求、创建测试用例等设计活动。l【设计与验收】导航条辨识度更强，切换更便捷阶段卡片边的箭头视觉上强化了对当前操作阶段的辨识度。【测试设计】、【用例执行】、【验收报告】三个阶段标题使用卡片式大区块设计，切换操作更方便。导航条还提供了测试设计和用例执行统计可视化进度条，整体进展一目了然。<b>二、项目管理：通过拖拽，轻松实现backlog的迭代规划项目管理服务可以通过迭代的维度去管理工作项。为了提供给用户更好的的操作体验，提升用户的操作效率，新版本增加了通过拖拽的方式将工作项放到不同的迭代下进行管理的功能。项目管理服务的迭代页面如下：直接点击需要修改迭代的工作项，拖拽到右侧的迭代中，如下图所示：点击对应的迭代，可以看到之前的工作项已经转到对应迭代下。为了提高用户管理工作项的效率，简化用户操作，项目管理服务的工作项新增了批量操作的功能。批量操作提供两个功能：批量编辑和批量复制。批量编辑批量编辑操作可以批量调整工作项的处理人。点击批量编辑，勾选需要调整处理人的需求，然后选择处理人，具体操作如下图所示：点击确定之后，会批量的调整所有勾选工作项的处理人，如下图所示：批量复制批量复制操作可以批量复制当前项目的工作项到其他项目。点击批量复制，勾选需要复制到其他项目的工作项，然后选择目标项目，具体操作如下图所示：使用过程中遇到问题，可前往“帮助中心”查看，对新功能有任何疑问和建议，也记得前往微信服务号“华为软件开发云”（微信号：HWDevCloud）留言哦。















RDS实例存储空间RDS数据库备份存储用量超过主数据库存储空间的50%，才开始计费，计费标准遵照对象存储服务（ObjectStorageService）的存储空间价格，分不同存储阶梯按小时计费；RDS数据库实例暂不支持绑定公网IP，不会产生公网带宽流量；RDS数据库实例在云内部网络产生的流量不计费。
按固定带宽按使用流量
按固定带宽按使用流量
注：此价格仅为云专线端口价格。建设一条完整云专线还包含其他费用，如线路费，机房进线费等，不同服务区不同线路长度存在价格差异，详情请联系华为云客服。
RDS实例存储空间RDS数据库备份存储用量超过主数据库存储空间的50%，才开始计费，计费标准遵照对象存储服务（ObjectStorageService）的存储空间价格，分不同存储阶梯按小时计费；RDS数据库实例暂不支持绑定公网IP，不会产生公网带宽流量；RDS数据库实例在云内部网络产生的流量不计费。
按固定带宽按使用流量
按固定带宽按使用流量
注：此价格仅为云专线端口价格。建设一条完整云专线还包含其他费用，如线路费，机房进线费等，不同服务区不同线路长度存在价格差异，详情请联系华为云客服。
渗透测试服务（PenetrationTestService，以下简称PTS）是一个渗透测试服务单管理平台，用户可以通过该平台创建渗透测试服务单，平台自动以邮件形式将其转发给第三方安全公司。用户与第三方安全公司之间就渗透测试服务所有合作内容（包括但不限于定价、执行渗透测试、获取测试报告、双方权利义务等）由用户线下联系第三方安全公司自行协商，并自行决定是否与其签署合作协议。相关服务由第三方安全公司独立向用户提供。PTS平台不以任何形式参与用户与第三方安全公司之间的合作，也不承担任何法律责任。
安全公司是执行渗透测试的第三方公司，测试人员都是寻找网络系统安全漏洞的专业人士。
服务单，是用户在PTS平台创建并提交给第三方安全公司执行渗透测试的订单，系统以邮件形式将服务单发送给安全公司，用户线下联系安全公司执行渗透测试。
渗透测试，是指专业的安全测试人员利用各种技术、管理手段和实地验证对某个特定的网络系统进行探测，以便发现系统中存在的漏洞、缺陷，然后输出测试报告并提交给网络所有者。网络所有者根据安全公司提供的渗透测试报告，可以清晰了解系统中存在的安全隐患和问题，以便采取必要的防护措施。
A
F
P
S
安全公司是执行渗透测试的第三方公司，测试人员都是寻找网络系统安全漏洞的专业人士。
服务单是用户在PTS平台创建并提交给第三方安全公司执行渗透测试的订单，系统以邮件形式将服务单发送给安全公司，用户线下联系安全公司执行渗透测试。
参见
渗透测试是指专业的安全测试人员利用各种技术、管理手段和实地验证对某个特定的网络系统进行探测，以便发现系统中存在的漏洞、缺陷，然后输出测试报告并提交给网络所有者。网络所有者根据安全公司提供的渗透测试报告，可以清晰了解系统中存在的安全隐患和问题，以便采取必要的防护措施。
渗透测试服务（PenetrationTestService，以下简称PTS）是一个渗透测试服务单管理平台，用户可以通过该平台创建渗透测试服务单，平台自动以邮件形式将其转发给第三方安全公司。后续合作内容（包括但不限于定价、执行渗透测试、获取测试报告、双方权利义务等）由用户线下联系第三方安全公司自行协商完成。
多维交互式分析服务是一种快速、完全托管的EB级交互式分析服务，可方便您使用现有的商业智能工具以一种经济的方式轻松分析您的所有数据。使用各种创新技术，对于大小在100M～1EB或更高的数据集，拥有秒级响应时间。它使用多维索引、列式存储、数据压缩及列簇等，使得BI工具、dashboard和交互式分析可以直接定位到数据，极大的降低传统scan带来的I/O数量。M-OLAP提供了对大数据即席查询的超快速响应。M-OLAP从根本上说，是一个OLAP引擎，采用类似于RDBMS中的表来存储数据。M-OLAP提供简单易懂的SQL接口来查询和分析数据。用户可将大量（10TB以上）数据导入M-OLAP中，M-OLAP将以压缩的多维索引列格式自动组织和存储数据。数据被加载到M-OLAP后，就会执行即席查询，M-OLAP将对数据查询提供秒级响应。M-OLAP将数据源集成到Spark生态系统后，通过使用Spark提供的第三方工具ThriftServer连接到SparkSQL，完成结构化数据的计算和解析。
M-OLAP的引擎在Spark进程中执行，即作为Spark内部数据源，不需要额外启动集群中的其他进程来运行。存储在M-OLAPTable中的数据被分成若干个M-OLAP数据文件，每一次数据查询时，M-OLAPEngine模块负责执行数据集的读取、过滤等实际任务。M-OLAPEngine作为一个Spark执行进程本身的一部分运行，负责处理数据文件块的一个子集。Table数据集数据存储在HDFS中。同一Spark集群内的节点可以作为HDFS的数据节点。
SQL功能：M-OLAP与SparkSQL完全兼容，支持所有可以直接在SparkSQL上运行的SQL查询操作。简单的Table数据集定义：M-OLAP支持易于使用的DDL(数据定义语言)语句来定义和创建数据集。M-OLAPDDL十分灵活、易于使用，并且足够强大，可以定义复杂类型的Table。便捷的数据管理：M-OLAP为数据加载和维护提供多种数据管理功能。M-OLAP支持加载历史数据以及增量加载新数据。加载的数据可以基于加载时间进行删除，也可以撤销特定的数据加载操作。M-OLAP文件格式是HDFS中的列式存储格式。该格式具有许多新型列存储文件的特性，例如，分割表，压缩模式等。M-OLAP具有以下独有的特点：<ulid="ZH-CN_TOPIC_0034788019__zh-cn_topic_0034086015_ul27989760111818"><liid="ZH-CN_TOPIC_0034788019__zh-cn_topic_0034086015_li50581249111818">伴随索引的数据存储：由于在查询中设置了过滤器，可以显著加快查询性能，减少I/O扫描次数和CPU资源占用。M-OLAP索引由多个级别的索引组成，处理框架可以利用这个索引来减少需要安排和处理的任务，也可以通过在任务扫描中以更精细的单元（称为blocklet）进行skip扫描来代替对整个文件的扫描。可选择的数据编码：通过支持高效的数据压缩和全局编码方案，可基于压缩/编码数据进行查询，在将结果返回给用户之前，才将编码转化为实际数据，这被称为“延迟物化”。支持一种数据格式应用于多种用例场景：例如，交互式OLAP-style查询，顺序访问（bigscan），随机访问（narrowscan）。
快速查询响应：高性能查询是M-OLAP关键技术的优势之一。M-OLAP查询速度大约是SparkSQL查询的10倍。M-OLAP使用的专用数据格式围绕高性能查询进行设计，其中包括多种索引技术、全局字典编码和多次的Pushdown优化，从而对TB级数据查询时间进行最快响应。高效率数据压缩：M-OLAP使用轻量级压缩和重量级压缩的组合压缩算法压缩数据，可以减少60%~80%数据存储空间，节省硬件存储成本。
准备数据用户需要将本地数据上传至OBS中。创建集群使用Console控制台创建M-OLAP集群。导入数据M-OLAP只能处理HDFS中的数据，所以在提交M-OLAP语句前，需要使用集群导入功能，将OBS中的数据导入至HDFS中。创建作业数据导入HDFS后，在M-OLAP集群中可直接使用SQL执行数据查询。查看作业执行结果作业执行成功与否会在“执行结果”中展示，执行结果详情可在“查询结果集”中查看。终止集群如果作业执行结束后不需要集群了，可以在“集群列表”中单击“终止”，集群状态由“运行中”更新为“删除中”，待集群删除成功后，集群状态更新为“已终止”，并且显示在“历史集群”中。创建集群、新增作业的操作都会记录在日志中，如果您在使用M-OLAP过程中遇到任何问题，请在“操作日志”页面查看相关日志信息定位问题。
本章节提供从零开始使用M-OLAP的操作指导，使用M-OLAP的DDL或DML语句在集群中创建用户表、导入数据至用户表、查询用户数据、删除用户数据等。M-OLAP处理数据流程为：获取用户数据-&gt;导入用户数据-&gt;插入用户数据-&gt;查询用户数据-&gt;删除用户数据。
假定用户开发一个应用程序，用于管理企业中的使用A业务的用户信息，如所示。A业务操作流程如下：创建用户信息表。根据用户编号查询用户姓名和地址。根据用户姓名进行查询。查询年龄段在20～29之间的用户信息。数据统计，统计用户信息表的人员数、年龄最大值、年龄最小值、平均年龄。用户销户，删除用户信息表中该用户的数据。A业务结束后，删除用户信息表。
开发人员使用M-OLAP开发A业务程序的过程如下：将中的数据按下面格式写入“user_info.csv”文件中。12005000201,Zhangsan,male,19,GuangDong-ShenZhen,12005000202,Liwanting,female,23,HeBei-ShiJiaZhuang12005000203,Wangming,male,26,ZheJiang-NingBo12005000204,Ligang,male,18,HuBei-XiangYang12005000205,Zhaoenru,female,21,JiangXi-ShangRao12005000206,Chenlong,male,32,HuNan-ZhuZhou12005000207,Zhouwei,female,29,HeNan-NanYang12005000208,Yangyiwen,female,30,ChongQing-KaiXian12005000209,Xubing,male,26,ShanXi-WeiNan12005000210,Xiaokai,male,25,LiaoNing-DaLian“user_info.csv”文件中不允许出现中文，否则数据导入失败。将“user_info.csv”文件上传至OBS。<oltype="a"id="ZH-CN_TOPIC_0034788336__ol24859151104610"><liid="ZH-CN_TOPIC_0034788336__li3238451710478">登录OBS服务。单击“创建桶”，创建一个bigdata桶。在bigdata桶下单击“新建文件夹”创建input文件夹，创建完成后如所示。目录列表进入input目录，单击选择“user_info.csv”文件，单击“上传”，上传完成后如所示。文件列表创建一个M-OLAP集群。<oltype="a"id="ZH-CN_TOPIC_0034788336__ol58685409202424"><liid="ZH-CN_TOPIC_0034788336__li62916776202424">使用公有云账号登录M-OLAP控制台。单击“申请集群”，进入集群配置页面。集群配置信息请参考。确认集群配置信息，单击“立即申请”。确认订单信息，单击“提交订单”，完成集群的创建。集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。登录M-OLAP集群，使用集群导入功能，将“user_info.csv”文件导入至HDFS。<oltype="a"id="ZH-CN_TOPIC_0034788336__ol2950850310506"><liid="ZH-CN_TOPIC_0034788336__li59671959105059">进入“文件管理”页面，单击“导入”。单击分别选择OBS和HDFS路径。OBS路径：选择user_info.csv在OBS的存放路径，例如：s3n://bucket-bigdata/input/user_info.csv。HDFS：选择user_info.csv在集群的存放路径，例如：/user/feihang/datastore/。若该路径不存在，可通过“新建”按钮进行创建。单击“导入”。文件上传进度可在“拷贝进度”中查看。M-OLAP将数据导入操作当做Distcp作业处理，也可在“作业管理&gt;作业”中查看Distcp作业是否执行成功。进入“作业管理”页面，创建用户信息表。创建一个名为user_Info的M-OLAP表，表头依次对应identifier（编号）、name（姓名）、sex（性别）、age（年龄）、address（地址）。CREATETABLEuser_Info(identifierString,nameString,sexString,ageInt,addressString)STOREDBY'org.apache.carbondata.format'TBLPROPERTIES('COLUMN_GROUPS'='(name,sex)');将用户信息导入M-OLAP表中。先将“user_info.csv”文件放至集群HDFS的某个目录下，再导入M-OLAP表中，此处假设放在/user/omm/目录下。LOADDATAINPATH'hdfs://hacluster/user/omm/user_info.csv'INTOTABLEuser_InfoOPTIONS('DELIMITER'=',','QUOTECHAR'='"','FILEHEADER'='identifier,name,sex,age,address');M-OLAP表也支持导入整个文件夹下的数据。查看数据是否导入成功。SHOWSEGMENTSFORTABLEuser_info;“Status”列为“Success”表示数据导入成功。根据用户编号查询用户姓名和地址。以查询编号为12005000209的用户姓名和地址为例。SELECTname,addressFROMuser_infoWHEREidentifier='12005000209';根据用户姓名查询用户信息。以查询用户张三的所有信息为例。SELECT*FROMuser_infoWHEREname="Zhangsan";查询年龄在20～29之间的用户信息。SELECT*FROMuser_infoWHEREage&gt;=20ANDage&lt;=29;统计用户信息表的人员数、年龄最大值、年龄最小值和平均年龄。统计人员数：SELECTcount(name)FROMuser_info;统计年龄最大值：SELECTmax(age)FROMuser_info;统计年龄最小值：SELECTmin(age)FROMuser_info;统计年龄平均值：SELECTavg(age)FROMuser_info;删除用户信息表中的用户数据。用户信息表中所有用户数据都需要删除，以删除SegmentSequenceId0为例。DELETESEGMENT0FROMTABLEuser_info;SegmentSequenceId的值可通过SHOWSEGMENTSFORTABLEuser_info;查询。查询所有数据表。SHOWTABLES;删除用户信息表。DROPTABLEuser_info;终止集群。如果作业执行结束后不需要集群了，可以在“集群列表”中单击“终止”，集群状态由“运行中”更新为“删除中”，待集群删除成功后，集群状态更新为“已终止”。
使用OBS之前必须要有一个云服务帐号。
打开浏览器。登录公有云网站。在页面右上角单击。按需填写注册信息并单击“提交注册信息”。根据界面提示输入“用户名”和“公司名称”，并单击“完成”。单击“完成”后，会弹出注册成功的提示。
使用OBS服务之前必须先充值，才能正常使用OBS服务。
登录OBS管理控制台。单击页面右上角的用户名并选择“用户中心”进入用户中心页面。单击“充值”，系统自动跳转到充值窗口。根据界面提示信息，对账户进行充值。充值成功后，关闭充值窗口，返回管理控制台首页。单击“对象存储服务”，开通并进入OBS管理控制台。
您可以通过网页登录OBS管理控制台。
登录云服务网站。单击页面右上角的“管理控制台”。使用帐号密码登录，详细操作请参见。如您尚未注册云服务，可单击“免费注册”，根据界面提示注册一个云服务帐号。在管理控制台首页，选择“所有服务&gt;存储&gt;对象存储服务”。
您可以通过OBS管理控制台创建桶。桶是OBS中存储对象的容器。您需要先创建一个桶，然后才能在OBS中存储数据。每个用户最多可在OBS中创建100个桶。
登录OBS管理控制台。在页面右上角单击“创建桶”，系统弹出下方所示的对话框。选择“区域”、“存储类别”，并输入桶名称。有关更多信息，请参见。说明：<ulid="zh-cn_topic_0045829050__ul14020366105958"><liid="zh-cn_topic_0045829050__li25012404105958">桶创建成功后，不能修改名称，创建时，请设置合适的桶名。由于通过URL访问桶时，桶名会作为URL的一部分，根据DNS标准，URL不支持大写字母，无法区分带大写字母的桶。因此，“桶名称”仅支持小写字母、数字、“-”、“.”作为桶的命名规则。例如：若想通过URL访问名为“MyBucket”的桶，该URL将解析成名为“mybucket”的桶，导致访问出错。单击“创建桶”。
您可以通过OBS管理控制台在已创建的桶中新建文件夹，从而更方便的对存储在OBS中的数据进行管理。
至少已创建了一个桶。
登录OBS管理控制台。在桶列表中单击待操作的桶，进入“概览”页面。在左侧导航栏，单击“对象”。单击“新建文件夹”。在“文件夹名称”中输入新文件夹名称。有关文件夹命名的更多信息，请参见。单击“确定”。页面上方提示文件夹创建成功。
您可以通过OBS管理控制台将存储在OBS中的文件下载至本地。
对于存储类别为归档存储的桶中的对象，需要确认对象的状态为“已恢复”才能对其进行下载。请参见查看如何恢复文件。
登录OBS管理控制台。在桶列表中单击待操作的桶，进入“概览”页面。在左侧导航栏，单击“对象”。选中待下载的文件，并单击右侧的“下载”或“下载为”，根据浏览器提示完成文件下载。
为节省空间和成本，您可以在OBS管理控制台上手动删除无用的文件。删除文件可以删除单个文件，也可以批量删除多个文件。
登录OBS管理控制台。在桶列表中单击待操作的桶，进入“概览”页面。在左侧导航栏，单击“对象”。选中待删除的文件，并单击右侧的“删除”。也可以选择多个文件，单击文件列表上方的“更多”，选择“删除”删除多个文件。单击“确定”，确认删除文件。
如果您存在空桶，可以在OBS管理控制台上将其删除，以免占用桶数量配额。
待删除的桶为空桶。只有桶的所有者才能删除桶。
登录OBS管理控制台。在桶列表中选择待删除的桶，并单击右侧的“删除”。说明：用户删除桶后再次创建同名桶时，针对不同应用场景需受到一定时间间隔的限制，详细要求请参考《对象存储服务接口参考》的“”章节。单击“确定”，确认删除桶。页面上方提示桶删除成功。
OBS管理控制台支持的浏览器版本如所示：
您可以将本地文件直接通过Internet上传至OBS指定的位置。待上传的文件可以是任何类型：文本文件、图片、视频等。更多详细信息，请参加。OBS管理控制台支持上传最大为50MB的单个文件。
至少已创建了一个桶。
登录OBS管理控制台。在桶列表中单击待操作的桶，进入“概览”页面。在左侧导航栏，单击“对象”。单击“上传”，进入“上传对象”页面。单击下图红框内按钮选择文件。选择待上传的文件，单击“打开”。单击“确定”。
您可以通过管理控制台、API、SDK、OBS客户端工具使用OBS服务。此处以在管理控制台上的使用方法作为入门介绍。SDK的使用方法请参见《对象存储服务开发指南》。API的使用方法请参见《对象存储服务接口参考》。OBS客户端使用方法请参见《对象存储服务客户端指南》。所需资料。以下章节介绍如何使用OBS管理控制台来完成下图中所示的任务。
RDS故障切换RDS采用高可用模式，当主机出现故障时，RDS会在1~5分钟切换到备机，切换过程中不可访问，需要您设置好程序跟RDS的自动重连，避免因为切换导致服务不可用。实例的操作系统，对用户都不可见，这意味着，只允许用户应用程序访问数据库对应的IP地址和端口。RDS使用的ECS以及OBS上的备份文件，都对用户不可见，它们只对RDS后台管理系统可见。申请RDS后，您还需要做什么申请RDS实例后，您不需要进行数据库的基础运维（比如高可用、安全补丁等），但是您还需要重点关注以下事情：<oltype="a"id="rds_faq_0001__zh-cn_topic_0029128231_ocadf52852e2642a39d01526ea96efd22"><liid="rds_faq_0001__zh-cn_topic_0029128231_l9b7de5a533d64bda9939d75ba3dcff91">RDS实例的CPU、IOPS、空间是否足够，如果不够需要变更规格或者扩容。RDS实例是否存在性能问题，是否有大量的慢SQL，SQL语句是否需要优化，是否有多余的索引或者缺失的索引等。
RDS实例可用性的计算公式：实例可用性=（1–故障时间/服务总时间）×100%
目前不支持实例模板。
RDS实例不会受其他用户实例影响，因为每个用户的RDS实例与其他用户的RDS实例是独立的，并且有资源隔离，互不影响。
默认情况下，RDS允许每个租户最多可创建20个RDS实例。如果您的应用程序需要更多RDS实例，可以向客户经理或客服提需求，申请更多RDS实例。
RDS没有强制限制，取决于数据库引擎自身设置。MySQL最多可创建1000个数据库、1000个数据库帐号。PostgreSQL可创建无限个数据库、无限个数据库帐号。MicrosoftSQLServer可创建30个数据库、无限个数据库帐号。
推荐您做如下两个处理：通过RDS管理控制台查看RDS的性能情况。与应用程序有很大关系，使用命令查看当前数据库连接状态，比较本地数据库和RDS的差异。
通过查看慢SQL日志来确定是否存在运行缓慢的SQL查询以及各个查询的性能特征（如果有），从而定位查询运行缓慢的原因。查询MySQL日志，请参见。查询PostgreSQL日志，请参见。MicrosoftSQLServer可以通过查询DMV视图，从而定位查询运行缓慢的原因，有关使用DMV的信息，请参。查看RDS实例的CPU使用率指标，协助定位问题。请参见。
主机与备机的同步延迟是无法利用公式来计算的，它会受到以下因素的影响：网络通信状况。主机的事务压力，即主机每秒执行的事务量。主机执行的事务大小，即一个事务要执行多久。备机和只读副本的机器负载状况。如果主机在某个时间段压力非常大，每秒执行的事务量非常多，备机通常会出现延迟。反之，延迟一般都是秒级。对于MySQL，可以在“RDS实例管理”页面，展开HA集群下备机的详细信息，其中，“复制源”为该集群下的主机，在“复制状态”为“正常”的情况下，通过查看“复制时延”，来获取当前主备同步延迟值。对于PostgreSQL，可以通过CES页面查看监控指标“复制时延”，来获取当前主备同步延迟值。具体的查看方法，请参见。对于MicrosoftSQLServer，目前无法查看。
数据被篡改有很多安全措施保证只有经过认证的用户才能操作数据库表数据。另外SSH协议对外不可访问。只能通过指定的数据库服务端口来访问数据库表。主备数据库在同步过程中有传输包校验功能，所以不会出现数据被篡改。MySQL使用InnoDB引擎，不容易出现数据损坏。可能会出现实例服务器突然停电，导致数据库有页损坏，数据库无法启动。这时候RDS会故障切换进行服务。
RDS不会删除和操作用户的任何数据。出现这种情况，请检查是否为误操作，必要时可利用已有备份恢复文件。目前可采取如下方式：使用RDS实例的恢复功能。将备份数据从弹性云服务器导入RDS数据库。
在数据库的压力承载范围内，多台弹性云服务器ECS是可以使用同一个RDS来支撑业务的。
MySQL和PostgreSQL引擎，根据该集群中是否有可用手动快照来决定：有，保留该集群上现有手动快照，删除集群并释放所有资源。无，跳转到“快照管理”页面，进行最后一次手动快照创建。MicrosoftSQLServer引擎，如果集群中有手动快照，保留现有手动快照，其他所有资源被释放。MicrosoftSQLServer引擎目前不支持恢复到新数据库实例，所以，保留的手动快照暂不可用。
一旦删除云帐号，自动快照和手动快照的数据也随之删除。
目前，RDS支持磁盘扩容和CPU/内存规格变更。在磁盘扩容期间，RDS实例一直可用，业务不受影响，但不允许删除和重启实例。RDSforMicrosoftSQLServer不支持磁盘扩容。在CPU/内存规格变更期间，将会重启数据库服务，RDS实例不可用，用户无法连接实例。且在规格变更期间，该实例不可删除。
RDS支持读写分离，一个RDS集群中最多可创建5个只读副本。目前不支持Proxy代理，需要在应用侧配置判断和分配读写请求，自行寻址。RDSforMicrosoftSQLServer不支持读写分离。
外部服务器不能直接访问RDS数据库，访问方式如下：在VPC中开通VPN，通过VPN连接RDS数据库。将RDS与ECS创建在同一个VPC下，通过ECS来访问RDS数据库。
数据库连接数表示应用程序可以同时连接数据库的数量，与您的应用程序或者网站能够支持的最大用户数没有关系。
遇到该问题，参考以下步骤排查解决。先确认ECS实例和RDS实例是否在同一个VPC。<ulid="rds_faq_0020__zh-cn_topic_0029128205_ul66139476103624"><liid="rds_faq_0020__zh-cn_topic_0029128205_li58811851103624">如果在，执行。如果不在，需要重新创建ECS实例，使之和RDS实例在同一个VPC下。查看ECS实例是否添加安全组。<ulid="rds_faq_0020__zh-cn_topic_0029128205_ul3790537110375"><liid="rds_faq_0020__zh-cn_topic_0029128205_li6253588494648">如果有，检查安全组的配置规则是否满足要求，请参见的表格中“安全组”的描述，然后执行。如果没有，从ECS的实例详情页面，进入VPC页面，选择“安全组”，添加安全组。在弹性云服务器ECS上，测试是否可以正常连接到RDS实例地址的端口。MySQL的默认端口为8635。PostgreSQL的默认端口为8635。MicrosoftSQLServer的默认端口为8433。telnet&lt;<emid="rds_faq_0020__zh-cn_topic_0029128205_i51976927172738">连接地址</em>&gt;{<emid="rds_faq_0020__zh-cn_topic_0029128205_i40403063114949">端口号</em>}<ulid="rds_faq_0020__zh-cn_topic_0029128205_ul11903995103624"><liid="rds_faq_0020__zh-cn_topic_0029128205_li6774998103624">如果可以通信，说明网络是正常的。如果端口不通，请联系售后技术支持协助排查。
客户端问题导致连接RDS失败，可以从以下几个方面检查。弹性云服务器ECS的安全策略对于Windows平台，可检查Windows的安全策略是否开放RDS端口。对于Linux平台，可使用iptables检查防火墙及端口的放行情况。应用配置错误常见的有连接地址写错、端口参数配置错误和JDBC等的连接参数配置错误。用户名或密码错误如果连接数据库时出现类似如下错误，请检查用户名或密码是否正确。<ulid="rds_faq_0021__zh-cn_topic_0029128181_ul26924516155655"><liid="rds_faq_0021__zh-cn_topic_0029128181_li47289871155655">[Warning]Accessdeniedforuser'username'@'yourIp'(usingpassword:NO)[Warning]Accessdeniedforuser'username'@'yourIp'(usingpassword:YES)Loginfailedforuser'username'如问题仍未解决，请联系售后技术支持。
RDS服务端可能出现的问题如下，请依次进行检测。连接方式有误。解决方法：检查连接方式。ECS与RDS实例必须处于同一VPC内，且只能通过ECS连接。连接数满。解决方法：通过RDS的资源监控功能查看连接数、CPU使用率等指标是否正常，如果达到上限，需要进行重启RDS实例数据库、断开实例连接或升级RDS实例规格解决。实例状态异常，比如实例重启卡住，RDS系统故障，实例或表被锁定等。解决方法：尝试重启功能。如果无法解决，请联系售后技术支持。
您需要确保您的应用程序所在的ECS，与RDS实例在同一个VPC和子网中。如果不在，需要修改VPC中的路由表和网络ACL，以确保应用程序所在的ECS能够访问RDS实例。
建议您的应用程序支持自动重连数据库，当数据库重启后，无需人工介入，应用会自动恢复，提供更高的可用性。同时建议您的应用程序采用长连接方式连接数据库，以降低资源消耗，提高性能。
相同引擎数据库之间数据导入导出，称之为同构型数据库之间数据导入导出。不同引擎数据库之间数据导入导出，称之为异构型数据库之间数据导入导出。例如，从Oracle导入数据到RDS支持的数据库引擎。异构型数据库之间由于格式不同，不支持直接导入导出。但只要导入导出的格式数据兼容，理论上，导入表数据也是可行的。异构型数据库之间数据导入导出，一般需要第三方软件，通过数据复制的方式来实现。比如，先使用工具从Oracle中，以文本的格式导出表记录，然后利用Load语句导入到RDS支持的数据库引擎。
该方案优点是简单，容易上手，缺点是停机时间较长。因此它适用于数据量不大，或者允许停机的时间较长，并且在这个时间范围内能够完成的数据。由于RDS提供的关系数据库服务与原来的数据库服务是完全兼容的，所以对于用户来说，从原有数据库迁移到RDS数据的过程，与从一台数据库服务器迁移到另外一台数据库服务器的过程基本类似。
MySQL官网提供了针对不同操作系统的客户端安装包，以5.6为例。单击下载5.6的最新版本，单击下载其他归档版本。下面将以RedHatLinux为例介绍如何获取相应安装包及完成安装。
获取安装包。在下载页面找到对应版本，以MySQL-client-5.6.31-1.el6.x86_64.rpm为例，打开页面后，即可下载安装包。下载说明：通过红框所在的，可直接下载安装包。将安装包上传到ECS。说明：创建ECS时，要选择操作系统，例如Redhat6.6，并为其绑定EIP（ElasticIP，弹性IP）。然后使用远程连接工具将安装包上传到ECS，再用PuTTY连接到ECS。执行以下命令安装MySQL客户端。sudorpm-ivh<emid="rds_faq_0027__zh-cn_topic_0032144992_i4557607113350">MySQL-client-5.6.31-1.el6.x86_64.rpm</em>说明：如果安装过程中报conflicts，可增加replacefiles参数重新安装，如下：rpm-ivh--replacefilesMySQL-client-5.6.31-1.el6.x86_64.rpm
RDS允许通过控制台修改的参数项如下所示：MySQL5.6的可配置参数如所示。MySQL5.7的可配置参数，在的基础上新增，但不包含中以下参数：<ulid="rds_faq_0028__zh-cn_topic_0033266284_ul5381682213956"><liid="rds_faq_0028__zh-cn_topic_0033266284_li55322582213953">binlog_max_flush_queue_timeinnodb_file_formatinnodb_large_prefixlog_warningsmetadata_locks_cache_sizeold_passwordssync_frmtimed_mutexes系统提供的默认参数组不允许修改，只可单击“操作”列中的“查看”进行查看。当用户参数设置不合理导致数据库无法启动时，可参考默认参数组重新配置。
PostgreSQL官网提供了针对不同操作系统的客户端安装包，以及包含动态依赖库的软件包。RedHatLinux6下PostgreSQL9.5最新版本的单击下载，下面将以该版本为例，介绍如何获取相应安装包及完成安装。
获取PostgreSQL客户端安装包。在下载页面找到对应版本的，以postgresql95为例，打开页面后，即可下载安装包。下载PG客户端获取PostgreSQL客户端动态依赖库包。在下载页面找到对应版本的，以postgresql95-libs为例，打开页面后，即可下载动态依赖库包。下载PG客户端动态依赖库将安装包与动态依赖库包上传到ECS。说明：创建ECS时，要选择操作系统，例如Redhat6.6，并为其绑定EIP。然后使用远程连接工具将安装包与动态依赖库包上传到ECS，再用PuTTY连接到ECS。执行以下命令安装PostgreSQL客户端。sudorpm-ivhpostgresql95-9.5.7-1PGDG.rhel6.x86_64.rpmpostgresql95-libs-9.5.7-1PGDG.rhel6.x86_64.rpm说明：如果安装过程中报conflicts，可增加replacefiles参数重新安装，如下：rpm-ivh--replacefilespostgresql95-9.5.7-1PGDG.rhel6.x86_64.rpmpostgresql95-libs-9.5.7-1PGDG.rhel6.x86_64.rpm
RDS允许通过控制台修改的参数项如下：PostgreSQL9.5.5的可配置参数如所示。PostgreSQL9.6.3的可配置参数，在的基础上新增。系统提供的默认参数组不允许修改，只可单击“操作”列中的“查看”进行查看。当用户参数设置不合理导致数据库无法启动时，可参考默认参数组重新配置。
由于参数配置不合理导致数据库不可用的情况有以下几种。参数取值范围和实例规格有关：参数shared_buffers、max_connections可配置的最大值和实例的实际物理内存大小有关，设置不合理，会导致数据库不可用。参数之间存在关联关系：<ulid="rds_faq_0031__zh-cn_topic_0047022729_ul41671317182851"><liid="rds_faq_0031__zh-cn_topic_0047022729_li14015515182849">如果参数log_parser_stats、log_planner_stats或log_executor_stats存在配置为开启的情况，则需要将参数log_statement_stats配置为关闭，否则会导致数据库不可用。参数max_connections、autovacuum_max_workers和max_worker_processes配置需满足以下规则，否则会导致数据库不可用。max_connections参数值+autovacuum_max_workers参数值+max_worker_processes参数值+1&lt;8388607各参数的详细说明请参见。解决方法：登录控制台，通过查询近期日志，确定错误的参数。在参数配置页面，将参数值恢复成默认参数值，并重启数据库。将除错误参数以外的其他参数值设置为恢复之前的参数值，并将配置错误的参数调整为合理的参数值。
MicrosoftSQLServer官网提供了SQLServerManagementStudio的安装包。SQLServerManagementStudio应用程序只能在Windows环境运行。
获取SQLServerManagementStudio的安装包。请访问，下载SQLServerManagementStudio。将安装包上传到ECS。双击安装包，按照向导完成安装。
RDS允许通过控制台修改的参数项如。系统提供的默认参数组不允许修改，只可单击“操作”列中的“查看”进行查看。当用户参数设置不合理导致数据库无法启动时，可参考默认参数组重新配置。
密码重置发生在备份操作之后，执行恢复操作时，恢复为旧密码。
密码重置之后是否执行了恢复操作。
在Console页面，重新执行“重置密码”，具体请参见。
端口变更后该实例状态为“故障”。使用变更后端口号无法连接实例。
提交的数据库端口被临时占用。
若变更成功，说明所需变更端口被临时占用，导致变更失败。若仍然变更失败，请联系技术人员。
用户需要关注的监控指标有：CPU利用率、内存利用率、磁盘空间利用率。可以根据实际应用场景配置告警提示，当收到告警，可采取相应措施消除告警。配置示例：如果在某段时间内（如5min），CPU的利用率出现多次（如3次）不低于某特定值（如90%）的情况，则发出相应CES告警。如果在某段时间内（如5min），内存的利用率出现多次（如4次）不低于某特定值（如90%）的情况，则发出相应CES告警。如果在某段时间内（如5min），磁盘的使用率出现多次（如5次）不低于某特定值（如85%）的情况，则发出相应CES告警。CES告警详细配置方法，请参见《云监控服务用户指南》中“告警规则管理”。采取措施：收到与CPU利用率、内存利用率有关的告警，通过实例规格变更分别增大CPU、内存，请参见。收到与磁盘空间利用率有关的告警：<ulid="rds_faq_0036__zh-cn_topic_0042644587_ul5636564619109"><liid="rds_faq_0036__zh-cn_topic_0042644587_li6029970619109">调查磁盘空间消耗，查看是否可以从实例中删除数据或是将数据存档到其他系统以释放空间。通过磁盘空间扩容增大磁盘空间，请参见。
RDS支持的IOPS取决于云硬盘EVS的IO性能，具体请参见《云硬盘常见问题》中“云硬盘的性能如何？”的内容。
RDS可以设置所属VPC，从而确保RDS实例与其他业务实现网络安全隔离。使用安全组确保访问源为可信的。使用SSL通道，确保数据传输加密。RDSMySQL数据库实例数据库配置了防暴力破解功能。
通过统一身份认证服务（IdentityandAccessManagement，简称IAM），可以实现对RDS的管理权限控制。
VPC安全组可用来帮助确保VPC内RDS实例的安全。此外，通过网络访问控制列表（ACL），可以允许或拒绝进入和退出各个子网的网络流量。
RDSforMySQL目前只支持InnoDB存储引擎。
您可以通过导出SQL语句的方式将数据库备份到弹性云服务器ECS上。ECS不限制存放哪些数据，只要符合国家法律法规就行。您可以在ECS上存放数据库备份，但不建议将ECS作为数据库备份空间使用。强烈推荐使用RDS的备份功能将备份数据存放到专业的对象存储OBS上，以获得更高的数据可靠性和服务保障。
RDS自动快照有效期根据用户设置的备份天数而定。备份空间不占用用户购买的数据库空间。快照没有时间限制，且用户可根据需要进行删除。每个租户手动快照总配额默认为50。
备份窗口是用户定义的时间段，在该时间段内RDS实例将进行备份。RDS借助这些定期数据备份，让您能够将RDS实例还原到保留期内的备份点。在备份时段期间，业务不受影响，但不能在RDS控制台做重启操作。
RDS数据库存储采用EVS，关于云硬盘具体信息，请参见《云硬盘用户指南》。RDS的备份数据存储采用OBS，不占用用户购买的数据库空间。关于RDS实例存储的硬件配置，请参见《对象存储服务用户指南》。
如果您的应用程序所需的存储容量超过最大分配量，解决措施如下：扩容存储空间（RDSforMicrosoftSQLServer暂不支持）。分库分表。
用户正常的数据（不包括备份数据），以及RDS实例正常运行所需的数据（比如系统数据库、数据库回滚日志、重做日志、索引等）。同时，包含如下RDS的必要日志文件：MySQL数据库产生的Binlog日志。PostgreSQL数据库服务器产生的日志文件。MicrosoftSQLServer数据库产生的日志文件（MicrosoftSQLServer日志、默认的Trace文件和代理日志文件等）。这些文件保证RDS实例正常稳定地运行。
您申请的磁盘空间会有必要的文件系统开销，这些开销主要包括inode、reservedblock，以及数据库运行必需的空间。
占用RDS磁盘空间的日志及文件如下表：
通过JDBC连接实例的方式有无需下载SSL证书连接和用户下载SSL证书连接两种，其中使用SSL证书连接通过了加密功能，具有更高的安全性。
用户熟悉计算机基础知识，了解java编程语言，了解JDBC基础知识。
该方式属于SSL连接模式，但不对服务端进行证书校验，用户无需下载SSL证书。通过JDBC连接RDSPostgreSQL数据库实例，代码中的JDBC链接格式如下：jdbc:postgresql://<emid="rds_faq_0050__zh-cn_topic_0056039321_i1770082218623">&lt;instance_ip&gt;</em>:<emid="rds_faq_0050__zh-cn_topic_0056039321_i578757561876">&lt;instance_port&gt;</em>/<emid="rds_faq_0050__zh-cn_topic_0056039321_i511197581876">&lt;database_name&gt;</em>?sslmode=require说明：<ulid="rds_faq_0050__zh-cn_topic_0056039321_zh-cn_topic_0044511845_zh-cn_topic_0029128278_ul30891762142630"><liid="rds_faq_0050__zh-cn_topic_0056039321_zh-cn_topic_0044511845_zh-cn_topic_0029128278_li9590405142630">instance_ip是主机IP，即“RDS实例管理”页面该集群对应的实例列表中，主机的“连接地址”。instance_port是端口，默认8635，当前端口，参考“RDS实例管理”页面该集群对应的实例列表中，主机的“连接地址”。database_name是数据库名，即需要连接的数据库名（默认的管理数据库是postgres）。sslmode是ssl连接模式，require模式表示进行数据加密。连接PostgreSQL数据库的java代码，可参考以下示例：
该方式属于SSL连接模式，需要下载SSL证书，通过证书校验并连接数据库。下载方法请参见。通过JDBC连接PostgreSQL数据库，代码中的JDBC链接格式如下：jdbc:postgresql://<emid="rds_faq_0050__zh-cn_topic_0056039321_i23325726182315">&lt;instance_ip&gt;</em>:<emid="rds_faq_0050__zh-cn_topic_0056039321_i40098823182341">&lt;instance_port&gt;</em>/<emid="rds_faq_0050__zh-cn_topic_0056039321_i25345092182341">&lt;database_name&gt;</em>?sslmode=verify-full&amp;sslrootcert=<emid="rds_faq_0050__zh-cn_topic_0056039321_i5591532618207">&lt;ca.pem&gt;</em>说明：<ulid="rds_faq_0050__zh-cn_topic_0056039321_ul53136159174737"><liid="rds_faq_0050__zh-cn_topic_0056039321_li8463385174737">instance_ip是主机IP，即“RDS实例管理”页面该集群对应的实例列表中，主机的“连接地址”。instance_port是端口，默认8635，当前端口，参考“RDS实例管理”页面该集群对应的实例列表中，主机的“连接地址”。database_name是数据库名，即需要连接的数据库名（默认的管理数据库是postgres）。sslmod是ssl连接模式，默认全认证模式。sslrootcert是ssl连接CA证书路径，该文件需放在执行该命令的路径下。连接PostgreSQL数据库的java代码，可参考以下示例：
如果您正在使用SSL连接MySQL，执行如下命令查看证书有效期起止时间，判断证书是否到期。在证书到期前请及时更新根证书为最新版本：下载新的根证书文件或根证书捆绑包。重启实例以使新的根证书生效。使用新的根证书文件或根证书捆绑包连接实例。
单击“开始”，运行框输入“MMC”，回车。在MMC控制台菜单栏中单击“File”，选择“Add/RemoveSnap-in”。在“AddorRemoveSnap-ins”对话框，选择“Availablesnap-ins”区域的“Certificates”，单击“Add”添加证书。在“Certificatessnap-in”对话框，选择“Computeraccount”，单击“Next”。在“Selectcomputer”对话框，单击“Finish”。在“AddorRemoveSnap-ins”对话框，单击“OK”。在MMC控制台，双击“Certificates”，右键单击“TrustedRootCertificationAuthorities”，选择“AllTasks”，单击“Import”。单击“Next”。单击“Browse”，将文件类型更改为“Allfiles(*.*)”，找到下载的根证书ca.pem文件，单击“Open”，然后在向导中单击“Next”。注意：您必须在浏览窗口中将文件类型更改为“Allfiles(*.*)”才能执行此操作，因为“.pem”不是标准证书扩展名。单击“Next”。单击“Finish”。单击“OK”，完成根证书导入。
出现自动备份失败可能有以下原因：网络环境稳定性不足。如网络延时、中断，系统会识别并延时半小时再次执行备份，您也可以及时进行一次手动备份。系统多任务执行复杂性。如任务等待、中止，系统会识别并延时半小时再次执行备份，您也可以及时进行一次手动备份。实例状态异常。如实例故障、状态变更中，系统会识别并在状态恢复正常后再次执行备份，您也可以及时进行一次手动备份。参数修改异常。如修改参数并关联实例后导致实例故障，您可以对比参数修改前后的值是否正确、修改的参数是否存在关联参数需要一并修改、或者尝试恢复默认参数重启实例。导入数据异常。如导入数据不当导致系统表记录丢失，您可以参考重新导入数据。如果以上操作仍无法解决问题，请联系技术支持。
以ECS（IP：192.168.0.151）访问RDS实例（数据库连接地址：192.168.0.16:8635）为例：通过ECS访问RDS实例时，ECS安全组需要配置出规则，如所示。ECS采用的安全组，需要保证出规则能连接RDS实例对应的IP以及端口，数据库客户端工具的出端口是随机选取的，此处出规则针对端口不做限制。用户登录ECS实例时，ECS所用安全组也需要配置入规则，确保可正常登录。RDS实例所用安全组，仅需保证入规则能识别ECS的IP，且数据库连接端口地址放开即可，如所示。
RDS对此未做限制，取决于数据库引擎参数的默认值和取值范围，例如MySQL引擎的max_connections和max_user_connections参数，用户可在参数组自定义。
创建ECS，请参见《弹性云服务器用户指南》中的“购买弹性云服务器”。<ulid="rds_faq_0057__zh-cn_topic_0068152500_ul39459780121613"><liid="rds_faq_0057__zh-cn_topic_0068152500_li26320407121615">该ECS用于连接RDS实例，需要与准备使用的RDS实例处于同一VPC内。正确配置安全组，使得ECS可以通过“连接地址”访问RDS实例。连接ECS，请参见《弹性云服务器用户指南》中“登录弹性云服务器”的内容。
A<h5>安全套接层</h5><p>SecureSocketsLayer（SSL），即安全套接层。工作于套接字层的安全协议。该层位于TCP层和应用层之间，用于数据的加解密以及相关实体的认证。</p>B<h5>半同步复制</h5><p>正常情况下数据复制方式采用强同步复制方式，当Master向Slave复制数据出现异常的时候（Slave不可用或者双节点间的网络异常），Master会暂停对应用的响应，直到复制方式超时退化成异步复制。如果允许应用在此时更新数据，则Master不可用会引起数据不一致。当双节点间的数据复制恢复正常（Slave恢复或者网络恢复），异步复制会恢复成强同步复制。恢复成强同步复制的时间取决于半同步复制的实现方式。</p><h5>备份存储</h5><p>用于持久化保存数据库数据或日志等备份的底层存储资源。</p><h5>备机</h5><p>备机提供了集群的高可靠性。在创建RDS集群时，可选择是否同时创建备机，它的规格与主机一致。</p><h5>备用副本</h5><p>主数据库实例将数据复制到备用副本，以提供数据冗余、消除I/O冻结并在系统备份期间将延迟峰值降至最小。在计划内的系统维护期间，启用高可用（HA）特性的数据库实例可以提高可用性，并帮助保护数据库以防数据库实例发生故障。</p>C<h5>CSP</h5><p>参见</p><h5>存储类型</h5><p>按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。</p><h5>存储容量/存储空间</h5><p>可用于保存数据库数据和日志的底层存储资源大小。</p>D<h5>DBA</h5><p>参见</p><h5>队列深度</h5><p>队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。</p><h5>读写分离</h5><p>让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。</p>
B<h5>半同步复制</h5><p>正常情况下数据复制方式采用强同步复制方式，当Master向Slave复制数据出现异常的时候（Slave不可用或者双节点间的网络异常），Master会暂停对应用的响应，直到复制方式超时退化成异步复制。如果允许应用在此时更新数据，则Master不可用会引起数据不一致。当双节点间的数据复制恢复正常（Slave恢复或者网络恢复），异步复制会恢复成强同步复制。恢复成强同步复制的时间取决于半同步复制的实现方式。</p><h5>备份存储</h5><p>用于持久化保存数据库数据或日志等备份的底层存储资源。</p><h5>备机</h5><p>备机提供了集群的高可靠性。在创建RDS集群时，可选择是否同时创建备机，它的规格与主机一致。</p><h5>备用副本</h5><p>主数据库实例将数据复制到备用副本，以提供数据冗余、消除I/O冻结并在系统备份期间将延迟峰值降至最小。在计划内的系统维护期间，启用高可用（HA）特性的数据库实例可以提高可用性，并帮助保护数据库以防数据库实例发生故障。</p>C<h5>CSP</h5><p>参见</p><h5>存储类型</h5><p>按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。</p><h5>存储容量/存储空间</h5><p>可用于保存数据库数据和日志的底层存储资源大小。</p>D<h5>DBA</h5><p>参见</p><h5>队列深度</h5><p>队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。</p><h5>读写分离</h5><p>让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。</p>
C<h5>CSP</h5><p>参见</p><h5>存储类型</h5><p>按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。</p><h5>存储容量/存储空间</h5><p>可用于保存数据库数据和日志的底层存储资源大小。</p>D<h5>DBA</h5><p>参见</p><h5>队列深度</h5><p>队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。</p><h5>读写分离</h5><p>让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。</p>
D
F<h5>非关系型数据库</h5><p>按照非关系型数据结构来联系和组织的数据库。按不同的数据结构，可细分为以下几种：键值存储数据库（key-value）、列存储（Column-oriented）数据库、面向文档（Document-Oriented）数据库、图形数据库。常用非关系型数据库有：Memcached、Redis、MongoDB、Cassandra、HBase、MemacheDB、BerkeleyDB等。</p>G<h5>高可靠</h5><p>通常用来描述一个系统经过专门的设计，从而减少停工时间，而保持其服务的高度可用性。</p><h5>关系型数据库</h5><p>按照关系型数据结构来联系和组织的数据库。关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）。在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。常用关系型数据库有：Oracle数据库、MySQL数据库、MariaDB数据库、SQLserver数据库、Access数据库、DB2，PostgreSQL，Informix，Sybase等。</p><h5>关系型数据库服务</h5><p>关系型数据库服务（RDS）是一种可让客户在云中轻松设置、操作和扩展关系型数据库的托管服务。它在管理耗时的数据库管理任务的同时，提供经济高效的可调容量，使客户能够腾出时间专注于应用程序和业务。</p><h5>固态硬盘</h5><p>简称固盘，用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元（FLASH芯片、DRAM芯片）组成。固态硬盘在接口的规范和定义、功能及使用方法上与普通硬盘的完全相同，在产品外形和尺寸上也完全与普通硬盘一致。被广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空、导航设备等领域。</p><h5>故障转移</h5><p>数据库实例发生计划内或计划外的中断时，如果客户已启用多可用区，则RDS会自动切换到另一个可用区中的备用副本，因此客户可以尽快恢复数据库操作而无需管理干预。完成故障转移所用的时间取决于在主数据库实例变为不可用时的数据库活动和其他条件。故障转移时间通常为60-120秒。但是，事务较多或时间较长的恢复过程可能延长故障转移时间。完成故障转移后，RDS控制台UI还需要一段时间才能反映新的可用区。故障转移机制自动更改数据库实例的DNS记录，使其指向备用数据库实例。因此，客户需要重新建立与数据库实例之间的所有现有连接。由于JavaDNS缓存机制的工作原理，客户可能需要重新配置JVM环境。</p>H<h5>HA</h5><p>参见</p>I<h5>IOPS</h5><p>参见</p>
G<h5>高可靠</h5><p>通常用来描述一个系统经过专门的设计，从而减少停工时间，而保持其服务的高度可用性。</p><h5>关系型数据库</h5><p>按照关系型数据结构来联系和组织的数据库。关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）。在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。常用关系型数据库有：Oracle数据库、MySQL数据库、MariaDB数据库、SQLserver数据库、Access数据库、DB2，PostgreSQL，Informix，Sybase等。</p><h5>关系型数据库服务</h5><p>关系型数据库服务（RDS）是一种可让客户在云中轻松设置、操作和扩展关系型数据库的托管服务。它在管理耗时的数据库管理任务的同时，提供经济高效的可调容量，使客户能够腾出时间专注于应用程序和业务。</p><h5>固态硬盘</h5><p>简称固盘，用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元（FLASH芯片、DRAM芯片）组成。固态硬盘在接口的规范和定义、功能及使用方法上与普通硬盘的完全相同，在产品外形和尺寸上也完全与普通硬盘一致。被广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空、导航设备等领域。</p><h5>故障转移</h5><p>数据库实例发生计划内或计划外的中断时，如果客户已启用多可用区，则RDS会自动切换到另一个可用区中的备用副本，因此客户可以尽快恢复数据库操作而无需管理干预。完成故障转移所用的时间取决于在主数据库实例变为不可用时的数据库活动和其他条件。故障转移时间通常为60-120秒。但是，事务较多或时间较长的恢复过程可能延长故障转移时间。完成故障转移后，RDS控制台UI还需要一段时间才能反映新的可用区。故障转移机制自动更改数据库实例的DNS记录，使其指向备用数据库实例。因此，客户需要重新建立与数据库实例之间的所有现有连接。由于JavaDNS缓存机制的工作原理，客户可能需要重新配置JVM环境。</p>H<h5>HA</h5><p>参见</p>I<h5>IOPS</h5><p>参见</p>
H<h5>HA</h5><p>参见</p>I<h5>IOPS</h5><p>参见</p>
I
K<h5>快照保留期</h5><p>自动快照的保留时间，超过保留期的快照将被自动删除。</p>L<h5>冷备份</h5><p>系统处于停机或维护状态下的备份。这种情况下，备份的数据与系统中此时段的数据完全一致。</p><h5>逻辑备份</h5><p>利用SQL语言从数据库中抽取数据并存于二进制文件的过程。逻辑备份是指使用软件技术从数据库中导出数据并写入一个输出文件，该文件的格式一般与原数据库的文件格式不同，只是原数据库中数据内容的一个映像。因此，逻辑备份文件只能用来对数据库进行逻辑恢复，即数据导入，而不能按数据库原来的存储特征进行物理恢复。逻辑备份一般用于增量备份，即备份那些在上次备份以后改变的数据。</p>M<h5>每秒进行读写操作的次数</h5><p>每秒完成的I/O操作数。该指标以给定时间间隔内IOPS平均值的形式进行报告。RDS每分钟分别报告一次读取和写入IOPS。总IOPS是读取和写入IOPS的总和。IOPS典型值在每秒零至数万之间。</p>
L<h5>冷备份</h5><p>系统处于停机或维护状态下的备份。这种情况下，备份的数据与系统中此时段的数据完全一致。</p><h5>逻辑备份</h5><p>利用SQL语言从数据库中抽取数据并存于二进制文件的过程。逻辑备份是指使用软件技术从数据库中导出数据并写入一个输出文件，该文件的格式一般与原数据库的文件格式不同，只是原数据库中数据内容的一个映像。因此，逻辑备份文件只能用来对数据库进行逻辑恢复，即数据导入，而不能按数据库原来的存储特征进行物理恢复。逻辑备份一般用于增量备份，即备份那些在上次备份以后改变的数据。</p>M<h5>每秒进行读写操作的次数</h5><p>每秒完成的I/O操作数。该指标以给定时间间隔内IOPS平均值的形式进行报告。RDS每分钟分别报告一次读取和写入IOPS。总IOPS是读取和写入IOPS的总和。IOPS典型值在每秒零至数万之间。</p>
M
Q<h5>强同步复制</h5><p>应用发起更新（含增加、删除、修改操作）请求，Master完成操作后向Slave复制数据，Slave接收到数据后向Master返回成功信息，Master接到Slave的反馈后再响应应用。Master向Slave复制数据是同步进行的，因此Slave不可用会影响Master上的操作，而Master不可用不会引起数据不一致。</p>R<h5>RDB</h5><p>参见</p><h5>RDS</h5><p>参见</p><h5>RDS集群</h5><p>RDS是以集群为单位进行组织，一个集群由多个实例构成，集群中包含一个主机，还可能包含一个备机和若干个只读副本，它们一起为业务提供数据库服务。</p><h5>RDS实例</h5><p>RDS的最小管理单元是实例，一个实例代表了一个独立运行的关系型数据库，用户可以在RDS系统中自助创建及管理各种数据库类型的实例。</p><h5>热备份</h5><p>系统处于正常运转状态下的备份。这种情况下，由于系统中的数据可能随时在更新，备份的数据相对于系统的真实数据可有一定滞后。</p>S<h5>SSD</h5><p>参见</p><h5>SSL</h5><p>参见</p><h5>事务速率/数据库吞吐量</h5><p>在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。</p><h5>手动快照</h5><p>手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。</p><h5>数据复制</h5><p>数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。</p><h5>数据库存储</h5><p>用于持久化保存数据库数据和日志的底层存储资源。</p><h5>数据库管理员</h5><p>数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。</p><h5>数据库类型</h5><p>数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。</p><h5>数据库连接数</h5><p>连接到数据库实例的客户端会话数。</p><h5>数据库迁移</h5><p>随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。</p><h5>数据库实例</h5><p>数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。</p><h5>数据库实例标识符</h5><p>每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。</p><h5>数据库实例类</h5><p>数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。</p><h5>数据库实例生命周期</h5><p>数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。</p><h5>数据库引擎</h5><p>数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。</p><h5>数据库主用户帐户</h5><p>数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。</p>T<h5>提交延迟</h5><p>从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。</p><h5>吞吐量</h5><p>每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。</p>
R<h5>RDB</h5><p>参见</p><h5>RDS</h5><p>参见</p><h5>RDS集群</h5><p>RDS是以集群为单位进行组织，一个集群由多个实例构成，集群中包含一个主机，还可能包含一个备机和若干个只读副本，它们一起为业务提供数据库服务。</p><h5>RDS实例</h5><p>RDS的最小管理单元是实例，一个实例代表了一个独立运行的关系型数据库，用户可以在RDS系统中自助创建及管理各种数据库类型的实例。</p><h5>热备份</h5><p>系统处于正常运转状态下的备份。这种情况下，由于系统中的数据可能随时在更新，备份的数据相对于系统的真实数据可有一定滞后。</p>S<h5>SSD</h5><p>参见</p><h5>SSL</h5><p>参见</p><h5>事务速率/数据库吞吐量</h5><p>在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。</p><h5>手动快照</h5><p>手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。</p><h5>数据复制</h5><p>数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。</p><h5>数据库存储</h5><p>用于持久化保存数据库数据和日志的底层存储资源。</p><h5>数据库管理员</h5><p>数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。</p><h5>数据库类型</h5><p>数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。</p><h5>数据库连接数</h5><p>连接到数据库实例的客户端会话数。</p><h5>数据库迁移</h5><p>随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。</p><h5>数据库实例</h5><p>数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。</p><h5>数据库实例标识符</h5><p>每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。</p><h5>数据库实例类</h5><p>数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。</p><h5>数据库实例生命周期</h5><p>数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。</p><h5>数据库引擎</h5><p>数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。</p><h5>数据库主用户帐户</h5><p>数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。</p>T<h5>提交延迟</h5><p>从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。</p><h5>吞吐量</h5><p>每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。</p>
S<h5>SSD</h5><p>参见</p><h5>SSL</h5><p>参见</p><h5>事务速率/数据库吞吐量</h5><p>在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。</p><h5>手动快照</h5><p>手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。</p><h5>数据复制</h5><p>数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。</p><h5>数据库存储</h5><p>用于持久化保存数据库数据和日志的底层存储资源。</p><h5>数据库管理员</h5><p>数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。</p><h5>数据库类型</h5><p>数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。</p><h5>数据库连接数</h5><p>连接到数据库实例的客户端会话数。</p><h5>数据库迁移</h5><p>随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。</p><h5>数据库实例</h5><p>数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。</p><h5>数据库实例标识符</h5><p>每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。</p><h5>数据库实例类</h5><p>数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。</p><h5>数据库实例生命周期</h5><p>数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。</p><h5>数据库引擎</h5><p>数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。</p><h5>数据库主用户帐户</h5><p>数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。</p>T<h5>提交延迟</h5><p>从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。</p><h5>吞吐量</h5><p>每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。</p>
T
W<h5>网络流量</h5><p>网络接收吞吐量，网络传输吞吐量–每秒出入数据库实例的网络流量速率（以兆字节为单位）。</p><h5>物理备份</h5><p>是将实际组成数据库的操作系统文件从一处拷贝到另一处的备份过程，通常是从磁盘到磁带。物理备份又分为冷备份、热备份。</p>X<h5>性能指标</h5><p>反映数据库实例性能状况的指标，例如CPU使用率、内存使用率、存储空间使用率、网络流量、数据库连接数、事务速率/数据库吞吐量、提交延迟、存储延迟、存储IOPS、存储吞吐量、存储队列深度等。</p><h5>许可模式</h5><p>与数据库引擎关联的许可类型。</p>Y<h5>异步复制</h5><p>应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。</p><h5>源数据库实例</h5><p>在数据复制关系中，作为数据源的数据库实例。</p><h5>云服务提供商</h5><p>提供云计算服务的公司或机构。</p>Z<h5>增量备份</h5><p>RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。</p><h5>只读副本</h5><p>另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。</p><h5>主数据库实例</h5><p>在对外提供数据库服务的各节点中，提供写服务的数据库实例。</p><h5>自动快照</h5><p>RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。</p>
X<h5>性能指标</h5><p>反映数据库实例性能状况的指标，例如CPU使用率、内存使用率、存储空间使用率、网络流量、数据库连接数、事务速率/数据库吞吐量、提交延迟、存储延迟、存储IOPS、存储吞吐量、存储队列深度等。</p><h5>许可模式</h5><p>与数据库引擎关联的许可类型。</p>Y<h5>异步复制</h5><p>应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。</p><h5>源数据库实例</h5><p>在数据复制关系中，作为数据源的数据库实例。</p><h5>云服务提供商</h5><p>提供云计算服务的公司或机构。</p>Z<h5>增量备份</h5><p>RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。</p><h5>只读副本</h5><p>另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。</p><h5>主数据库实例</h5><p>在对外提供数据库服务的各节点中，提供写服务的数据库实例。</p><h5>自动快照</h5><p>RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。</p>
Y<h5>异步复制</h5><p>应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。</p><h5>源数据库实例</h5><p>在数据复制关系中，作为数据源的数据库实例。</p><h5>云服务提供商</h5><p>提供云计算服务的公司或机构。</p>Z<h5>增量备份</h5><p>RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。</p><h5>只读副本</h5><p>另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。</p><h5>主数据库实例</h5><p>在对外提供数据库服务的各节点中，提供写服务的数据库实例。</p><h5>自动快照</h5><p>RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。</p>
Z
SecureSocketsLayer（SSL），即安全套接层。工作于套接字层的安全协议。该层位于TCP层和应用层之间，用于数据的加解密以及相关实体的认证。
正常情况下数据复制方式采用强同步复制方式，当Master向Slave复制数据出现异常的时候（Slave不可用或者双节点间的网络异常），Master会暂停对应用的响应，直到复制方式超时退化成异步复制。如果允许应用在此时更新数据，则Master不可用会引起数据不一致。当双节点间的数据复制恢复正常（Slave恢复或者网络恢复），异步复制会恢复成强同步复制。恢复成强同步复制的时间取决于半同步复制的实现方式。
用于持久化保存数据库数据或日志等备份的底层存储资源。
备机提供了集群的高可靠性。在创建RDS集群时，可选择是否同时创建备机，它的规格与主机一致。
主数据库实例将数据复制到备用副本，以提供数据冗余、消除I/O冻结并在系统备份期间将延迟峰值降至最小。在计划内的系统维护期间，启用高可用（HA）特性的数据库实例可以提高可用性，并帮助保护数据库以防数据库实例发生故障。
参见
按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。
可用于保存数据库数据和日志的底层存储资源大小。
参见
队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。
让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。
正常情况下数据复制方式采用强同步复制方式，当Master向Slave复制数据出现异常的时候（Slave不可用或者双节点间的网络异常），Master会暂停对应用的响应，直到复制方式超时退化成异步复制。如果允许应用在此时更新数据，则Master不可用会引起数据不一致。当双节点间的数据复制恢复正常（Slave恢复或者网络恢复），异步复制会恢复成强同步复制。恢复成强同步复制的时间取决于半同步复制的实现方式。
用于持久化保存数据库数据或日志等备份的底层存储资源。
备机提供了集群的高可靠性。在创建RDS集群时，可选择是否同时创建备机，它的规格与主机一致。
主数据库实例将数据复制到备用副本，以提供数据冗余、消除I/O冻结并在系统备份期间将延迟峰值降至最小。在计划内的系统维护期间，启用高可用（HA）特性的数据库实例可以提高可用性，并帮助保护数据库以防数据库实例发生故障。
参见
按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。
可用于保存数据库数据和日志的底层存储资源大小。
参见
队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。
让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。
参见
按照存储资源的不同维度属性，可分为不同类型。例如：按照存储介质的不同，可分为磁介质和固态硬盘（SSD）；按照I/O级别的不同，可分为普通I/O、高I/O、超高I/O。
可用于保存数据库数据和日志的底层存储资源大小。
参见
队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。
让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。
参见
队列中等待处理的I/O请求数量。这些是由应用程序提交但由于设备忙于处理其他I/O请求而尚未发送到设备的I/O请求。在队列中等待所用的时间是延迟和处理时间的一部分（不以指标形式提供）。该指标以给定时间间隔内队列深度平均值的形式进行报告。RDS每分钟报告一次队列深度。队列深度典型值在零至数百之间。
让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作。
按照非关系型数据结构来联系和组织的数据库。按不同的数据结构，可细分为以下几种：键值存储数据库（key-value）、列存储（Column-oriented）数据库、面向文档（Document-Oriented）数据库、图形数据库。常用非关系型数据库有：Memcached、Redis、MongoDB、Cassandra、HBase、MemacheDB、BerkeleyDB等。
通常用来描述一个系统经过专门的设计，从而减少停工时间，而保持其服务的高度可用性。
按照关系型数据结构来联系和组织的数据库。关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）。在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。常用关系型数据库有：Oracle数据库、MySQL数据库、MariaDB数据库、SQLserver数据库、Access数据库、DB2，PostgreSQL，Informix，Sybase等。
关系型数据库服务（RDS）是一种可让客户在云中轻松设置、操作和扩展关系型数据库的托管服务。它在管理耗时的数据库管理任务的同时，提供经济高效的可调容量，使客户能够腾出时间专注于应用程序和业务。
简称固盘，用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元（FLASH芯片、DRAM芯片）组成。固态硬盘在接口的规范和定义、功能及使用方法上与普通硬盘的完全相同，在产品外形和尺寸上也完全与普通硬盘一致。被广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空、导航设备等领域。
数据库实例发生计划内或计划外的中断时，如果客户已启用多可用区，则RDS会自动切换到另一个可用区中的备用副本，因此客户可以尽快恢复数据库操作而无需管理干预。完成故障转移所用的时间取决于在主数据库实例变为不可用时的数据库活动和其他条件。故障转移时间通常为60-120秒。但是，事务较多或时间较长的恢复过程可能延长故障转移时间。完成故障转移后，RDS控制台UI还需要一段时间才能反映新的可用区。故障转移机制自动更改数据库实例的DNS记录，使其指向备用数据库实例。因此，客户需要重新建立与数据库实例之间的所有现有连接。由于JavaDNS缓存机制的工作原理，客户可能需要重新配置JVM环境。
参见
参见
通常用来描述一个系统经过专门的设计，从而减少停工时间，而保持其服务的高度可用性。
按照关系型数据结构来联系和组织的数据库。关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）。在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。常用关系型数据库有：Oracle数据库、MySQL数据库、MariaDB数据库、SQLserver数据库、Access数据库、DB2，PostgreSQL，Informix，Sybase等。
关系型数据库服务（RDS）是一种可让客户在云中轻松设置、操作和扩展关系型数据库的托管服务。它在管理耗时的数据库管理任务的同时，提供经济高效的可调容量，使客户能够腾出时间专注于应用程序和业务。
简称固盘，用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单元（FLASH芯片、DRAM芯片）组成。固态硬盘在接口的规范和定义、功能及使用方法上与普通硬盘的完全相同，在产品外形和尺寸上也完全与普通硬盘一致。被广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空、导航设备等领域。
数据库实例发生计划内或计划外的中断时，如果客户已启用多可用区，则RDS会自动切换到另一个可用区中的备用副本，因此客户可以尽快恢复数据库操作而无需管理干预。完成故障转移所用的时间取决于在主数据库实例变为不可用时的数据库活动和其他条件。故障转移时间通常为60-120秒。但是，事务较多或时间较长的恢复过程可能延长故障转移时间。完成故障转移后，RDS控制台UI还需要一段时间才能反映新的可用区。故障转移机制自动更改数据库实例的DNS记录，使其指向备用数据库实例。因此，客户需要重新建立与数据库实例之间的所有现有连接。由于JavaDNS缓存机制的工作原理，客户可能需要重新配置JVM环境。
参见
参见
参见
参见
参见
自动快照的保留时间，超过保留期的快照将被自动删除。
系统处于停机或维护状态下的备份。这种情况下，备份的数据与系统中此时段的数据完全一致。
利用SQL语言从数据库中抽取数据并存于二进制文件的过程。逻辑备份是指使用软件技术从数据库中导出数据并写入一个输出文件，该文件的格式一般与原数据库的文件格式不同，只是原数据库中数据内容的一个映像。因此，逻辑备份文件只能用来对数据库进行逻辑恢复，即数据导入，而不能按数据库原来的存储特征进行物理恢复。逻辑备份一般用于增量备份，即备份那些在上次备份以后改变的数据。
每秒完成的I/O操作数。该指标以给定时间间隔内IOPS平均值的形式进行报告。RDS每分钟分别报告一次读取和写入IOPS。总IOPS是读取和写入IOPS的总和。IOPS典型值在每秒零至数万之间。
系统处于停机或维护状态下的备份。这种情况下，备份的数据与系统中此时段的数据完全一致。
利用SQL语言从数据库中抽取数据并存于二进制文件的过程。逻辑备份是指使用软件技术从数据库中导出数据并写入一个输出文件，该文件的格式一般与原数据库的文件格式不同，只是原数据库中数据内容的一个映像。因此，逻辑备份文件只能用来对数据库进行逻辑恢复，即数据导入，而不能按数据库原来的存储特征进行物理恢复。逻辑备份一般用于增量备份，即备份那些在上次备份以后改变的数据。
每秒完成的I/O操作数。该指标以给定时间间隔内IOPS平均值的形式进行报告。RDS每分钟分别报告一次读取和写入IOPS。总IOPS是读取和写入IOPS的总和。IOPS典型值在每秒零至数万之间。
每秒完成的I/O操作数。该指标以给定时间间隔内IOPS平均值的形式进行报告。RDS每分钟分别报告一次读取和写入IOPS。总IOPS是读取和写入IOPS的总和。IOPS典型值在每秒零至数万之间。
应用发起更新（含增加、删除、修改操作）请求，Master完成操作后向Slave复制数据，Slave接收到数据后向Master返回成功信息，Master接到Slave的反馈后再响应应用。Master向Slave复制数据是同步进行的，因此Slave不可用会影响Master上的操作，而Master不可用不会引起数据不一致。
参见
参见
RDS是以集群为单位进行组织，一个集群由多个实例构成，集群中包含一个主机，还可能包含一个备机和若干个只读副本，它们一起为业务提供数据库服务。
RDS的最小管理单元是实例，一个实例代表了一个独立运行的关系型数据库，用户可以在RDS系统中自助创建及管理各种数据库类型的实例。
系统处于正常运转状态下的备份。这种情况下，由于系统中的数据可能随时在更新，备份的数据相对于系统的真实数据可有一定滞后。
参见
参见
在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。
手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。
数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。
用于持久化保存数据库数据和日志的底层存储资源。
数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。
数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。
连接到数据库实例的客户端会话数。
随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。
数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。
每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。
数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。
数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。
数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。
数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。
从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。
每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。
参见
参见
RDS是以集群为单位进行组织，一个集群由多个实例构成，集群中包含一个主机，还可能包含一个备机和若干个只读副本，它们一起为业务提供数据库服务。
RDS的最小管理单元是实例，一个实例代表了一个独立运行的关系型数据库，用户可以在RDS系统中自助创建及管理各种数据库类型的实例。
系统处于正常运转状态下的备份。这种情况下，由于系统中的数据可能随时在更新，备份的数据相对于系统的真实数据可有一定滞后。
参见
参见
在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。
手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。
数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。
用于持久化保存数据库数据和日志的底层存储资源。
数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。
数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。
连接到数据库实例的客户端会话数。
随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。
数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。
每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。
数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。
数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。
数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。
数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。
从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。
每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。
参见
参见
在特定时间间隔内完成的事务数量，通常用TPM（每分钟事务数）或TPS（每秒钟事务数）表示。事务速率的另一个常用术语是数据库吞吐量，不应将其与磁盘指标的吞吐量混淆。这两个指标不一定有关系；数据库具有高事务速率，因此存在极少或根本就没有磁盘吞吐量，例如，包含缓存读取的工作负载。
手动快照是由客户启动的数据库实例的全量快照。手动快照可让客户按需的对数据库实例进行全量快照。手动快照会一直保存，直到客户手动删除。
数据从Master复制到Slave，复制方式有强同步复制、半同步复制和异步复制。
用于持久化保存数据库数据和日志的底层存储资源。
数据库管理员（DBA）是负责管理数据库的人。DBA使用专门的软件存储和组织数据。该角色可能包括容量规划，安装，配置，数据库设计，迁移，性能监测，安全性，故障排除，以及备份和数据恢复。
数据库通常分为层次式数据库、网络式数据库和关系式数据库三种。而不同的数据库是按不同的数据结构来联系和组织的。而在当今的互联网中，最常见的数据库模型主要是两种，即关系型数据库和非关系型数据库。
连接到数据库实例的客户端会话数。
随着业务的变化，数据库也需要随着应用业务从一个环境迁移到另一个环境，例如从本地DC迁移到云上，或者从某个云迁移到另一个云上。
数据库实例是在云中运行的独立数据库环境。它是RDS的基本构建数据块。一个数据库实例可以包含多个由数据库用户创建的数据库，并且可以使用与独立数据库实例相同的客户端工具和应用程序进行访问。创建和修改数据库实例非常简单，使用RDS控制台或RDSAPI即可。
每个数据库实例都有一个数据库实例标识符。在与RDS控制台和RDSAPI交互时，客户提供的名称可唯一标识数据库实例。对于某个地区中的客户而言，数据库实例标识符必须具有唯一性。
数据库实例的计算和内存容量由数据库实例类决定。通过更改数据库实例类，可以更改数据库实例的可用CPU和内存；要更改数据库实例类，必须修改数据库实例。
数据库实例的生命周期包括创建、修改、维护并升级、执行备份和还原、重启以及删除实例。
数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。每个数据库实例均支持数据库引擎。
数据库主用户帐户与客户云帐户不同，它仅在RDS环境内使用，用来控制对客户的数据库实例的访问。数据库主用户帐户是本机数据库用户帐户，可用来连接数据库实例。在创建数据库实例时，客户可以指定与每个数据库实例相关联的数据库主用户帐户和密码。创建数据库实例后，客户可以使用数据库主用户证书连接到数据库。之后，客户也可以创建其他数据库用户帐户，以便限制谁能访问其数据库实例。
从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。
每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。
从提交请求到收到确认之间的已用时间。该指标与存储写入延迟指标密切相关。存储写入延迟低可能会导致提交延迟低。
每秒传到或传出磁盘的字节数。该指标以给定时间间隔内吞吐量平均值的形式进行报告。RDS每分钟分别报告一次读取和写入吞吐量，所用单位为每秒兆字节（MB/s）。吞吐量的典型值在零到I/O通道的最大带宽之间。
网络接收吞吐量，网络传输吞吐量–每秒出入数据库实例的网络流量速率（以兆字节为单位）。
是将实际组成数据库的操作系统文件从一处拷贝到另一处的备份过程，通常是从磁盘到磁带。物理备份又分为冷备份、热备份。
反映数据库实例性能状况的指标，例如CPU使用率、内存使用率、存储空间使用率、网络流量、数据库连接数、事务速率/数据库吞吐量、提交延迟、存储延迟、存储IOPS、存储吞吐量、存储队列深度等。
与数据库引擎关联的许可类型。
应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。
在数据复制关系中，作为数据源的数据库实例。
提供云计算服务的公司或机构。
RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。
另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。
在对外提供数据库服务的各节点中，提供写服务的数据库实例。
RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。
反映数据库实例性能状况的指标，例如CPU使用率、内存使用率、存储空间使用率、网络流量、数据库连接数、事务速率/数据库吞吐量、提交延迟、存储延迟、存储IOPS、存储吞吐量、存储队列深度等。
与数据库引擎关联的许可类型。
应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。
在数据复制关系中，作为数据源的数据库实例。
提供云计算服务的公司或机构。
RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。
另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。
在对外提供数据库服务的各节点中，提供写服务的数据库实例。
RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。
应用发起更新（含增加、删除、修改操作）请求，Master完成相应操作后立即响应应用，Master向Slave异步复制数据。因此异步复制方式下，Slave不可用不影响主库上的操作，而Master不可用有较小概率会引起数据不一致。
在数据复制关系中，作为数据源的数据库实例。
提供云计算服务的公司或机构。
RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。
另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。
在对外提供数据库服务的各节点中，提供写服务的数据库实例。
RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。
RDS系统自动每5分钟对上一次自动快照或增量备份后更新的数据进行备份。
另一数据库实例的活动副本。源数据库实例上的任意数据更新都会利用数据库引擎内置的复制功能复制到只读副本数据库实例。
在对外提供数据库服务的各节点中，提供写服务的数据库实例。
RDS系统自动创建数据库实例的全量快照。用户在创建RDS实例时可配置自动快照开始时间和自动快照保留期。
目前证书管理服务只提供免费版的DVSSL证书，一个证书只能绑定一个域名。
用户可以在证书管理界面申请证书或直接下载已签发的证书，步骤如下：登录管理控制台。选择“安全&gt;证书管理服务”，进入申请证书列表界面。单击界面左上角的“申请证书”。目前证书管理服务平台只支持申请一种证书，即免费版的DVSSL证书，一个证书只能绑定一个域名，如所示。申请证书在阅读并同意隐私保护后，勾选“我已阅读并同意《隐私保护》”，单击“确定”。新申请的证书可在证书列表中查看到。说明：此时“证书状态”为“待补充信息”，需要绑定域名。在申请的证书所在行，单击“补充信息”进行域名绑定。在补充信息界面，输入绑定的域名，单击“确定”，如所示。说明：此时“证书状态”为“验证中”，需要去域名注册平台进行DNS验证。补充信息在申请证书列表界面，单击证书名称前面的获取DNS记录信息，如所示。其中“主机记录”的值需要根据证书绑定的域名选择：<ulid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_ul29162967111037"><liid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_li29193402111221">如果绑定的域名以“www”开头或者是主域名，例如“www.huawei.com”、“huawei.com”，则“主机记录”为“@”。如果绑定的域名是二级域名或二级以上的域名，则“主机记录”为主域名的前缀。例如：<ulid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_ul28022814115542"><liid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_li39109778115555">“cloud.huawei.com”，“主机记录”为“cloud”。“123.abc.huawei.com”，“主机记录”为“123.abc”。用户需要在申请证书后的一天以内，在域名注册平台进行DNS验证，验证时需要输入获取的DNS记录信息。验证后有如下结果：<ulid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_ul4245487794840"><liid="ZH-CN_TOPIC_0044758267__zh-cn_topic_0041373838_li2942689194943">如果DNS验证成功，证书状态会变为“已签发”。如果DNS验证失败，证书状态会变为“验证失败”。如果用户超过一天没有去注册该域名的平台进行DNS验证导致失败，证书状态会变为“超时失败”。如果用户域名中包含非法关键字导致安全审核失败，证书状态会变为“失败”。只有状态为“已签发”的证书才能使用。在“已签发”状态的证书所在行，单击“下载”，浏览器自动下载证书到本地。用户获取证书后可以将其部署到其他服务中。说明：只有已签发或已过期的证书才可以下载。
DNS验证，是指在域名注册平台通过解析指定的DNS记录，验证域名所有权。
S
Z
参见
SSL证书是一种遵守SSL协议的服务器数字证书，由受信任的根证书颁发机构颁发。
证书管理服务是一个SSL（SecureSocketLayer）证书管理平台，平台联合全球知名数字证书服务机构（如TrustAsia）为用户提供申请SSL证书的功能，用户也可以将本地的外部SSL证书上传到平台，实现用户对内部和外部SSL证书的统一管理。
在应用没有容器化之前，原先一个虚机上会装多个组件，进程间会有通信。但在做容器化拆分的时候，往往直接按进程拆分容器，比如业务进程一个容器，监控日志处理或者本地数据放在另一个容器，并且有独立的生命周期。这时如果他们分布在网络中两个较远的点，请求经过多次转发，性能会很差。亲和性可以实现就近部署，增强网络能力实现通信上的就近路由，减少网络的损耗。反亲和性主要是出于高可靠性考虑，尽量分散实例，某个节点故障的时候，对应用的影响只是N分之一或者只是一个实例。
根据应用的部署特性，平台把应用拆解成最小的部署实例，应用调度器实时监控应用的实例信息，当发现有新的pod产生需要调度的时候就会对集群中所有的剩余资源（计算、存储、网络）进行计算，最后得出最适合的调度目标节点。平台支持多种调度算法，包括：应用和节点之间的亲和性调度、应用间的亲和/反亲和调度。
删除堆栈时，堆栈状态一直显示为“删除中”，最后提示超时。堆栈状态显示“异常”，操作状态为“卸载失败”，再次删除依然失败。查看堆栈执行日志，出现“timeout”相关字段。
在堆栈详情页面，单击“堆栈元素&gt;应用”。在“应用”中，单击展开应用组。单击应用名称，系统跳转到应用详情页面。单击“更多&gt;删除”，删除应用。说明：若堆栈包含多个应用，需将应用均删除成功，才能确保堆栈成功删除。（可选）若中删除应用失败，请根据以下步骤删除应用对应的pod。<oltype="a"id="ZH-CN_TOPIC_0053463879__zh-cn_topic_0048116621_ol129673258217"><liid="ZH-CN_TOPIC_0053463879__zh-cn_topic_0048116621_li17363182342117">在主菜单中选择“应用&gt;资源管理&gt;其他资源”。选择类型为Pod，在资源名称中输入待删除的应用名称，单击搜索。搜索Pod资源删除应用对应的pod。说明：由于一个应用通常由一个或多个Pod组成，应用对应的Pod名称为：应用名称-动态生成的字母。单击“编排&gt;堆栈”。在待删除堆栈后，单击“更多&gt;删除”，删除堆栈。
每一个节点对应一台虚拟机，容器应用运行在节点上。节点上运行着代理程序（kubelet），用于管理节点上运行的容器实例。节点规格最小是CPU为1core，内存为2048MB；最大是CPU为32core，内存为128GB。
环境变量是指容器运行环境中设定的一个变量，您可以在创建容器模板时设定不超过30个的环境变量；环境变量可以在应用部署后修改，为应用提供极大的灵活性。
详细概念请参照。编排、设计包、模板、堆栈、设计器的相互关系可参考。
有状态容器应用：应用有多个实例，且每个实例承担不一样的功能，且每个实例间有依赖和前后启动顺序关系。通常用于有数据持久化存储要求的应用。无状态容器应用：应用实例间互相不依赖，任意一个Web请求完全与其他请求隔离，当请求端提出请求时，请求本身包含了相应端为相应这一请求所需的全部信息。无状态容器应用更易实现可靠性以及可伸缩性。
TOSCA（TopologyandOrchestrationSpecificationforCloudApplication）是开放标准联盟OASIS管理的独立技术委员会之一，其发布的云应用拓扑及编排描述规范（简称TOSCA规范）目标是规范多厂商云应用生命周期管理流程。ServiceStage应用拓扑模型如所示。
可以通过申请弹性IP并将弹性IP绑定到弹性云服务器上，实现弹性云服务器访公网的目的。
登录控制台。在系统首页，选择“网络&gt;虚拟私有云”。在左侧导航树，单击“弹性IP”。单击“申请弹性IP”。操作步骤请参考“”。说明：在绑定IP时，选择一台云服务器，应用即可被外网访问。
在上传软件包时，在软件包满足系统要求的情况下，界面依然出现如下提示：上传软件包后，系统提示“无权限访问，请联系管理员”。
在谷歌浏览器中，单击“更多工具&gt;清除浏览数据”。清除浏览数据在弹出的清除浏览数据窗口中，保持默认勾选，单击“清除浏览数据”。
问：对于创建节点失败期间回滚的资源，我是否需要付费？是。无论节点是否创建成功，创建节点期间使用的云服务器资源均需收费，该过程会根据公有云服务器的统一收费策略来收取费用。
若经常使用某个功能，可参照本章节收藏该功能的菜单。本章节以收藏“应用&gt;资源管理”为例进行说明。系统最多可以显示最近的29个收藏。
鼠标移动到菜单栏的“资源管理”。资源管理后面会出现，如。收藏菜单单击，收藏该菜单。
服务依赖是指订购服务时必须先指定其依赖的服务实例。例如，服务A依赖服务B，如果被依赖的服务B实例还没有购买，则无法订购服务A的实例。服务依赖分“被别人依赖”和“依赖别人”，使用时需要注意区分。
服务实例创建之后，如果要访问这个服务实例，都需要知道它的详细信息。这些信息不仅仅是地址和端口，更多的是业务上属性，比如服务实例的账号信息：用户名，密码，key文件等。这类实例的访问信息叫做服务访问凭证。常见的凭证格式有：Mysql服务{'hostname'=&gt;host,//MySQL数据库主机名或IP地址'port'=&gt;port,//MySQL数据库端口号'name'=&gt;database,//MySQL数据库名称'username'=&gt;username,//MySQL数据库用户名'password'=&gt;password,//MySQL数据库密码'uri'=&gt;mysql://username:password@host:port/database?reconnect=true,'jdbc'=&gt;jdbc:mysql://username:password@host:port/database?reconnect=true}Redis服务{url:"redis://username:password@host:port"}Mongobd服务{url:"mongodb://username:password@host:port/db"}
弹性文件服务（ScalableFileService,SFS）提供按需扩展的高性能文件存储，可供云上多个弹性云服务器（ElasticCloudServer,ECS）共享访问。SFS提供标准的文件访问协议，用户可以将现有应用和工具与SFS无缝集成。文件系统提供简单易用的操作界面，用户可以简单快捷地创建和配置文件系统，快速完成文件系统的部署、扩展和优化等运维事务。此外，文件系统还具备高可靠和高可用的特点。SFS文件系统的性能随容量增加而提升，可广泛应用于业务应用场景，例如媒体处理、高性能计算、内容管理和主目录。
不能。文件系统只能在同一个VPC下的相同或不同可用分区间访问。
文件系统设计可达99.999999%（8个9）的数据持久度，通过对象存储方式保障数据安全、完整。
文件系统暂不支持在Windows操作系统的云服务器上实现挂载，推荐使用Linux操作系统云服务器挂载共享路径，具体支持的操作系统类型参见。
弹性文件服务支持标准的NFSv3协议，实现文件共享功能。
公测阶段，弹性文件服务不支持扩容功能。
目前每个帐户可创建最多10个共享文件系统，且支持同时创建，单个文件系统最大使用容量为512000GB。
文件系统仅可被同一VPC下云服务器共享使用。当云服务器挂载该文件系统，即可实现文件共享，并阻止其他VPC下的云服务器访问。
弹性文件服务可通过文件系统增强工作负载和性能，使用场景包括媒体处理、日志管理、内容管理和主目录和高性能计算等。
文件系统的数据使用ErasureCode（纠错码）方式存储数据，保障数据安全。
要访问您的文件系统，您需要在Linux云服务器上使用挂载命令挂载文件系统。挂载完成后，可共享您的文件系统中的文件和目录。
A<h5>AZ</h5><p>参见</p>D<h5>地域</h5><p>地域是一个地理区域的概念。我们根据地理区域的不同将全国划分成不同的地域。选择地域时通常根据就近原则进行选择，这样可以减少访问服务的网络时延，提高访问速度。</p>
D
F-J
K<h5>可用分区</h5><p>可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内的其它可用分区，可用分区间通过内网访问。</p>N<h5>NFS</h5><p>参见</p>
N
S<h5>SFS</h5><p>参见</p>T<h5>弹性文件服务</h5><p>弹性文件服务是一个按需扩展的高性能文件存储，提供标准的文件访问协议，可供云上多个弹性云服务器（ECS）共享访问。</p>
T
U-Z
参见
地域是一个地理区域的概念。我们根据地理区域的不同将全国划分成不同的地域。选择地域时通常根据就近原则进行选择，这样可以减少访问服务的网络时延，提高访问速度。
地域是一个地理区域的概念。我们根据地理区域的不同将全国划分成不同的地域。选择地域时通常根据就近原则进行选择，这样可以减少访问服务的网络时延，提高访问速度。
参见
可用分区是同一服务区内，电力和网络互相独立的地理区域，一般是一个独立的物理机房，这样可以保证可用分区的独立性。一个地域内有多个可用分区，一个可用分区发生故障后不会影响同一地域内的其它可用分区，可用分区间通过内网访问。
参见
参见
参见
弹性文件服务是一个按需扩展的高性能文件存储，提供标准的文件访问协议，可供云上多个弹性云服务器（ECS）共享访问。
弹性文件服务是一个按需扩展的高性能文件存储，提供标准的文件访问协议，可供云上多个弹性云服务器（ECS）共享访问。
一种使用于分散式文件系统的协议，通过网络让不同的机器、不同的操作系统能够彼此分享数据，让应用程序在客户端通过网络访问位于服务器磁盘中的数据，是在类Unix系统间实现磁盘文件共享的一种方法。
通过标准的NFSv3协议为客户共享文件存储服务，用于网络文件远程访问，用户通过租户管理控制台创建共享目录后，即可在多个ECS实例内进行挂载，并通过标准的POSIX接口对文件系统进行访问。
安全指数服务是关于云环境的一个安全评估服务，为用户提供统一、直观、多维度的安全视图。用户可以通过安全指数服务了解所使用云环境是否已合理配置，所采取的安全措施是否已经足够，以及主动安全、被动安全的概况。用户在安全指数服务中可以快速地进入各安全相关项进行配置。
此项服务是免费提供的。
安全指数服务分为三个等级：安全、低风险、高风险。
首先，需要确认页面上方的几个评分圈的闭合程度，闭合程度越高越安全。例如，中通过闭合度比较，可以看出左侧评分圈较不安全，右侧评分圈较安全。评分圈闭合度对比查看其中不太安全的子项，例如中左侧评分圈的不安全子项包括：“Anti-DDoS防护”和“安全组”，查看页面下方的“Anti-DDoS防护”概况和“安全组”概况。<oltype="a"id="ZH-CN_TOPIC_0037035415__zh-cn_topic_0035910808_ol18710936"><liid="ZH-CN_TOPIC_0037035415__zh-cn_topic_0035910808_li34180703">发现有3个IP未开启Anti-DDoS防护，因此用户可以进入“Anti-DDoS防护”的详情中开启Anti-DDoS防护。此外还有3台主机属于不安全的安全组，进入“安全组”的详情中，修改安全组配置即可。当用户按照页面提示逐项处理完不安全的项后，回到安全指数服务页面，单击右上角的，将发现提示当前是“安全”了。
如果用户刚进行了安全配置的修改，可以单击各个安全子项概况右上角的，以便后台立即对数据进行刷新及重新进行评估。
A
S
安全指数服务是关于云环境的一个安全评估服务，为用户提供统一、直观、多维度的安全视图。用户可以通过安全指数服务了解所使用云环境是否已合理配置，所采取的安全措施是否已经足够，以及主动安全、被动安全的概况。用户在安全指数服务中可以快速地进入各安全相关项进行配置。
参见
消息通知服务的突出优势有以下三点：消息通知体系需要大量投入资源进行开发以及维护，使用SMN服务可以大幅降低成本。无需考虑消息通知体系的可靠性以及扩容问题。消息通知服务接入简单、学习成本低。
消息通知服务支持的协议有“邮件”、“短信”、“Functionstage”、“HTTP”和“HTTPS”。“HTTP”、“HTTPS”：消息以HTTP/HTTPS请求的形式发送到订阅的URL，目前只支持公网域名。“邮件”：消息以电子邮件形式发送到订阅的邮箱地址。“短信”：消息以短信文本消息发送到订阅的电话号码。“Functionstage”：使用已发布的消息的负载调用订阅的Functionstage终端。
我们提供免费配额，超出部分按需收费。
主题名称必须由大写和小写字母，数字，下划线_和-连字符组成，长度在1到256个字符之间，必须由大写、小写字母或数字开头。
每个用户可以最多创建3000个主题。
每个主题最多支持10000个订阅者。
向主题发布消息没有限量。
按照70个字符计算为一条短信，超过70个字符，则按照67个字符计算为一条短信，短信最长不超过500个字符。
单个主题支持多种传输协议定义，目前支持HTTP/HTTPS、邮件、Functionstage以及短信传输协议。
暂不支持主题传输协议的设置。
订阅终端地址不允许修改。如果需要更换某个主题下的订阅终端地址，可删除原有的订阅终端，重新在该主题下选择订阅协议并输入对应的订阅终端。
已发布的消息不能删除。
如果订阅终端节点可以送达，消息通知服务会确保消息传送到订阅终端节点。如果订阅终端节点无法送达，消息通知服务会将发送失败的消息保存到失败的消息队列尾部，等待下次被发送。如果发送失败次数超过6次，消息将直接丢弃，不再保存到失败的消息队列，且不会给用户发送“消息发送失败”的相关信息。失败的消息队列中的消息处理间隔时间是不确定的，它取决于失败的消息队列的长度。一般会在数小时之内处理完成，如果失败消息队列中的内容太多，则会在一天之内处理完成。
每条消息只会让订阅者收到1次，如遇网络问题或设备故障可能会有重发的情况。
订阅主题之后，订阅者会收到订阅确认通知。若未完成订阅确认，则向主题发布通知消息，该订阅者不会收到通知。
短信直发时，同一个手机号码限制一小时内最多发送10条短信，一天最多发20条短信。向主题发布消息时则没有限制。
每个用户可以创建100个消息模板。
部分邮箱为帮助保护您的隐私，默认禁止自动从Internet下载图片，导致邮件中图片无法显示，您需要在您的邮箱中设置允许自动下载图片即可正常显示图片。
可以。发送短信的号码或别名一般不会变，只有通道变化号码或别名才会变，通道变化是由于遇到运营商管控。
A-E
F-J
K-O
P-T
X<h5>消息</h5><p>用户需要向Topic发送的对象，包括主题和内容。</p><h5>消息模板</h5><p>发送消息的模板，使用模板发送消息，发送时会自动替换模板标签为对应的参数值。</p><h5>消息通知服务</h5><p>SMN(SimpleMessageNotification）是可靠，可扩展，海量的消息通知服务。它大大简化系统的耦合，能够根据用户的需求，向订阅者主动推送消息的服务，订阅者可以是电子邮件、短信、HTTP和HTTPS。</p>Z<h5>主题</h5><p>消息的集合，是消息数据隔离的基本单元。</p>
Z
将订阅者注册到主题的操作。
向Topic订阅消息的对象，订阅时需要输入消息送达地址，如果是邮件传输协议，订阅者为邮箱地址。短信传输协议，订阅者为电话号码。HTTP/HTTPS传输协议，订阅者为URL。
向Topic发送消息的对象。
在自定义消息模板里设置的标签。在使用消息模板发送消息时，可以使用参数值来替换模板标签。
参见
用户需要向Topic发送的对象，包括主题和内容。
发送消息的模板，使用模板发送消息，发送时会自动替换模板标签为对应的参数值。
SMN(SimpleMessageNotification）是可靠，可扩展，海量的消息通知服务。它大大简化系统的耦合，能够根据用户的需求，向订阅者主动推送消息的服务，订阅者可以是电子邮件、短信、HTTP和HTTPS。
消息的集合，是消息数据隔离的基本单元。
消息的集合，是消息数据隔离的基本单元。
Q:什么是容灾？容灾主要的目的是什么？A:容灾是一个范畴比较广泛的概念。广义上，容灾是一个系统工程，包括所有与业务连续性相关的内容。对于IT而言，容灾就是提供一个能防止用户业务系统遭受各种灾难影响破坏的计算机系统。容灾还表现为一种未雨绸缪的主动性。狭义的容灾是指建立两套或多套功能相同的IT系统，互相之间可以进行健康状态监视和功能切换，当一处系统因意外（如火灾、地震等）停止工作时，整个应用系统可以切换到另一处，使得该系统功能可以继续正常工作。容灾的主要目的是，当自然或人为的原因导致生产系统发生灾难时，能够尽可能地保证业务的连续性。Q:RTO、RPO是什么？A:RTO（RecoveryTimeObjective）指灾难发生后，信息系统或业务功能从停顿到恢复的时间要求。RPO（RecoveryPointObjective）指灾难发生后，系统和数据恢复到的时间点要求。Q:如何制定系统切换的RTO指标？A：RTO是业务系统对容灾切换时间的要求，通常由业务影响分析得出。另一方面，从容灾系统设计的角度来看，是当期容灾系统切换的时间，不能仅仅从存储层面考虑，而要从应用系统整体考虑，包括存储、数据库和应用等几方面，要以能接管业务的耗时为准。Q:容灾和备份的区别是什么？A：1、容灾主要针对火灾、地震等重大自然灾害，因此容灾中心与生产中心间必须保证一定的安全距离；备份主要针对人为误操作、病毒感染、逻辑错误等因素，用于业务系统的数据恢复，数据备份一般是在同一数据中心进行。2、容灾系统不仅保护数据，更重要的目的在于保证业务的连续性；而数据备份系统只保护不同时间点版本的数据的可恢复，数据恢复的时间一般比较长。3、容灾的最高等级可实现RPO=0；而备份则能恢复出备份时间点以前的历史数据，通常每天备份一次4、故障情况下，容灾系统的切换时间可降低至几分钟甚至零切换时间；而备份系统的恢复时间可能几小时到几十小时。Q:什么是容灾演练，它包括哪些内容？A：容灾演练是指模拟灾难发生时，根据灾难恢复预案进行的业务恢复过程。对于容灾演练而言，应该作为一个完整的项目对待，包括启动，计划，实施，控制和收尾阶段。需要正式的启动会议，得到领导层以及相关部门的配合和认可。需要详尽的计划包含如下内容：演练的场景及方案计划、详细的人员和工作安排、认真细致的风险评估以及应急方案、完善的演练准备工作以及相关测试。实施和控制：安排演练的主持人对整个过程进行引导和控制，专人记录演练的进展和发现的问题。演练完成后一定要进行演练总结和报告，对DRP（disasterrecoveryplan）/BCP（businescontinuityplan）进行必要的修订，并安排后续工作。由于容灾演练涉及容灾演练的预案制定、网络以及应用系统、存储设备等全方位的知识，是一项复杂的系统工程，建议与专业容灾服务的厂商来联合撰写方案及执行演练。Q：什么是容灾测试？A：容灾测试是为了定期检验容灾中心存储设备的数据可用性或者完整性，确保容灾中心的业务数据可用性以及满足RPO的容灾要求。容灾测试流程主要通过测试和清理两个动作来完成，测试流程的执行不影响生产系统和容灾过程。Q：基于存储的容灾方案是否只能做数据级容灾，不能做应用级容灾？A：首先需要理解数据级容灾和应用级容灾的概念：数据级容灾是指通过建立异地容灾中心，做数据的远程备份，在灾难发生之后要确保原有的数据不会丢失或者遭到破坏，但在数据级容灾这个级别，发生灾难时应用是会中断的。在数据级容灾方式下，所建立的异地容灾中心可以简单地把它理解成一个远程的数据备份中心。数据级容灾的恢复时间比较长，但是相比其他容灾级别来讲它的费用比较低，而且构建实施也相对简单。应用级容灾是在数据级容灾的基础之上，在容灾站点同样构建一套相同的应用系统，通过同步或异步复制技术，这样可以保证关键应用在允许的时间范围内恢复运行，尽可能减少灾难带来的损失，让用户基本感受不到灾难的发生，这样就使系统所提供的服务是完整的、可靠的和安全的。应用级容灾生产中心和异地容灾中心之间的数据传输是采用异类的广域网传输方式；同时应用级容灾系统需要通过更多的软件来实现，可以使多种应用在灾难发生时可以进行快速切换，确保业务的连续性。因此基于存储层和主机层的复制都可以实现应用级或数据级的容灾。华为的主备容灾方案、双活数据中心、两地三中心容灾方案配合容灾管理软件及备份的应用系统都可以做到应用级容灾。Q:容灾的标准有哪些？如何衡量容灾系统？A:GB/T19716-2005《信息技术信息安全管理实用规则》、GB/T20984《信息安全风险评估指南》、DRIInternational(国际灾难恢复协会)《ProfessionalPracticesforBusinessContinuityPlanners》和《BusinessContinuityGlossary》、ISACA(信息系统审计与控制协会）《COBITManagementGuidelines》、NIST(美国国家标准和技术学会)《SP800-34ContingencyPlanningGuideforInformationTechnologySystems》和。Q:是不是容灾等级越高的方案就是最适合客户的方案？为什么？A：容灾方案的等级越高，就可以实现更小的RPO和RTO，可以更好地保证业务连续性。但是更小的RPO和RTO同时也意味着容灾系统建设投资的成本和复杂度也会更高。因此，容灾系统的建设应该考虑业务系统的重要性，分析数据和应用系统可能面临哪些风险或灾难、以及业务系统出现意外故障时对企业带来的影响。结合上述分析结果，针对不同的业务系统选择适合的RPO和RTO，确定最佳的容灾解决方案，满足业务系统的容灾需求。Q:容灾系统只能通过光纤链路来实现吗？数据传输采用FC协议还是IP协议？A:不一定，依据容灾系统采用的容灾技术与方案。我司的复制技术对容灾链路的要求如下：Q:容灾存储是不是一定要和生产存储同一品牌、同一型号？A:基于存储层复制技术，无法解决异构问题，一般要求容灾两端阵列必须为同一厂家产品、同一系列。而华为存储阵列采用统一存储平台，可支撑高中低端阵列互通，对阵列型号无强制要求。如果生产中心有异构存储的场景下，华为推荐存储本地高可用+阵列复制的主备容灾方案，针对容灾等级要求较高的用户，也可考虑双活数据中心解决方案。
Q：华为云能提供哪些容灾解决方案？A：华为容灾解决方案包括：主备容灾，双活容灾，两地三中心容灾。这里主要介绍的是基于华为云平台的主备容灾方案。如果您有双活容灾需求，我们将根据实际情况进行评估是否适合用华为云平台实现。Q：华为云容灾方案是基于哪种容灾技术实现？A：云容灾方案即提供客户自有DC通过远程复制的技术将业务集中容灾到华为云，主要推荐采用华为自研存储的复制技术构建主备容灾系统。Q：容灾系统部署在华为云上的不同之处主要体现在哪些方面？A：客户不需要独立建设容灾中心；在华为云上建设的容灾系统可以独享安全的网络和主机资源；容灾切换后，即容灾中心接管生产业务后，可根据弹性策略快速增加云主机。Q：容灾管理服务器的部署位置在生产中心还是容灾中心？A：对部署在生产中心和容灾中心无特殊要求。一般推荐部署在容灾中心，即华为云上。如果客户将容灾管理服务器部署在生产中心，当生产中心故障时，容灾管理服务器也故障或者管理网络与容灾中心不连通，此时如果需要故障恢复，容灾管理服务器不能下发指令，客户只能通过手动操作进行故障恢复，手动操作时间长，容易出错，因此不推荐部署在生产中心。Q：容灾复制过程中链路发生故障，如何保障数据一致性？A：容灾是以恢复业务应用为目标，必须尽可能地保持业务应用数据的一致性，以便能够在灾害发生时有效的保存即时数据，从而对原有应用进行恢复。华为主备容灾方案在应对容灾复制链路故障时，针对不同的场景均可有效保障生产中心和容灾中心的数据一致性：复制链路故障，生产中心业务正常。可通过华为主备容灾方案的断点续传功能保障数据一致性。当容灾复制过程中链路发生故障，生产中心会记录数据传输断点；链路恢复时，从复制中断点继续传输数据，保证生产中心和容灾中心的数据一致性。复制链路故障，同时生产中心故障。业务需要从生产中心切换到容灾中心运行；容灾中心通过快照自动回滚到最近一次复制完成后的完整业务数据，保证容灾中心业务数据的一致性，即生产业务可在容灾中心拉起，业务系统可以在容灾中心正常运行。Q：在哪种场景下，云容灾方案可支持一键式自动切换？A：Oracle、SQLServer、DB2等大型数据库，一般建议采用物理机+华为SAN存储方式部署，这种情况下，这些大型数据库可以一键式自动拉起/切换。对于web/应用主机，一般建议采用云主机的方式部署，拉起/切换时需要登录华为云管理控制台启动相应的云主机，并确保应用可自动启动（如设置计划任务或设置自启动服务）。Q：一键式自动切换后业务切换时间到底是多长？A：业务切换时间和客户现网环境相关，主备容灾方案提供的一键式自动切换是将手动操作变为自动操作，减少人为操作时间，但是一些系统固定时间不能缩短，如主机应用启动时间、灾难切换的决策时间等。Oralce数据库切换的时间与数据库容量相关，通常时间为分钟级。Q：如何区分同步复制和异步复制的应用场景？A：同步复制与异步复制最主要的区别在于RPO，即数据丢失量。基于同步复制的主备容灾解决方案，可以保证在生产中心系统出现灾难时，容灾中心存在一份与生产中心数据完全一致的数据副本（具有完整的一致性），即可以实现零数据丢失。对于同步复制，生产中心必须等到数据成功的写到容灾中心，才能进行下一个I/O操作，同步复制对容灾链路的时延、距离有如下要求：容灾链路为FC链路，两个数据中心之间距离建议不超过100km。与同步复制相比，基于异步复制的主备容灾解决方案对带宽和距离的要求低很多，它只要求在某个时间段内能将数据全部复制到异地即可，同时异步复制的方式也不会明显影响应用系统的性能。其缺点是在本地生产数据发生灾难时，异地系统上的数据可能会短暂损失，但不影响异地系统的数据一致性。Q：客户自有的生产中心和华为云容灾中心之间带宽有限，使用容灾链路做初始同步太花时间，有没有其他更好的初始同步方案？A：若复制带宽不足，为快速完成初始数据同步，可采用以下几种方式：1、临时增加复制带宽完成初始同步。2、先将容灾中心的华为存储阵列搬到生产中心，在生产中心快速完成初始同步后，再将其搬迁到容灾中心。3、通过移动介质存储中转进行初始同步。Q：容灾采用存储复制时，需要的带宽如何计算？A：1）如果采用同步复制，则要求链路带宽大于峰值业务写带宽。举例：某应用的峰值写带宽为10MB/s，平均写带宽为200KB/s，平均写IO大小为4KB；带宽利用率建议用60%计算。网络带宽要求&gt;10*8/60%=133Mbps。2）如果采用异步复制，则要求链路带宽大于平均业务写带宽。举例：某应用的峰值写带宽为10MB/s，平均写带宽为200KB/s，平均写IO大小为4KB；带宽利用率建议用60%计算。网络带宽要求&gt;=0.2*8/60%=2.67Mbps。Q：远程复制时如果发生网络故障，网络恢复时，复制动作如何继续？A：华为存储提供“网络故障修复后，自动恢复复制”的功能。Q：容灾管理软件对服务器的规格要求？A：容灾管理软件支持云主机部署，标准配置规格为：4核8GB/100GB数据盘的云主机，操作系统选择WindowsServer2008R264位企业版。容灾管理软件所需要的建议带宽为10Mb/s。
攻击列表记录：攻击ID，攻击时间，攻击源，攻击类型，事件详情，攻击者ID，攻击目标。最多记录最近一周内的事件，不可删除。弱点列表记录：弱点ID，告警时间，弱点类型，告警详情，目标实例。最多记录最近一周内的弱点，不可删除。
APT的攻击者，通常不是一步达成攻击目的，而是步步为营、层层渗透，安全态势感知服务通过对攻击者的攻击或入侵进行分析，利用大数据挖掘及机器学习，匹配相应的攻击或入侵模型，可帮助用户判断攻击者下一步将要实施的动作。例如通过“用户安全态势”界面里的“威胁分析”，查看网络拓扑图，如所示。网络拓扑图列出用户所有ECS，根据所属子网、VPC、弹性IP进行组织，并直观呈现各设备间的关系。如果是针对性的APT攻击，用户可根据已被攻击的设备预测攻击者下一步的目标。
通过呈现弱点个数趋势变化和被攻击次数趋势变化展现两者之间的关系，帮助用户分析其攻击趋势及可能的原因。被攻击的原因有很多，弱点个数和被攻击次数有一定的关系，但也不是绝对的成正比关系，其他原因也会导致被攻击次数增多，但总体来说，弱点少时被攻击次数也会少，如所示。
可通过安全态势感知里的攻击者态势分析来分辨：在“攻击者态势”界面，单击攻击者ID。查看该攻击者的“攻击情况分析”，查看攻击本用户和云平台的攻击次数以及目标个数所占比例，如所示。攻击情况分析根据所占比例判断攻击者是针对性攻击这个用户，还是无差别攻击云平台。
在“攻击者态势”界面，单击攻击者ID。查看该攻击者的“攻击技能图谱”，查看攻击者的惯用攻击手段。通过统计攻击者曾经使用过的攻击手段（如DoS攻击、Web攻击、OS漏洞利用、应用漏洞利用、暴力破解），分析对比其在云平台中使用的次数和针对本用户的次数，帮助用户了解攻击者偏好和擅长领域，预测其下一步可能使用的手段和方法。例如所示，用户根据技能图谱则可预测：该攻击者接下来很可能使用拒绝服务攻击。攻击者技能图谱
A
G
S
安全情报是指SSA服务实时推送的安全资讯。
安全弱点指系统及软件环境所存在的安全问题或隐患，容易被攻击者利用、攻击及入侵。某些安全弱点可能对系统造成较大威胁。
安全态势感知（SecuritySituationAwareness，简称SSA）服务，能够帮助用户理解并分析其安全态势，通过收集其他各服务授权的海量数据，对用户的安全态势进行多维度集中、简约化呈现，方便用户从大量的信息中发现有用的数据。同时，结合大数据挖掘及机器学习技术，提供全覆盖的从对手分析到全局分析的能力，帮助用户准确理解过去发生的每一件安全事件，以及预测将来有可能发生的安全事件。
参见
APT（AdvancedPersistentThreat）：指高级持续性威胁的渗透攻击，是针对特定组织的多方位攻击。这种攻击行为首先具有极强的隐蔽能力，通常是利用企业或机构网络中受信的应用程序漏洞来形成攻击者所需的网络；其次APT攻击具有很强的针对性，攻击触发之前通常需要收集大量关于用户业务流程和目标系统使用情况的精确信息
参见
UQuery是一种云上完全托管的数据查询服务，用户不需要管理任何服务器，也无需关心服务集群的安装、扩容和升级等操作，在开通服务之后，无需启动，即开即用。UQuery支持标准SQL接口，兼容主流的数据格式，支持Console界面以及RESTfulAPI接口，具备计算资源隔离和数据细粒度权限控制能力，用户可以使用UQuery服务对云上多数据源进行分析探索。
用户使用UQuery有四类场景：明细数据查询典型应用：设备运维仪表盘，故障分析，能耗统计，轨迹回放，医疗健康报告，用户行为事件分析等。场景特点：海量数据，查询的有效数据不大，查询往往携带过滤条件如时间等，查询维度不固定。企业商业智能分析典型应用：流水审计，经营状况分析，行情分析，业务报表，订单跟踪等。场景特点：往往对接BI工具协同分析，分析维度不固定，常涉及多个表联合查询，响应时延低。政府公共事务统计典型应用：人口/住房统计，犯罪追踪，关联案件查询，交通拥堵分析，景点热度统计。场景特点：统计计算，对比分析，响应时间要求通常不苛刻。海量日志分析典型应用：新媒体热点事件追踪，消息来源分类筛选，广告收益统计等。场景特点：半结构化，海量数据，部分涉及模糊查询，计算量大。
UQuery的用户能熟练的操作SQL语句。
使用UQuery查询数据基本流程如下：登录UQuery创建数据库创建数据表查询数据查看结果详细操作步骤，请参见《UQuery用户指南》中“快速开始：如何查询数据”章节。
UQuery支持如下数据格式：parquetcsvorcjson
UQuery支持对接以下数据源：OBSCarbonData
CU（ComputationUnit）指计算单元，即资源的容量单位，比如一个资源包含若干CU。1CU=4Core16GB，即1CU表示4核，16GB内存的计算资源。
B<h5>表</h5><p>表是由行与列组合成的。每一列被当作是一个字段。每个字段中的值代表一种类型的数据。</p>C<h5>CU</h5><p>参见</p>D<h5>DCL</h5><p>参见</p><h5>DDL</h5><p>参见</p><h5>DML</h5><p>参见</p><h5>队列</h5><p>集群内资源的逻辑组合。</p>
C<h5>CU</h5><p>参见</p>D<h5>DCL</h5><p>参见</p><h5>DDL</h5><p>参见</p><h5>DML</h5><p>参见</p><h5>队列</h5><p>集群内资源的逻辑组合。</p>
D
F-J
K-O
P-T
U<h5>UQuery</h5><p>一种基于公有云基础架构和平台的全托管的数据分析服务。</p><h5>UQuery表</h5><p>Uquery表是数据存储在UQUERY服务上的表。</p>Y<h5>元数据</h5><p>用来定义数据的数据。主要是描述数据自身信息，包含源、大小、格式或其它数据特征。数据库字段中，元数据用于理解以及诠释数据仓库的内容。</p>Z<h5>作业</h5><p>提交SQL语句、导入数据和导出数据在系统中对应的执行实体，称之为作业。</p>
Y<h5>元数据</h5><p>用来定义数据的数据。主要是描述数据自身信息，包含源、大小、格式或其它数据特征。数据库字段中，元数据用于理解以及诠释数据仓库的内容。</p>Z<h5>作业</h5><p>提交SQL语句、导入数据和导出数据在系统中对应的执行实体，称之为作业。</p>
Z
表是由行与列组合成的。每一列被当作是一个字段。每个字段中的值代表一种类型的数据。
参见
参见
参见
参见
集群内资源的逻辑组合。
参见
参见
参见
参见
集群内资源的逻辑组合。
参见
参见
参见
集群内资源的逻辑组合。
一种数据库查询和编程语言，广泛应用于存取，查询，升级，和管理相关的数据库系统。它可以分为数据定义语言（DDL），数据操纵语言（DML）和数据控制语言（DCL）。
计算资源的计量单位，1CU=4Core16GB。
OBS表是数据存储在对象存储服务（OBS）上的表。
负责对数据库对象运行数据访问工作的指令集。
负责数据结构定义与数据库对象定义的语言。
设置或者更改数据库用户或角色权限的语句。
数据库是存储在一起的相关数据的集合，这些数据是结构化的，无有害的或不必要的冗余，并为多种应用服务；数据的存储独立于使用它的程序；对数据库插入新数据，修改和检索原有数据均能按一种公用的和可控制的方式进行。
一种基于公有云基础架构和平台的全托管的数据分析服务。
Uquery表是数据存储在UQUERY服务上的表。
用来定义数据的数据。主要是描述数据自身信息，包含源、大小、格式或其它数据特征。数据库字段中，元数据用于理解以及诠释数据仓库的内容。
提交SQL语句、导入数据和导出数据在系统中对应的执行实体，称之为作业。
用来定义数据的数据。主要是描述数据自身信息，包含源、大小、格式或其它数据特征。数据库字段中，元数据用于理解以及诠释数据仓库的内容。
提交SQL语句、导入数据和导出数据在系统中对应的执行实体，称之为作业。
提交SQL语句、导入数据和导出数据在系统中对应的执行实体，称之为作业。
第三方应用对公有云API的访问需经过签名认证。本章主要介绍了使用签名的过程和注意事项，并通过示例代码展示了如何使用默认的Signer对请求进行签名和利用HTTPClient发送请求。
使用华为云只需五步初级篇将介绍使用华为云企业服务的五个步骤，包括获取账户、挑选服务、购买服务、支付费用和使用业务。
使用华为云搭建网站业务进阶篇将介绍如何使用华为云搭建网站业务，帮助您使用华为云服务在实际场景应用中的部署应用。
通信平台云入门操作指引以在线培训应用场景为例我要购买ECS使用指南我要备案备案成功，请妥善保管备案号和备案密码...
